<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=koi8-r" />
    <title>
      6.3.&nbsp;Вход в среду chroot
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.65.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body id="lfs" class="6.0">
    <div class="navheader">
      <div class="headertitles">
        <h4>
          Linux From Scratch - Версия 6.0
        </h4>
        <h3>
          Глава&nbsp;6.&nbsp;Установка основных системных программ
        </h3>
      </div>
      <ul class="headerlinks">
        <li class="prev">
          <a accesskey="p" href="kernfs.html" title=
          "Mounting Virtual Kernel File Systems">Назад</a>
          <p>
            Монтирование виртуальных файловых систем ядра
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="changingowner.html" title=
          "Changing Ownership">Далее</a>
          <p>
            Изменение владельца
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter06.html" title=
          "Глава&nbsp;6.&nbsp;Установка основных системных программ">Наверх</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Версия 6.0">В начало</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <div class="titlepage">
        <h1 class="sect1">
          6.3. Вход в среду chroot
        </h1>
      </div>
      <p>
        Теперь пришло время войти в среду chroot для установки необходимых
	пакетов. Перед тем, как войти в среду chroot, вам необходимо войти в систему
	как <span class="emphasis"><em>root</em></span>. Для входа в среду
	chroot выполнить следующую команду:
      </p>
      <pre class="userinput">
<kbd class="command">chroot "$LFS" /tools/bin/env -i \
    HOME=/root TERM="$TERM" PS1='\u:\w\$ ' \
    PATH=/bin:/usr/bin:/sbin:/usr/sbin:/tools/bin \
    /tools/bin/bash --login +h</kbd>
</pre>
      <p>
        Параметр <i class="parameter"><tt>-i</tt></i>, передаваемый команде
        <span><b class="command">env</b></span>, очистит все переменные окружения
	среды chroot. После этого мы устанавливаем только переменные <tt class=
        "envar">HOME</tt>, <tt class="envar">TERM</tt>, <tt class=
        "envar">PS1</tt> и <tt class="envar">PATH</tt>.
        Конструкция <i class="parameter"><tt>TERM=$TERM</tt></i>
        установит переменную <tt class="envar">TERM</tt> внутри среды chroot
        в то же значение, что и вне среды chroot. Эта переменная нужна таким
        программам как <span><b class="command">vim</b></span> и
        <span><b class="command">less</b></span> для правильной работы. Если вам
        нужны другие переменные, такие как <tt class="envar">CFLAGS</tt> или
        <tt class="envar">CXXFLAGS</tt>, то это хорошее место задать их.
      </p>
      <p>
        С этого места нам уже не надо использовать переменную <tt class=
        "envar">LFS</tt>, потому что директория, указанная в ней стала
	корневой при входе в среду chroot.
      </p>
      <p>
        Мы указали <tt class="filename">/tools/bin</tt> последней в списке
	путей <tt class="envar">PATH</tt>. Благодаря этому пакеты из этой
	директории не будут использованы, если мы уже установили окончательную версию
	соответствующего пакета. Это действует в том случае, когда shell
        &ldquo;<span class=
        "quote">не запоминает</span>&rdquo; расположение исполняемых файлов,
	именно поэтому мы отключили эту функцию в предыдущей главе при помощи
	опции <i class="parameter"><tt>+h</tt></i>, переданной <span><b class=
        "command">bash</b></span>.
      </p>
      <p>
        Запомните, что все команды до конца этой главы и во всех последующих
	выполняются из среды chroot. Если вы покинули эту среду по любой
	причине (например, после перезагрузки), то вы должны снова зайти в
	среду chrrot и примонтировать файловые системы <tt class=
        "systemitem">proc</tt> и <tt class="systemitem">devpts</tt>
        (описываются позже) перед продолжением установки.
      </p>
      <p>
        Заметьте, что bash выводит &ldquo;<span class="quote">I have
        no name!</span>&rdquo;. Это нормально, поскольку файл <tt class=
        "filename">/etc/passwd</tt> еще не создан.
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="kernfs.html" title=
          "Mounting Virtual Kernel File Systems">Назад</a>
          <p>
            Монтирование виртуальных файловых систем ядра
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="changingowner.html" title=
          "Changing Ownership">Далее</a>
          <p>
            Изменение владельца
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter06.html" title=
          "Глава&nbsp;6.&nbsp;Установка основных системных программ">Наверх</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Версия 6.0">В начало</a>.
        </li>
      </ul>
    </div>
  </body>
</html>

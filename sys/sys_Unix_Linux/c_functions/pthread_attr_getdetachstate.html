<html>
<head>

<meta http-equiv="content-type" content="text/html; charset=windows-1251">

<title>pthread_attr_getdetachstate – функция языка Си. "Все о Hi-Tech"</title>

<meta name="Description" content="Функция pthread_attr_getdetachstate считывает атрибут потока управления - статус освобождения ресурсов.">

<meta name="keywords" content="Программирование, C, C++, Си, Си++, функции, поток управления, атрибуты потока, ресурсы, описатель потока, pthread_attr_getdetachstate"> 

<link rel="icon" href="http://www.all-ht.ru/favicon.bmp" type="image/x-icon">

<style type="text/css" media="screen"> @import url("../../../../sys/menuh.css"); </style>
<!--[if lt IE 7]>
<style type="text/css" media="screen">
#menuh{float:none;}
body{behavior:url(csshover.htc); font-size:100%;}
#menuh ul li{float:left; width: 100%;}
#menuh a{height:1%;font:bold 0.7em/1.4em arial, sans-serif;}
</style>
<![endif]-->
</head>

<table align = "center" Width="97%" cellspacing="0"cellpadding="0" border="2">
<tr>
<td>
<!-- ===================================== Шапка сайта ================================== -->
<table cellspacing="0" cellpadding="0" height = "110" Width="100%">
<td background = "../../../../sys/t2.gif" Width="180">
	<p align = "center">
	<a href="http://www.all-ht.ru/about.html"><img align = "center" src="../../../../sys/hit.gif" style= "padding: 0 10 0 10;"></a>
	</p>
</td>
<td background = "../../../../sys/t2.gif"> 
	<!--Реклама Button--> 
	<div align="center" style= "padding: 5 20 5 0;" >
	<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- Button -->
	<ins class="adsbygoogle"
		style="display:inline-block;width:728px;height:90px"
		data-ad-client="ca-pub-7858999051663124"
		data-ad-slot="6297702095"></ins>
	<script>
	(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
	</div>
</td>
</table>

<!-- ============================== Основное меню ================================ -->
<table align = "center" Width="100%" height="38pt" cellspacing="0"cellpadding="0" border="0" >
<tr>
<td background = "../../../../sys/t2.gif" Width="8pt" style='min-width:8pt;'>  </td>
<td background = "../../../../sys/4.gif"  valign=top > 

<table cellspacing="0" cellpadding="0" Width="100%" style='min-width:735pt;'>
<td>
<div id="menuh-container">
<div id="menuh">
	<ul>	
		<li><a href="http://www.all-ht.ru/index.html" class="top_parent">Главная</a></li>
	</ul>
	<ul>
		<li><a  href="pthread_attr_getdetachstate.html#" class="top_parent">История&nbsp;&nbsp;<small>&#9660;</small></a>
		<ul>
			<li><a href="pthread_attr_getdetachstate.html#" class="parent">Домеханический этап&nbsp;&nbsp;&nbsp;&nbsp;<small>&#9658;</small></a>
				<ul>
				<li><a href="http://www.all-ht.ru/inf/history/p_0_0.html">Зарождение счета</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_0_1.html">Бирки</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_0_2.html">Китайские счетные палочки</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_0_3.html">Узелковая письменность</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_0_4.html">Абак</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_0_5.html">Китайская счетная доска</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_0_6.html">Суаньпань</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_0_7.html">Соробан</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_0_8.html">Счет на линиях</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_0_9.html">Счет костьми</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_0_10.html">Дощаный счет</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_0_11.html">Счеты</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_0_12.html">Палочки Непера</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_0_14.html">Логарифмы</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_0_15.html">Логарифмическая линейка</a></li>
				</ul>
			</li>
			<li><a href="pthread_attr_getdetachstate.html#" class="parent">Механический этап&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small>&#9658;</small></a>
				<ul>
				<li><a href="http://www.all-ht.ru/inf/history/p_1_0.html">Счетная машина Леонардо</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_1_1.html">Вычисляющие часы</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_1_3.html">Паскалин</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_1_6.html">Счетная машина Морленда</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_1_7.html">Калькулятор Лейбница</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_1_9.html">Рабдологический абак</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_1_10.html">Арифмометр Полени</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_1_12.html">Машина Перейры</a></li>
				<li><a href="http://www.all-ht.ru/inf/history/p_1_13.html">Счетная машина Якобсона</a></li>
				</ul>
			</li>
			<li><a href="http://www.all-ht.ru/inf/history/p_3_0.html">Первое поколение ЭВМ</a></li>	
			<li><a href="http://www.all-ht.ru/inf/history/p_4_0.html">Второе поколение ЭВМ</a></li>		
			<li><a href="http://www.all-ht.ru/inf/history/p_5_0.html">Третье поколение ЭВМ</a></li>	
			<li><a href="http://www.all-ht.ru/inf/history/pc.html">Персональные ЭВМ</a></li>
		</ul>
		</li>
	</ul>
	<ul>	
		<li><a href="pthread_attr_getdetachstate.html#" class="top_parent">Устройство ПК&nbsp;<small>&#9660;</small></a>
		<ul>
			<li><a href="http://www.all-ht.ru/inf/pc/mp_struct.html" class="parent">Материнская плата</a></li>
			<li><a href="pthread_attr_getdetachstate.html#" class="parent">Процессор&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small>&#9658;</small></a>
			<ul>
				<li><a href="http://www.all-ht.ru/inf/pc/cp_struct.html">Устройство процессора</a></li>
				<li><a href="http://www.all-ht.ru/inf/pc/proc_intel_hrono_d_1971-1979.html">Хронология ЦП Intel</a></li>
			</ul>
			</li>
			<li><a href="pthread_attr_getdetachstate.html#" class="parent">Оперативная память&nbsp;<small>&#9658;</small></a>
			<ul>
				<li><a href="http://www.all-ht.ru/inf/pc/mem_ozu.html">Типы ОЗУ</a></li>
				<li><a href="http://www.all-ht.ru/inf/pc/mem_dram.html">Динамическая оперативная память</a></li>
				<li><a href="http://www.all-ht.ru/inf/pc/mem_sram.html">Статическая оперативная память</a></li>
				<li><a href="http://www.all-ht.ru/inf/pc/mem_mram.html">Магниторезистивная оперативная память</a></li>
			</ul>
			</li>
			<li><a href="http://www.all-ht.ru/inf/pc/mem_pzu.html" class="parent">Постоянная память</a></li>
			<li><a href="http://www.all-ht.ru/inf/pc/monit_crt_hist.html" class="parent">Периферия</a></li>
		</ul>
		</li>
	</ul>
	<ul>	
		<li><a href="pthread_attr_getdetachstate.html#" class="top_parent">ВС и Сети&nbsp;&nbsp;<small>&#9660;</small></a>
		<ul>
		<li><a href="pthread_attr_getdetachstate.html#" class="parent">Надежность ВС&nbsp;&nbsp;&nbsp;<small>&#9658;</small></a>
		<ul>
			<li><a href="http://www.all-ht.ru/inf/systems/p_0_1.html">Надежность</a></li>
			<li><a href="http://www.all-ht.ru/inf/systems/p_0_4.html">Повышение надежности</a></li>
			<li><a href="http://www.all-ht.ru/inf/systems/p_0_5.html">Резервирование оборудования</a></li>
			<li><a href="http://www.all-ht.ru/inf/systems/p_0_7.html">Контроль исправности</a></li>
			<li><a href="http://www.all-ht.ru/inf/systems/p_0_8.html">Высоконадежные ВС</a></li>
			<li><a href="http://www.all-ht.ru/inf/systems/p_0_10.html">Программное резервирование</a></li>
			<li><a href="http://www.all-ht.ru/inf/systems/p_0_11.html">Избыточное кодирование</a></li>
			<li><a href="http://www.all-ht.ru/inf/systems/p_0_13.html">Контрольная сумма CRC</a></li>
			<li><a href="http://www.all-ht.ru/inf/systems/p_0_14.html">Коды Хемминга</a></li>
		</ul>
		</li>
		<li><a href="http://www.all-ht.ru/inf/systems/p_1_1.html" class="parent">Бортовые ВС</a></li>
		<li><a href="http://www.all-ht.ru/inf/systems/net_wireless_overview.html" class="parent">Сети</a></li>
		</ul>
		</li>
	</ul>
	<ul>	
		<li><a href="pthread_attr_getdetachstate.html#" class="top_parent">Разработка ПО&nbsp;<small>&#9660;</small></a>
		<ul>
		<li><a href="pthread_attr_getdetachstate.html#" class="parent">Системы контроля версий&nbsp;<small>&#9658;</small></a>
		<ul>
			<li><a href="http://www.all-ht.ru/inf/prog/p_0_0.html">Введение в СКВ</a></li>
			<li><a href="http://www.all-ht.ru/inf/prog/p_0_1.html">Обзор СКВ</a></li>
			<li><a href="http://www.all-ht.ru/inf/prog/git_001.html">Начинаем работать с СКВ GIT</a></li>
		</ul>
		</li>
		<li><a href="pthread_attr_getdetachstate.html#" class="parent">Виртуальные ЭВМ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small>&#9658;</small></a>
		<ul>
			<li><a href="http://www.all-ht.ru/inf/vpc/p_0_0.html">Виртуальные машины</a></li>
			<li><a href="http://www.all-ht.ru/inf/vpc/p_0_1.html">Технология виртуализации</a></li>
			<li><a href="http://www.all-ht.ru/inf/vpc/p_0_2.html">Начинаем работать с VMware</a></li>
<li><a href="http://www.all-ht.ru/inf/vpc/VirtualBox.html">Начинаем работать с VirtualBox</a></li>		
		</ul>
		</li>
		<li><a href="abort.html" class="parent">Язык Си</a></li>
		</ul>
		</li>
	</ul>
	<ul>	
		<li><a href="pthread_attr_getdetachstate.html#" class="top_parent">Полезное&nbsp;<small>&#9660;</small></a>
		<ul>
		<li><a href="http://www.all-ht.ru/useful/prog/free_prog.html" class="parent">Бесплатное ПО первой необходимости</a></li>
		<li><a href="http://www.all-ht.ru/useful/wallpapers/abstraction/p_001.html" class="parent">Заставки на рабочий стол&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<small>&#9658;</small></a>
		<ul>
		<li><a href="http://www.all-ht.ru/useful/wallpapers/abstraction/p_001.html">Абстракция</a></li>
		<li><a href="http://www.all-ht.ru/useful/wallpapers/architecture/p_001.html">Архитектура</a></li>
		<li><a href="http://www.all-ht.ru/useful/wallpapers/nature/p_001.html">Природа</a></li>
		<ul>
		</li>
		</ul>
		</li>
	</ul>
</div> 	<!-- end the menuh-container div -->  
</div>	<!-- end the menuh div --> 

</td>

<td Width="248" align="right">
<div id="menuh-container">
<div id="menuh">
	<ul>	
		<li><a href="http://www.all-ht.ru/search.html" class="top_parent">Поиск</a></li>
	</ul>
	<ul>	
		<li><a href="http://www.all-ht.ru/content.html" class="top_parent">Содержание</a></li>
	</ul>
</div> 	<!-- end the menuh-container div -->  
</div>	<!-- end the menuh div --> 

</td>
</table>

</td>
<td background = "../../../../sys/t2.gif" valign=top Width="10pt" style='min-width:8pt;'>  </td>
</tr>
</table>

<!-- ============================== Хлебные крошки =============================== -->
<table align = "center" Width="100%" Height=18pt cellspacing="0"cellpadding="0" border="0" >
<tr>
<td background = "../../../../sys/t2.gif" Width="8pt" style='min-width:8pt;'>  </td>
<td background = "../../../../sys/t2.gif"  valign=top > 
<small>
<i>
&nbsp;&nbsp;
<a href="http://www.all-ht.ru/index.html" style="text-decoration: none; color: black;">Главная</a>
&nbsp;<small>&#9658;</small>&nbsp;
<a href="http://www.all-ht.ru/inf/prog/index.html" style="text-decoration: none; color: black;">Разработка&nbsp;ПО</a>
&nbsp;<small>&#9658;</small>&nbsp;
<a href="pthread_attr_getdetachstate.html#" style="text-decoration: none; color: black;">функции&nbsp;языка&nbsp;Си</a>
</i></small>
</td>
<td background = "../../../../sys/t2.gif" valign=top Width="10pt" style='min-width:8pt;'></td>
</tr>
</table>

<!-- ========================== основной текст статьи =========================== -->
<table align = "center" Width="100%" cellspacing="0"cellpadding="0" border="0" >
<tr>
<td background = "../../../../sys/t2.gif" Width="8pt" style='min-width:8pt;'>  </td>
<td background = "../../../../sys/4.gif"  valign=top > 


<H1 align=center>Описание функций языка Си</H1>


<table width = 190 border=0 align=left style="text-align: center; border-spacing:7px 0px;">
<tr height = 10><td> </td></tr>
<tr><td valign=top align=right >
<H2 align=center>" P "</H2>
<p><a   href="perror.html">perror</a>&nbsp;<small><small>&#9668;</small></small></p>
<p><a   href="pow,powf,powl.html">pow,powf,powl</a>&nbsp;<small><small>&#9668;</small></small></p>
<p><a   href="pow10,pow10f,pow10l.html">pow10,pow10f,pow10l</a>&nbsp;<small><small>&#9668;</small></small></p>	
<p><a   href="pthread_attr_getdetachstate.html"><b>pthread_attr_getdetachstate</b></a>&nbsp;<small><small>&#9668;</small></small></p>
<p><a   href="pthread_attr_getinheritsched.html">pthread_attr_getinheritsched</a>&nbsp;<small><small>&#9668;</small></small></p>
<p><a   href="pthread_attr_getschedparam.html">pthread_attr_getschedparam</a>&nbsp;<small><small>&#9668;</small></small></p>
<p><a   href="pthread_attr_getschedpolicy.html">pthread_attr_getschedpolicy</a>&nbsp;<small><small>&#9668;</small></small></p>
<p><a   href="pthread_attr_init.html">pthread_attr_init</a>&nbsp;<small><small>&#9668;</small></small></p>
<p><a   href="putc.html">putc</a>&nbsp;<small><small>&#9668;</small></small></p>
<p><a   href="putchar.html">putchar</a>&nbsp;<small><small>&#9668;</small></small></p>	
<p><a   href="puts.html">puts</a>&nbsp;<small><small>&#9668;</small></small></p>
<p><a   href="putw.html">putw</a>&nbsp;<small><small>&#9668;</small></small></p>
</td></tr>
<tr height = 30><td> </td></tr>

<tr height = 620 background = "/sys/t2.gif" align=left><td>
&nbsp;&nbsp;&nbsp;
<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Top_Left -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-7858999051663124"
     data-ad-slot="2342167296"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

</td></tr>


</table>

<!-- ================================================ -->
<!--                    Текст статьи                  -->
<!-- ================================================ -->
<p align = "center" style='margin-right:10pt;margin-left:10pt;'>
  <a   href="index.html">All</a> |
  <a   href="_exit.html">_</a> |
  <a   href="abort.html">A</a> | 
  <font color=Gray>B</font> |
  <a   href="cacos,cacosf,cacosl.html">C</a>  |
  <a   href="difftime.html">D</a> |  
  <a   href="erf,erff,erfl.html">E</a> | 
  <a   href="fabs,fabsf,fabsl.html">F</a> |
  <a   href="getc.html">G</a> |
  <a   href="hypot,hypotf,hypotl.html">H</a> |
  <a   href="ilogb,ilogbf,ilogbl.html">I</a> |
  <font color=Gray>J</font> |
  <font color=Gray>K</font> |
  <a   href="ldexp,ldexpf,ldexpl.html">L</a> | 
  <a   href="memccpy.html">M</a> | 
  <a   href="nanosleep.html">N</a> | 
  <font color=Gray>O</font> |
  <a   href="perror.html"><big><big><b>P</b></big></big></a> |
  <font color=Gray>Q</font> |
  <a   href="remainder,remainderf,remainderl.html">R</a> | 
  <a   href="scalb,scalbf,scalbl.html">S</a> | 
  <a   href="tan,tanf,tanl.html">T</a> | 
  <a   href="usleep.html">U</a> | 
  <font color=Gray>V</font> |
  <font color=Gray>W</font> |
  <font color=Gray>X</font> |
  <font color=Gray>Y</font> |
  <font color=Gray>Z</font>
</p>

<table  cellspacing="5"cellpadding="0" border="0">
  <tr>
    <td>
	
<H3 align = "center">pthread_attr_getdetachstate – опрос атрибута потока управления «статус освобождения ресурсов».</H3>
	

<!-- ========================================= СИНТАКСИС ======================================= -->	
<p align = "justify" style='margin-left:10pt;margin-bottom:0pt;'><b>Синтаксис:</b></p>
<p align = "justify" style='margin-left:30pt;margin-top:0pt;'>
#include < pthread.h  > <br>
int pthread_attr_getdetachstate ( const pthread_attr_t *attr,  int *detach);
</p>	

<!-- ========================================= АРГУМЕНТЫ ======================================= -->		
<p align = "justify" style='margin-left:10pt;margin-bottom:0pt;'><b>Аргументы:</b></p>
<p align = "justify" style='margin-left:30pt;margin-top:0pt;'>
attr – указатель на описатель атрибутов потока;
detach – указатель на переменную, в которую будет записано значение считанного атрибута;
</p>	

<!-- ========================================= ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ =========================== -->	
<p align = "justify" style='margin-left:10pt;margin-bottom:0pt;'><b>Возвращаемое значение:</b></p>
<p align = "justify" style='margin-left:30pt;margin-top:0pt;'>
0 – при успешном завершении работы функции, иначе - код ошибки EINVAL – указатель attr не корректен (атрибуты потока не проинициализированы)
</p>

<!-- ========================================= ОПИСАНИЕ ======================================== -->	
<p align = "justify" style='margin-left:10pt;margin-bottom:0pt;'><b>Описание:</b></p>
<p align = "justify" style='margin-left:30pt;margin-top:0pt;'>
Функция pthread_attr_getdetachstate () копирует в переменную, на которую указывает аргумент detach, атрибут потока «статус освобождения ресурсов (описателя потока)». До копирования атрибуты потока должны быть проинициализированы с помощью функции pthread_attr_init.
<br><br>
Считанный атрибут может принимать два значения:
<br><br>
PTHREAD_CREATE_DETACHED – описатель потока управления будет автоматически освобожден (может использоваться для создания другого потока) сразу же по завершению потока.
<br><br>
PTHREAD_CREATE_JOINABLE – после завершения потока управления, описатель не будет освобожден то тех пор, пока какой-либо другой поток управления не получит код окончания данного потока с помощью функции pthread_join().
</p>	

<!-- ========================================= ПРИМЕР ========================================== -->	
<p align = "justify" style='margin-left:10pt;margin-bottom:0pt;'><b>Пример 1:</b></p>
<p align = "justify" style='margin-left:30pt;margin-top:0pt;'>
В примере инициализируется описатель атрибутов потока, считываются и выводятся в консоль установленные по умолчанию атрибуты, затем атрибуты потока изменяются на следующие:
<br><br>
- освобождать ресурсы (описатель) потока автоматически,<br>
- стратегия планирования FIFO,<br>
- приоритет 50,<br>
- стратегия планирования определяется атрибутами потока,<br>
- размер стека 16 мб,<br>
- буфер защиты стека от переполнения - 8 кб,<br>
- область конкурирования – все потоки процесса.
<br><br>
Далее создается поток управления, в рамках которого работает функция pthread_func, которая в течении 5-ти секунд, с темпом раз в секунду, вводит сообщения о работе потока (счетчик циклов). Затем поток завершается и завершается работа программы.
<br><br>
При компиляции программы, работающей с потоками управления, необходимо использовать ключ –lpthread. Так, например, для компиляции файла test.c с исходным текстом приведенным в примере 1, и создания объектного файла ts.o необходимо в консоле, в папке с файлом test.c, набрать команду: gcc test.c -o ts -lpthread
<br><br>

<table bgcolor = "#EFEFEF" style="border: 1px dashed" > <tr><td>
<pre>

#include < stdio.h >   <font color=Gray><i>// Для printf</i></font>
#include < pthread.h > <font color=Gray><i>// Для функций работы с потоками</i></font>

<font color=Gray><i>// Функция, запускаемая в рамках потока управления</i></font>
void pthread_func (void);

int main (void)
{
   <font color=Gray><i>// Создаем структура для хранения атрибутов потока управления</i></font>
   pthread_attr_t attr;
   <font color=Gray><i>// Переменная в которую будет записан описатель атрибутов потока</i></font>
   pthread_t new_pthread;

   <font color=Gray><i>// Устанавливаем стандартные атрибуты потока, если стандартные </i></font>
   <font color=Gray><i>// атрибуты не установлены, то выводим сообщение об ошибке и</i></font>
   <font color=Gray><i>// завершаем работу</i></font>
   printf ("\nУстановка стандартных атрибутов потока управления: ");
   if (0== pthread_attr_init (&attr))
      printf ("OK\n");
   else
      { printf ("Error"); return -1; }


   <font color=Gray><i>// Определение атрибутов потока управления по умолчанию</i></font>
   printf ("Определение атрибутов потока управления:\n");

   <font color=Gray><i>// Считываем и выводи на экран значения стандартных атрибутов потока:</i></font>
   {  <font color=Gray><i>// Значение статуса освобождения ресурсов потока</i></font>
      int state_detach = -1; 
      <font color=Gray><i>// Значение параметра планирования</i></font>
      struct sched_param state_sched; 
      <font color=Gray><i>// Значение стратегии планирования</i></font>
      int state_policy = -1; 
      <font color=Gray><i>// Значения признаков наследования планирования</i></font>
      int state_inheritsched = -1; 
      <font color=Gray><i>// Переменная для сохранения размера стека</i></font>
      int state_steck_s = 0;
      <font color=Gray><i>// Переменная для сохранения данных об области конкуренции</i></font>
      int state_scope = -1; 
      <font color=Gray><i>// Переменная в которую будет записан размер буфера защиты</i></font>
      <font color=Gray><i>// стека от переполнения</i></font>
      int state_guard = -1; 
                              
      <font color=Gray><i>//1. Статус освобождения ресурсов (описателя) потока управления </i></font>
      <font color=Gray><i>// после его завершения</i></font>
      printf ("  Определение статуса освобождения ресурсов: ");
      <font color=Gray><i>//Считываем статус и проверяем наличие ошибки при считывании</i></font>
      if (0==pthread_attr_getdetachstate (&attr,&state_detach))
      {  <font color=Gray><i>//Анализируем считаный статуса и выводим результат в консоль</i></font>
         switch (state_detach)
         {  case PTHREAD_CREATE_DETACHED: printf ("DETACHED\n"); break;
            case PTHREAD_CREATE_JOINABLE: printf ("JOINABLE\n"); break;
            default: printf ("неизвестный статус (%d)\n",state_detach); 
                     break;
         }
      }
      else printf ("ошибка\n");

      <font color=Gray><i>// 2. Приоритет потока управления</i></font>
      printf ("  Определение приоритета потока управления: ");
      <font color=Gray><i>//Считываем приоритет потока управления</i></font>
      if (0==pthread_attr_getschedparam (&attr,&state_sched))
      {  <font color=Gray><i>// Выводим на консоль приоритет потока по умолчанию</i></font>
         printf (" %d\n",state_sched.sched_priority);
      }
      else printf ("ошибка\n");

      <font color=Gray><i>// 3. Стратегия планирования потока управления</i></font>
      printf ("  Определение стратегии планирования:        ");
      <font color=Gray><i>// Считываем стратегию и проверяем наличие ошибки при считывании</i></font>
      if (0==pthread_attr_getschedpolicy (&attr,&state_policy))
      {  <font color=Gray><i>// Анализируем считаный статуса и выводим результат в консоль</i></font>
         switch (state_policy)
         {  case SCHED_FIFO: printf ("FIFO\n"); break;
            case SCHED_RR: printf ("RR\n"); break;
            case SCHED_OTHER: printf ("OTHER\n"); break;
            default: printf ("неизвестная стратегия (%d)\n"
                              ,state_policy); 
                     break;
         }
      }
      else printf ("ошибка\n");

      <font color=Gray><i>// 4. Атребуты наследования планирования потока управления</i></font>
      printf ("  Определение атрибутов наследования:        ");
      <font color=Gray><i>// Считываем атрибуты наследования и проверяем наличие ошибки </i></font>
      <font color=Gray><i>// при считывании</i></font>
      if (0==pthread_attr_getinheritsched (&attr,&state_inheritsched))
      {  <font color=Gray><i>//Анализируем считаный атрибут и выводим результат в консоль</i></font>
         switch (state_inheritsched)
         {   case PTHREAD_INHERIT_SCHED: printf ("INHERIT\n"); break;
             case PTHREAD_EXPLICIT_SCHED: printf ("EXPLICIT\n"); break;
             default: printf ("неизвестный атрибут (%d)\n" 
                               ,state_inheritsched); 
                      break;
         }
      }
      else printf ("ошибка\n");

      <font color=Gray><i>// 5. Размер стека для потока</i></font>
      printf ("  Определение размера стека:                 ");
      <font color=Gray><i>// Считываем размер стека</i></font>
      if (0==pthread_attr_getstacksize (&attr,&state_steck_s))
      {  <font color=Gray><i>// Выводим результат в консоль</i></font>
         printf ("%d Кбайт\n",state_steck_s/1024);      
      }
      else printf ("ошибка\n");

      <font color=Gray><i>// 6. Область конкуренции потока</i></font>
      printf ("  Определение области конкуренции:           ");
      <font color=Gray><i>// Считываем значение атрибута</i></font>
      if (0==pthread_attr_getscope (&attr,&state_scope))
      {  <font color=Gray><i>// Анализируем считаный атрибут и выводим результат в консоль</i></font>
         switch (state_scope)
         {  case PTHREAD_SCOPE_SYSTEM: printf ("SYSTEM\n"); break;
            case PTHREAD_SCOPE_PROCESS: printf ("PROCESS\n"); break;
            default: printf ("неизвестный атрибут (%d)\n",state_scope); 
                     break;
         }
      }
      else printf ("ошибка\n");
      
      <font color=Gray><i>// 7. Защита стека от переполнения</i></font>
      printf ("  Защита стека от переполнения:              ");
      <font color=Gray><i>// Считываем значение атрибута</i></font>
      if (0==pthread_attr_getguardsize (&attr,&state_guard))
      {  <font color=Gray><i>// Анализируем считаный атрибут и выводим результат в консоль</i></font>
         if (state_guard>0)
            printf ("буфер защиты %d байт\n",state_guard);
         else
            printf ("нет защиты\n");
      }
      else printf ("ошибка\n");
   }
  
   <font color=Gray><i>//Установка атрибутов потока управления для создания потока.</i></font>
   <font color=Gray><i>//Создаваемый поток будет:</i></font>
   <font color=Gray><i>// - автоматически освобождать ресурсы (описатель) потока.</i></font>
   <font color=Gray><i>// - иметь стратегию планирования FIFO</i></font>
   <font color=Gray><i>// - приоритет 50</i></font>
   <font color=Gray><i>// - стратегия планирования будет определятся атрибутами потока</i></font>
   <font color=Gray><i>// - размер стека 16 мб</i></font>
   <font color=Gray><i>// - буфер защиты стека от переполнения - 8 кб</i></font>
   <font color=Gray><i>// - область конкурирования – все потоки процесса</i></font>
   printf ("Установка атрибутов потока управления:\n");
   {  struct sched_param new_sched;  <font color=Gray><i>// Значение параметра планирования</i></font>
      new_sched.sched_priority = 50;
    
      <font color=Gray><i>// Устанавливаем статус освобождения ресурсов потока: </i></font>
      <font color=Gray><i>// автоматически при завершении работы потока</i></font>
      printf ("  Установка статуса освобождения ресурсов: ");
      if (0==pthread_attr_setdetachstate (&attr,PTHREAD_CREATE_DETACHED))
         printf ("OK\n");  
      else printf ("ошибка\n");

      <font color=Gray><i>// Установка стратегии планирования: FIFO</i></font>
      printf ("  Установка стратегии планирования:        ");
      if (0==pthread_attr_setschedpolicy (&attr,SCHED_FIFO))
         printf ("OK\n");
      else printf ("ошибка\n");

      <font color=Gray><i>// Установка приоритет потока: 50.</i></font>
      printf ("  Установка приоритета:                    ");
      if (0==pthread_attr_setschedparam (&attr,&new_sched))
         printf ("OK\n");
      else printf ("ошибка\n");

      <font color=Gray><i>// Установка атрибута наследования: параметры планирования брать </i></font>
      <font color=Gray><i>// из структуры атрибутов потока (attr)</i></font>
      printf ("  Установка атрибута наследования:         ");
      if (0==pthread_attr_setinheritsched (&attr,PTHREAD_EXPLICIT_SCHED))
         printf ("OK\n");
      else printf ("ошибка\n");

      <font color=Gray><i>// Установка размера стека: 16 Мб.</i></font>
      printf ("  Установка размера стека:                 ");
      if (0==pthread_attr_setstacksize (&attr, 16777216))
         printf ("OK\n");
      else printf ("ошибка\n");

      <font color=Gray><i>// Установка защиты стека от переполнения: буфер защиты 8 кб</i></font>
      printf ("  Установка защиты стека от переполнения:  ");
      if (0==pthread_attr_setguardsize (&attr, 8192))
         printf ("OK\n");
      else printf ("ошибка\n");

      <font color=Gray><i>// Установка области конкуренции: со всеми потоками процесса.</i></font>
      printf ("  Установка области конкуренции:           ");
      if (0==pthread_attr_setscope (&attr, PTHREAD_SCOPE_SYSTEM))
         printf ("OK\n");
      else printf ("ошибка\n");
   }

   <font color=Gray><i>// Запуск потока управления с устаноавленными выше атрибутами. </i></font>
   <font color=Gray><i>// В рамках потока будет выполняться функция void pthread_func (void).</i></font>
   printf ("Запуск потока управления: ");
   if ( 0 == pthread_create (&new_pthread, &attr,(void*(*)(void*)) 
             pthread_func,NULL))
    	{  }
   else printf ("ошибка\n");
 
   <font color=Gray><i>//Задержка на 10 секунд</i></font>
   sleep (10);

   printf ("Работа программы завершена\n");
    
   return 0;
}



<font color=Gray><i>//Функция, выполняемая в рамках созданного потока</i></font>
void pthread_func (void)
{
   int i=0;
   <font color=Gray><i>// Уведомление о запуске потока</i></font>
   printf ("поток запущен\n");

   <font color=Gray><i>// Индикация работы потока: вывод раз в секунду счетчика</i></font>
   <font color=Gray><i>// циклов в течении 5 секунд</i></font>
   printf ("Поток работает:\n");
   for (i=0;i<5; i++)
   {
      printf ("   %d\n",i);
      sleep (1);
   }
   printf ("Поток завершен\n");

   <font color=Gray><i>//Завершение работы потока</i></font>
   return;
}

</pre>


<td> <tr> </table>

</p>

<!-- ========================================= РЕЗУЛЬТАТЫ ====================================== -->	
<p align = "justify" style='margin-left:10pt;margin-bottom:0pt;'><b>Результат (вывод в консоль):</b></p>
<p align = "justify" style='margin-left:30pt;margin-top:0pt;'>
<br>

<table align = "left" bgcolor = "#EFEFEF" style="border: 1px dashed" >
  <tr>
    <td valign=top >
<pre>
Установка стандартных атрибутов потока управления: ОК
Определение атрибутов потока управления:
   Определение статуса освобождения ресурсов: JOINABLE
   Определение приоритета потока управления:  0
   Определение стратегии планирования:        OTHER
   Определение атрибутов наследования:        INHERIT
   Определение размера стека:                 8192 Кбайт
   Определение области конкуренции:           SYSTEM
   Защита стека от переполнения:              буфер защиты 4096 байт
Установка атрибутов потока управления:
   Установка статуса освобождения ресурсов: OK
   Установка стратегии планирования:        OK
   Установка приоритета:                    OK
   Установка атрибута наследования:         OK
   Установка размера стека:                 OK
   Установка защиты стека от переполнения:  OK
   Установка области конкуренции:           OK
Запуск потока управления: поток запущен
Поток работает:
   0
   1
   2
   3
   4
Поток завершен
Работа программы завершена</pre>
</td>
  <tr>
</table>

<br clear="all"><br>

<!-- ========================================= ПРИМЕР ========================================== -->	
<p align = "justify" style='margin-left:10pt;margin-bottom:0pt;'><b>Пример 2:</b></p>
<p align = "justify" style='margin-left:30pt;margin-top:0pt;'>
В примере создается поток управления с атрибутами «по умолчанию», в рамках которого работает функция pthread_func, которая в течении 5-ти секунд, с темпом раз в секунду, вводит сообщения о работе потока (счетчик циклов). Затем поток завершается и завершается работа программы.
<br><br>

<table bgcolor = "#EFEFEF" style="border: 1px dashed" > <tr><td>
<pre>

#include < stdio.h >   <font color=Gray><i>// Для printf</i></font>
#include < pthread.h > <font color=Gray><i>// Для pthread_create</i></font>

<font color=Gray><i>// Функция, запускаемая в рамках потока управления</i></font>
void pthread_func (void);

int main (void)
{
   <font color=Gray><i>// Переменная в которую будет записан описатель атрибутов потока</i></font>
   pthread_t new_pthread;

   <font color=Gray><i>// Запуск потока управления с атрибутами по умолчанию. </i></font>
   <font color=Gray><i>// В рамках потока будет выполняться функция void pthread_func (void).</i></font>
   printf ("Запуск потока управления: ");
   if ( 0 == pthread_create (&new_pthread, &attr,(void*(*)(void*)) 
             pthread_func,NULL))
   {  }
   else printf ("ошибка\n");
 
   <font color=Gray><i>//Задержка на 10 секунд</i></font>
   sleep (10);

   printf ("Работа программы завершена\n");
    
   return 0;
}


<font color=Gray><i>//Функция, выполняемая в рамках созданного потока</i></font>
void pthread_func (void)
{
   int i=0;
   <font color=Gray><i>// Уведомление о запуске потока</i></font>
   printf ("поток запущен\n");

   <font color=Gray><i>// Индикация работы потока: вывод раз в секунду счетчика</i></font>
   <font color=Gray><i>// циклов в течении 5 секунд</i></font>
   printf ("Поток работает:\n");
   for (i=0;i<5; i++)
   {
      printf ("   %d\n",i);
      sleep (1);
   }
   printf ("Поток завершен\n");

   <font color=Gray><i>//Завершение работы потока</i></font>
   return;
}

</pre>


<td> <tr> </table>

</p>

<!-- ========================================= РЕЗУЛЬТАТЫ ====================================== -->	
<p align = "justify" style='margin-left:10pt;margin-bottom:0pt;'><b>Результат (вывод в консоль):</b></p>
<p align = "justify" style='margin-left:30pt;margin-top:0pt;'>
<br>

<table align = "left" bgcolor = "#EFEFEF" style="border: 1px dashed" >
  <tr>
    <td valign=top >
<pre>
Запуск потока управления: поток запущен
Поток работает:
   0
   1
   2
   3
   4
Поток завершен
Работа программы завершена</pre>
</td>
  <tr>
</table>

<br clear="all"><br>

</p>


<!-- ========================================= СМОТРИ ТАК ЖЕ =================================== -->	
<p align = "justify" style='margin-left:10pt;margin-bottom:0pt;'><b>Смотри так же:</b></p>
<p align = "justify" style='margin-left:30pt;margin-top:0pt;'>
<a   href="pthread_attr_getdetachstate.html">pthread_attr_getdetachstate</a><br>
<a   href="pthread_attr_getinheritsched.html">pthread_attr_getinheritsched</a><br>
<a   href="pthread_attr_getschedparam.html">pthread_attr_getschedparam</a><br>
<a   href="pthread_attr_getschedpolicy.html">pthread_attr_getschedpolicy</a><br>
<a   href="pthread_attr_init.html">pthread_attr_init</a><br>
</p>


    </td>	
  <tr>
</table>



<!-- ============================== Поделиться ================================ -->
<br clear="all">
<p align = "center">
  <!-- Поместите этот тег туда, где должна отображаться кнопка +1. -->
  <g:plusone size="tall"></g:plusone>
  <!-- Поместите этот вызов функции отображения в соответствующее место. -->
  <script type="text/javascript">
    window.___gcfg = {lang: 'ru'};
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
  </script>
</p>

<script align = "center" type="text/javascript" src="http://yandex.st/share/share.js" charset="utf-8"></script>
<p align = "center" class="yashare-auto-init" data-yashareL10n="ru" data-yashareType="icon" data-yashareQuickServices="yaru,vkontakte,facebook,twitter,odnoklassniki,moimir,gplus"></p>
</p>

</td>

<td background = "../../../../sys/t2.gif" valign=top Width="10">  </td>
</tr>
</table>

<table align = "center" Width="100%" height = "42" cellspacing="0"cellpadding="0" >
  <tr>
  <td background = "../../../../sys/t2.gif">
<p align = "center" style=' margin-top:6;'>

<!-- Yandex.Metrika informer -->
<a href="https://metrika.yandex.ru/stat/?id=24999950&amp;from=informer"
target="_blank" rel="nofollow"><img src="http://bs.yandex.ru/informer/24999950/3_0_E0E0E0FF_C0C0C0FF_0_pageviews"
style="width:88px; height:31px; border:0;" alt="Яндекс.Метрика" title="Яндекс.Метрика: данные за сегодня (просмотры, визиты и уникальные посетители)" onclick="try{Ya.Metrika.informer({i:this,id:24999950,lang:'ru'});return false}catch(e){}"/></a>
<!-- /Yandex.Metrika informer -->

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter24999950 = new Ya.Metrika({id:24999950,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="http://mc.yandex.ru/watch/24999950" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- HotLog -->
<span id="hotlog_counter"></span>
<script type="text/javascript">
var hotlog_counter_id = 602565;
var hotlog_hit = 30;
var hotlog_counter_type = 357;
</script>
<script src="http://js.hotlog.ru/counter.js" type="text/javascript" async="true"></script>
<noscript>
<a href="http://click.hotlog.ru/?602565" target="_blank"><img
src="http://hit30.hotlog.ru/cgi-bin/hotlog/count?s=602565&amp;im=357" border="0"
alt="HotLog"></a>
</noscript>
<!-- /HotLog -->

<!-- begin of Top100 code -->
<script id="top100Counter" type="text/javascript" src="http://counter.rambler.ru/top100.jcn?2657606"></script>
<noscript>
<a href="http://top100.rambler.ru/navi/2657606/">
<img src="http://counter.rambler.ru/top100.cnt?2657606" alt="Rambler's Top100" border="0" />
</a>
</noscript>
<!-- end of Top100 code -->

<!-- Rating@Mail.ru counter -->
<script type="text/javascript">//<![CDATA[
var _tmr = _tmr || [];
_tmr.push({id: "2164798", type: "pageView", start: (new Date()).getTime()});
(function (d, w) {
   var ts = d.createElement("script"); ts.type = "text/javascript"; ts.async = true;
   ts.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//top-fwz1.mail.ru/js/code.js";
   var f = function () {var s = d.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ts, s);};
   if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); }
})(document, window);
//]]></script><noscript><div style="position:absolute;left:-10000px;">
<img src="http://top-fwz1.mail.ru/counter?id=2164798;js=na" style="border:0;" height="1" width="1" alt="Рейтинг@Mail.ru" />
</div></noscript>
<!-- //Rating@Mail.ru counter -->
<!-- Rating@Mail.ru logo -->
<a href="http://top.mail.ru/jump?from=2164798">
<img src="http://top-fwz1.mail.ru/counter?id=2164798;t=441;l=1" 
style="border:0;" height="31" width="88" alt="Рейтинг@Mail.ru" /></a>
<!-- //Rating@Mail.ru logo -->

</p>
</td></tr>
</table>

</td>
</tr>
</table>

</html>
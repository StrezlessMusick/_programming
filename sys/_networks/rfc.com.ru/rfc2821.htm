<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=WINDOWS-1251">

<meta name="author" content="Ќиколай Њалых">
<meta name="description" content="">
<meta name="keywords" content="">

<title>Перевод RFC 2821</title>
<style type="text/css">
 table.main {}
 tr.row {}
 td.cell {}
 div.block {}
 div.paragraph {}
 .font0 { font:9.00pt "Arial", sans-serif; }
 .font1 { font:10.00pt "Arial", sans-serif; }
 .font2 { font:12.00pt "Arial", sans-serif; }
 .font3 { font:13.00pt "Arial", sans-serif; }
 .font4 { font:14.00pt "Arial", sans-serif; }
 .font5 { font:15.00pt "Arial", sans-serif; }
 .font6 { font:16.00pt "Arial", sans-serif; }
 .font7 { font:24.00pt "Arial", sans-serif; }
 .font8 { font:8.00pt "Courier New", monospace; }
 .font9 { font:9.00pt "Courier New", monospace; }
 .font10 { font:10.00pt "Courier New", monospace; }
 .font11 { font:11.00pt "Courier New", monospace; }
 .font12 { font:13.00pt "Courier New", monospace; }
 .font13 { font:9.00pt "Times New Roman", serif; }
 .font14 { font:10.00pt "Times New Roman", serif; }
</style>
</head>

<body>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:64.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:16.08pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:213.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:71.52pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:85.68pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:15.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:94.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:2.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:31.20pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="9" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:1.44pt;">
<div class=paragraph><div align="center"><a href="index.htm">На главную
</a></div><br>
<div style="height: 90px;">
<script type="text/javascript"><!--
google_ad_client = "pub-0899253526956684";
/* 728x90 */
google_ad_slot = "3113460964";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:64.56pt;">
<div class=block style=" width:64.56pt; height:33.36pt;">
</div>
</td>
<td class=cell colspan="7" valign="top" style=" width:499.20pt;">
<div class=block style=" width:499.20pt; height:33.36pt;">
        <div class=paragraph style=" text-align:left;"><span class=font7></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:31.20pt;">
<div class=block style=" width:31.20pt; height:33.36pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="9" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:12.00pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 62.64pt; text-align:left;"><span class=font1><b> 
          </b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="9" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:6.96pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:365.52pt;">
<div class=block style=" width:365.52pt; height:99.12pt;">
<div class=paragraph style=" padding:0.00pt 137.52pt 0.00pt 56.64pt; text-align:left;"><span class=font11 style=" line-height:12.24pt;"><b>Network Working Group Request for Comments: 2821 Obsoletes: 821, 974, 1869 Updates: 1123 Category: Standards Track</b></span></div>
<div class=paragraph style=" padding:5.28pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font6><b>Simple Mail Transfer Protocol</b></span></div>
</div>
</td>
<td class=cell colspan="5" valign="top" style=" width:229.44pt;">
<div class=block style=" width:229.44pt; height:99.12pt;">
<div class=paragraph style=" padding:0.00pt 63.36pt 0.00pt 0.00pt; text-align:right;"><span class=font11 style=" line-height:12.24pt;"><b>J. Klensin, Editor</b></span></div>
<div class=paragraph style=" padding:0.00pt 63.36pt 0.00pt 0.00pt; text-align:right;"><span class=font11 style=" line-height:12.24pt;"><b>AT&amp;T Laboratories</b></span></div>
<div class=paragraph style=" padding:0.00pt 63.36pt 0.00pt 0.00pt; text-align:right;"><span class=font11 style=" line-height:12.24pt;"><b>April 2001</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="9" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.96pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="9" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:519.84pt;">
<div class=paragraph style=" padding:0.00pt 397.44pt 0.00pt 57.84pt; text-align:left;"><span class=font5 style=" line-height:22.56pt;"><b>Протокол SMTP </b><span style=" letter-spacing:-0.80pt;"><b><i>Статус документа</i></b></span></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Этот документ содержит описание стандартного протокола для сообщества Internet и служит приглашением к дальнейшему обсуждению протокола в целях его развития. Информацию о текущем статусе документа можно найти в Internet Official Protocol Standards&quot; (STD 1). Документ может распространяться свободно.</span></div>
<div class=paragraph style=" padding:5.52pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font5 style=" letter-spacing:-0.60pt;"><b><i>Авторские права</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font14>Copyright (С) The Internet Society (2001). All Rights Reserved.</span></div>
<div class=paragraph style=" padding:5.28pt 0.00pt 0.00pt 58.32pt; text-align:left;"><span class=font5 style=" letter-spacing:-0.85pt;"><b><i>Тезисы</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.88pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Документ содержит полную спецификацию базового протокола передачи электронной почты в сети Internet. Документ консолидирует, обновляет и разъясняет перечисленные ниже спецификации, не изменяя их функциональности:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Исходная спецификация SMTP (Simple Mail Transfer Protocol) - RFC 821 [30],</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 73.68pt; text-align:left; text-indent:-16.56pt;"><span class=font14 style=" line-height:11.52pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Требования к системе доменных имен и ее использованию для передачи электронной почты - RFC 1035 [22] и RFC 974 [27],</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Пояснения и вопросы применимости RFC 1123 [2],</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Механизмы SMTP Extension [19].</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Данный документ отменяет действие RFC 821 и RFC 974, а также обновляет RFC 1123 (замена материалов, связанных</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">с передачей электронной почты в RFC 1123). Однако спецификация RFC 821 содержит некоторые возможности,</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">которые недостаточно использовались в Internet середины 1990-х голов и (в приложениях) некоторые дополнительные</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">транспортные модели. Эти разделы опущены в целях упрощения и сокращения спецификации. Интересующиеся</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">читатели могут обратиться к RFC 821.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Документ   также    включает   некоторые    дополнительные    материалы   из   RFC    1123,    которые    потребовали</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">дополнительного разъяснения. Эти вопросы были выбраны, прежде всего, в результате просмотра различных списков</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">рассылок и телеконференций, а также изучения необычных проблем или интерпретаций, появлявшихся по мере</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">расширения числа реализаций SMTP. Там, где данный документ выходит за пределы консолидации и реально</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">отличается от своих предшественников, приведенные здесь сведения имеют более высокий приоритет.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Хотя протокол SMTP был разработан для транспортировки и доставки электронной почты, данная спецификация</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">содержит сведения, имеющие важное значение для протоколов &laquo;распределения&raquo; почты POP [3, 26] и IMAP [6].</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Дополнительное рассмотрение вопросов доставки почты в ящики адресатов приводится в RFC 2476 [15].</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Параграф 2.3 содержит определения используемых в документе терминов. За исключением тех случаев, когда</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">требуется использование исторически сложившейся терминологии, в документе используются термины &laquo;клиент&raquo; и</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">&laquo;сервер&raquo; для обозначения процессов отправителей и получателей SMTP, соответственно.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Связанный с данной спецификацией документ [32] посвящен описанию заголовков и тела сообщений, используемых</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">форматов и структур, а также связей между ними.</span></div>
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b>О</b><a href="rfc2821.htm#bookmark0"><b>главление</b></a></span></div>
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 69.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><a href="rfc2821.htm#bookmark0">Статус документа........................................................1</a><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><a href="rfc2821.htm#bookmark1">2.3.8 Отправитель, система доставки,</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 68.88pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><a href="rfc2821.htm#bookmark0">Авторские права..........................................................1</a><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>трансляция, шлюз..............................................6</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 68.88pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><a href="rfc2821.htm#bookmark2">Тезисы..........................................................................1</a><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><a href="rfc2821.htm#bookmark1">2.3.9 Содержимое сообщения и почтовые</a></span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 69.84pt; text-align:left;"><span class=font14 style=" line-height:11.52pt; letter-spacing:-1.00pt;"><a href="rfc2821.htm#bookmark3">1.</a><span style=" letter-spacing:0.00pt;"><a href="rfc2821.htm#bookmark3">&nbsp;</a></span><span style=" letter-spacing:-0.05pt;"><a href="rfc2821.htm#bookmark3">Введение</a></span><span style=" letter-spacing:0.00pt;"><a href="rfc2821.htm#bookmark3">..................................................................2</a></span><span class=font1 style=" letter-spacing:0.00pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" letter-spacing:-0.05pt;"><a href="rfc2821.htm#bookmark1">данные</a></span><span style=" letter-spacing:0.00pt;"><a href="rfc2821.htm#bookmark1">................................................................6</a></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 68.88pt; text-align:left;"><span class=font14 style=" line-height:11.52pt; letter-spacing:-0.55pt;">2.<span style=" letter-spacing:0.00pt;">&nbsp;<a href="rfc2821.htm#bookmark3">Модель SMTP..........................................................3</a></span><span class=font1 style=" letter-spacing:0.00pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" letter-spacing:-0.05pt;"><a href="rfc2821.htm#bookmark1">2.3.10 Почтовый ящик и адрес</a></span><span style=" letter-spacing:0.00pt;"><a href="rfc2821.htm#bookmark1">.........................6</a></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 80.88pt; text-align:left;"><span class=font14 style=" line-height:11.52pt; letter-spacing:-0.40pt;"><a href="rfc2821.htm#bookmark3">2.1</a><span style=" letter-spacing:0.00pt;"><a href="rfc2821.htm#bookmark3">&nbsp;</a></span><span style=" letter-spacing:-0.05pt;"><a href="rfc2821.htm#bookmark3">Базовая структура</a></span><span style=" letter-spacing:0.00pt;"><a href="rfc2821.htm#bookmark3">.............................................3</a></span><span class=font1 style=" letter-spacing:0.00pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" letter-spacing:0.00pt;">2.3.11 Отклик.....................................................6</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 80.88pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2.2<a href="rfc2821.htm#bookmark3">&nbsp;Расширенная модель........................................3</a><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><a href="rfc2821.htm#bookmark1">2.4 Общие синтаксические принципы и модель</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><a href="rfc2821.htm#bookmark4">2.2.1 Базовые вопросы.......................................3</a><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><a href="rfc2821.htm#bookmark5">транзакции..............................................................6</a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" rowspan="8" valign="top" style=" width:80.64pt;">
<div class=block style=" width:80.64pt; height:105.12pt;">
</div>
</td>
<td class=cell rowspan="8" valign="top" style=" width:213.36pt;">
<div class=block style=" width:213.36pt; height:105.12pt;">
<div class=paragraph style=" text-align:left; text-indent:12.00pt;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark4">2.2.2 Определение и регистрация расширений4 </a>2.3<a href="rfc2821.htm#bookmark6"> Терминология ................................................... 4</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark6">2.3.1&nbsp;Объекты электронной почты ................... 5</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark6">2.3.2&nbsp;Отправители и получатели ...................... 5</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark6">2.3.3&nbsp;Почтовые агенты и хранилища ............... 5</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark6">2.3.4&nbsp;Хост ........................................................... 5</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark6">2.3.5&nbsp;Домен ......................................................... 5</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark6">2.3.6&nbsp;Буфер и таблица состояния ..................... 5</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">2.3.7&nbsp;Строки ....................................................... 5</span></div>
</div>
</td>
<td class=cell colspan="6" valign="top" style=" width:300.96pt;">
<div class=block style=" width:300.96pt; height:0.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:267.36pt;">
<div class=block style=" width:267.36pt; height:7.92pt;">
</div>
</td>
<td class=cell colspan="2" rowspan="3" valign="top" style=" width:33.60pt;">
<div class=block style=" width:33.60pt; height:19.44pt;">
<div class=paragraph style=" text-align:left;"><span class=font14 style=" line-height:11.28pt;">7<br></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:157.20pt;">
<div class=block style=" width:157.20pt; height:2.88pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 47.52pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">3. <a href="rfc2821.htm#bookmark5">Обзор процедур SMTP<br></a></span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:110.16pt;">
<div class=block style=" width:110.16pt; height:2.88pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt; height:8.64pt;">
</td>
<td class=cell colspan="3" rowspan="3" valign="top" style=" width:172.56pt;">
<div class=block style=" width:172.56pt; height:13.20pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 59.52pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><a href="rfc2821.htm#bookmark5">3.1 Инициирование сеанса</a></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:94.80pt;">
<div class=block style=" width:94.80pt; height:11.52pt;">
<div class=paragraph style=" padding:8.64pt 0.00pt 0.00pt 1.92pt; text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt; height:8.64pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:33.60pt;">
<div class=block style=" width:33.60pt; height:2.88pt;">
<div class=paragraph style=" text-align:left;"><span class=font14 style=" line-height:11.28pt;">7</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:128.40pt;">
<div class=block style=" width:128.40pt; height:1.68pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="6" valign="top" style=" width:300.96pt;">
<div class=block style=" width:300.96pt; height:55.68pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 59.52pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark5">3.2&nbsp;Инициирование клиента .................................. 7</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 59.52pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">3.3&nbsp;Почтовые транзакции ...................................... 7</span></div>
<div class=paragraph style=" padding:0.00pt 28.80pt 0.00pt 59.52pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark7">3.4&nbsp;Пересылка для коррекции и обновления </a><a href="rfc2821.htm#bookmark8">адресов .................................................................... 8</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 59.52pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">3.5<a href="rfc2821.htm#bookmark8">&nbsp;Отладочные команды ...................................... 9</a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:71.52pt;">
<div class=block style=" width:71.52pt; height:24.72pt;">
</div>
</td>
<td class=cell colspan="5" valign="top" style=" width:229.44pt;">
<div class=block style=" width:229.44pt; height:24.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font14><a href="rfc2821.htm#bookmark9">3.5.1&nbsp;Обзор ......................................................... 9</a></span></div>
<div class=paragraph style=" text-align:left;"><span class=font14>3.5.2&nbsp;Нормальные отклики VRFY .................. 10</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="9" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:13.68pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="5" valign="top" style=" width:451.20pt;">
<div class=block style=" width:451.20pt; height:12.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell colspan="4" valign="top" style=" width:143.76pt;">
<div class=block style=" width:143.76pt; height:12.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 14.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="9" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.48pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:64.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:16.08pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:213.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:71.52pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:85.68pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:15.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:94.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:2.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:31.20pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:40.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:260.88pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:139.20pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:18.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="5" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:301.20pt;">
<div class=block style=" width:301.20pt; height:12.24pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0></span></div>
</div>
</td>
<td class=cell colspan="2" rowspan="2" valign="top" style=" width:158.16pt;">
<div class=block style=" width:158.16pt; height:12.96pt;">
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:135.60pt;">
<div class=block style=" width:135.60pt; height:12.96pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt; height:0.72pt;">
</td>
<td class=cell rowspan="2" valign="top" style=" width:40.32pt;">
<div class=block style=" width:40.32pt; height:588.00pt;">
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:260.88pt;">
<div class=block style=" width:260.88pt; height:588.00pt;">
<div class=paragraph style=" padding:0.00pt 36.24pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark9">3.5.3&nbsp;Значения откликов при успешном завершении VRFY или EXPN ......................... 10</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark9">3.5.4&nbsp;Семантика и использование EXPN ....... 10</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark10">3.6&nbsp;Домены ............................................................ 10</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark10">3.7&nbsp;Трансляция ...................................................... 11</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">3.8<a href="rfc2821.htm#bookmark10">&nbsp;Почтовые шлюзы ............................................ 11</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">3.8.1&nbsp;Поля заголовка при работе со шлюзом.11</span></div>
<div class=paragraph style=" padding:0.00pt 36.24pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark11">3.8.2&nbsp;Строки Received: при использовании шлюзов .............................................................. 12</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">3.8.3&nbsp;Адресация при использовании шлюзов12</span></div>
<div class=paragraph style=" padding:0.00pt 36.24pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark11">3.8.4&nbsp;Другие поля заголовков при использовании шлюзов ................................... 12</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark11">3.8.5&nbsp;Конверты при работе со шлюзами ........ 12</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark11">3.9&nbsp;Разрыв сеансов и соединений ........................ 12</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">3.1<a href="rfc2821.htm#bookmark11">0&nbsp;Почтовые списки и псевдонимы ................. 12</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark12">3.10.1&nbsp;Псевдонимы .......................................... 12</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark12">3.10.2&nbsp;Списки ................................................... 13</a></span></div>
<div class=paragraph style=" text-align:left;"><span class=font14 style=" line-height:11.28pt;">4. <a href="rfc2821.htm#bookmark12">Спецификации SMTP ............................................ 13</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">4.1<a href="rfc2821.htm#bookmark12">&nbsp;Команды SMTP ............................................... 13</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">4.1.1&nbsp;Семантика и синтаксис команд ............. 13</span></div>
<div class=paragraph style=" padding:0.00pt 36.24pt 0.00pt 36.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark12">4.1.1.1&nbsp;Расширенное приветствие (EHLO) или стандартное приветствие (HELO) ...... 13</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 36.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark13">4.1.1.2&nbsp;Начало транзакции (MAIL) ............ 13</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 36.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark13">4.1.1.3&nbsp;Получатель (RCPT) ......................... 14</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 36.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark14">4.1.1.4&nbsp;Данные (DATA) .............................. 14</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 36.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark14">4.1.1.5&nbsp;Сброс (RSET) ................................... 15</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 36.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark14">4.1.1.6&nbsp;Проверка (VRFY) ............................ 15</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 36.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark14">4.1.1.7&nbsp;Преобразовать список (EXPN) ....... 15</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 36.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark14">4.1.1.8&nbsp;Справка (HELP) ............................... 15</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 36.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark14">4.1.1.9&nbsp;Пустая операция (NOOP) ............... 15</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 36.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark15">4.1.1.10&nbsp;Завершение работы (QUIT) .......... 15</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark15">4.1.2&nbsp;Синтаксис аргументов команд .............. 16</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark16">4.1.3&nbsp;&laquo;Дословные&raquo; адреса ............................... 16</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark16">4.1.4&nbsp;Порядок команд ...................................... 17</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark16">4.1.5&nbsp;Команды частного использования ........ 17</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">4.2&nbsp;Отклики SMTP ................................................ 17</span></div>
<div class=paragraph style=" padding:0.00pt 36.24pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark17">4.2.1&nbsp;Важность кодов отклика и теоретические </a><a href="rfc2821.htm#bookmark18">вопросы ............................................................. 18</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark18">4.2.2&nbsp;Коды откликов (по группам) ................. 19</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark19">4.2.3&nbsp;Коды откликов в порядке номеров ....... 19</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">4.2.4&nbsp;Отклик 502 ............................................... 20</span></div>
<div class=paragraph style=" padding:0.00pt 36.24pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark19">4.2.5&nbsp;Коды откликов после DATA и последующих &lt;CRLF&gt;.&lt;CRLF&gt; .................... 20</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">4.3<a href="rfc2821.htm#bookmark19">&nbsp;Порядок следования команд и откликов ...... 20</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark20">4.3.1&nbsp;Обзор ........................................................ 20</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark20">4.3.2&nbsp;Последовательности команда - отклик.21</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark21">4.4&nbsp;Трассировочная информация ........................ 21</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">4.5<a href="rfc2821.htm#bookmark21">&nbsp;Другие вопросы реализации .......................... 22</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark22">4.5.1&nbsp;Минимальная реализация ...................... 22</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark22">4.5.2&nbsp;Прозрачность .......................................... 23</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">4.5.3&nbsp;Размеры и тайм-ауты .............................. 23</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.72pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:293.76pt;">
<div class=block style=" width:293.76pt; height:587.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 48.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark23">4.5.3.1&nbsp;Ограничения размеров ................... 23</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 48.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark23">4.5.3.2&nbsp;Тайм-ауты ........................................ 24</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 36.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">4.5<a href="rfc2821.htm#bookmark23">.4&nbsp;Стратегия повторов ................................ 24</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 48.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark24">4.5.4.1&nbsp;Стратегия передачи ........................ 24</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 48.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">4.5.4.2&nbsp;Стратегия приема ............................ 25</span></div>
<div class=paragraph style=" padding:0.00pt 57.12pt 0.00pt 36.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark24">4.5.5&nbsp;Сообщения с пустым полем обратного </a>пути ................................................................... 25</span></div>
<div class=paragraph style=" padding:0.00pt 57.12pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark24">5.&nbsp;Преобразование адресов и обслуживание почты </a><a href="rfc2821.htm#bookmark25">.................................................................................... 25</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">6.&nbsp;Обнаружение и решение проблем ....................... 26</span></div>
<div class=paragraph style=" padding:0.00pt 57.12pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark25">6.1&nbsp;Надежная доставка и отклики по электронной почте ...................................................................... 26</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark26">6.2&nbsp;Обнаружение петель ...................................... 26</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark26">6.3&nbsp;Компенсация отклонений от стандартов ..... 27</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">7.&nbsp;<a href="rfc2821.htm#bookmark26">Вопросы безопасности ......................................... 27</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark26">7.1&nbsp;Mail Security and Spoofing .............................. 27</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark27">7.2&nbsp;Скрытые копии - BC ...................................... 27</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark27">7.3&nbsp;VRFY, EXPN и безопасность ........................ 28</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">7.4&nbsp;Разглашение информации в анонсах ............ 28</span></div>
<div class=paragraph style=" padding:0.00pt 57.12pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark27">7.5&nbsp;Разглашение информации в полях </a>трассировки .......................................................... 28</span></div>
<div class=paragraph style=" padding:0.00pt 57.12pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark27">7.6&nbsp;Разглашение информации при пересылке сообщений ............................................................. 28</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark27">7.7&nbsp;Свобода действий сервера SMTP ................. 28</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark28">8.&nbsp;Регистрация в IANA ............................................. 28</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark28">9.&nbsp;Литература ............................................................. 29</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark28">10.&nbsp;Адрес редактора .................................................. 29</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark29">11.&nbsp;Благодарности ..................................................... 29</a></span></div>
<div class=paragraph style=" text-align:left;"><span class=font14 style=" line-height:11.28pt;">Пр<a href="rfc2821.htm#bookmark29">иложения ................................................................... 30</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">A.&nbsp;Транспортный сервис TCP .................................. 30</span></div>
<div class=paragraph style=" padding:0.00pt 57.12pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark29">B.&nbsp;Генерация команд SMTP из заголовков RFC 822 .................................................................................... 30</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark30">C.&nbsp;Маршруты Source Route ...................................... 30</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">D.&nbsp;<a href="rfc2821.htm#bookmark30">Сценарии ............................................................... 31</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark30">D.1 Сценарий типичной транзакции SMTP ....... 31</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark30">D.2 Сценарий прерванной транзакции SMTP....31</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark31">D.3 Сценарий с трансляцией ............................... 31</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark31">D.4 Сценарий проверки и передачи .................... 32</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark31">E.&nbsp;Другие вопросы, связанные со шлюзами ........... 32</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark31">F.&nbsp;Отмененные возможности RFC 821 .................... 32</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">F.1<a href="rfc2821.htm#bookmark31"> Команда TURN ................................................... 32</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark32">F.2 Явная маршрутизация почты ........................ 32</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark32">F.3 Команда HELO ............................................... 33</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark32">F.4 #-литералы ...................................................... 33</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">F.5 Даты и годы .................................................... 33</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark32">F.6 Дополнительные команды прямой передачи</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 26.40pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark32">............................................................................... 33</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><a href="rfc2821.htm#bookmark32">Полное заявление авторских прав ........................... 33</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.00pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Подтверждение .......................................................... 33</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="5" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:3.84pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="5" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:167.76pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b><i>1. Введение</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Задачей протокола SMTP (Simple Mail Transfer Protocol – простой протокол передачи электронной почты) является надежная и эффективная доставка сообщений электронной почты.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Протокол SMTP не связан с конкретными подсистемами передачи и требует только надежных каналов передачи потока данных с сохранением порядка. Хотя этот документ обсуждает вопросы доставки применительно к протоколу TCP, возможно использование иного транспорта. Некоторые из альтернативных вариантов рассмотрены в приложениях к RFC 821.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Важной особенностью SMTP является возможность доставки почты через сети, обычно называемые SMTP mail relaying (см. параграф 3.8). Сеть состоит из доступных один другому по протоколу TCP хостов сети Internet, хостов TCP/IP Intranet-сетей, находящихся за брандмауэрами, и хостов в других средах LAN или WAN, использующих на транспортном уровне протоколы, отличные от TCP. Используя SMTP, процесс может передавать почту другому процессу в той же или какой-то иной сети с помощью relay-процессов или шлюзов, доступных из обеих сетей. Таким путем почтовые сообщения можно передавать через множество промежуточных трансляторов (relay) или шлюзов на пути между отправителем и конечным адресатом. Для определения следующего &laquo;промежуточного</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="5" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:29.52pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:301.20pt;">
<div class=block style=" width:301.20pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:139.20pt;">
<div class=block style=" width:139.20pt; height:12.72pt;">
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 4.08pt; text-align:left;"><span class=font0><b>2</b></span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:154.56pt;">
<div class=block style=" width:154.56pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="5" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:40.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:260.88pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:139.20pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:18.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:753.60pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0><a name="bookmark3"><b><u>П</u></b></a><b><u>еревод 
          RFC 2821</u>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
          &nbsp; &nbsp; &nbsp;</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">получателя<a href="rfc2821.htm#bookmark33"><sup>1</sup></a>&raquo; (next-hop) на пути к адресату используется механизм Mail eXchanger (MX) системы доменных имен (DNS) [22, 27], рассмотренный в главе 5.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b><i>2. Модель SMTP</i></b></span></div>
<div class=paragraph style=" padding:2.16pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b>2.1&nbsp;Базовая структура</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:8.88pt;">Устройство протокола SMTP показано на рисунке:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 152.64pt; text-align:left;"><span class=font10 style=" line-height:8.88pt;">+ ---------- +<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>+ ---------- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.64pt; text-align:left;"><span class=font10 style=" line-height:8.88pt;">+ ------- +</span></div>
<div class=paragraph style=" padding:0.00pt 280.56pt 0.00pt 260.64pt; text-align:left; text-indent:-36.00pt;"><span class=font10 style=" line-height:8.88pt;">Команды/отклики SMTP</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 224.64pt; text-align:left;"><span class=font10 style=" line-height:8.88pt;">&lt; -------------- &gt;|    SMTP  |    + ------- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 248.64pt; text-align:left;"><span class=font10 style=" line-height:8.88pt;">и почта     |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>|&lt;--&gt;|Файлов.|</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.64pt; text-align:left;"><span class=font10 style=" line-height:8.88pt;">|система|    |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>|    |система|</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.64pt; text-align:left;"><span class=font10 style=" line-height:8.88pt;">+ ------- +    + ---------- +<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>+ ---------- +    + ------- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 152.64pt; text-align:left;"><span class=font10 style=" line-height:11.28pt;">Клиент SMTP<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Сервер SMTP</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Когда у клиента SMTP есть сообщение для передачи, он организует двухсторонний канал связи с сервером SMTP. Обязанность клиента SMTP состоит в доставке почтовых сообщений на один или несколько серверов SMTP или выдача сообщения (отчета) о невозможности доставки почты.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Способ предоставления почтовых сообщений клиенту SMTP и определения клиентом доменного имени, куда следует адресовать сообщение, является локальной задачей и не рассматривается в спецификации. В некоторых случаях доменные имена преобразуются или определяются клиентом SMTP, который и будет определять конечного адресата почты. В других случаях, когда клиенты SMTP связаны с реализациями протоколов POP [3, 26] или IMAP [6] или когда клиент SMTP находится в изолированной транспортной среде, доменное имя будет определять промежуточного получателя, через которого транслируется вся почта. Клиенты SMTP, которые передают весь трафик, независимо от домена адресата, связанного с конкретным сообщением, или не поддерживают очередей для повтора попыток передачи сообщений при неудаче, могут соответствовать данной спецификации, но не обеспечивать всех возможностей. Предполагается, что полнофункциональные реализации SMTP, включая трансляторами, которые используются неполными системами, и их получатели будут поддерживать очереди, повторы и альтернативную адресацию, рассматриваемые в данном документе.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Способ, с помощью которого клиент SMTP после определения доменного имени адресата, находит сервер SMTP для передачи сообщения, а также процесс передачи определяются данной спецификацией. Для передачи почты SMTP-серверу клиент SMTP организует двухсторонний канал связи с сервером. SMTP-клиент определяет адрес подходящего хоста, на котором работает сервер SMTP преобразуя доменное имя получателя в MX-запись (Mail exchanger) промежуточного или конечного хоста-получателя.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Сервер SMTP может быть конечным или промежуточным транслятором<a href="rfc2821.htm#bookmark34"><sup>2</sup></a> (relay) или шлюзом<a href="rfc2821.htm#bookmark35"><sup>3</sup></a> (gateway). Команды SMTP генерируются и передаются серверу SMTP. Сервер SMTP передает отклики в ответ на команды клиента SMTP. Иными словами, передача сообщения может осуществляться в один прием путем соединения исходного отправителя SMTP с конечным получателем SMTP или через цепочку промежуточных систем. В любом случае протокол требует от сервера доставить сообщение адресату или предоставить отчет о невозможности доставки.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">После организации коммуникационного канала и согласования параметров клиент SMTP обычно инициирует почтовую транзакцию. Такая транзакция обычно состоит из последовательности команд, задающих отправителя и получателя сообщения, а также передающих содержательную часть письма (включая все заголовки и прочие структуры). Если одно сообщение передается множеству адресатов, разумно передавать одну копию сообщения для всех получателей, доставка которым осуществляется на один или через один промежуточный транслятор. Сервер обеспечивает отклик на каждую полученную команду – отклик может показывать восприятие команды (в таких случаях ожидаются дополнительные команды), а также содержать сообщение о временной или постоянной ошибке. Команды, задающие отправителя или получателей, могут включать поддерживаемые сервером SMTP расширения, описанные в параграфе 2.2. Диалог между клиентом и сервером осуществляется поэтапно (команда – отклик – команда …), хотя можно использовать по взаимному согласию конвейерную обработку [13]. После завершения передачи сообщения клиент может запросить разрыв соединения или инициировать следующую почтовую транзакцию. Кроме того, клиент SMTP может использовать соединение с сервером для доступа к дополнительному сервису типа проверки почтовых адресов или поиска адресов из списка рассылок. Как сказано выше, протокол обеспечивает механизм передачи электронной почты. Эта передача обычно осуществляется непосредственно с хоста отправителя на хост получателя, когда оба хоста используют один транспортный сервис. Если же хосты подключены к разным системам транспортного сервиса, передача осуществляется с использованием одного или нескольких промежуточных серверов SMTP. Промежуточные хосты в таких случаях действуют как трансляторы (SMTP relay) или шлюзы в другие среды передачи и выбираются обычно с использованием MX-записей DNS (служба доменных имен). В некоторых случаях, однако, используется явное задание маршрута отправителем (см. главу 5 и приложения C, F.2).</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b>2.2&nbsp;Расширенная модель</b></span></div>
<div class=paragraph style=" padding:2.64pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3 style=" line-height:11.52pt; letter-spacing:-0.55pt;"><b><i>2.2.1 Базовые вопросы</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">В рамках программы, начатой в 1990, приблизительно через 10 лет после выпуска RFC 821, протокол был обновлен за счет добавления модели service extensions, позволяющей клиентам и серверам согласовать использование общих функций сверх определенных исходной спецификацией SMTP. Механизм расширения SMTP определяет, какие</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:13.44pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:47.52pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;"><a name="bookmark34"><sup>1</sup></a>&nbsp;Транслятор или шлюз. <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;"><a name="bookmark35"><sup>2</sup></a>&nbsp;После приема письма сервер выполняет функции клиента SMTP, пересылая сообщение дальше.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;"><sup>3</sup>&nbsp;<u>Может передавать сообщение дальше, используя отличный от SMTP протокол.</u></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span style=" color:rgb(0,0,0);"><b>3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.24pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:304.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:154.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:440.40pt;">
<div class=block style=" width:440.40pt; height:12.96pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:154.56pt;">
<div class=block style=" width:154.56pt; height:12.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 18.96pt; text-align:left;"><span class=font0><b><u>Перевод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:2.40pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:751.20pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">дополнительные   функции   клиент   и   сервер   SMTP   смогут   использовать   при   взаимодействии;   сервер   может</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">информировать клиента о поддерживаемых расширениях.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Современные реализации SMTP <b>должны </b>поддерживать базовые механизмы расширения. Например, сервер <b>должен</b></span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">поддерживать  команды  EHLO,   даже  если  в  нем  не  реализовано   соответствующее  расширение,   а  клиентам</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b>рекомендуется </b>использовать команду EHLO вместо HELO<a href="rfc2821.htm#bookmark36"><sup>4</sup>.</a> В тех случаях, когда для интероперабельности не</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">требуется явное использование HELO, настоящая спецификация всегда рассматривает только EHLO.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Протокол SMTP широко распространен и высококачественные реализации обеспечивают требуемую для работы</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 28.08pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">устойчивость. Однако сообщество Internet сейчас считает остаточно важными некоторые службы, которых просто не</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">было в момент создания протокола. При добавлении поддержки таких служб должна обеспечиваться возможность</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">приемлемой работы старых реализаций протокола. К числу таких расширений относятся:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Команда EHLO взамен прежней команды HELO;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Реестр расширений сервиса SMTP;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Дополнительные параметры команд MAIL и RCPT;</span></div>
<div class=paragraph style=" padding:0.00pt 56.88pt 0.00pt 44.64pt; text-align:left; text-indent:-15.84pt;"><span class=font14 style=" line-height:11.28pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Возможность замены команд, определенных в данном протоколе (таких, как DATA) при передаче символов, отличных от ASCII [33].</span></div>
<div class=paragraph style=" padding:0.24pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Сила протокола SMTP обусловлена, прежде всего, его простотой. Знакомство с множеством протоколов показывает, что протоколы с меньшим числом опций получают более широкое распространение, нежели усложненные протоколы. Каждое расширение, независимо от обеспечиваемых им преимуществ, должно быть тщательно проверено в части его реализации, развертывания и интероперабельности. Во многих случаях стоимость расширение сервиса SMTP может многократно превысить достигаемые преимущества.</span></div>
<div class=paragraph style=" padding:5.28pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font3 style=" letter-spacing:-0.60pt;"><b><i>2.2.2 Определение и регистрация расширений</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Реестр расширенных служб SMTP поддерживается агентством IANA. С каждым расширением связано ключевое значение EHLO. Каждая дополнительная служба, регистрируемая IANA, должна быть определена на основе стандартного протокола или одобренного IESG экспериментального протокола. Определение должно включать:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Текстовое имя расширенного сервиса SMTP;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Ключевое значение EHLO связанное с этим сервисом;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>•&nbsp; &nbsp; &nbsp;</b>Синтаксис и возможные значения параметров, связанные с ключевым значением EHLO;</span></div>
<div class=paragraph style=" padding:0.24pt 56.88pt 0.00pt 44.64pt; text-align:left; text-indent:-15.84pt;"><span class=font14 style=" line-height:11.52pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Все дополнительные команды SMTP, связанные с расширением (такие команды не требуются, но обычно используются);</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Все новые параметры расширения, связанные с командами MAIL или RCPT;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>•&nbsp; &nbsp; &nbsp;</b>Описание воздействия поддержки расширения на поведение клиентов и серверов SMTP;</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 44.64pt; text-align:left; text-indent:-15.84pt;"><span class=font14 style=" line-height:11.52pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Величину, на которую это расширение может увеличивать максимальную длину команд MAIL и RCPT сверх стандартного размера.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Кроме того, все ключевые значения EHLO, начинающиеся с X или x, указывающие на локальные расширения сервиса SMTP, используются на основе двухсторонних соглашений. Ключевые слова, начинающиеся с X (независимо от регистра) <b>не могут </b>использоваться в регистрируемых расширениях сервиса. И наоборот, ключевые значения, представляемые в отклике EHLO, который не начинается с X, <b>должны </b>соответствовать стандарту, предложенному стандарту или одобренному IESG экспериментальному расширению SMTP, зарегистрированному IANA. Для соответствующих требованиям стандарта серверов <b>недопустимо </b>предлагать начинающиеся с отличных от X символов расширения сервиса, если они не зарегистрированы.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Имена дополнительных команд и параметров подчиняются тем же правилам, что используются для ключевых значений EHLO; в частности, команды, начинающиеся с X, являются локальным расширением и могут использоваться без регистрации и стандартизации. И наоборот, все команды, которые начинаются с символов, отличных от X, должны регистрироваться.</span></div>
<div class=paragraph style=" padding:6.48pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font3><b>2.3 Терминология</b></span></div>
<div class=paragraph style=" padding:0.24pt 56.88pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Ключевые слова MUST (<b>необходимо</b>), MUST NOT (<b>недопустимо</b>), REQUIRED (<b>требуется</b>), SHALL (<b>должно</b>), SHALL NOT (<b>не должно</b>), SHOULD (<b>следует</b>), SHOULD NOT (<b>не следует</b>), RECOMMENDED (<b>рекомендуется</b>), MAY (<b>возможно</b>), OPTIONAL (<b>необязательно</b>) в данном документе трактуются следующим образом:</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 29.52pt; text-align:left;"><span class=font14 style=" line-height:11.28pt; letter-spacing:-1.00pt;">1.<span style=" letter-spacing:0.00pt;">&nbsp;MUST - <b>необходимо</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Это слово, а также термины <b>требуется </b>(REQUIRED) и <b>нужно </b>(SHALL) используется для требований, которые являются абсолютно необходимыми в данной спецификации.</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.52pt; letter-spacing:-0.55pt;">2.<span style=" letter-spacing:0.00pt;">&nbsp;MUST NOT - <b>недопустимо</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14>Эта фраза или слова SHALL NOT (<b>не позволяется</b>) означают абсолютный запрет в рамках спецификации.</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" letter-spacing:-0.65pt;">3.<span style=" letter-spacing:0.00pt;">&nbsp; </span><span style=" letter-spacing:-0.05pt;">SHOULD - <b>следует</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.56pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Это слово, а также глагол <b>рекомендуется </b>(RECOMMENDED) используется для обозначения требований, от выполнения которых можно отказаться при наличии разумных причин. Однако при таком отказе следует помнить о возможных проблемах в результате отказа и принимать взвешенное решение.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.52pt; letter-spacing:-0.55pt;">4.<span style=" letter-spacing:0.00pt;">&nbsp; </span><span style=" letter-spacing:-0.05pt;">SHOULD NOT - <b>не следует</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Эта фраза и глагол <b>не рекомендуется </b>(NOT RECOMMENDED) используются применительно к особенностям или функциям, которые допустимы и могут быть полезными, но могут вызывать проблемы. При реализации таких опций следует учитывать возможность возникновения проблем и принимать взвешенное решение.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt; letter-spacing:-0.65pt;">5.<span style=" letter-spacing:0.00pt;">&nbsp;</span><span style=" letter-spacing:-0.05pt;">MAY - <b>возможно</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Это слово, а также прилагательное <b>необязательный </b>(OPTIONAL) обозначают элементы, реализация которых является необязательной. Одни разработчики могут включать такие опции в свою продукцию для расширения</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:10.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:23.28pt;">
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;"><a name="bookmark36"><sup>4</sup></a> Однако для совместимости со старыми реализациями клиенты и серверы SMTP по-прежнему <b>должны </b>поддерживать команды HELO.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:0.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:304.80pt;">
<div class=block style=" width:304.80pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:135.60pt;">
<div class=block style=" width:135.60pt; height:12.72pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font1><b>4</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:154.56pt;">
<div class=block style=" width:154.56pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:304.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:154.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0><a name="bookmark6"><b><u>П</u></b></a><b><u>еревод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.96pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:0.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:749.04pt;">
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">возможностей, а другие - опускать в целях упрощения. Реализация, не включающая ту или иную опцию, должна быть готова к работе с реализациями, которые используют эту опцию (возможно совместная работа будет обеспечиваться за счет некоторого ущерба функциональности). Включающие опцию реализации должны быть готовы (естественно, без использования такой опции) к взаимодействию с реализациями, которые такую опцию не поддерживают.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>2.3.1&nbsp;Объекты электронной почты</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Протокол SMTP обеспечивает транспортировку объектов электронной почты. Каждый объект состоит из конверта (envelope) и содержимого.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Конверт SMTP передается как серия протокольных элементов SMTP (см. главу 3). Конверт содержит адрес отправителя (по которому должны возвращаться отчеты об ошибках) и один или более адресов получателей, а также дополнительную информацию для расширенных служб. В силу исторических причин могут использоваться вариации команды с адресом получателя (RCPT TO) для задания альтернативных режимов доставки типа непосредственного отображения; сейчас следует воздерживаться от таких вариаций (см. параграф F.6).</span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Содержимое SMTP передается в виде протокольного элемента SMTP DATA и состоит из двух частей – заголовков и тела. Если содержимое соответствует другим современным стандартам, заголовок формирует набор пар &laquo;поле – значение&raquo;, структурированных в соответствии со спецификацией формата сообщений [32]; тело сообщения, при наличии в нем структуры, соответствует спецификации MIME [12]. Содержимое является текстовым по своей природе и выражается с использованием набора символов US-ASCII [1]. Хотя расширения SMTP (типа 8BITMIME [20]) могут обходить это ограничение для содержимого, заголовки всегда должны кодироваться с использованием набора символов US-ASCII. Расширение MIME [23] определяет алгоритм представления в заголовках символов, не входящих в US-ASCII, с использованием комбинаций символов набора US-ASCII.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>2.3.2&nbsp;Отправители и получатели</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">В RFC 821 два хоста, принимающие участие в транзакции SMTP, были описаны как SMTP-sender (отправитель) и SMTP-receiver (получатель). В настоящей спецификации используются иные термины, отражающие сложившуюся практику - SMTP client (иногда просто client) и SMTP server (или просто server) для отправителя и получателя, соответственно. Поскольку в режиме трансляции один хост может выступать в качестве клиента и сервера, продолжается использование терминов &laquo;получатель&raquo; (receiver) и &laquo;отправитель&raquo; (sender).</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>2.3.3&nbsp;Почтовые агенты и хранилища</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">В данной спецификации используется современная терминология, устоявшаяся с момента публикации RFC 821. А В частности, клиенты и серверы SMTP обеспечивают почтовый транспортный сервис и называются &laquo;агентами доставки почты&raquo; - АДП (Mail Transfer Agent или MTA). Пользовательские почтовые агенты – ППА (Mail User Agent, MUA или UA) выступают в качестве исходных отправителей и конечных получателей почтовых сообщений. На стороне отправителя ППА может собирать почту от пользователя для передачи ее АДП; агент ППА на стороне получателя передает почту ППА (по крайней мере, передает этому агенту ответственность за доставку почты; например, помещая ее в &laquo;почтовое хранилище&raquo; - message store). Однако, хотя эти термины и достаточно точно выражают суть и применимы к другим средам, границы между ППА (MUA) и АДП (MTA) определены недостаточно четко. Следовательно, читатель должен внимательно относиться к терминологии.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>2.3.4&nbsp;Хост</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">В рамках данной спецификации термин &laquo;хост&raquo; обозначает компьютерную систему, подключенную к Internet (или, в некоторых случаях, к частной сети TCP/IP) и поддерживающую протокол SMTP. Хосты обозначаются именами (см. 2.5); обозначение числовыми адресами не рекомендуется использовать.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>2.3.5&nbsp;Домен</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Домен (доменное имя) состоит из одной или нескольких разделенных точками компонент. В контексте SMTP эти компоненты (метки в терминах DNS [22]) могут содержать только последовательности букв<a href="rfc2821.htm#bookmark37"><sup>5</sup>,</a> цифр, дефиса (-) и знака подчеркивания (_) из набора символов ASCII [1]. Доменные имена используются для обозначения хостов и других объектов иерархии доменных имен. Например, доменное имя может указывать на псевдоним (метка CNAME RR) или метку записи MX (Mail exchanger), которая будет использоваться для доставки почты вместо представленного имени хоста. Дополнительные сведения о доменных именах можно найти в работе [22] и главе 5 данной спецификации. Доменное имя, как описано в данном документе и работе [22], представляет собой полное имя (fully-qualified domain name или FQDN). Доменные имена, не являющиеся FQDN, есть ни что иное, как локальные псевдонимы. В транзакциях SMTP появление локальных псевдонимов <b>недопустимо</b>.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>2.3.6&nbsp;Буфер и таблица состояния</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Сессии SMTP являются двухсторонними и каждая из сторон поддерживает общий взгляд (точку зрения) на текущее состояние. В этом документе мы будем представлять такое состояние виртуальным буфером и таблицей состояний на сервере, которые могут использоваться клиентом (например, клиент может очистить буфер, сбросить таблицу состояния - в результате чего информация из буфера удаляется, а таблица переходит в некое начальное состояние).</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>2.3.7&nbsp;Строки</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Команды SMTP и (если расширение сервиса не задает иного) данные сообщений передаются как строки (line). Строка состоит из некоторого (возможно, нулевого) числа символов данных и завершается символами ASCII для возврата каретки (CR - 0Dh) и перевода строки (LF - 0Ah). Последовательность завершения строки в документе будет обозначаться &lt;CRLF&gt;. Для реализаций, которые соответствуют требованиям данной спецификации, <b>недопустимо</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:25.68pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:26.88pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13><a name="bookmark37"><sup>5</sup></a> <u>Английского алфавита. <i>Прим. перев.</i></u></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span style=" color:rgb(0,0,0);"><b>5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.24pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:305.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:18.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:12.24pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:135.60pt;">
<div class=block style=" width:135.60pt; height:12.96pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:0.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:768.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">принимать или генерировать для завершения строки любые другие последовательности символов. Серверы могут</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">вносить ограничения на длину строк (см. параграф 4.5.3).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">В дополнение отметим, что использование в тексте отдельных символов CR или LF (не в комбинации &lt;CRLF&gt;) имеет</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">долгую историю проблем в реализациях почтовых систем и приложениях, работающих с электронной почтой. Для</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">клиентов SMTP <b>недопустима </b>передача этих символов за исключением тех случаев, когда комбинация символов</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">служит для завершения строки, а в этом случае <b>должна </b>применяться только стандартная последовательность</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">&lt;CRLF&gt;.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>2.3.8&nbsp;Отправитель, система доставки, трансляция, шлюз</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">В данной спецификации различаются четыре типа систем SMTP на основе выполняемых ими функций передачи электронной почты. Система-отправитель (SMTP originator) вносит сообщение в Internet или, в общем случае, в среду транспортного сервиса. Система доставки (delivery) SMTP принимает почту от транспортного сервиса и передает ее пользовательскому почтовому агенту или размещает в хранилище сообщений, из которого пользовательский агент может взять почту впоследствии. Транслятор (relay) SMTP получает почту от клиента SMTP и передает ее другому серверу SMTP (для доставки или следующей трансляции) без изменения данных, добавляя лишь трассировочную информацию в заголовок.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Шлюзами (gateway) SMTP называют системы, получающие почту от клиентов из одной транспортной среды и передающие ее серверу другой среды. Различия в протоколах и семантике сообщения по разные стороны шлюза могут потребовать преобразования, которое не может быть выполнено трансляторами SMTP. В контексте данной спецификации брандмауэры (firewall), переписывающие адреса, также рассматриваются как шлюзы, даже если по обе стороны брандмауэра используется среда SMTP (см. [11]).</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>2.3.9&nbsp;Содержимое сообщения и почтовые данные</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Термины &laquo;содержимое сообщения&raquo; (message content) и &laquo;почтовые данные (mail data) в этом документе являются взаимозаменяемыми и служат для обозначения информации, передаваемой после восприятия команды DATA до завершения передачи. Содержимое сообщения включает заголовки и (возможно структурированное) тело сообщения. Спецификация MIME [12] обеспечивает стандартные механизмы структурирования тела сообщений.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>2.3.10&nbsp;Почтовый ящик и адрес</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">В данной спецификации термин &laquo;адрес&raquo; означает текстовую строку, идентифицирующую пользователя, которому предназначено сообщение или место, в котором почта будет сохранена. Термин &laquo;почтовый ящик&raquo; (mailbox) обозначает место хранения почты. Обычно эти термины взаимозаменяемы, если не имеет значения разница между местом хранения почты (почтовый ящик) и ее конкретным получателем (адрес). Адрес обычно состоит из пользовательской и доменной части. Стандартные соглашения об именах почтовых ящиков предполагают использование формата <span style=" color:rgb(0,0,128);"><a href="mailto:local-part@domain"><u>local-part@domain</u></a></span><span style=" color:rgb(0,0,255);"> </span>- современная терминология поддерживает значительно более широкий спектр применений, нежели просто имена пользователей. По этой причине, а также в результате исторической проблемы, связанной с попытками промежуточных менять локальную часть адреса в целях оптимизации, локальная часть адреса <b>должна </b>интерпретироваться только хостом, указанным в доменной части адреса.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>2.3.11&nbsp;Отклик</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Отклик (reply) SMTP является подтверждением (позитивным или негативным), которое передается от получателя через канал передачи в ответ на команду. Общей формой отклика является цифровой код завершения (успех или неудача), за которым обычно следует текстовая строка. Коды используются программами, а текст обычно предназначен для человека. В недавней работе [34] приводится спецификация структурированных строк отклика, включая использование дополнительных и более специфических кодов завершения.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b>2.4 Общие синтаксические принципы и модель транзакции</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Команды и отклики SMTP подчиняются жестким синтаксическим правилам. Все команды начинаются с &laquo;командного глагола&raquo; (command verb), а все отклики – с 3-значного цифрового кода. В некоторых командах и откликах за командой или кодом <b>должны </b>следовать аргументы. Некоторые команды не принимают аргументов (после названия команды), а за некоторыми кодами откликов может следовать произвольный текст. Во всех случаях присутствия текста он отделяется от команды или кода символом пробела. Полные описания команд и откликов приведены в главе 4. Регистр символов в командах и значениях аргументов не имеет значения (т. е., TO: и to: в команде RCPT не различаются), однако это правило имеет исключения для локальной части названия почтового ящика (расширения SMTP могут явно указывать чувствительные к регистру символов элементы). Названия команд, значения аргументов (кроме локальной части имени почтового ящика) и свободный текст <b>может </b>содержать произвольную комбинацию символов верхнего и нижнего регистра. Для локальной части имен почтовых ящиков регистр символов <b>должен </b>приниматься во внимание. Следовательно, реализации SMTP <b>должны </b>пытаться сохранить регистр символов в локальной части имени почтового ящика. В частности, для некоторых хостов пользователь smith может отличаться от пользователя Smith. Однако, использование чувствительных к регистру локальных частей в именах почтовых ящиков снижает уровень интероперабельности – следует избегать такого применения локальных имен.</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Некоторые серверы SMTP в нарушение данной спецификации (и RFC 821) требуют от клиентов представления команд в верхнем регистре (заглавные буквы). В реализации серверов <b>могут </b>приниматься меры для представления команд в соответствии с требованиями таких серверов.</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Поле   аргументов   содержит   текстовую   строку   переменной   длины,   заканчивающуюся   символами   &lt;CRLF&gt;. Принимающая сторона не будет предпринимать никаких действий до получения стандартного завершения строки. Синтаксис каждой команды рассматривается ниже вместе с описаниями команд. Общие элементы и параметры рассмотрены в параграфе 4.1.2.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.40pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:305.04pt;">
<div class=block style=" width:305.04pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:135.36pt;">
<div class=block style=" width:135.36pt; height:12.72pt;">
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font0><b>6</b></span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:154.56pt;">
<div class=block style=" width:154.56pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:305.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:18.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0><a name="bookmark5"><b><u>П</u></b></a><b><u>еревод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.96pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:0.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:801.60pt;">
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Команды и отклики состоят из символов ASCII [1]. Когда транспортный сервис обеспечивает 8-битовый (байты или октеты) канал передачи, каждый 7-битовый символ передается с выравниванием по правому краю (старший бит октета имеет нулевое значение). Стандартный сервис SMTP обеспечивает поддержку только 7-битовых символов. Клиент-отправитель SMTP, который не смог согласовать подходящее расширение с сервером, <b>не должен </b>передавать сообщений, содержащих информацию в старших битах октетов. Если в нарушение этого правила такое сообщение передается, принимающий сервер SMTP <b>может </b>сбросить старший бит или отвергнуть сообщение как некорректное. В общем случае транслятору SMTP <b>рекомендуется </b>предполагать, что содержимое принятого сообщения корректно и, предполагая, что конверт позволяет это сделать, транслировать сообщение без проверки его содержимого. Конечно, если содержимое некорректно и путь передачи не позволяет его воспринять, такое решение может привести к доставке конечному адресату искаженного сообщения. Системы доставки SMTP <b>могут </b>отвергать (возвращать -bounce) такие сообщения, не доставляя их. Никаким передающим системам SMTP не дозволяется передавать envelope-команды, содержащие символы, не включенные в набор US-ASCII; принимающим системам <b>рекомендуется </b>отвергать такие команды, используя стандартный отклик 500 syntax error - invalid character.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Клиент <b>может </b>у сервера передачу 8-битового содержимого сообщений с использованием расширенных возможностей SMTP (8BITMIME [20]). Серверам SMTP <b>следует </b>поддерживать режим 8BITMIME. Однако это <b>не должно </b>трактоваться как разрешение на неограниченную передачу 8-битовых символов. Для отправителя <b>недопустимо </b>запрашивать режим 8BITMIME для передачи данных, в которых для старшего бита не используется соответствующее кодирование MIME; серверы <b>могут </b>отвергать такие сообщения.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Используемая в этом документе металингвистическая нотация соответствует нотации Augmented BNF, принятой в документах почтовой системы Internet. Читателям, которые незнакомы с этим синтаксисом, следует прочесть спецификацию ABNF [8]. Для ясности термины метаязыка, используемые в тексте, обозначены угловыми скобками (например, &lt;CRLF&gt;).</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b><i>3. Обзор процедур SMTP</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">В этой главе приведены описания процедур, используемых в SMTP: инициирование сеансов, почтовые транзакции, пересылка почты, проверка имен почтовых ящиков, обработка списков рассылки, а также организация и завершение обмена данными. Вопросы трансляции почты, почтовых доменов и смены ролей рассматриваются в конце главы. В Приложении D рассматривается несколько конкретных сценариев.</span></div>
<div class=paragraph style=" padding:3.60pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b>3.1&nbsp;Инициирование сеанса</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Сеанс SMTP инициируется, когда клиент соединяется с сервером и сервер отвечает соответствующим сообщением. Реализация сервера SMTP <b>может </b>включать идентификацию своих программ и сведения об их версии в отклик подтверждения соединения после кода 220, на практике эта информация позволяет упросить поиск и решение проблем. Реализации <b>могут </b>включать возможность запрета передачи данных о программе и ее версии в целях безопасности. Хотя некоторые системы также указывают свои контактные адреса для связанных с почтой проблем, это не может служить заменой требуемого стандартом адреса postmaster (см. параграф 4.5.1).</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Протокол SMTP позволяет серверу формально отвергать транзакцию, позволяя по-прежнему изначальные соединения: код 554 <b>может </b>возвращаться в открывающем сообщении взамен кода 220. Сервер, использующий такой вариант, <b>должен </b>по-прежнему ждать, пока клиент передаст команду QUIT (см. параграф 4.1.1.10) перед закрытием соединения, а на любую мешающую команду <b>следует </b>возвращать отклик 503 bad sequence of commands (некорректная последовательность команд. Поскольку попытка организации SMTP-соединения с такими системами может приводить к ошибке, серверу, возвращающему код 554, <b>следует </b>передавать вместе с кодом информацию, которая позволит передающей системе понять причину ошибки.</span></div>
<div class=paragraph style=" padding:3.60pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b>3.2&nbsp;Инициирование клиента</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">После того, как сервер передал приглашающее сообщение и клиент получил его, последний обычно передает серверу команду EHLO, идентифицирующую клиента. А дополнение к открытию сеанса использование EHLO показывает, что клиент способен работать с расширенным сервисом и запрашивает у сервера список поддерживаемых расширений. Старые системы SMTP, неспособные поддерживать расширения сервиса и современные клиенты, которым не требуется расширенный сервис с инициируемом почтовом сеансе, <b>могут </b>использовать HELO взамен EHLO. Для серверов <b>недопустимо </b>возвращать расширенные отклики в стиле EHLO на команду HELO. Для конкретной попытки соединения, если сервер возвращает отклик command not recognized (команда не распознана) на EHLO, клиенту <b>следует </b>начать процесс заново и передать команду HELO.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Хост, передающий команду EHLO, идентифицирует в ней себя; команду можно интерпретировать как &laquo;Hello, I am &lt;domain&gt;&raquo; (Привет, я домен …), а для случая EHLO – &laquo;and I support service extension requests&raquo; (я могу …).</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b>3.3&nbsp;Почтовые транзакции</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Почтовая транзакция SMTP состоит из трех этапов. Началом транзакции служит команда MAIL, дающая идентификацию отправителя (в общем случае команда MAIL может быть введена только при отсутствии незавершенных почтовых транзакций; см. параграф 4.1.4.). После этого следует одна или несколько команд RCPT, указывающих получателей сообщения. Последний этап транзакции начинается командой DATA, которая инициирует передачу почтовых данных и завершается индикатором end of mail, который также подтверждает транзакцию. 1.<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>Первым шагом почтовой транзакции является команда MAIL.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.16pt; text-align:left;"><span class=font9>MAIL FROM:&lt;reverse-path&gt; [SP &lt;mail-parameters&gt; ] &lt;CRLF&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 74.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Эта команда говорит получателю SMTP о начале новой почтовой транзакции и сбрасывает все таблицы состояний и буферы, включая любые данные получателя или почтовые данные. Часть &lt;reverse-path&gt; (обратный путь) первого или единственного аргумента команды содержит название почтового ящика отправителя (между скобками &lt; и &gt;), которое может использоваться для передачи отчетов об ошибках (см. параграф 4.2). Восприняв команду, сервер SMTP возвращает отклик 250 OK. Если указанный почтовый ящик по каким-то причинам</span></div>
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span style=" color:rgb(0,0,0);"><b>7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.24pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:12.96pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:135.60pt;">
<div class=block style=" width:135.60pt; height:12.96pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:2.64pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:774.48pt;">
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 46.56pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">неприемлем, сервер <b>должен </b>возвратить отклик, показывающий временной тип отказа - постоянная (т. е., повторится при повторе команды клиентом) или временная (т. е., адрес клиента может быть принят при следующем вызове) ошибка. Несмотря на очевидность этого требования, существуют обстоятельства, при которых возможность восприятия обратного пути невозможно определить, пока не будет получен по крайней мере один прямой путь (в команде RCPT). В таких случаях сервер <b>может </b>воспринять обратный путь (отклик 250) и сообщить о возникновении проблем после получения и проверки прямых путей. Обычно это делается с помощью откликов 550 или 553.</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 46.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Исторически &lt;reverse-path&gt; может содержать больше данных, нежели просто имя почтового ящика, но современным системам <b>не следует </b>использовать маршрутизацию почты отправителем - source routing (см. Приложение C).</span></div>
<div class=paragraph style=" padding:0.00pt 57.12pt 0.00pt 46.56pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Дополнительные параметры &lt;mail-parameters&gt; связываются с согласованным расширением сервиса SMTP (см. 2.2).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt; letter-spacing:-0.55pt;">2.<span style=" letter-spacing:0.00pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Вторым этапом транзакции является команда RCPT.</span></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 46.32pt; text-align:justify; text-indent:18.00pt;"><span class=font9 style=" line-height:11.28pt;">RCPT TO:&lt;forward-path&gt; [ SP &lt;rcpt-parameters&gt; ] &lt;CRLF&gt; <span class=font14>Первый или единственный аргумент этой команды включает прямой путь (обычно имя почтового ящика или домена, заключенное в скобки &lt;&gt;), идентифицирующий получателя. Восприняв команду, сервер SMTP возвращает отклик 250 OK и сохраняет прямой путь. Если известно, что почта не может быть доставлена адресату, сервер SMTP возвращает отклик 550, обычно сопровождаемый строкой типа &quot;no such user - &quot; с именем почтового ящика, для которого невозможна доставка (возможны также другие обстоятельства и коды возврата). Этот этап транзакции может повторяться произвольное число раз.</span></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 46.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Параметр &lt;forward-path&gt; может содержать не только адрес получателя. Исторически &lt;forward-path&gt; может включать маршрут (source routing) к получателю в виде списка промежуточных хостов, однако современным клиентам SMTP <b>не рекомендуется </b>использовать маршрутизацию почты отправителем (см. Приложение C). Сервер <b>должен </b>быть готов к восприятию списка source route в прямом пути, но <b>рекомендуется </b>игнорировать эти маршруты и <b>можно </b>отклонять предлагаемую этим маршрутом трансляцию. Подобно этому сервер <b>может </b>отказаться от приема почты, предназначенной для других хостов или систем. Эти ограничения делают сервер бесполезным как транслятор для клиентов, не полностью поддерживающих функциональность SMTP. Следовательно, для клиентов с ограниченными возможностями <b>недопустимо </b>предполагать, что любой SMTP-сервер в Internet можно использовать для обработки (трансляции - relaying) почты. Если команда RCPT принята без предшествующей команды MAIL, сервер <b>должен </b>возвращать отклик 503 &quot;Bad sequence of commands&quot;. Дополнительные параметры &lt;rcpt-parameters&gt; связываются с согласованным расширением сервиса SMTP (см. параграф 2.2).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.28pt; letter-spacing:-0.65pt;">3.<span style=" letter-spacing:0.00pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Третьим этапом транзакции является обработка команды DATA (или ее аналога для расширенного сервиса).</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 64.32pt; text-align:left;"><span class=font9>DATA &lt;CRLF&gt;</span></div>
<div class=paragraph style=" padding:0.48pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Восприняв команду, сервер SMTP возвращает промежуточный отклик 354 Intermediate и рассматривает все</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">последующие строки, вплоть (но не включая) до индикатора завершения почтовых данных. При успешном приеме</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">всего текста сервер сохраняет полученные данные и возвращает отправителю отклик 250 OK.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Поскольку почтовые данные передаются через коммуникационный канал, завершение данных должно быть</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.08pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">указано таким образом, чтобы можно было возобновить командный диалог. Протокол SMTP использует для</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">обозначения конца почтовых данных точку в пустой строке. Для предотвращения ошибок в случаях наличия</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">такой  последовательности  в  пользовательских  данных  применяется  специальная  процедура  (transparency),</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">описанная в параграфе 4.5.2).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Индикатор завершения почтовых данных также подтверждает почтовую транзакцию и говорит серверу SMTP как</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 46.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">обрабатывать сохраненные пользовательские и почтовые данные. Восприняв данные, сервер SMTP возвращает</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">отклик 250 OK. Сбой при обработке команды DATA может происходить только на двух этапах обмена данными:</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 63.60pt; text-align:justify; text-indent:-15.84pt;"><span class=font14 style=" line-height:11.28pt;"><b>•&nbsp; &nbsp; &nbsp;</b>Если команды MAIL и RCPT не были введены или были отвергнуты, сервер <b>может </b>возвращать отклик command out of sequence (503) или no valid recipients (554 - нет корректных получателей) в ответ на команду DATA. При получении одного из таких откликов (или любого отклика 5yz) для клиента <b>недопустима </b>передача данных серверу (точнее, передача данных <b>недопустима</b>, пока не будет получен отклик 354 ).</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 63.60pt; text-align:justify; text-indent:-15.84pt;"><span class=font14 style=" line-height:11.28pt;"><b>•&nbsp; &nbsp; &nbsp;</b>Если команда воспринята и передан отклик 354, невыполнение команды DATA может быть связано только с неполнотой почтовой транзакции (например, не указан адресат), недоступностью ресурсов (включая и неожиданную недоступность сервера) или отказом сервера от обработки сообщения в соответствии с заданной политикой или по иным причинам.</span></div>
<div class=paragraph style=" padding:0.24pt 56.40pt 0.00pt 46.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Однако на практике некоторые серверы не проверяют адресата после приема текста сообщения. Таким серверам <b>следует </b>трактовать отказ для одного или нескольких получателей как &laquo;отказ обусловленный другим отказом&raquo; (subsequent failure) &quot; и возвращать почтовое сообщение, как указано в главе 6. Использование отклика 550 mailbox not found (или его эквивалента) после восприятия данных делает для клиента сложной или невозможной диагностику причины отказа.</span></div>
<div class=paragraph style=" padding:0.24pt 56.40pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">При использовании формата RFC 822 [7, 32] почтовые данные включают элементы заголовка, такие как Date, Subject, To, Cc, From. Серверам SMTP <b>не рекомендуется </b>отвергать сообщения на основе дефектов в заголовках RFC 822 и MIME [12] или в теле сообщения. В частности, <b>недопустимо </b>отвергать сообщения, в которых число полей Resent не соответствует или Resent-to появляется без Resent-from и/или Resent-date. Команды почтовых транзакций <b>должны </b>использоваться в приведенном выше порядке.</span></div>
<div class=paragraph style=" padding:5.76pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font4 style=" letter-spacing:-0.55pt;"><b>3.4 Пересылка для коррекции и обновления адресов</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Поддержка пересылки чаще всего требуется для консолидации адресов и упрощения адресации в сети предприятия (или применительно к такой сети) и реже для случаев изменения адресов. Пересылка без уведомления отправителя (Silent forwarding) в целях обеспечения безопасности или иных целях весьма распространена сегодня в Internet.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:13.44pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:7.92pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:21.36pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:72.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:285.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:12.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0><a name="bookmark8"><b><u>П</u></b></a><b><u>еревод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.96pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:2.40pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:390.00pt;">
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">В обоих перечисленных случаях приходится решать вопрос сокрытия информации (в некоторых случаях -безопасности) - следует ли показывать отправителю данные о пересылке почты. Это может быть особо важным, когда конечный адресат просто недоступен для отправителя. Следовательно, механизм пересылки, описанный в параграфе 3.2 работы RFC 821 и особенно строки откликов 251 (скорректированный получатель) и 551 (команда RCPT) должны осторожно оцениваться при разработке и, когда это возможно, при настройке конфигурации системы. В частности:</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 72.96pt; text-align:justify; text-indent:-15.84pt;"><span class=font14 style=" line-height:11.28pt;"><b>•&nbsp; &nbsp; &nbsp;</b>Сервер <b>может </b>пересылать сообщения, когда ему известно об изменении адреса. При такой пересылке сервер <b>может </b>предоставлять сведения о смене адреса с кодом 251 или &laquo;по-тихому&raquo; пересылать сообщение, возвращая код 250. При использовании кода 251 <b>недопустимо </b>предполагать, что клиент будет обновлять информацию об адресе получателя на основе принятого от сервера отклика.</span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 72.96pt; text-align:justify; text-indent:-15.84pt;"><span class=font14 style=" line-height:11.28pt;"><b>•&nbsp; &nbsp; &nbsp;</b>Сервер <b>может </b>отвергнуть или &laquo;завернуть&raquo; сообщения, когда их невозможно доставить по указанному адресу. В таких случаях сервер <b>может </b>сообщить о смене адреса в отклике 551 или отвергнуть сообщение как недоставляемое с кодом 550 без дополнительных сведений. При использовании кода 551 <b>недопустимо </b>предполагать, что отправитель будет обновлять адрес на основе полученных сведений или доводить эту информацию до пользователя.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Реализациям серверов SMTP, поддерживающим отклики с кодами 251 и/или 551, настоятельно рекомендуется обеспечивать конфигурационный механизм, позволяющий отключить дополнительную информацию для сайтов, которые могут использовать ее нежелательным способом.</span></div>
<div class=paragraph style=" padding:3.84pt 373.44pt 0.00pt 57.12pt; text-align:left;"><span class=font3 style=" line-height:19.92pt;"><b>3.5 Отладочные команды <i>3.5.1 Обзор</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Протокол SMTP обеспечивает команды для проверки имен пользователей или получения содержимого списков рассылок. Такие операции осуществляются с помощью команд VRFY и EXPN, которые получают текстовые строки в качестве аргументов. Реализациям <b>следует </b>поддерживать команды VRFY и EXPN (особенности использования этих команд рассмотрены в параграфах 3.5.2 и 7.3).</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Для команды VRFY параметром является имя пользователя, к которому может добавляться доменное имя (см. ниже). При получении нормального отклика (код 250) такой отклик <b>может </b>включать полное имя пользователя и <b>должен </b>включать название почтового ящика. Текст отклика <b>должен </b>использовать одну из двух возможных форм:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 89.28pt; text-align:left;"><span class=font9>User Name &lt;local-part@domain&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.88pt; text-align:left; text-indent:32.88pt;"><span class=font9 style=" line-height:11.52pt;">local-part@domain <span class=font14>Когда имя, указанное в команде VRFY может идентифицировать более одного почтового ящика, сервер <b>может </b>отметить неоднозначность или предложить в отклике несколько вариантов. Иными словами, в таких случаях возможны любые из перечисленных вариантов отклика на команду VRFY:</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 89.76pt; text-align:left;"><span class=font9>553 User ambiguous</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell rowspan="2" valign="top" style=" width:72.00pt;">
<div class=block style=" width:72.00pt; height:52.32pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14>или</span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:522.96pt;">
<div class=block style=" width:522.96pt; height:11.04pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt; height:41.28pt;">
</td>
<td class=cell colspan="2" rowspan="2" valign="top" style=" width:522.96pt;">
<div class=block style=" width:522.96pt; height:52.32pt;">
<div class=paragraph style=" padding:0.00pt 322.56pt 0.00pt 17.04pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">553- Ambiguous;  Possibilities are 553-Joe Smith &lt;<span style=" color:rgb(0,0,128);"><a href="mailto:jsmith@foo.com"><u>jsmith@foo.com</u></a></span>&gt; 553-Harry Smith &lt;<span style=" color:rgb(0,0,128);"><a href="mailto:hsmith@foo.com"><u>hsmith@foo.com</u></a></span>&gt; 553 Melvin Smith &lt;<span style=" color:rgb(0,0,128);"><a href="mailto:dweep@foo.com"><u>dweep@foo.com</u></a></span>&gt;</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt; height:41.28pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt; height:11.04pt;">
</td>
<td class=cell rowspan="2" valign="top" style=" width:72.00pt;">
<div class=block style=" width:72.00pt; height:13.20pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14>или</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt; height:11.04pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:522.96pt;">
<div class=block style=" width:522.96pt; height:2.16pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:343.68pt;">
<div class=paragraph style=" padding:0.00pt 349.44pt 0.00pt 89.04pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">553-Ambiguous;  Possibilities 553- &lt;<span style=" color:rgb(0,0,128);"><a href="mailto:jsmith@foo.com"><u>jsmith@foo.com</u></a></span>&gt; 553- &lt;<span style=" color:rgb(0,0,128);"><a href="mailto:hsmith@foo.com"><u>hsmith@foo.com</u></a></span>&gt; 553 &lt;<span style=" color:rgb(0,0,128);"><a href="mailto:dweep@foo.com"><u>dweep@foo.com</u></a></span>&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">При нормальных условиях клиенту, получившему отклик 553, следует довести эту информацию до пользователя. Использование приведенных здесь форм и ключевых слов user ambiguous (пользователя не определить однозначно) или ambiguous (неоднозначность), возможно дополненных расширенными кодами отклика (типа рассмотренных в работе [34]), помогает при необходимости обеспечивать автоматический перевод на другие языки. Клиенты с высоким уровнем автоматизации и поддержкой других языков могут попытаться перевести отклик, возвратить пользователю нестандартную индикацию или предпринять некоторые автоматические операции типа обращения к службе каталогов для получения дополнительных данных перед возвратом отклика пользователю.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Для команды EXPN строка параметров идентифицирует список рассылки и при успешном выполнении команды возвращается отклик 250, который <b>может </b>включать многострочный список пользователей списка и <b>должен </b>включать имена почтовых ящиков из списка.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">На некоторых хостах различия между списками рассылок и псевдонимами выражены весьма слабо, поскольку оба типа записей могут сохраняться в единой структуре данных и могут существовать списки рассылок, содержащие единственный адрес. Если дается запрос на применение команды VRFY к списку рассылок, позитивный отклик <b>может </b>быть возвращен, если направленное по адресу списка сообщение может быть доставлено кому-либо из списка, в остальных случаях <b>следует </b>возвращать сообщение об ошибке (например, отклик 550 That is a mailing list, not a User – &laquo;это список рассылки, а не пользователь&raquo; или 252 Unable to verify members of mailing list &laquo;невозможно проверить членов списка&raquo;). Если делается запрос имени пользователя из списка, сервер <b>может </b>давать позитивный отклик, содержащий список из одного имени, или сообщение об ошибке (например, 550 That is a user name, not a mailing list – &laquo;это имя пользователя, а не список рассылки&raquo;).</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">При успешном выполнении возвращается многострочный отклик (обычный для EXPN), содержащий имя одного почтового ящика в каждой строке. Ситуации с неоднозначными запросами были рассмотрены выше. Термин User name (имя пользователя) является недостаточно четким и должен использоваться осмотрительно. Реализации команд VRFY и EXPN <b>должны</b>, по крайней мере, распознавать локальные почтовые ящики как имена пользователей. Однако в сети Internet зачастую один хост обслуживает почту для множества доменов, хостам (особенно  тем,  которые  работают  с  разными  доменами)  <b>следует  </b>обеспечивать  такую  функциональность  и</span></div>
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span style=" color:rgb(0,0,0);"><b>9&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.24pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:72.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:285.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:12.96pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:135.60pt;">
<div class=block style=" width:135.60pt; height:12.96pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:2.40pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:760.08pt;">
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.56pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">воспринимать форму <span style=" color:rgb(0,0,128);"><a href="mailto:local-part@domain"><u>local-part@domain</u></a></span><span style=" color:rgb(0,0,255);"> </span>как имя пользователя; хосты также <b>могут </b>распознавать как &laquo;имена пользователей&raquo; строки других типов.</span></div>
<div class=paragraph style=" padding:0.00pt 56.88pt 0.00pt 28.56pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Случай получения имен почтовых ящиков из списка рассылок требует многострочных откликов типа приведенного ниже (C - клиент, S - сервер; <i>прим. перев.):</i></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 61.20pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">C: EXPN Example-People</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 61.44pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">S: 250-Jon Postel &lt;<span style=" color:rgb(0,0,128);"><a href="mailto:Postel@isi.edu"><u>Postel@isi.edu</u></a></span>&gt;</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 61.44pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">S: 250-Fred Fonebone &lt;<span style=" color:rgb(0,0,128);"><a href="mailto:Fonebone@physics.foo-u.edu"><u>Fonebone@physics.foo-u.edu</u></a></span>&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 264.48pt 0.00pt 28.56pt; text-align:left; text-indent:32.88pt;"><span class=font9 style=" line-height:11.76pt;">S: 250 Sam Q. Smith &lt;<span style=" color:rgb(0,0,128);"><a href="mailto:SQSmith@specific.generic.com"><u>SQSmith@specific.generic.com</u></a></span>&gt; или</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 61.20pt; text-align:left;"><span class=font9>C: EXPN Executive-Washroom-List</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify; text-indent:32.64pt;"><span class=font9 style=" line-height:11.52pt;">S: 550 Access Denied to You. <span class=font14>Символьная строка аргументов VRFY и EXPN не может быть дополнительно ограничена вследствие различных концепций имен пользователей и почтовых ящиков в разных реализациях. В некоторых системах аргументом команды EXPN может быть имя файла, содержащего список рассылки, но здесь опять приходится сталкиваться с различными концепциями именования файлов в Internet. Отметим также, что в силу исторических причин вариации возвращаемых этими командами откликов достаточно велики и выполнять интерпретацию откликов <b>следует </b>очень осторожно и только в целях диагностики.</span></span></div>
<div class=paragraph style=" padding:6.24pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font2><b><i>3.5.2&nbsp;Нормальные отклики VRFY</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Когда возвращается нормальный (код 2yz или 551) в результате запроса VRFY или EXPN, отклик обычно включает имя почтового ящика, т. е., <b>должна </b>присутствовать запись вида &lt;local-part@domain&gt;, где domain является полным (fully qualified) доменным именем. В ситуациях, исключающих нарушение требований данной спецификации, <b>может </b>текстовая строка произвольной формы. Для облегчения анализа и разделения имени почтового ящика и данных человека (или компании) адрес <b>следует </b>выводить в угловых скобках. При возврате адресов (а непроизвольной текстовой строки) команды EXPN и VRFY <b>должны </b>возвращать только корректные значения доменной части адреса, которые можно использовать в команде RCPT. Следовательно, если адрес подразумевает доставку программе или другой системе, <b>должно </b>указываться имя почтового ящика, используемого для доступа к адресату. Возврат путей (явные маршруты source route) для команд VRFY и EXPN недопустим.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Реализациям серверов <b>следует </b>поддерживать обе команды VRFY и EXPN. В Целях безопасности <b>может </b>обеспечиваться локальная возможность отключить эти команды с помощью конфигурационных параметров. Когда эти команды поддерживаются, не требуется работать через трансляторы при разрешенной трансляции. Поскольку обе эти команды были <b>необязательными </b>в спецификации RFC 821, они <b>должны </b>быть указаны как расширения сервиса в отклике EHLO (если команды поддерживаются).</span></div>
<div class=paragraph style=" padding:6.24pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font2><b><i>3.5.3&nbsp;Значения откликов при успешном завершении VRFY или EXPN</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Для серверов <b>недопустим </b>возврат откликов 250 на команды VRFY и EXPN, пока адрес реально не проверен. В частности, для сервера <b>недопустимо </b>возвращать код 250, если его действия ограничились проверкой корректности синтаксиса. В таких случаях <b>следует </b>возвращать код 502 (команда не реализована) или 500 (синтаксическая ошибка, команда не распознана). Как было указано, реализация (в смысле проверки адресов и возврата информации) команд VRFY и EXPN настоятельно рекомендуется. Следовательно, реализации, возвращающие код 500 или 502 для команды VRFY не являются полностью совместимыми с данной спецификацией.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Существуют ситуации, когда адрес представляется корректным но не может быть проверен в реальном масштабе времени (в частности, когда сервер используется при обмене почтой для другого сервера или домена). &laquo;Видимая корректность&raquo; (Apparent validity) в таких случаях будет включать по крайней мере проверку синтаксиса, и может также включать проверку возможности трансляции для указанного адреса. В таких случаях <b>следует </b>возвращать код 252. Эти ситуации связаны с вопросами проверки RCPT, рассмотренными в параграфе 2.1. Аналогично ситуации, описанной в 3.4, коды 251 и 551 могут использоваться для команд VRFY и EXPN, чтобы показать адреса, которые распознаны, но почта для них будет пересылаться или была возвращена. Реализациям в общем случае <b>следует </b>быть более жесткими в вопросах проверки адресов для случая VRFY, нежели для команды RCPT, даже если это будет занимать немного больше времени.</span></div>
<div class=paragraph style=" padding:6.24pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font2><b><i>3.5.4&nbsp;Семантика и использование EXPN</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.56pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Команда EXPN зачастую очень полезна для отладки и поиска проблем, связанных со списками рассылок и псевдонимами ко множеству адресов (multiple-target-address alias). Некоторые системы пытаются использовать поиск отправителя в списке рассылки для предотвращения дубликатов. Распространение системы псевдонимов с почтой в Internet для хостов (обычно записи MX и CNAME на серверах DNS), почтовых ящиков (различные типы локальных псевдонимов хоста) и в различных proxy-системах делает почти невозможной стратегию согласованного использования псевдонимов и почтовым системам <b>не следует </b>пытаться решить эту задачу.</span></div>
<div class=paragraph style=" padding:7.44pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font2><b>3.6 Домены</b></span></div>
<div class=paragraph style=" padding:0.24pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">При использовании доменных имен в SMTP допускаются только преобразуемые (resolvable), полные доменные имена (FQDN). Иными словами, допустимы имена, которые включены в записи MX RR или A RR (см. главу 5), а также имена, указанные в записях CNAME RR серверов имен (DNS). <b>Недопустимо </b>использование локальных имен и неполных доменных имен. Однако существуют два исключения из правил FQDN:</span></div>
<div class=paragraph style=" padding:0.24pt 56.88pt 0.00pt 45.60pt; text-align:left; text-indent:-16.80pt;"><span class=font14 style=" line-height:11.28pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Доменное имя в команде EHLO <b>должно </b>быть основным именем хоста (primary host name - доменное имя, включенное в запись A RR) или, если хост не имеет имени, - &laquo;дословным&raquo; адресом в соответствии с 4.1.1.1.</span></div>
<div class=paragraph style=" padding:0.24pt 56.40pt 0.00pt 45.60pt; text-align:left; text-indent:-16.80pt;"><span class=font14 style=" line-height:11.28pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Зарезервированное имя почтового ящика postmaster может использоваться в команде RCPT без указания домена (см. параграф 4.1.1.3) и <b>должно </b>восприниматься сервером.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:28.08pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:7.92pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span style=" color:rgb(0,0,0);"><b>10</b></span><span style=" color:rgb(0,0,0);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:21.36pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:303.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:11.52pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0><a name="bookmark10"><b><u>П</u></b></a><b><u>еревод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.96pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:1.44pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:758.88pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b>3.7&nbsp;Трансляция</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Доступность записей MX (Mail exchanger) в DNS [22, 27] избавляет от необходимости использования явно заданных маршрутов в почтовой системе Internet. С явной маршрутизацией почты связано множество проблем, делающих такое использование совершенно нежелательным. Клиентам SMTP <b>не следует </b>генерировать явные маршруты source route за исключением особых ситуаций. Серверы SMTP <b>могут </b>отказывать в трансляции или не воспринимать сообщения в указанным отправителем маршрутом. Обнаружив маршрутную информацию, сервер SMTP может игнорировать ее и просто переслать почту конечному адресату, указанному в последнем элементе заданного маршрута (серверам <b>следует </b>поступать именно так). Встречаются случаи некорректного использования имен адресатов, отсутствующих в записях DNS с использованием преобразования имен на промежуточных хостах, указанных в маршруте source route. При повреждении заданного маршрута в таких случаях возникают проблемы. Существует несколько причин, по которым для клиентов SMTP <b>недопустима </b>генерация некорректных маршрутов source route или путей, зависящих от последовательного преобразования имен.</span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Когда маршруты source route не используются, процесс, описанный в RFC 821 для конструирования обратного пути из прямого, неприменим и обратный путь во время доставки будет просто адресом, указанным в команде MAIL. Транслирующий сервер SMTP обычно определяется из записи MX и не является системой окончательной доставки почты. Такой сервер может принимать или отвергать трансляцию почты аналогично восприятию или отказу для почты локальных пользователей. Если сервер принял трансляцию, от становится клиентом SMTP, организуя канал передачи следующему серверу SMTP, указанному в DNS (в соответствии с правилами, описанными в главе 5), и передает ему почту. Если сервер отвергает трансляцию почты для какого-либо адреса, ему <b>следует </b>возвращать отклик 550.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Существует множество клиентов, передающих почту (часто эти же программы служат для приема почты по протоколу POP3 или IMAP), которые не обеспечивают полную поддержку данной спецификации (например, поддержка очередей для последующей передачи). Для таких клиентов обычной практикой является организация частного соглашения с сервером для отправки ему всей почты с целью последующей обработки и доставки. Как было отмечено выше, SMTP не является идеальным решением для таких задач и работа системы определяется стандартизованными протоколами представления почты, которые могут время от времени меняться с учетом реального опыта. В любом случае, частный характер соглашения между сервером и клиентами выводит этот вопрос за пределы данной спецификации.</span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Важно отметить, что записи MX могут указывать на серверы SMTP, которые действуют как шлюзы в другие среды, а не только выполняют трансляцию и окончательный прием почты (см. параграф 3.8 и главу 5).</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Если сервер SMTP принял на себя задачу трансляции почты и позднее обнаружил, что получатель указан некорректно или почту невозможно доставить по каким-либо причинам, этот сервер <b>должен </b>создать уведомление о невозможности доставки почты (undeliverable mail) и переслать его отправителю недоставленного сообщения, указанному в обратном пути. Для уведомления <b>следует </b>(по возможности) использовать стандартные форматы (см., например [24, 25]). Это уведомление должно посылаться сервером SMTP с хоста-транслятора или хоста, который обнаружил невозможность доставки. Естественно, что для серверов SMTP <b>недопустима </b>отправка уведомлений о невозможности доставки уведомлений (о невозможности доставки почты). Одним из способов предотвращения петель при передаче сообщений об ошибках является использование пустой строки обратного пути (null reverse-path) в команде MAIL при передаче уведомления. При передаче такого сообщения строка обратного пути <b>должна </b>быть пустой – null (см. параграф 4.5.5). Команда MAIL с пустым обратным путем имеет вид: <span class=font10>MAIL FROM:&lt;&gt;</span></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Как обсуждалось в параграфе 2.4.1, транслятор SMTP не обязан проверять и обрабатывать заголовки и тело транслируемых сообщений, а также <b>недопустимы </b>любые действия по отношению к сообщению, за исключением добавления к заголовку строки &quot;Received:&quot; (см. параграф 4.4) и (необязательной) попытки обнаружения петель (см. 6.2).</span></div>
<div class=paragraph style=" padding:3.60pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b>3.8&nbsp;Почтовые шлюзы</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Описанные выше трансляторы работают в транспортной среде Internet SMTP, однако записи MX и разные формы явной маршрутизации могут потребовать использования промежуточных серверов SMTP, которые будут обеспечивать преобразование почты между различными транспортными системами. Как было отмечено в параграфе 2.3.8, такие системы, работающие на границах между двумя системами транспортного сервиса, называются шлюзами или почтовыми шлюзами (gateway, gateway SMTP).</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Шлюзование почты между различными почтовыми средами (разные форматы и протоколы) является сложной задачей, стандартизация которой также непроста. Однако можно сформулировать некие требования общего плана для шлюзов между Internet и другими почтовыми средами.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>3.8.1 Поля заголовка при работе со шлюзом</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Поля заголовка могут быть при необходимости переписаны когда сообщение передается через границу между почтовыми средами. Несмотря на приведенные в параграфе 2.4.1 запреты локальная часть адреса получателя может быть изменена шлюзом; допускается также проверка содержимого почты.</span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Другие почтовые системы при передаче сообщений в Internet часто используют подмножество заголовков RFC 822 или обеспечивает похожую функциональность с использованием другого синтаксиса, но некоторые из таких почтовых систем не имеют эквивалента конвертов SMTP. Следовательно, когда сообщение покидает почтовую среду Internet, может потребоваться включение информации из конверта SMTP в заголовок сообщения. Возможным решением будет создание новых полей заголовка для передачи информации из конверта (например, X-SMTP-MAIL: и X-SMTP-RCPT:). Однако такое решение потребует изменения почтовых программ в чужой среде и может привести к разглашению частной информации (см. параграф 7.2).</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:29.52pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:303.84pt;">
<div class=block style=" width:303.84pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:54.00pt;">
<div class=block style=" width:54.00pt; height:12.72pt;">
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font0><b>11</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 110.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:303.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.64pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:137.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:154.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:440.40pt;">
<div class=block style=" width:440.40pt; height:12.96pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:154.56pt;">
<div class=block style=" width:154.56pt; height:12.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 18.96pt; text-align:left;"><span class=font0><b><u>Перевод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:2.40pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:753.36pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>3.8.2&nbsp;Строки Received: при использовании шлюзов</i></b></span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">При пересылке сообщения в среду Internet или из нее шлюз <b>должен </b>включить в заголовок свою строку Received:, но</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>недопустимо </b>менять строки Received:, уже имеющиеся в заголовке.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Поля Received: сообщений из чужих сред могут не соответствовать данной спецификации. Однако наиболее важным</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">аспектом использования строк Received: является диагностика сбоев в почтовой системе и такая отладка может быть</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">сильно осложнена шлюзами, которые пытаются &laquo;исправить&raquo; строки Received:. Другим важным аспектом обработки</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">трассировочных полей из других (не SMTP) сред является то, что для принимающей системы <b>недопустимо </b>отвергать</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">почту на основе формата полей трассировки и <b>следует </b>сохранять максимум здравомыслия при встрече с неожиданной</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">информацией или форматами полей трассировки.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Шлюзу следует указывать среду и протокол с помощью поля via в строке Received, создаваемый шлюзом.</span></div>
<div class=paragraph style=" padding:6.24pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font2><b><i>3.8.3&nbsp;Адресация при использовании шлюзов</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Со стороны Internet шлюзу <b>следует </b>воспринимать все корректные форматы адресов в командах SMTP и заголовках RFC 822, а также все корректные сообщения RFC 822. Генерируемые шлюзом адреса и заголовки <b>должны </b>соответствовать применимым стандартам Internet (включая данную спецификацию и RFC 822). Шлюзы подчиняются тем же правилам обработки маршрутов source route, которые описаны в параграфе 3.3 для других систем SMTP.</span></div>
<div class=paragraph style=" padding:6.24pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font2><b><i>3.8.4&nbsp;Другие поля заголовков при использовании шлюзов</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Шлюз <b>должен </b>обеспечивать соответствие требованиям Internet всех полей заголовков в сообщениях, передаваемых в почтовую среду Internet. В частности, все адреса в полях From:, To:, Cc: и т. п. <b>должны </b>преобразовываться (если нужно) в соответствии с синтаксисом RFC 822, <b>должны </b>указывать только полные доменные имена и <b>должны </b>быть эффективны и полезны для передачи откликов. Алгоритму, используемому для преобразования почты Internet в другие форматы, <b>следует </b>обеспечивать доставку сообщений об ошибках из чужой почтовой среды по пути возврата из конверта SMTP, а не отправителю, указанному в поле From: (или других полях) заголовка RFC 822.</span></div>
<div class=paragraph style=" padding:6.24pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font2><b><i>3.8.5&nbsp;Конверты при работе со шлюзами</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">При пересылке сообщений из других сред в Internet шлюзу <b>следует </b>устанавливать в конверте путь возврата в соответствии с адресом возврата сообщений об ошибках, если этот адрес предоставляется чужой средой. Если в чужой среде нет эквивалентной концепции, шлюз должен установить и использовать наилучшее приближение (адрес исходного отправителя сообщения при отсутствии других вариантов).</span></div>
<div class=paragraph style=" padding:7.20pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font2><b>3.9&nbsp; Разрыв сеансов и соединений</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Соединение SMTP разрывается при получении от клиента команды QUIT. Сервер возвращает в ответ на эту команду</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">позитивный отклик и закрывает соединение.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Для серверов SMTP <b>недопустимо </b>преднамеренно закрывать соединения за исключением следующих ситуаций:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b>•     </b>Получение команды QUIT и отклик на нее с кодом 221.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 45.60pt; text-align:justify; text-indent:-16.80pt;"><span class=font14 style=" line-height:11.28pt;">•Определение необходимости отключения (shut down) сервиса SMTP и возврат кода 421. Такой отклик может выдаваться после получения сервером любой команды или (при необходимости) асинхронно (независимо от команд) в предположении, что клиент будет получать отклик после ввода следующей команды.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">В   частности,   разрыв   соединения   сервером   в   ответ   на   непонятную   команду   является   нарушением   данной</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">спецификации. Ожидается, что серверы будут терпимы к неизвестным командам, возвращая в ответ на них код 500 и</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">ожидая дальнейших инструкций от клиента.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Серверам SMTP, которые отключаются (shut down) путем внешнего воздействия, <b>следует </b>пытаться передать клиенту</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">строку, содержащую код 421, до завершения работы. Клиент SMTP обычно будет получать код 421 после передачи</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">следующей команды.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Клиентам  SMTP, узнавшим о закрытии соединения, сбросе или других коммуникационных сбоях вследствие</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">неконтролируемых клиентом событий, для обеспечения устойчивости почтовой системы <b>следует  </b>(это отчасти</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">противоречит данной спецификации, но в некоторых случаях просто необходимо) трактовать почтовую транзакцию</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">как при получении отклика 451 и действовать в соответствии с этим.</span></div>
<div class=paragraph style=" padding:7.44pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font2><b>3.10&nbsp; Почтовые списки и псевдонимы</b></span></div>
<div class=paragraph style=" padding:0.24pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Хостам SMTP <b>следует </b>поддерживать как псевдонимы, так и списки для обеспечения групповой рассылки сообщений. Когда сообщение доставляется или пересылается по каждому адресу из списка, адрес возврата в конверте (MAIL FROM:) <b>должен </b>заменяться на адрес администратора списка. Однако в таких случаях заголовок сообщения [32] <b>должен </b>сохраняться неизменным; в частности, не должно меняться поле From.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.56pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Одним из важных свойств почтовой системы является механизм доставки одного сообщения множеству адресатов за счет преобразования (expanding или exploding) псевдо-адреса в список реальных адресов получателей. Когда сообщение передается по такому псевдо-адресу (иногда его называют exploder), копия этого сообщения пересылается по каждому адресу из списка. Серверу <b>следует </b>просто использовать адреса из списка, применение эвристики или проверки соответствия для исключения некоторых адресов (например, отправителя исходного сообщения) настоятельно не рекомендуется. Будем называть псевдо-адреса списками (list, mail list) или псевдонимами (alias) в зависимости от способа получения адресов из списка.</span></div>
<div class=paragraph style=" padding:6.24pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font2><b><i>3.10.1 Псевдонимы</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Для преобразования псевдонима почтовая программа-получатель просто заменяет в заголовке псевдо-адреса каждым адресом из списка, сохраняя неизменными остальную часть конверта и тело сообщения. После этого сообщения доставляются или пересылаются по всем адресам.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:32.64pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.64pt;">
<div class=block style=" width:302.64pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:137.76pt;">
<div class=block style=" width:137.76pt; height:12.72pt;">
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font0><b>12</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:154.56pt;">
<div class=block style=" width:154.56pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.64pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:137.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:154.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:11.76pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0><a name="bookmark12"><b><u>П</u></b></a><b><u>еревод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.96pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:1.20pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:801.60pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>3.10.2 Списки</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Почтовые списки обеспечивают перераспределение (redistribution), а не пересылку (forwarding) сообщений. Для преобразования списка почтовая программа-получатель заменяет в конверте псевдо-адрес реальными адресами из списка. Адрес возврата в конверте заменяется на адрес администратора списка (не отправителя сообщения), который обычно контролирует содержимое списков и доставку.</span></div>
<div class=paragraph style=" padding:2.88pt 374.16pt 0.00pt 56.64pt; text-align:left;"><span class=font3 style=" line-height:21.36pt;"><b><i>4. Спецификации SMTP </i>4.1 Команды SMTP</b></span></div>
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>4.1.1 Семантика и синтаксис команд</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Команды SMTP определяют передачу почты и функции, запрашиваемые пользователем. Команды представляют собой текстовые строки, завершающиеся последовательностью &lt;CRLF&gt;. В командах могут содержаться буквы (латиницы - <i>прим. перев.</i>), отделенные пробелом от параметров. В целях повышения уровня интероперабельности получатели SMTP должны быть терпимы к пробелам перед командой или перед завершающей последовательностью &lt;CRLF&gt;. Синтаксис локальной части имени почтового ящика соответствует соглашениям принимающего сайта и синтаксису, описанному в параграфе 4.1.2. Команды SMTP обсуждаются ниже, а рассмотрению откликов посвящен параграф 4.2.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Почтовая транзакция включает несколько объектов данных, используемых в качестве аргументов различных команд. Обратный пути (reverse-path) является аргументом команды MAIL, прямой пути (forward-path) – аргументом RCPT, а данные – аргументом команды DATA. Эти аргументы или объекты данных должны передаваться и сохраняться до завершения приема данных, указывающих окончание почтовой транзакции. Для каждого типа данных (прямой и обратный путь и почтовые данные) используются различные буферы. Конкретная команда приводит к добавлению (append) информацию в конец соответствующего буфера или приводит к созданию одного или нескольких буферов. Некоторые команды (RSET, DATA, QUIT) не поддерживают параметров. В отсутствие специфических расширений, предлагаемых сервером и принимаемых клиентом, для последних <b>недопустимо </b>передавать параметры таким командам, а серверу <b>следует </b>отвергать команды как в случаях некорректного синтаксиса.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font1 style=" line-height:11.28pt;"><b>4.1.1.1&nbsp;Расширенное приветствие (EHLO) или стандартное приветствие (HELO)</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Эти команды используются для представления SMTP-клиента серверу SMTP. Поле аргументов содержит полное доменное имя клиента SMTP, если такое имя существует. В тех случаях, когда клиент SMTP не имеет значимого доменного имени (например, при динамическом выделении адресов и недоступности обратного преобразования), клиентам <b>следует </b>передавать дословный адрес (см. параграф 4.1.3), за которым может следовать информационное поле, помогающее идентифицировать клиентскую систему. Сервер SMTP представляет себя клиенту в данном соединении с помощью отклика на команду приветствия.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Клиентам SMTP следует начинать сессию SMTP с помощью команды EHLO. Если сервер SMTP поддерживает расширенные службы SMTP, он будет передавать позитивный отклик, сообщение о сбое или сообщение об ошибке. Если сервер SMTP (в нарушение данной спецификации) не поддерживает никакого расширенного сервиса SMTP, он будет генерировать в ответ сообщение об ошибке. Старые клиенты SMTP <b>могут </b>(как обсуждалось выше) использовать команду HELO (в соответствии с RFC 821) взамен EHLO, серверы <b>должны </b>поддерживать команды HELO и давать на них правильный отклик. В любом случае клиент <b>должен </b>использовать команду HELO или EHLO до начала почтовой транзакции.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Эти команды и отклики 250 OK на них подтверждают, что клиент и сервер SMTP находят в начальной стадии, в которой нет выполняемых транзакций, а все таблицы состояния и буфера еще пустые. Синтаксис:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 89.04pt; text-align:left;"><span class=font9>ehlo<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>= &quot;EHLO&quot; SP Domain CRLF</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 89.04pt; text-align:left;"><span class=font9>helo<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>= &quot;HELO&quot; SP Domain CRLF</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Обычно в ответ на команду EHLO возвращается многострочный отклик, каждая строка которого содержит ключевое слово и может включать один или несколько параметров. В соответствии с требованиями к нормальному синтаксису многострочных откликов ключевые слова следуют после кода 250 и дефиса (для всех строк, кроме последней) или пробела (в последней строке). Ниже приведен пример позитивного отклика с использованием нотации ABNF и символов завершения [8]:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 89.04pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">ehlo-ok-rsp  =    ( &quot;250&quot;<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>domain [ SP ehlo-greet ] CRLF )</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 159.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">/ (    &quot;250-&quot;<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp;</span>domain [ SP ehlo-greet ] CRLF</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 180.96pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">*( &quot;250-&quot;<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp;</span>ehlo-line<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>CRLF )</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 197.04pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">&quot;250&quot;<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>SP ehlo-line<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>CRLF  )</span></div>
<div class=paragraph style=" padding:5.04pt 0.00pt 0.00pt 89.04pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">ehlo-greet   = 1*(%d0-9 / %d11-12 / %d14-127)</span></div>
<div class=paragraph style=" padding:0.00pt 209.04pt 0.00pt 89.04pt; text-align:left; text-indent:70.32pt;"><span class=font9 style=" line-height:10.08pt;">; строка символов, не содержащая CR или LF ehlo-line    = ehlo-keyword *( SP ehlo-param ) ehlo-keyword = (ALPHA / DIGIT) *(ALPHA / DIGIT / &quot;-&quot;)</span></div>
<div class=paragraph style=" padding:0.00pt 68.64pt 0.00pt 89.04pt; text-align:left; text-indent:70.32pt;"><span class=font9 style=" line-height:10.08pt;">; дополнительный синтаксис ehlo-params в зависимости от ehlo-keyword ehlo-param   = 1*(%d33-127)</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 159.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">; любые символы, включая &lt;SP&gt; и управляющие коды US-ASCII (0-31)</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Хотя в команде EHLO можно использовать любую комбинацию строчных и прописных букв, команда всегда <b>должна </b>распознаваться и обрабатываться как EHLO (заглавные буквы) – это просто расширение практики, указанной в RFC 821 и параграфе 2.4.1.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font1 style=" line-height:11.28pt;"><b>4.1.1.2&nbsp;Начало транзакции (MAIL)</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Эта команда служит для инициирования почтовой транзакции, в которой почтовые данные доставляются на сервер SMTP, который, в свою очередь, доставляет почту в один или несколько почтовых ящиков или передает ее другой</span></div>
<div class=paragraph style=" padding:2.88pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span style=" color:rgb(0,0,0);"><b>13&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.24pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:12.24pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:135.60pt;">
<div class=block style=" width:135.60pt; height:12.96pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:0.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:780.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">почтовой системе (возможно, с использованием SMTP). Поле аргументов содержит обратный путь (reverse-path) и</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">может включать дополнительные параметры. В общем случае команда MAIL может передаваться только в случаях</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">отсутствия незавершенных почтовых транзакций (см. параграф 4.1.4).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Обратный путь указывает почтовый ящик отправителя. В силу исторических причин почтовому ящику может</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">предшествовать список хостов, но такая практика в настоящее время осуждается (см. Приложение C). В некоторых</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">типах сообщений-отчетов, отклики на которые могут порождать петли (например, уведомления о доставке или</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">невозможности доставки) поле обратного пути является пустым (см. параграф 3.7).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Эта команда очищает буферы обратного пути, прямого пути и почтовых данных, а также помещает информацию из</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">командной строки в буфер обратного пути.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Если согласовано использование расширенного сервиса, команда MAIL может содержать дополнительные параметры.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Синтаксис:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9>&quot;MAIL FROM:&quot; (&quot;&lt;&gt;&quot; / Reverse-Path) [SP Mail-parameters] CRLF</span></div>
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" line-height:11.28pt;"><b>4.1.1.3&nbsp;Получатель (RCPT)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Эта команда служит для идентификации отдельного получателя почтовых данных; при необходимости задать</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">множество получателей команда повторяется соответствующее число раз. Поле аргументов содержит прямой путь и</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">может включать дополнительные параметры.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Прямой путь обычно указывает почтовый ящик получателя. Передающим системам <b>не следует </b>генерировать</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">дополнительный список хостов, известный как source route (маршрутизация отправителем). Принимающие системы</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b>должны </b>распознавать синтаксис source route, но им <b>следует </b>вырезать спецификацию, используя доменное имя,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">связанное с почтовым ящиком, как будто отправитель вообще не задавал маршрута.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Подобно этому трансляторам <b>следует </b>пропускать или игнорировать source route, а имена <b>недопустимо </b>копировать в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">поле обратного пути. Когда почта приходит к конечному адресату (прямой путь содержит только почтовый ящик</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">получателя),  сервер  SMTP  помещает  сообщение  в  почтовый  ящик  адресата  в  соответствии  с  принятыми</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">соглашениями.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Например, почта, полученная транслятором xyz.com и содержащая в конверте команды</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9>MAIL FROM:&lt;<span style=" color:rgb(0,0,128);"><a href="mailto:userx@y.foo.org"><u>userx@y.foo.org</u></a></span>&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9>RCPT TO:&lt;@hosta.int,@jkl.org:<span style=" color:rgb(0,0,128);"><a href="mailto:userc@d.bar.org"><u>userc@d.bar.org</u></a></span>&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>обычно будет пересылаться непосредственно на хост d.bar.org в конверте с командами</span></div>
<div class=paragraph style=" padding:0.00pt 388.56pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">MAIL FROM:&lt;<span style=" color:rgb(0,0,128);"><a href="mailto:userx@y.foo.org"><u>userx@y.foo.org</u></a></span>&gt; RCPT TO:&lt;<span style=" color:rgb(0,0,128);"><a href="mailto:userc@d.bar.org"><u>userc@d.bar.org</u></a></span>&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Как указано в Приложении C, хост xyz.com <b>может </b>также транслировать почту через другой хост, используя в конверте команды</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9>MAIL FROM:&lt;<span style=" color:rgb(0,0,128);"><a href="mailto:userx@y.foo.org"><u>userx@y.foo.org</u></a></span>&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9>RCPT TO:&lt;@hosta.int,@jkl.org:<span style=" color:rgb(0,0,128);"><a href="mailto:userc@d.bar.org"><u>userc@d.bar.org</u></a></span>&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font9 style=" line-height:10.08pt; letter-spacing:-0.40pt;">или <span class=font13>(</span>для трансляции через <span class=font13>jkl.org)</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">MAIL FROM:&lt;<span style=" color:rgb(0,0,128);"><a href="mailto:userx@y.foo.org"><u>userx@y.foo.org</u></a></span>&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">RCPT TO:&lt;@jkl.org:<span style=" color:rgb(0,0,128);"><a href="mailto:userc@d.bar.org"><u>userc@d.bar.org</u></a></span>&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Поскольку хосты не обязаны транслировать почту, xyz.com может отвергнуть сообщение при получении команды</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">RCPT, используя отклик 550 (отказ в соответствии с используемыми правилами - policy reason).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Если согласовано использование расширенного сервиса, команда RCPT может также включать параметры, связанные</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">с отдельным типом сервисного расширения, предлагаемого сервером. Для клиента <b>недопустима </b>передача параметров,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">кроме тех, которые связаны с расширением сервиса, предложенным сервером в отклике EHLO.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Синтаксис:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 63.84pt; text-align:left;"><span class=font8>&quot;RCPT TO:&quot; (&quot;&lt;Postmaster@&quot; domain &quot;&gt;&quot; / &quot;&lt;Postmaster&gt;&quot; / Forward-Path) [SP Rcpt-parameters] CRLF</span></div>
<div class=paragraph style=" padding:1.44pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" line-height:11.28pt;"><b>4.1.1.4&nbsp;Данные (DATA)</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Получатель обычно возвращает отклик 354 на команду DATA и после этого трактует дальнейшие строки (символьные последовательности, завершающиеся &lt;CRLF&gt;, как сказано в 2.3.7) как почтовые данные от отправителя. Эта команда добавляет (append) почтовые данные в конец буфера почты. Данные могут включать любые из 128 символов ASCII, хотя опыт показывает, что использование управляющих символов (кроме SP, HT, CR, LF) может вызывать проблемы, поэтому <b>следует </b>избегать таких символов.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Данные завершаются строкой, содержащей только точку и последовательность завершения строки (в потоке символов это будет &lt;CRLF&gt;.&lt;CRLF&gt;, см. параграф 4.5.2). Отметим, что первая последовательность &lt;CRLF&gt; на самом деле завершает последнюю строку почтовых данных (текста сообщения) или (при отсутствии данных) – командную строку DATA. <b>Недопустимо </b>добавление лишних последовательностей &lt;CRLF&gt;, поскольку это будет приводить к вставке пустой строки в сообщение. Единственным исключением из этого правила является обработка сообщений, переданных исходному отправителю без завершающей последовательности &lt;CRLF&gt; в последней строке; в таких случаях отправляющая сообщение система SMTP <b>должна </b>отвергнуть сообщение как некорректное или добавить &lt;CRLF&gt; в конце, чтобы принимающий сервер SMTP смог зафиксировать условие end of data (конец сообщения). Использование строк, завершающихся одиночным символом &lt;LF&gt;, как это принято в некоторых UNIX-системах, порождает значительно больше проблем, нежели решает и для серверов SMTP такой подход <b>недопустим</b>, даже во имя повышения отказоустойчивости. В частности, последовательности &lt;LF&gt;.&lt;LF&gt; (перевод строки без возврата каретки) <b>недопустимо </b>трактовать как эквивалент последовательности &lt;CRLF&gt;.&lt;CRLF&gt; для завершения почтовых данных. Получение индикатора завершения данных требует от сервера обработки сохраненной информации для данной почтовой транзакции. При этой обработке используется содержимое буферов прямого и обратного пути, а также буфера данных. По завершении команды буферы очищаются. Если обработка команды завершилась успешно, получатель <b>должен </b>передать отклик OK, а при неудаче – отклик о неудачной попытке. Модель SMTP не допускает частичных отказов на этом этапе – сообщение или воспринимается сервером для доставки с возвратом позитивного отклика, или сообщение не принимается и сервер возвращает негативный отклик. После передачи позитивного</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.84pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:7.92pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span style=" color:rgb(0,0,0);"><b>14</b></span><span style=" color:rgb(0,0,0);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:21.36pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0><a name="bookmark14"><b><u>П</u></b></a><b><u>еревод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.96pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:0.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:778.08pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">отклика на завершение приема данных сервер принимает на себя полную ответственность за это сообщение (см.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">параграф 6.1). При обнаружении ошибок впоследствии <b>должны </b>передаваться почтовые уведомления о них, как</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">сказано в параграфе 4.4.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Когда  сервер  SMTP  воспринимает  сообщение  для  трансляции  или  окончательной  доставки,  он  помещает</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">трассировочную запись (trace record), которую также называют time stamp line (строка с временной меткой) или строка</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Received в верхней части почтовых данных. Эта запись показывает хост, передавший сообщение, хост-приемник</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">(сервер), а также дату и время приема сообщения. Транслируемые сообщения могут содержать на финальном этапе</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">множество трассировочных записей. Детальное описание трассировки и синтаксиса записей приводится в параграфе</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">4.4.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Дополнительную информацию по обработке команд DATA можно найти в параграфе 3.3.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Синтаксис:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 89.04pt; text-align:left;"><span class=font9>&quot;DATA&quot; CRLF</span></div>
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font1 style=" line-height:11.28pt;"><b>4.1.1.5&nbsp;Сброс (RSET)</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Эта команда служит для прерывания текущей почтовой транзакции. Все сохраненные в буферах данные <b>должны </b>быть отброшены с очисткой буферов. Принимающая сторона в ответ на команду RSET передает отклик 250 OK без дополнительных аргументов. Команду RSET клиент может вводить в любой момент транзакции. Эта команда является эквивалентом NOOP (не выполняется никаких действий) при введении сразу после EHLO, до первого использования EHLO в данном сеансе, после завершения и подтверждения передачи данных или непосредственно перед командой QUIT. Для серверов SMTP <b>недопустимо </b>закрывать соединение в результате получения команды RSET – для разрыва соединения служит команда QUIT (см. параграф 4.1.1.10).</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Поскольку обработка команд EHLO требует некоторых дополнительных операций на сервере, использование команды RSET обычно более эффективно, чем повторный ввод EHLO, хотя формальная семантика команд одинакова. Существуют обстоятельства (неконтролируемые данной спецификацией), при которых сервер SMTP может получить индикацию разрыва или сброса соединения на нижележащем уровне TCP. Для сохранения отказоустойчивости почтовых систем серверам SMTP <b>следует </b>быть готовыми к таким ситуациям и трактовать их как получение команды QUIT до потери соединения. Синтаксис:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 89.04pt; text-align:left;"><span class=font9>&quot;RSET&quot; CRLF</span></div>
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font1 style=" line-height:11.28pt;"><b>4.1.1.6&nbsp;Проверка (VRFY)</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Эта команда просит подтвердить аргументы, идентифицирующие пользователя или почтовый ящик. Если это имя пользователя, возвращается информация в соответствии с описанием в параграфе 3.5. Данная команда не воздействует на содержимое буферов обратного и прямого пути, а также буфера данных. Синтаксис:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 89.04pt; text-align:left;"><span class=font9>&quot;VRFY&quot; SP String CRLF</span></div>
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font1 style=" line-height:11.28pt;"><b>4.1.1.7&nbsp;Преобразовать список (EXPN)</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Эта команда просит подтвердить аргументы, идентифицирующие список рассылки и (при наличии указанного списка) возвращает список членов. При успешном завершении команды возвращается информация, описанная в параграфе 3.5. Этот отклик будет содержать множество строк за исключением тривиальных случаев списка с одним адресом. Данная команда не воздействует на содержимое буферов обратного и прямого пути, а также буфера данных. Синтаксис:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 89.04pt; text-align:left;"><span class=font9>&quot;EXPN&quot; SP String CRLF</span></div>
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font1 style=" line-height:11.28pt;"><b>4.1.1.8&nbsp;Справка (HELP)</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">По этой команде сервер возвращает краткие справочные сведения о командах и аргументах. Команда <b>может </b>использовать в качестве аргумента имя другой команды для получения соответствующей справки. Данная команда не воздействует на содержимое буферов обратного и прямого пути, а также буфера данных. Серверам <b>следует </b>поддерживать команду HELP без аргументов и <b>можно </b>поддерживать команду с аргументами. Синтаксис:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 89.04pt; text-align:left;"><span class=font9>&quot;HELP&quot; [ SP String ] CRLF</span></div>
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font1 style=" line-height:11.28pt;"><b>4.1.1.9&nbsp;Пустая операция (NOOP)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Эта команда не влияет на содержимое буферов и выполнение введенных ранее команд. По команде сервер просто</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">передает отклик OK.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Данная команда не воздействует на содержимое буферов обратного и прямого пути, а также буфера данных и может</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">вводиться в любой момент. При наличии у команды параметров серверу <b>следует </b>игнорировать их.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Синтаксис:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 89.04pt; text-align:left;"><span class=font9>&quot;NOOP&quot; [ SP String ] CRLF</span></div>
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font1 style=" line-height:11.28pt;"><b>4.1.1.10&nbsp;Завершение работы (QUIT)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Получив эту команду сервер <b>должен </b>возвратить отклик и OK закрыть канал передачи.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Для сервера <b>недопустим </b>преднамеренный разрыв соединения, до получения команды QUIT и отклика на нее (даже при возникновении ошибок). Если соединение закрыто преждевременно в нарушение сказанного выше или в результате сетевого сбоя, сервер должен прервать все незавершенные транзакции, не отказываясь от выполненных транзакций, и (в общем случае) <b>должен </b>действовать как при получении информации об ошибке во время выполнения команды или транзакции (т. е., отклик 4yz). Команда QUIT может быть введена в любой момент. Синтаксис:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 89.04pt; text-align:left;"><span class=font9>&quot;QUIT&quot; CRLF</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:12.48pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:7.92pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.36pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>15</b></span><span style=" color:rgb(0,0,0);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:21.36pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:11.76pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:135.60pt;">
<div class=block style=" width:135.60pt; height:12.96pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:1.20pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:801.60pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>4.1.2&nbsp;Синтаксис аргументов команд</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Ниже приведен синтаксис полей аргументов перечисленных выше команд (по возможности, следует пользоваться синтаксисом, описанным в работе [8]). Некоторые из приведенных ниже вариантов используются только с маршрутами source route, как описано в Приложении C. Обозначения, не определенные здесь (типа ALPHA, DIGIT, SP, CR, LF, CRLF), описаны в работе [8] (глава 6) или [32].</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Reverse-path = Path</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Forward-path = Path</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Path = &quot;&lt;&quot; [ A-d-l &quot;:&quot; ] Mailbox &quot;&gt;&quot;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">A-d-l = At-domain *( &quot;,&quot; A-d-l )</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 93.12pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">; отметим, что эта форма, называемая source route&quot;,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 93.12pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">; <b>должна </b>приниматься, ее <b>не следует </b>генерировать и <b>следует </b>игнорировать.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">At-domain = &quot;@&quot; domain</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Mail-parameters = esmtp-param *(SP esmtp-param)</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Rcpt-parameters = esmtp-param *(SP esmtp-param)</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">esmtp-param     = esmtp-keyword [&quot;=&quot; esmtp-value]</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">esmtp-keyword   = (ALPHA / DIGIT) *(ALPHA / DIGIT / &quot;-&quot;)</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">esmtp-value     = 1*(%d33-60 / %d62-127)</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 93.12pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">; любые символы кроме =, SP и управляющих кодов</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Keyword  = Ldh-str</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Argument = Atom</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Domain = (sub-domain 1*(&quot;.&quot; sub-domain)) / address-literal</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">sub-domain = Let-dig [Ldh-str]</span></div>
<div class=paragraph style=" padding:5.04pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">address-literal = &quot;[&quot; IPv4-address-literal /</span></div>
<div class=paragraph style=" padding:0.00pt 269.76pt 0.00pt 179.52pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">IPv6-address-literal / General-address-literal &quot;]&quot;</span></div>
<div class=paragraph style=" padding:0.00pt 323.76pt 0.00pt 60.72pt; text-align:left; text-indent:32.40pt;"><span class=font9 style=" line-height:10.08pt;">; См. параграф 4.1.3 Mailbox = Local-part &quot;@&quot; Domain Local-part = Dot-string / Quoted-string</span></div>
<div class=paragraph style=" padding:0.00pt 307.68pt 0.00pt 60.72pt; text-align:left; text-indent:32.40pt;"><span class=font9 style=" line-height:10.08pt;">; регистр символов <b>может </b>различаться Dot-string = Atom *(&quot;.&quot; Atom) Atom = 1*atext</span></div>
<div class=paragraph style=" padding:0.00pt 323.76pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Quoted-string = DQUOTE *qcontent DQUOTE String = Atom / Quoted-string</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Хотя в приведенном выше описании требования к Local-part относительно либеральны, хостам, принимающим почту <b>следует </b>избегать организации почтовых ящиков, для которых Local-part требует (или использует) форму Quoted-string или различается регистр символов. Для любых задач, требующих генерации или сравнения полей Local-part все формы Quoted-string <b>должны </b>трактоваться как эквивалентные и передающим системам следует форму, использующую минимальное квотирование.</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;"><b>Недопустимо </b>определять почтовые ящики таким образом, чтобы в SMTP требовалось использование символов, не входящих в набор ASCII (символов, использующих 8-битовую кодировку) или управляющих кодов ASCII (десятичные значения 0-31 и 127). Такие символы <b>недопустимо </b>использовать в командах MAIL и RCPT или других командах, содержащих имена почтовых ящиков.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Отметим, что обратный слэш (\) относится к символам квотирования, используемым для индикации буквального (literally) использования следующего символа (взамен обычной интерпретации). Например, запись &quot;Joe\,Smith&quot; соответствует “Joe, Smith”, т. е. Запятая после знака \ трактуется именно как запятая, а не специальный символ. Для обеспечения интероперабельности и совместимости с DNS в именовании и приложениях (см., например, параграф 2.3.1 базового стандарта DNS - RFC1035 [22]) <b>недопустимо </b>включать в метки доменных имен для клиентов и серверов SMTP никакие символы, кроме букв латиницы, цифр и дефиса. В частности, символ подчеркивания (underscore) использовать нельзя. Серверы SMTP, получающие команды с некорректными символами (при отсутствии других причин для отказа) <b>должны </b>отвергать такие команды с возвратом отклика 501.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>4.1.3&nbsp;&laquo;Дословные&raquo; адреса</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Иногда хост не знает доменного имени и почтовая связь (в частности, передача сообщений об ошибках) блокируется. Для решения этой проблемы в качестве альтернативы доменному имени может использоваться специальная форма адреса (literal address). Для адресов IPv4 эта форма использует десятичное представление байтов IP-адреса с разделением точками. Адреса заключаются в квадратные скобки (например, [123.255.37.2]), которые говорят об использовании адреса IPv4 в десятичном представлении с разделением точками. Для IPv6 и других форм адресации, которые могут быть впоследствии стандартизованы, форма включает стандартизованный тег, идентифицирующий синтаксис адреса, двоеточие (:) и собственно адрес в формате, заданном стандартом [17]. В частности, используются следующие варианты:</span></div>
<div class=paragraph style=" padding:0.00pt 318.48pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">IPv4-address-literal = Snum 3(&quot;.&quot; Snum) IPv6-address-literal = &quot;IPv6:&quot; IPv6-addr</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">General-address-literal = Standardized-tag &quot;:&quot; 1*dcontent</span></div>
<div class=paragraph style=" padding:0.00pt 80.88pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Standardized-tag = Ldh-str ; должен быть стандартизован в RFC и зарегистрирован IANA Snum = 1*3DIGIT  ; десятичное целое от 0 до 255 Let-dig = ALPHA / DIGIT</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Ldh-str = *( ALPHA / DIGIT / &quot;-&quot; ) Let-dig</span></div>
<div class=paragraph style=" padding:0.00pt 205.20pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">IPv6-addr = IPv6-full / IPv6-comp / IPv6v4-full / IPv6v4-comp IPv6-hex  = 1*4HEXDIG</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">IPv6-full = IPv6-hex 7(&quot;:&quot; IPv6-hex)</span></div>
<div class=paragraph style=" padding:0.00pt 205.20pt 0.00pt 120.24pt; text-align:left; text-indent:-59.52pt;"><span class=font9 style=" line-height:10.08pt;">IPv6-comp = [IPv6-hex *5(&quot;:&quot; IPv6-hex)] &quot;::&quot; [IPv6-hex *5(&quot;:&quot; <u>IPv6-hex)]</u></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>16&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.24pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:303.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:11.52pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0><a name="bookmark16"><b><u>П</u></b></a><b><u>еревод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.96pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:1.44pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:786.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 121.44pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">; :: представляет по крайней мере 2 16-битовых последовательности нулей</span></div>
<div class=paragraph style=" padding:0.00pt 165.84pt 0.00pt 89.04pt; text-align:justify; text-indent:32.40pt;"><span class=font9 style=" line-height:10.08pt;">; в дополнение к :: может присутствовать не более 6 групп IPv6v4-full = IPv6-hex 5(&quot;:&quot; IPv6-hex) &quot;:&quot; IPv4-address-literal IPv6v4-comp = [IPv6-hex *3(&quot;:&quot; IPv6-hex)] &quot;::&quot;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 159.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">[IPv6-hex *3(&quot;:&quot; IPv6-hex) &quot;:&quot;] IPv4-address-literal</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 121.44pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">; :: представляет по крайней мере 2 16-битовых последовательности нулей</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 121.44pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">; в дополнение к :: может присутствовать не более 4 групп и</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 121.44pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">; IPv4-address-literal</span></div>
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font2 style=" line-height:11.28pt;"><b><i>4.1.4&nbsp;Порядок команд</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Для порядка использования команд существуют некоторые ограничения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Сеанс, который будет включать почтовую транзакцию, <b>должен </b>быть сначала инициализирован командой EHLO.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Серверам SMTP <b>следует </b>воспринимать без инициализации команды, не использующие почтовых транзакций</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">(например, VRFY или EXPN).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Команда EHLO <b>может </b>вводиться клиентом в действующем сеансе. При первом использовании команды в данной</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">сессии сервер SMTP <b>должен </b>очистить все буферы и сбросить состояние как при получении команды RSET. Иными</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">словами, последовательность команд RSET - EHLO является избыточной, и имеет мало пользу ввиду выполнения</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">ненужных повторяющихся действий.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Если команда EHLO неприемлема для сервера SMTP, он <b>должен </b>возвращать отклик 501, 500 или 502. Сервер SMTP</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b>должен </b>сохранять после передачи таких откликов то состояние, которое было до получения команды EHLO.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Клиент SMTP <b>должен </b>(по возможности) предоставлять в параметрах команд EHLO первичное доменное имя (не</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">CNAME или MX) своего хоста.. Если это невозможно (например, клиент использует динамический адрес и не имеет</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">явного имени), <b>следует </b>взамен имени использовать &laquo;дословный&raquo; адрес, предоставляя дополнительную информацию,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">которая поможет идентифицировать клиента.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Сервер SMTP <b>может </b>проверять соответствие доменного имени в команде EHLO реальному IP-адресу клиента. Однако</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">для сервера <b>недопустимо </b>отвергать сообщение при несоответствии имени и адреса – результаты проверки могут</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">использоваться только для протоколирования и трассировки.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Команды NOOP, HELP, EXPN, VRFY и RSET <b>могут </b>использоваться  любой момент на протяжении всего сеанса и</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">даже без предварительной организации сеанса. Серверам SMTP <b>следует </b>нормально обрабатывать эти команды (т. е.,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">не выдавать в ответ отклик 503) даже в тех случаях, когда эти команды используются до получения команды EHLO;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">клиентам <b>следует </b>открывать сессию с помощью команды EHLO до ввода перечисленных команд.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Если следовать этим правилам, пример из RFC 821, показывающий отклик 550 access denied to you в ответ на команду</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">EXPN некорректен, если команда EHLO не была введена до EXPN или отказ клиенту не было отказано в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">обслуживании на основе IP-адреса клиента или по результатам аутентификации или аналогичных механизмов.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Команда MAIL (или устаревшие команды SEND, SOML, SAML) начинает почтовую транзакцию. После начала</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">транзакции она включает начальную команду, одну или несколько команд RCPT и команду DATA, вводимые в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">указанном порядке. Почтовая транзакция прерывается командой RSET (или новой командой EHLO). В сеансе может</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">происходить множество последовательных транзакций или не быть транзакций вообще. <b>Недопустимо </b>передавать</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">команду MAIL (или SEND, SOML, SAML), если почтовая транзакция уже открыта, т. е., эту команду можно</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">передавать только при отсутствии в сеансе продолжающейся почтовой транзакции – предыдущая транзакция должна</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">быть завершена успешным выполнением команды DATA или прервана командой RSET.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Если аргумент начинающей транзакцию команды неприемлем, <b>должен </b>возвращаться отклик 501 и сервер SMTP</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b>должен </b>сохранять свое состояние. Если в сеансе нарушается порядок команд в такой степени, что это препятствует их</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">выполнению сервером, последний должен возвратить отклик 503, сохраняя свое состояние.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Последней командой сеанса <b>должна </b>быть команда QUIT. Команда QUIT не может использоваться в любой момент на</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">протяжении сеанса, но клиентам <b>следует </b>использовать эту команду для разрыва соединения даже при отсутствии</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">команды открытия сеанса.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>4.1.5&nbsp;Команды частного использования</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Как было сказано в параграфе 2.2.2, команды, начинающиеся с X, могут использоваться в результате двухстороннего</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">соглашения между клиентом (отправитель) и сервером (получатель) SMTP. Предполагается, что сервер SMTP, не</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">распознающий такие команды, будет возвращать отклик 500 Command not recognized. Сервер SMTP с расширенными</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">функциями <b>может </b>перечислить имена, связанные с командами частного использования в своем отклике на команду</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">EHLO.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Команды, переданные или воспринятые системами SMTP и не начинающиеся с X, <b>должны </b>соответствовать</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">требованиям параграфа 2.2.2.</span></div>
<div class=paragraph style=" padding:3.60pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b>4.2 Отклики SMTP</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Отклики на команды SMTP служат для синхронизации запросов и выполняемых действий при передаче почтовых сообщений, а также для обеспечения гарантии получения клиентом сведений о состоянии сервера SMTP. На каждую команду <b>должен </b>генерироваться единственный отклик. Детальное описание последовательностей команда – отклик приводится в параграфе 4.3.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Отклик SMTP содержит трехзначный номер (передается как три числовых символа), за которым обычно следует строка текста, если в данной спецификации явно не указано иное. Числовые коды предназначены для автоматической обработки откликов, текст – для человека. Цифровой код обеспечивает требуемую информацию и программе-клиенту не требуется просматривать текстовую часть отклика, которую в результате можно просто отбрасывать или передавать пользователю. Имеющиеся исключения из этого правила явно указаны в спецификации. Например, коды откликов 220, 221, 251, 421 и 551 связаны с текстовыми сообщениями, которые клиентская программа должна разбирать и интерпретировать. В общем случае текст может зависеть от сервера или текущего контекста, т. е., каждый оклик может содержать разный текст. Обсуждение теоретических вопросов генерации откликов приводится в</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:1.44pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:303.84pt;">
<div class=block style=" width:303.84pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:54.00pt;">
<div class=block style=" width:54.00pt; height:12.72pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font1><b>17</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 110.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:303.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.64pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:137.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:18.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:12.24pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:135.60pt;">
<div class=block style=" width:135.60pt; height:12.96pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:0.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:754.08pt;">
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">параграфе 4.2.1. Формально отклик определяется как последовательность: трехзначный код, &lt;SP&gt;, строка текста, &lt;CRLF&gt; или многострочный текст (см. параграф 4.2.1). Поскольку (в нарушение данной спецификации) текст иногда не включается в отклик, получившим такой отклик клиентам <b>следует </b>быть готовыми к обработке только текстового кода (возможно, после кода в отклик будет помещен символ пробела). Предполагается, что лишь команды EHLO, EXPN и HELP могут возвращать многострочные отклики при нормальных обстоятельствах, однако такие отклики допускаются для всех команд. В формате ABNF отклик сервера имеет вид:</span></div>
<div class=paragraph style=" padding:0.00pt 312.96pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Greeting = &quot;220 &quot; Domain [ SP text ] CRLF Reply-line = Reply-code [ SP text ] CRLF</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">где Greeting появляется только в откликах с кодом 220, анонсирующих открытие сервером своей части соединения. Серверам SMTP <b>следует </b>передавать только отклики с кодами, указанными в этой спецификации, сопровождая их текстом, указанным в примерах, когда это приемлемо.</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Клиенты SMTP <b>должны </b>определять свои действия только на основе кода отклика, а не его текста (за исключением &quot;change of address&quot; 251 и 551, а при необходимости и 220, 221, 421). В общем случае клиент <b>должны </b>воспринимать любой текст и отклики без текста (хотя серверам <b>не следует </b>передавать откликов, содержащих только код). Пробел после кода отклика рассматривается как часть текста. По возможности получателю <b>следует </b>проверять первую цифру кода отклика (индикация важности).</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Приведенный ниже список кодов <b>недопустимо </b>рассматривать как неизменный. Хотя добавление новых кодов является редким и значимым событием, новые стандарты могут добавлять коды откликов. Следовательно, отправители SMTP <b>должны </b>быть готовы к обработке кодов, не указанных в данной спецификации. Такая обработка <b>должна </b>основываться на интерпретации только первой цифры кода.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2 style=" line-height:11.28pt;"><b><i>4.2.1 Важность кодов отклика и теоретические вопросы</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Каждая из трех цифр кода отклика имеет свой уровень значимости. Первая цифра определяет успех, неудачу или незавершенность команды. Для простых клиентов SMTP или при получении неизвестного кода можно определить дальнейшие действия (продолжение, повтор, отказ и т. п.), ограничившись первой цифрой кода. Клиенты SMTP, которые хотят получить более точную информацию о происходящем (ошибка почтовой системы, некорректный синтаксис и т. п.) могут использовать вторую цифру кода. Третья цифра и дополнительная информация в отклике служат для предоставления наиболее подробных сведений. Первая цифра кода может принимать 5 значений:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>1yz – позитивный предварительный отклик</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Команда была воспринята, но запрошенные действия пока не выполнены, поэтому в данном отклике не передается окончательного подтверждения. Клиенту SMTP следует передать другую команду, указывающую серверу необходимость продолжения или прекращения запрошенной ранее операции<a href="rfc2821.htm#bookmark38"><sup>6</sup>.</a></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>2yz – позитивный окончательный отклик</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Запрошенная операция успешно завершена и могут вводиться новые команды.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>3yz – позитивный промежуточный отклик</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Команда была воспринята, но запрошенные действия пока не выполнены и сервер ждет дополнительной информации. Клиенту SMTP следует передать другую команду, содержащую требуемые данные. Отклики этой группы используются в командах с последовательным выполнением (например, DATA).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>4yz – негативный отклик о временных проблемах</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Команда не принята и запрошенная операция не выполнена. Однако условия, не позволяющие выполнить команду, носят временный характер и операция может быть запрошена вновь. Отправителю следует вернуться к началу последовательности команд (если таковая была). Понятие &laquo;временный&raquo; (transient) является недостаточно строгим и взаимодействующие стороны (клиент и сервер SMTP) должны одинаково интерпретировать его. Для каждого отклика этой группы время может различаться, но клиенту SMTP ничто не запрещает продолжать попытки. Различия между временными и постоянными проблемами (коды 5yz) достаточно условны и отклики 4yz обычно возвращаются в тех случаях, когда возможен позитивный результат при повторе без изменения формы команды и свойств отправителя или получателя (т. е., команда просто может быть повторена без изменений).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>5yz - негативный отклик о постоянных проблемах</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Команда не принята и запрошенная операция не выполнена. Клиент SMTP не должен просто повторять команду,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">поскольку она заведомо не будет выполнена. Некоторые &laquo;постоянные&raquo; проблемы могут быть решены корректировкой</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">команд, поэтому пользователь (человек) может запросить у клиента SMTP повтора операции после корректировки</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">команд или их порядка.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Вторая цифра отклика показывает категорию ошибки:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>x0z Синтаксис</i></b>: данный отклик связан с синтаксической ошибкой (синтаксически корректная команда, но отклик не</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">может быть отнесен к другим категориям, нереализованная команда и т. п.).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>x1z  Информация</i></b>: отклик на запрос информации (например, справка или состояние).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>x2z  Соединение</i></b>: отклики, относящиеся в каналу передачи.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>x3z  Не используется.</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>x4z  Не используется.</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>x5z    Почтовая система</i></b>: такие отклики показывают состояние принимающей почтовой системы по отношению к</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">запрошенной передаче или другим действиям почтовой системы.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Третья цифра позволяет получить дополнительную информацию для каждой категории, заданной второй цифрой.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Приведенный   ниже   список   откликов  иллюстрирует   это   подход.   Текстовая   часть   отклика  является   скорее</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">рекомендуемой, чем обязательной и может изменяться в соответствии со связанной с откликом командой. С другой</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:10.32pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:23.28pt;">
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;"><a name="bookmark38"><sup>6</sup></a> Серверы SMTP, не поддерживающие расширений, могут не иметь команд, позволяющих отклики этого типа, и команд для <u>продолжения или прерывания операции.</u></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:0.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.64pt;">
<div class=block style=" width:302.64pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:137.76pt;">
<div class=block style=" width:137.76pt; height:12.72pt;">
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font0><b>18</b></span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:154.56pt;">
<div class=block style=" width:154.56pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.64pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:137.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:18.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:89.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:193.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:2.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:1.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:13.20pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:57.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:151.20pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:85.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="8" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="6" valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0><a name="bookmark18"><b><u>П</u></b></a><b><u>еревод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell colspan="2" rowspan="2" valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.96pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="6" valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:0.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="8" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:214.08pt;">
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">стороны, коды откликов должны в точности соответствовать приведенной в этом разделе спецификации. При разработке программ-серверов не следует изобретать новые коды для незначительно отличающихся ситуаций – нужно выбрать наиболее подходящий код из числа определенных в спецификации.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Например, команды типа NOOP, при успешном завершении который клиент SMTP не получает новой информации, будут возвращать код 250. Отклик 502 возвращается при запросе нереализованной команды, а отклик 504 – для реализованных команд с неподдерживаемыми параметрами.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Текст отклика может содержать более одной строки и в таких случаях текст должен маркироваться так, чтобы клиент SMTP мог узнать о завершении текста. Для этого используется специальный формат многострочных откликов – каждая строка (кроме последней) должна начинаться кодом отклика, после которого следует дефис (-), а далее - текст. В последней строке вместо дефиса используется пробел - &lt;SP&gt;, после которого может следовать текст, и &lt;CRLF&gt;. Как указано вые, серверам следует передавать символ &lt;SP&gt;, если далее не будет текста, но клиент <b>должен </b>быть готов к отсутствию символа пробела. Ниже приведен пример многострочного отклика:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 89.04pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">123-First line</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 89.04pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">123-Second line</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 89.04pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">123-234 text beginning with numbers</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 89.04pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">123 The last line</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">В большинстве случаев клиенту достаточно найти строку, в которой за кодом отклика следует &lt;SP&gt; или &lt;CRLF&gt; и пропустить все предшествующие строки. В некоторых случаях текстовый отклик содержит важные для клиента данные, которые клиент может обрабатывать с учетом контекста.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="8" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.08pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:287.04pt;">
<div class=block style=" width:287.04pt; height:77.76pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font2><b><i>4.2.2 Коды откликов (по группам)</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13>500&nbsp; &nbsp; &nbsp; &nbsp; Syntax error, command unrecognized</span></div>
<div class=paragraph style=" padding:8.88pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">501&nbsp; &nbsp; &nbsp; &nbsp; Syntax error in parameters or arguments</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">502&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Command not implemented</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">503&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Bad sequence of commands</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">504&nbsp; &nbsp; &nbsp; &nbsp; Command parameter not implemented</span></div>
</div>
</td>
<td class=cell colspan="4" valign="top" style=" width:307.92pt;">
<div class=block style=" width:307.92pt; height:77.76pt;">
<div class=paragraph style=" padding:14.16pt 0.00pt 0.00pt 9.12pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">Синтаксическая ошибка, команда не распознана (это может говорить</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 9.12pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">о слишком длинной команде)</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 9.12pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">Синтаксическая ошибка в параметрах или аргументах</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 9.12pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">Команда не реализована (см. параграф 4.2.4).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 9.12pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">Некорректный порядок команд</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 9.12pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">Параметры команды не реализованы</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="8" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.84pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:287.04pt;">
<div class=block style=" width:287.04pt; height:22.32pt;">
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">211       System status, or system help reply 214       Help message</span></div>
</div>
</td>
<td class=cell colspan="4" valign="top" style=" width:307.92pt;">
<div class=block style=" width:307.92pt; height:22.32pt;">
<div class=paragraph style=" padding:0.00pt 70.56pt 0.00pt 9.12pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">Отклик с системной справкой или состоянием системы Информация о работе с сервером или отдельных командах.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="8" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:10.08pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:287.04pt;">
<div class=block style=" width:287.04pt; height:53.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">220&nbsp; &nbsp; &nbsp; &nbsp; &lt;domain&gt; Service ready</span></div>
<div class=paragraph style=" padding:0.00pt 1.92pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">221&nbsp; &nbsp; &nbsp; &nbsp; &lt;domain&gt; Service closing transmission channel 421       &lt;domain&gt; Service not available, closing transmission</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 89.04pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">channel</span></div>
</div>
</td>
<td class=cell colspan="3" valign="top" style=" width:222.00pt;">
<div class=block style=" width:222.00pt; height:53.28pt;">
<div class=paragraph style=" padding:0.00pt 4.32pt 0.00pt 9.12pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">Служба для указанного домена готова. Закрывается канал передачи для указанного домена Для указанного домена обслуживание невозможно закрывается. Это может быть откликом на любую известно, что сервис отключен</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:85.92pt;">
<div class=block style=" width:85.92pt; height:53.28pt;">
<div class=paragraph style=" padding:20.64pt 28.32pt 0.00pt 0.00pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">и канал связи команду, если</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="8" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.84pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:282.96pt;">
<div class=block style=" width:282.96pt; height:229.20pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13>250&nbsp; &nbsp; &nbsp; &nbsp; Requested mail action okay, completed</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13>251&nbsp; &nbsp; &nbsp; &nbsp; User not local; will forward to &lt;forward-path&gt;</span></div>
<div class=paragraph style=" padding:8.64pt 10.80pt 0.00pt 89.04pt; text-align:left; text-indent:-32.40pt;"><span class=font13 style=" line-height:10.32pt;">252&nbsp; &nbsp; &nbsp; &nbsp; Cannot VRFY user, but will accept message and attempt delivery</span></div>
<div class=paragraph style=" padding:0.00pt 10.80pt 0.00pt 89.04pt; text-align:left; text-indent:-32.40pt;"><span class=font13 style=" line-height:10.32pt;">450&nbsp; &nbsp; &nbsp; &nbsp; Requested   mail   action   not   taken:   mailbox unavailable</span></div>
<div class=paragraph style=" padding:0.00pt 10.80pt 0.00pt 89.04pt; text-align:left; text-indent:-32.40pt;"><span class=font13 style=" line-height:10.32pt;">550&nbsp; &nbsp; &nbsp; &nbsp; Requested   mail   action   not   taken:   mailbox unavailable</span></div>
<div class=paragraph style=" padding:8.64pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13>451&nbsp; &nbsp; &nbsp; &nbsp; Requested action aborted: error in processing</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13>551&nbsp; &nbsp; &nbsp; &nbsp; User not local; please try &lt;forward-path&gt;</span></div>
<div class=paragraph style=" padding:8.88pt 10.80pt 0.00pt 89.04pt; text-align:left; text-indent:-32.40pt;"><span class=font13 style=" line-height:10.32pt;">452&nbsp; &nbsp; &nbsp; &nbsp; Requested action not taken: insufficient system storage</span></div>
<div class=paragraph style=" padding:0.00pt 10.80pt 0.00pt 89.04pt; text-align:left; text-indent:-32.40pt;"><span class=font13 style=" line-height:10.32pt;">552&nbsp; &nbsp; &nbsp; &nbsp; Requested mail action aborted: exceeded storage allocation</span></div>
<div class=paragraph style=" padding:0.00pt 11.04pt 0.00pt 89.04pt; text-align:left; text-indent:-32.40pt;"><span class=font13 style=" line-height:10.32pt;">553&nbsp; &nbsp; &nbsp; &nbsp; Requested action not taken: mailbox name not allowed</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">354       Start mail input; end with &lt;CRLF&gt;.&lt;CRLF&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">554&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Transaction failed или No SMTP service here</span></div>
</div>
</td>
<td class=cell colspan="6" valign="top" style=" width:312.00pt;">
<div class=block style=" width:312.00pt; height:229.20pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 0.24pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">Операция благополучно завершена</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">Нелокальный пользователь – почта будет пересылаться по прямому пути</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">(см. параграф 3.4)</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">Не удается проверить почтовый ящик, но сообщение принято и сервер</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">попытается его доставить (см. параграф 3.5.3)</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">Запрошенная   операция   невозможна   –   почтовый   ящик   недоступен</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">(например, занят)</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">Запрошенная   операция   невозможна   –   почтовый   ящик   недоступен</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">(например, почтовый ящик не найден, к нему нет доступа или команда</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">отвергнута по соображениям используемой политики).</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">Запрошенная операция прервана в результате ошибки.</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">Нелокальный пользователь – попытайтесь использовать прямой путь</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">(см. параграф 3.4)</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">Запрошенная операция не выполнена по причине нехватки пространства</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">(на диске).</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">Запрошенная операция прервана по причине превышения выделенного</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">(дискового) пространства</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">Запрошенная операция не выполнена – недопустимый почтовый ящик</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">(например, синтаксическая ошибка в имени ящика).</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">Начало ввода данных. Завершение по &lt;CRLF&gt;.&lt;CRLF&gt;</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">Отказ  транзакции   или  отсутствие   поддержки   сервиса  SMTP  (при</span></div>
<div class=paragraph style=" text-align:left;"><span class=font13 style=" line-height:10.32pt;">попытке соединения)</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="8" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.08pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="8" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:14.16pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font2><b><i>4.2.3 Коды откликов в порядке номеров</i></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" rowspan="2" valign="top" style=" width:285.12pt;">
<div class=block style=" width:285.12pt; height:94.80pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">211<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; </span>System status, or system help reply</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">214<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; </span>Help message</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">220&nbsp; &nbsp; &nbsp; &nbsp; &lt;domain&gt; Service ready</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">221&nbsp; &nbsp; &nbsp; &nbsp; &lt;domain&gt; Service closing transmission channel</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">250&nbsp; &nbsp; &nbsp; &nbsp; Requested mail action okay, completed</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">251&nbsp; &nbsp; &nbsp; &nbsp; User not local; will forward to &lt;forward-path&gt;</span></div>
<div class=paragraph style=" padding:8.88pt 0.00pt 0.00pt 89.04pt; text-align:left; text-indent:-32.40pt;"><span class=font13 style=" line-height:10.32pt;">252&nbsp; &nbsp; &nbsp; &nbsp; Cannot VRFY user, but will accept message and attempt delivery</span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:15.12pt;">
<div class=block style=" width:15.12pt; height:2.88pt;">
</div>
</td>
<td class=cell colspan="3" valign="top" style=" width:294.72pt;">
<div class=block style=" width:294.72pt; height:2.88pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="5" valign="top" style=" width:309.84pt;">
<div class=block style=" width:309.84pt; height:91.92pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 11.04pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">Отклик с системной справкой или состоянием системы</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 11.04pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">Информация о работе с сервером или отдельных командах.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 11.04pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">Служба для указанного домена готова.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 11.04pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">Закрывается канал передачи для указанного домена</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 11.04pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">Операция благополучно завершена</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 11.04pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">Нелокальный пользователь – почта будет пересылаться по прямому</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 11.04pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">пути (см. параграф 3.4)</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 11.04pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">Не удается проверить почтовый ящик, но сообщение принято и</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 11.04pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">сервер попытается его доставить (см. параграф 3.5.3)</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="8" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.84pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:89.04pt;">
<div class=block style=" width:89.04pt; height:12.00pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font13>354</span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:196.08pt;">
<div class=block style=" width:196.08pt; height:12.00pt;">
<div class=paragraph style=" text-align:left;"><span class=font13>Start mail input; end with &lt;CRLF&gt;.&lt;CRLF&gt;</span></div>
</div>
</td>
<td class=cell colspan="5" valign="top" style=" width:309.84pt;">
<div class=block style=" width:309.84pt; height:12.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 1.92pt; text-align:left;"><span class=font13>Начало ввода данных. Завершение по &lt;CRLF&gt;.&lt;CRLF&gt;</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="8" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.84pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:89.04pt;">
<div class=block style=" width:89.04pt; height:12.00pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13>421</span></div>
</div>
</td>
<td class=cell colspan="7" valign="top" style=" width:505.92pt;">
<div class=block style=" width:505.92pt; height:12.00pt;">
<div class=paragraph style=" text-align:left;"><span class=font13>&lt;domain&gt;     Service     not     available,     closing    Для  указанного  домена  обслуживание  невозможно  и канал  связи</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="8" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:1.20pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="5" valign="top" style=" width:300.24pt;">
<div class=block style=" width:300.24pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:57.60pt;">
<div class=block style=" width:57.60pt; height:12.72pt;">
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 3.60pt; text-align:left;"><span class=font0><b>19</b></span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 110.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="8" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:89.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:193.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:2.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:1.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:13.20pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:57.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:151.20pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:85.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:12.96pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:135.60pt;">
<div class=block style=" width:135.60pt; height:12.96pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:1.68pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:747.84pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">transmission channel<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>закрывается.   Это  может  быть  откликом на любую  команду,  если</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 258.72pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">известно, что сервис отключен</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 60.72pt; text-align:left; text-indent:-32.40pt;"><span class=font13 style=" line-height:10.32pt;">450&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Requested    mail    action    not    taken:    mailbox<span class=font0>&nbsp; &nbsp; </span>Запрошенная  операция  невозможна  -  почтовый  ящик  недоступен unavailable<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>(например, занят)</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font13 style=" line-height:10.32pt; letter-spacing:-0.40pt;">451<span style=" letter-spacing:0.00pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style=" letter-spacing:-0.05pt;">Requested action aborted: error in processing</span><span class=font0 style=" letter-spacing:0.00pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" letter-spacing:0.00pt;">Запрошенная операция прервана в результате ошибки.</span></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 60.72pt; text-align:left; text-indent:-32.40pt;"><span class=font13 style=" line-height:10.32pt;">452&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Requested action not taken:  insufficient system<span class=font0>&nbsp; &nbsp; </span>Запрошенная    операция    не    выполнена    по    причине    нехватки storage<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>пространства (на диске).</span></div>
<div class=paragraph style=" padding:11.28pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">500&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Syntax error, command unrecognized<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Синтаксическая ошибка, команда не распознана (это может говорить о</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 250.08pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">слишком длинной команде)</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font13 style=" line-height:10.32pt; letter-spacing:-0.55pt;">501<span style=" letter-spacing:0.00pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style=" letter-spacing:-0.05pt;">Syntax error in parameters or arguments</span><span class=font0 style=" letter-spacing:0.00pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" letter-spacing:0.00pt;">Синтаксическая ошибка в параметрах или аргументах</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">502&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Command not implemented<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Команда не реализована (см. параграф 4.2.4).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font13 style=" line-height:10.32pt; letter-spacing:-0.40pt;">503<span style=" letter-spacing:0.00pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style=" letter-spacing:-0.05pt;">Bad sequence of commands</span><span class=font0 style=" letter-spacing:0.00pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style=" letter-spacing:0.00pt;">Некорректный порядок команд</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">504&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Command parameter not implemented<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>Параметры команды не реализованы</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 60.72pt; text-align:left; text-indent:-31.92pt;"><span class=font13 style=" line-height:10.32pt;">550&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Requested   mail   action   not   taken:   mailbox    Запрошенная   операция   невозможна   -   почтовый   ящик   недоступен unavailable<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>(например, почтовый ящик не найден, к нему нет доступа или команда</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 250.08pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">отвергнута по соображениям используемой политики).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font13 style=" line-height:10.32pt; letter-spacing:-0.55pt;">551<span style=" letter-spacing:0.00pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style=" letter-spacing:-0.05pt;">User not local; please try &lt;forward-path&gt;</span><span class=font0 style=" letter-spacing:0.00pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" letter-spacing:0.00pt;">Нелокальный пользователь - попытайтесь использовать прямой путь (см.</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 249.84pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">параграф 3.4)</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 60.72pt; text-align:left; text-indent:-31.92pt;"><span class=font13 style=" line-height:10.32pt;">552&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Requested mail action aborted: exceeded storage    Запрошенная операция прервана по причине превышения выделенного allocation<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>(дискового) пространства</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 60.72pt; text-align:left; text-indent:-31.92pt;"><span class=font13 style=" line-height:10.32pt; letter-spacing:-0.40pt;">553<span style=" letter-spacing:0.00pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Requested action not taken: mailbox name not    Запрошенная операция не выполнена - недопустимый почтовый ящик </span><span style=" letter-spacing:-0.05pt;">allowed</span><span class=font0 style=" letter-spacing:0.00pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" letter-spacing:0.00pt;">(например, синтаксическая ошибка в имени ящика).</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">554&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Transaction failed или No SMTP service here<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Отказ транзакции или отсутствие поддержки сервиса SMTP (при попытке</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 250.08pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">соединения)</span></div>
<div class=paragraph style=" padding:6.24pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font2><b><i>4.2.4&nbsp;Отклик 502</i></b></span></div>
<div class=paragraph style=" padding:0.24pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">У разработчиков часто возникают вопросы об использовании отклика 502 (Command not implemented - команда не реализована). Код 502 <b>следует </b>использовать в тех случаях, когда сервер SMTP распознал команду, но не умеет ее выполнять. Если команда не распознана, <b>следует </b>возвращать код 500. Для систем SMTP с расширенными функциями в откликах на команду EHLO <b>недопустимо </b>указывать команды, приводящие к отклику 502 или 500.</span></div>
<div class=paragraph style=" padding:6.24pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font2><b><i>4.2.5&nbsp;Коды откликов после DATA и последующих &lt;CRLF&gt;.&lt;CRLF&gt;</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.56pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Когда сервер SMTP возвращает полный позитивный отклик (код 2yz) после завершения команды DATA с последовательностью &lt;CRLF&gt;.&lt;CRLF&gt;, этот сервер принимает на себя ответственность за следующие операции:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Доставка сообщения (если почтовый ящик получателя существует)</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 45.60pt; text-align:left; text-indent:-16.80pt;"><span class=font14 style=" line-height:11.52pt;"><b>•&nbsp; &nbsp; &nbsp; </b>При неудачной попытке доставки в результате временных проблем предпринимается разумное число повторных попыток с перерывами (см. параграф 4.5.4).</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 45.60pt; text-align:left; text-indent:-16.80pt;"><span class=font14 style=" line-height:11.52pt;"><b>•&nbsp; &nbsp; &nbsp; </b>При неудаче вследствие долгосрочных проблем или после исчерпания заданного числа попыток в случае временных проблем исходному отправителю сообщения посылается уведомление (по адресу из команды MAIL).</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.56pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Когда сервер SMTP возвращает отклик о временных проблемах<a href="rfc2821.htm#bookmark39"><sup>7</sup></a> (4yz) после команды DATA с завершающей последовательностью &lt;CRLF&gt;.&lt;CRLF&gt; <b>недопустимо </b>предпринимать какие-то последующие попытки доставки этого сообщения. Клиент SMTP сохраняет за собой ответственность за доставку этого сообщения и может возвратить его пользователю или снова поставить в очередь на доставку (см. параграф 4.5.4.1).</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Пользователю, отправившему сообщение, <b>следует </b>предоставить возможность интерпретировать характер проблем (временные или постоянные), передав ему сообщение по электронной почте или иным способом. Если клиент SMTP смог решить проблему доставки самостоятельно, уведомление пользователю не передается.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.56pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Когда сервер SMTP возвращает информацию о долгосрочных проблемах (код 5yz) после выполнения команды DATA с завершающей последовательностью &lt;CRLF&gt;.&lt;CRLF&gt;, <b>недопустимо </b>предпринимать какие-либо дополнительные попытки доставки сообщения. Как и для случая временных проблем, ответственность за доставку сообщения сохраняется за клиентом SMTP, но клиенту <b>не следует </b>пытаться повторить доставку тому же серверу без просмотра сообщения пользователем и внесения соответствующих изменений.</span></div>
<div class=paragraph style=" padding:3.84pt 282.96pt 0.00pt 28.56pt; text-align:left;"><span class=font2 style=" line-height:19.92pt;"><b>4.3 Порядок следования команд и откликов <i>4.3.1 Обзор</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Связь между отправителем и получателем в процессе представляет собой диалог, контролируемый отправителем.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Отправитель вводит команды, а получатель возвращает отклики на них. Если не согласованы другие условия с</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">использованием расширенного сервиса, отправитель <b>должен </b>получить отклик на переданную команду прежде, чем</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">посылать следующую.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Одним из важных откликов является приветствие при организации соединения. Обычно получатель передает отклик</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">220 &quot;Service ready&quot; при организации соединения. Отправителю <b>следует   </b>дождаться этого отклика и только потом</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">передавать следующие команды.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Все отклики-приветствия включают официальное имя (полное доменное имя) хоста, на котором работает сервер, в</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">качестве первого слова после кода. В некоторых случаях у хоста может не быть собственного имени. Обсуждение</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">альтернативных имен для таких ситуаций приводится в параграфе 4.1.3. Ниже приведены 3 примера приветствий:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 61.44pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">220 <span style=" color:rgb(0,0,128);"><a href="http://ISIF.USC.EDU"><u>ISIF.USC.EDU</u></a></span> Service ready</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 61.44pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">220 <span style=" color:rgb(0,0,128);"><a href="http://mail.foo.com"><u>mail.foo.com</u></a></span> SuperSMTP v 6.1.2 Service ready</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 61.44pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">220 [10.0.0.1] Clueless host service ready</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:25.20pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:12.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font13><a name="bookmark39"><sup>7</sup></a> <u>В оригинале ошибочно сказано &laquo;долговременных&raquo; и указаны коды 5yz. <i>Прим. перев.</i></u></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:2.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:7.92pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>20</b></span><span style=" color:rgb(0,0,0);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:21.36pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:58.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:245.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:66.48pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:170.64pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="5" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:12.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0><a name="bookmark20"><b><u>П</u></b></a><b><u>еревод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell colspan="2" rowspan="2" valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.96pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:0.96pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="5" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:271.92pt;">
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">В приведенной ниже таблице даны варианты откликов при удачном и неудачном завершении всех команд. <b>Следует </b>строго придерживаться этих кодов – получатель может изменять текст отклика, но смысл отклика и действия в ответ на него определяются числовым кодом и последовательностью введенный ранее команд.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>4.3.2 Последовательности команда - отклик</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Для каждой команды указаны все возможные варианты откликов. Поскольку некоторые серверы могут генерировать</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">иные отклики в соответствующих обстоятельствах и с учетом возможности появления новых кодов, клиентам SMTP</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>следует </b>(по возможности) интерпретировать только первую цифру кода. Кроме того, клиент <b>должен </b>быть готов к</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">работе с неизвестными кодами, также интерпретируя в них только первую цифру. За исключением расширенного</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">использования  механизмов,  описанных  в  параграфе  2.2,  для  серверов  SMTP  <b>недопустима  </b>передача  кодов,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">содержащих что-либо сверх 3 цифр или использующих цифры, не входящие в разрешенный диапазон 2 - 5</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">(включительно).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Описанные здесь варианты откликов на команды (в принципе, и сами коды) могут дополняться или изменяться при</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">использовании расширений SMTP, предлагаемых сервером и понятных (запрашиваемых) клиентом.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">В дополнение к перечисленным в таблице кодам любые команды SMTP могут возвращать три приведенных ниже</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">кода в соответствующих нештатных ситуациях:</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;"><b><i>500&nbsp; &nbsp; </i></b>- для случая command line too long (слишком длинная команда) или при получении непонятной команды. Отметим, что отклик command not recognized в ответ на команду из обязательного набора является нарушением данной спецификации.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b><i>501&nbsp; &nbsp; </i></b>- Syntax error in command or arguments (синтаксическая ошибка в команде или аргументах). Для поддержки будущих расширений командам, включенным в данную спецификацию как команды без аргументов (DATA, RSET, QUIT), <b>следует </b>возвращать отклик 501 при получении команды с аргументами, если иное не согласовано в анонсированном EHLO расширении. <b><i>421 </i></b>Service shutting down and closing transmission channel - сервис отключен с разрывом коммуникационного канала.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:424.32pt;">
<div class=block style=" width:424.32pt; height:12.48pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14>В <u>нормальных условиях в ответ на команды могут возвращаться следующие отклики:</u></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:170.64pt;">
<div class=block style=" width:170.64pt; height:12.48pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:58.56pt;">
<div class=block style=" width:58.56pt; height:156.48pt;">
</div>
</td>
<td class=cell colspan="4" valign="top" style=" width:536.40pt;">
<div class=block style=" width:430.32pt; height:156.48pt; padding:0.00pt 106.08pt 0.00pt 0.00pt;">
<table class=main frame="box" rules="all" border="1" cellspacing="0" cellpadding="0" style=" width:430.32pt; height:156.48pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:171.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:69.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:189.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:171.84pt;">
<div class=block style=" width:171.84pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>Команда</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.36pt;">
<div class=block style=" width:69.36pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.24pt 0.00pt 0.00pt; text-align:center;"><span class=font14><b>Успех</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:189.12pt;">
<div class=block style=" width:189.12pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.96pt 0.00pt 0.00pt; text-align:center;"><span class=font14><b>Неудача</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:171.84pt;">
<div class=block style=" width:171.84pt; height:12.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 5.52pt; text-align:left;"><span class=font14>Организация соединения</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.36pt;">
<div class=block style=" width:69.36pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>220</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:189.12pt;">
<div class=block style=" width:189.12pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>554</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:171.84pt;">
<div class=block style=" width:171.84pt; height:12.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 5.52pt; text-align:left;"><span class=font14>EHLO или HELO</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.36pt;">
<div class=block style=" width:69.36pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>250</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:189.12pt;">
<div class=block style=" width:189.12pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>504, 550</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:171.84pt;">
<div class=block style=" width:171.84pt; height:12.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 5.52pt; text-align:left;"><span class=font14>MAIL</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.36pt;">
<div class=block style=" width:69.36pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>250</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:189.12pt;">
<div class=block style=" width:189.12pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>552, 451, 452, 550, 553, 503</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:171.84pt;">
<div class=block style=" width:171.84pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>RCPT</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.36pt;">
<div class=block style=" width:69.36pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14><u>250, 251</u><a href="rfc2821.htm#bookmark40"><sup>8</sup></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:189.12pt;">
<div class=block style=" width:189.12pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 3.36pt 0.00pt 0.00pt; text-align:center;"><span class=font14>550, 551, 552, 553, 450, 451, 452, 503, 550</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:171.84pt;">
<div class=block style=" width:171.84pt; height:12.00pt;">
<div class=paragraph style=" padding:0.00pt 4.80pt 0.00pt 0.00pt; text-align:center;"><span class=font14>DATA (промежуточный отклик 354)</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.36pt;">
<div class=block style=" width:69.36pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>250</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:189.12pt;">
<div class=block style=" width:189.12pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>552, 554, 451, 452</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:171.84pt;">
<div class=block style=" width:171.84pt; height:12.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 5.52pt; text-align:left;"><span class=font14>DATA</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.36pt;">
<div class=block style=" width:69.36pt; height:12.00pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:189.12pt;">
<div class=block style=" width:189.12pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.52pt; text-align:left;"><span class=font14>451, 554, 503</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:171.84pt;">
<div class=block style=" width:171.84pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>RSET</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.36pt;">
<div class=block style=" width:69.36pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>250</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:189.12pt;">
<div class=block style=" width:189.12pt; height:12.00pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:171.84pt;">
<div class=block style=" width:171.84pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 6.00pt; text-align:left;"><span class=font14>VRFY</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.36pt;">
<div class=block style=" width:69.36pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 3.60pt 0.00pt 0.00pt; text-align:center;"><span class=font14>250, 251, 252</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:189.12pt;">
<div class=block style=" width:189.12pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>550, 551, 553, 502, 504</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:171.84pt;">
<div class=block style=" width:171.84pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>EXPN</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.36pt;">
<div class=block style=" width:69.36pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>250, 252</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:189.12pt;">
<div class=block style=" width:189.12pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>550, 500, 502, 504</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:171.84pt;">
<div class=block style=" width:171.84pt; height:12.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 5.52pt; text-align:left;"><span class=font14>HELP</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.36pt;">
<div class=block style=" width:69.36pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>211, 214</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:189.12pt;">
<div class=block style=" width:189.12pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>502, 504</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:171.84pt;">
<div class=block style=" width:171.84pt; height:12.00pt;">
<div class=paragraph style=" padding:0.48pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>NOOP</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.36pt;">
<div class=block style=" width:69.36pt; height:12.00pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>250</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:189.12pt;">
<div class=block style=" width:189.12pt; height:12.00pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:171.84pt;">
<div class=block style=" width:171.84pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 5.52pt; text-align:left;"><span class=font14>QUIT</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.36pt;">
<div class=block style=" width:69.36pt; height:12.24pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 5.76pt; text-align:left;"><span class=font14>221</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:189.12pt;">
<div class=block style=" width:189.12pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:171.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:69.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:189.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="5" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="5" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:310.80pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font3><b>4.4 Трассировочная информация</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Когда   сервер   SMTP   получает   сообщение   для   доставки   или   дальнейшей   обработки,   он   <b>должен   </b>вставить трассировочную информацию (time stamp или Received) в начало содержимого, как описано в параграфе 4.1.1.4. Трассировочная строка <b>должна </b>иметь следующую структуру:</span></div>
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 73.92pt; text-align:left; text-indent:-16.80pt;"><span class=font14 style=" line-height:11.52pt;"><b>•&nbsp; &nbsp; &nbsp; </b>В поле FROM, которое <b>должно </b>обеспечиваться в среде SMTP, <b>следует </b>включать (1) имя хоста-отправителя, представленное в команде EHLO, и (2) IP-адрес отправителя, определенный из соединения TCP.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Поле ID <b>может </b>включать &quot;@&quot;, как предложено в RFC 822, но это необязательно.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 73.92pt; text-align:left; text-indent:-16.80pt;"><span class=font14 style=" line-height:11.52pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Поле FOR <b>может </b>содержать список элементов &lt;path&gt;, если используется множество команд RCPT. Это может влиять на безопасность системы и обычно нежелательно включать такие списки (см. параграф 7.2).</span></div>
<div class=paragraph style=" padding:0.24pt 28.08pt 0.00pt 56.88pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Для почтовых программ Internet недопустимо внесение изменений в строки Received:, уже присутствующие в заголовке сообщения. Серверы SMTP <b>должны </b>добавлять в начало свою строку Received, но <b>недопустимо </b>менять порядок имеющихся строк или вставлять свою строку Received в другое место заголовка.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">По мере расширения сети Internet просмотр строк Received становится все более важным средством диагностики почтовых систем, особенно для обнаружения медленно работающих трансляторов. Серверам SMTP, которые создают поля Received, <b>следует </b>явно задавать временной сдвиг (например, -0800), а не использовать имена часовых поясов. По возможности следует указывать локальное время (с учетом пояса), а не UT. Такая информация дает больше информации о локальных условиях. Если требуется использовать UT, получателю достаточно использовать простую арифметику для получения нужного значения. Использование формата UT приводит к потере информации о часовом поясе сервера. Если желательно указывать имя часового пояса, его следует давать как комментарий. Когда сервер SMTP обеспечивает &laquo;окончательную доставку&raquo; сообщения, он вставляет строку обратного пути (return-path) в начало почтовых данных. Использование return-path является обязательным и почтовые системы <b>должны </b>поддерживать обратный путь. Строка return-path сохраняет значение одноименного параметра из команды MAIL. Окончательная доставка сообщения все еще сохраняет его в среде SMTP. Обычно сообщение доставляется в почтовый ящик пользователя или почтовое хранилище, но в некоторых случаях сообщение может подвергаться дополнительной обработке или передаваться в другие почтовые системы.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Путь возврата, сохраненный в почтовом ящике, может отличаться от адреса реального отправителя сообщения (например, при доставке сообщений об ошибках по специальному адресу вместо передачи их отправителю). При</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="5" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:15.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="5" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:12.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 61.92pt; text-align:left;"><span class=font13><a name="bookmark40"><u>С</u></a><u>м. параграф 3.4, в котором обсуждается использование откликов 251 и 551</u></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="5" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:0.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:303.60pt;">
<div class=block style=" width:303.60pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:120.72pt;">
<div class=block style=" width:120.72pt; height:12.72pt;">
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font0><b>21</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:170.64pt;">
<div class=block style=" width:170.64pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.40pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="5" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:58.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:245.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:66.48pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:170.64pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:154.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:440.40pt;">
<div class=block style=" width:440.40pt; height:12.96pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:154.56pt;">
<div class=block style=" width:154.56pt; height:12.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 18.96pt; text-align:left;"><span class=font0><b><u>Перевод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:2.40pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:772.56pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">использовании почтовых списков такое несовпадение встречается часто и оказывает большую пользу, доставляя</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">сообщения об ошибках держателю списка, а не отправителям сообщений.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">В приведенном выше тексте предполагается, что окончательные почтовые данные будут начинаться со строки</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">обратного пути, за которой будет следовать одна или несколько трассировочных строк. После строк трассировки</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">располагаются заголовки почтовых данных и тело сообщения [32].</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">В некоторых случаях сервер SMTP сложно определить обеспечивает ли он окончательную доставку. Поэтому все</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">последующие почтовые системы (трансляторы, шлюзы, системы пересылки) <b>могут </b>удалять строку обратного пути и</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">перестраивать команду MAIL, обеспечивая в доставленном сообщении единственную строку обратного пути.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Генерирующей сообщение системе SMTP <b>не следует </b>передавать сообщений, в которых уже включен заголовок</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Return-path. Для серверов SMTP, обеспечивающих трансляцию, <b>недопустимо </b>проверять данные сообщения и наличие</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">заголовка  Return-path.   Сервер   SMTP,   обеспечивающий  окончательную  доставку,   <b>может  </b>удалять   имеющийся</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">заголовок Return-path перед добавлением своего.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Основным назначением Return-path является указание адреса, по которому следует доставлять сообщения об ошибках.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Для однозначности <b>следует </b>включать в сообщение единственный вариант обратного пути. Системам, использующим</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">синтаксис RFC  822  с отличным от  SMTP транспортом,  <b>следует </b>указывать однозначный адрес,  связанный с</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">транспортным конвертом, по которому должна возвращаться информация об ошибках (например, о невозможности</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">доставки).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.08pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>Историческое замечание</i></b><i>: </i>Приведенные в RFC 822 сведения, отвергающие использование заголовка Return-path (или</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">адреса возврата из команды MAIL в конверте) для доставки информации об ошибках, неприменимы в среде Internet.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Адрес обратного пути (копируемый в Return-path) <b>должен </b>использоваться для доставки всех сообщений об ошибках в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">процессе доставки. В частности:</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 45.36pt; text-align:justify; text-indent:-16.56pt;"><span class=font14 style=" line-height:11.28pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Шлюзам из SMTP в другие среды <b>следует </b>вставлять обратный путь, если у них нет информации о том, что другая среда также использует в адресах доменные имена Internet и поддерживает отдельный конверт с адресом отправителя.</span></div>
<div class=paragraph style=" padding:0.00pt 55.92pt 0.00pt 45.36pt; text-align:justify; text-indent:-16.56pt;"><span class=font14 style=" line-height:11.28pt;"><b>•&nbsp; &nbsp; &nbsp; </b>Шлюзам из других сред в SMTP <b>следует </b>удалять из заголовка строку обратного пути и копировать эту информацию в конверт SMTP или объединять ее с присутствующей в конверте информацией из другой транспортной системы для построения обратного пути для команды formation present in the envelope of the other transport system to construct the reverse path argument to the MAIL command in the SMTP envelope.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Сервер должен принимать специальные меры в случаях, когда обработка принятых почтовых данных может быть</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.08pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">успешной лишь отчасти. Это может произойти, если после приема нескольких адресов получателей и почтовых</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">данных для них сервер SMTP обнаружит, что возможна доставка только некоторым из указанных адресатов. В таких</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">случаях на команду DATA <b>должен </b>возвращаться отклик OK. Однако сервер SMTP <b>должен </b>подготовить и передать</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.08pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">уведомление о невозможности доставки отправителю сообщения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b>Должно </b>передаваться одно уведомление со списком всех адресатов, которым невозможно передать сообщение, или</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">отдельные уведомления для каждого из таких адресатов. Из соображений экономии первый вариант является более</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">предпочтительным. Все уведомления о невозможности доставки передаются с использование команды MAIL (даже в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">тех случаях, когда проблема возникла при обработке устаревших команд SEND, SOML или SAML) и содержат пустое</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">поле обратного пути (см. параграф 3.7).</span></div>
<div class=paragraph style=" padding:0.48pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Временные метки и пути возврата формально определяются следующим образом:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Return-path-line = &quot;Return-Path:&quot; FWS Reverse-path &lt;CRLF&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Time-stamp-line = &quot;Received:&quot; FWS Stamp &lt;CRLF&gt;</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Stamp = From-domain By-domain Opt-info &quot;;&quot;  FWS date-time</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 62.16pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">; date-time определено в [32], но форма &quot;obs-&quot;, особенно для 2-значного указания года</span></div>
<div class=paragraph style=" padding:0.00pt 266.16pt 0.00pt 28.80pt; text-align:left; text-indent:33.12pt;"><span class=font9 style=" line-height:10.08pt;">; запрещена в SMTP и ее использование <b>недопустимо</b>. From-domain = &quot;FROM&quot; FWS Extended-Domain CFWS By-domain = &quot;BY&quot; FWS Extended-Domain CFWS Extended-Domain = Domain /</span></div>
<div class=paragraph style=" padding:0.48pt 250.56pt 0.00pt 28.80pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">( Domain FWS &quot;(&quot; TCP-info &quot;)&quot; ) / ( Address-literal FWS &quot;(&quot; TCP-info &quot;)&quot; ) TCP-info = Address-literal / ( Domain FWS Address-literal )</span></div>
<div class=paragraph style=" padding:0.00pt 163.68pt 0.00pt 28.08pt; text-align:left; text-indent:33.36pt;"><span class=font9 style=" line-height:10.08pt;">; сервер получает информацию из соединения TCP, а не из команды EHLO. Opt-info = [Via] [With] [ID] [For] Via = &quot;VIA&quot; FWS Link CFWS With = &quot;WITH&quot; FWS Protocol CFWS ID = &quot;ID&quot; FWS String / msg-id CFWS For = &quot;FOR&quot; FWS 1*( Path / Mailbox ) CFWS Link = &quot;TCP&quot; / Addtl-Link Addtl-Link = Atom</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 62.16pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">; Дополнительные стандартные имена каналов регистрируются в IANA.</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 62.16pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">; Поле Via используется прежде всего для чужого транспорта (не Internet).</span></div>
<div class=paragraph style=" padding:0.00pt 168.96pt 0.00pt 28.08pt; text-align:left; text-indent:33.12pt;"><span class=font9 style=" line-height:10.08pt;">; Серверам SMTP <b>недопустимо </b>использовать незарегистрированные имена. Protocol = &quot;ESMTP&quot; / &quot;SMTP&quot; / Attdl-Protocol Attdl-Protocol = Atom</span></div>
<div class=paragraph style=" padding:4.32pt 359.52pt 0.00pt 28.56pt; text-align:left;"><span class=font2 style=" line-height:19.92pt;"><b>4.5 Другие вопросы реализации <i>4.5.1 Минимальная реализация</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.56pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Для обеспечения работы SMTP требуется обеспечить по крайней мере минимальную функциональность. Ниже перечислены команды, которые каждая реализация <b>должна </b>поддерживать в соответствии с данной спецификацией:</span></div>
<div class=paragraph style=" padding:0.00pt 512.88pt 0.00pt 60.96pt; text-align:left;"><span class=font9 style=" line-height:10.32pt;">EHLO HELO</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:13.44pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.40pt;">
<div class=block style=" width:302.40pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:138.00pt;">
<div class=block style=" width:138.00pt; height:12.72pt;">
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font0><b>22</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:154.56pt;">
<div class=block style=" width:154.56pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:154.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
  <tr class=row> 
    <td class=cell valign="top" style=" width:0.00pt; height:0.00pt;"> </td>
    <td class=cell valign="top" style=" width:357.84pt; height:0.00pt;"> </td>
    <td class=cell valign="top" style=" width:237.12pt; height:0.00pt;"> </td>
    <td class=cell valign="top" style=" width:0.00pt; height:0.00pt;"> </td>
  </tr>
  <tr class=row valign="top"> 
    <td class=cell valign="top" style=" width:0.00pt;"> </td>
    <td class=cell colspan="2" valign="top" style=" width:594.96pt;"> <div class=block style=" width:594.96pt; height:9.12pt;"> 
        <div class=paragraph> </div>
      </div></td>
    <td class=cell valign="top" style=" width:0.00pt;"> </td>
  </tr>
  <tr class=row valign="top"> 
    <td class=cell valign="top" style=" width:0.00pt;"> </td>
    <td class=cell valign="top" style=" width:357.84pt;"> <div class=block style=" width:357.84pt; height:12.96pt;"> 
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0><a name="bookmark22"><b><u>П</u></b></a><b><u>еревод 
          RFC 2821</u></b></span></div>
      </div></td>
    <td class=cell valign="top" style=" width:237.12pt;">&nbsp;</td>
    <td class=cell valign="top" style=" width:0.00pt;"> </td>
  </tr>
  <tr class=row valign="top"> 
    <td class=cell valign="top" style=" width:0.00pt;"> </td>
    <td class=cell colspan="2" valign="top" style=" width:594.96pt;"> <div class=block style=" width:594.96pt; height:2.40pt;"> 
        <div class=paragraph> </div>
      </div></td>
    <td class=cell valign="top" style=" width:0.00pt;"> </td>
  </tr>
  <tr class=row valign="top"> 
    <td class=cell valign="top" style=" width:0.00pt;"> </td>
    <td class=cell colspan="2" valign="top" style=" width:594.96pt;"> <div class=block style=" width:594.96pt; height:796.08pt;"> 
        <div class=paragraph style=" padding:0.00pt 483.84pt 0.00pt 88.80pt; text-align:justify;"><span class=font9 style=" line-height:10.08pt;">MAIL 
          RCPT DATA RSET NOOP QUIT VRFY</span></div>
        <div class=paragraph style=" padding:0.48pt 27.84pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Любые 
          системы, которые включают сервер SMTP, поддерживающий трансляцию или 
          доставку почты, <b>должны </b>поддерживать зарезервированный почтовый 
          ящик postmaster как независимое от регистра локальное имя. Без такого 
          адреса можно обойтись, если сервер всегда возвращает отклик 554 на открытие 
          соединений (см. параграф 3.1). Требование принимать почту для адресата 
          postmaster, ведет к тому, что команды RCPT, указывающие адрес postmaster 
          в любом из доменов, для которых сервер SMTP обеспечивает почтовое обслуживание, 
          а также специальный случай команды RCPT TO:&lt;Postmaster&gt; (без указания 
          домена), <b>должны </b>поддерживаться сервером.</span></div>
        <div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Предполагается, 
          что системы SMTP будут прилагать все разумные усилия для восприятия 
          почты в адрес Postmaster от любой другой системы в Internet. В экстремальных 
          случаях (например, при атаках на службы - denial of service attack) 
          или других нарушениях системы безопасности сервер SMTP может блокировать 
          почту, направленную по адресу Postmaster. Однако, продолжительность 
          такой блокировки <b>следует </b>максимально ограничивать, во избежание 
          блокировки сообщений, которые не являются частью атаки.</span></div>
        <div class=paragraph style=" padding:6.24pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font2><b><i>4.5.2&nbsp;Прозрачность</i></b></span></div>
        <div class=paragraph style=" padding:0.24pt 27.84pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Без 
          принятия некоторых специальных мер последовательность &lt;CRLF&gt;.&lt;CRLF&gt; 
          будет восприниматься как завершение почтовых данных и не может включаться 
          пользователем в текст. Обычно пользователи даже не знают о таких &laquo;скрытых&raquo; 
          последовательностях. Для прозрачной передачи подготовленного пользователем 
          текста служат следующие процедуры:</span></div>
        <div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 72.96pt; text-align:left; text-indent:-15.84pt;"><span class=font14 style=" line-height:11.28pt;"><b>•&nbsp; 
          &nbsp; &nbsp; </b>Перед отправкой строки почтового текста клиент SMTP 
          проверяет первый символ строки. Если таким символом является точка, 
          клиент просто добавляет к еще одну точку в начале строки.</span></div>
        <div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 72.96pt; text-align:left; text-indent:-15.84pt;"><span class=font14 style=" line-height:11.28pt;"><b>•&nbsp; 
          &nbsp; &nbsp;</b>Сервер SMTP, проверяет полученную строку. Если она 
          содержит только точку, это трактуется как завершение данных. Если после 
          точки в начале строки следуют дополнительные символы, эта точка просто 
          удаляется.</span></div>
        <div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Почтовые 
          данные могут включать любые из 128 символов ASCII. Все символы доставляются 
          в почтовый ящик получателя, включая пробелы, табуляторы другие управляющие 
          символы. Если канал передачи поддерживает 8-битовый (октетный) поток 
          данных, 7-битовые коды ASCII передаются с выравниванием по правому краю 
          октета и нулевым значением старшего бита. Трансляторы SMTP используют 
          специальную трактовку 8-битовых символов (см. 3.7).</span></div>
        <div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">В 
          некоторых системах может требоваться передача принятых и сохраненных 
          данных. Это может быть актуально для хостов, использующих отличный от 
          ASCII локальный набор символов, если они сохраняют данные в записях, 
          а не в строках или при использовании специальных символьных последовательностей 
          в качестве ограничителей (delimiters) внутри почтовых ящиков. Если такие 
          преобразования требуются, они <b>должны </b>быть обратимыми, особенно 
          для почтовых трансляторов.</span></div>
        <div class=paragraph style=" padding:6.24pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font2><b><i>4.5.3&nbsp;Размеры 
          и тайм-ауты</i></b></span></div>
        <div class=paragraph style=" padding:6.72pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0 style=" line-height:11.28pt;"><b>4.5.3.1 
          Ограничения размеров</b></span></div>
        <div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Существуют 
          некоторые объекты, для которых требуется ограничение размера. Каждая 
          реализация <b>должна </b>быть способна принимать объекты, размеры которых 
          не выходят за эти ограничения. <b>Следует </b>(по возможности) избегать 
          передачи объектов большего размера. Однако некоторые почтовые системы 
          Internet создают такие адреса в формате Х.400 [16], которые могут потребовать 
          большего размера объектов - клиенты <b>могут </b>пытаться передать такие 
          объекты, но они <b>должны </b>быть готовы к отказу серверов от обслуживания 
          слишком больших объектов. Для снижения вероятности возникновения проблем 
          в реализациях следует использовать методы, не ограничивающие размеры 
          объектов.</span></div>
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.16pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>локальная 
          часть адреса</i></b></span></div>
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Максимальный 
          размер имени пользователя или локальной части адреса составляет 64 символа.</span></div>
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>домен</i></b></span></div>
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Максимальный 
          размер доменного имени составляет 255 символов.</span></div>
        <div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>путь</i></b></span></div>
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Максимальная 
          длина прямого и обратного пути составляет 256 символов (включая разделители 
          и пунктуацию).</span></div>
        <div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>командная 
          строка</i></b></span></div>
        <div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 74.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Максимальная 
          длина командной строки с учетом завершающей последовательности &lt;CRLF&gt; 
          составляет 512 символов. Расширения SMTP могут разрешать более длинные 
          команды.</span></div>
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>строка 
          отклика</i></b></span></div>
        <div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 74.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Максимальная 
          длина строки отклика с учетом кода и &lt;CRLF&gt; составляет 512 символов. 
          Дополнительную информацию можно передать, используя многострочный отклик.</span></div>
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>текстовая 
          строка</i></b></span></div>
        <div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 74.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Максимальная 
          длина строки текста с учетом &lt;CRLF&gt; составляет 1000 символов (не 
          учитывая добавляемую в начало точку в случаях обеспечения прозрачности). 
          Расширения SMTP могут использовать более длинные строки.</span></div>
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>содержимое 
          сообщения</i></b></span></div>
        <div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 74.88pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Ограничение 
          максимального размера содержимого сообщения (включая заголовки и тело) 
          <b>должно </b>быть не менее 64К октетов. После введения стандартов Internet 
          на multimedia-почту [12] размеры почтовых сообщений Internet многократно 
          возросли и по возможности следует избегать ограничения размера сообщений. 
          Системам SMTP, которые не могут отказаться от ограничения размеров <b>следует 
          </b>реализовать сервисное расширение SIZE [18], а клиентам SMTP, передающим 
          большие сообщения, <b>следует </b>по возможности использовать это расширение.</span></div>
        <div class=paragraph style=" padding:5.76pt 0.00pt 0.00pt 57.36pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; 
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
          &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>23</b></span><span style=" color:rgb(0,0,0);"><b>&nbsp; 
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
          </b></span><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
      </div></td>
    <td class=cell valign="top" style=" width:0.00pt;"> </td>
  </tr>
  <tr class=row valign="top"> 
    <td class=cell valign="top" style=" width:0.00pt;"> </td>
    <td class=cell colspan="2" valign="top" style=" width:594.96pt;"> <div class=block style=" width:594.96pt; height:21.36pt;"> 
        <div class=paragraph> </div>
      </div></td>
    <td class=cell valign="top" style=" width:0.00pt;"> </td>
  </tr>
  <tr class=row> 
    <td class=cell valign="top" style=" width:0.00pt; height:0.00pt;"> </td>
    <td class=cell valign="top" style=" width:357.84pt; height:0.00pt;"> </td>
    <td class=cell valign="top" style=" width:237.12pt; height:0.00pt;"> </td>
    <td class=cell valign="top" style=" width:0.00pt; height:0.00pt;"> </td>
  </tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:12.00pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:135.60pt;">
<div class=block style=" width:135.60pt; height:12.96pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:0.96pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:774.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>recipients buffer</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Минимальное число буферизуемых получателей составляет 100. Отказ от приема сообщений (для избыточных получателей) при числе команд RCPT менее 100 является нарушением данной спецификации. Для транслирующих серверов SMTP <b>недопустимо</b>, а доставляющим – <b>не следует </b>проверять заголовки и отвергать сообщения на основе заданного числа получателей. Сервер, в котором ограничивается число получателей, <b>должен </b>использовать разумный выбор отклоняемых сообщений (скорее сразу отклонить адресатов, выходящих за пределы допустимого числа, нежели потом отбрасывать принятые сначала адреса). Клиентам, которым требуется доставка сообщения, включающего более 100 команд RCPT <b>следует </b>быть готовыми к передаче блоками по 100 адресов в один прием. Ошибки, связанные с выходом за допустимые пределы, приводят к передаче соответствующих откликов:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">500&nbsp;Line too long – слишком длинная строка</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">501&nbsp;Path too long – слишком длинный путь</span></div>
<div class=paragraph style=" padding:0.00pt 199.68pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">452 Too many recipients – слишком много получателей (см. ниже) 552 Too much mail data – слишком много почтовых данных.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">В RFC 821 [30] некорректно указано, что сервер SMTP в случаях превышения числа команд RCPT (too many recipients) генерирует отклик с кодом 552. Корректным кодом для таких откликов является 452. Клиентам <b>следует </b>трактовать код 552 в таких случаях как временную проблему, а не постоянную, чтобы описанная ниже логика могла работать. Когда соответствующий спецификации SMTP сервер сталкивается с такой проблемой, он имеет по крайней мере 100 принятых команд RCPT в своем буфере получателей. Если сервер способен принять сообщение, из клиентской очереди будет удалено по крайней мере 100 адресов. Когда клиент предпримет новую попытку передачи адресов, для которых был получен отклик 452, сервер SMTP сможет поместить в буфер получателей по крайней мере 100 адресов. Каждая повторная попытка будет обеспечивать передачу сообщения по крайней мере сотне адресатов. Если сервер SMTP имеет предел для числа команд RCPT и этот предел превышен, сервер <b>должен </b>использовать отклик с кодом 452 (но клиенту <b>следует </b>быть готовым и к получению кода 552, как было указано выше). Если ограничения сервера заданы правилами, он <b>может </b>использовать отклик с кодом 5XX. Это будет наиболее разумным решением, если ограничение предназначено для блокировки передачи сообщений, в которых список получателей по размеру превышает само сообщение.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" line-height:11.28pt;"><b>4.5.3.2 Тайм-ауты</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Клиенты SMTP <b>должны </b>поддерживать механизм тайм-аутов. Тайм-ауты <b>должны </b>задаваться для команд, а не для</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">времени всей почтовой транзакции. <b>Следует </b>обеспечивать возможность  настройки значений  параметров без</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">повторной компиляции кода SMTP. Для реализации этих требований таймеры задаются для каждой команды SMTP и</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">для   каждого   буфера   передачи   данных.   Последнее   означает,   что   общий   тайм-аут   для   транзакции   растет</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">пропорционально увеличению размера сообщения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">На основе опыта работы трансляторов с высокой нагрузкой значения тайм-аутов, которые <b>следует </b>использовать</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">составляют:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>Стартовое сообщение 220: 5 минут</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 46.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Клиентский процесс SMTP должен отличать сбои в соединениях TCP от задержки стартового приветствия с кодом 220. Многие серверы SMTP воспринимают соединение TCP но задерживают передачу отклика 220, пока в системе не освободится достаточное для обработки почты количество ресурсов.</span></div>
<div class=paragraph style=" padding:0.00pt 456.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>Команда MAIL: 5 минут Команда RCPT: 5 минут</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 46.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Если обработка списков рассылки и псевдонимов не откладывается до приема сообщения, требуется увеличение тайм-аута.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>Инициирование команды DATA: 2 минуты</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Этот тайм-аут определяет время ожидания отклика 354 Start Input на команду DATA.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>Блок данных: 3 минуты</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Время ожидания завершения каждого вызова TCP SEND для передачи фрагмента данных.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>Завершение приема данных по команде DATA: 10 минут.</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Время ожидания отклика 250 OK. Когда получатель принимает завершающую точку в данных, он обычно начинает обработку полученных данных для доставки сообщения в почтовый ящик пользователя. Ложные тайм-ауты в это время крайне нежелательны и обычно приводят к доставке многочисленных копий сообщения, поскольку сообщение может быть уже послано и сервер принял на себя ответственность за его доставку (см. параграф 6.1). Серверам SMTP <b>следует </b>использовать тайм-аут не менее 5 минут при ожидании от клиента следующей команды.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>4.5.4 Стратегия повторов</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Общая структура реализации SMTP включает пользовательские почтовые ящики, одну или несколько областей для хранения очереди сообщений и один или несколько демонов, обслуживающих прием и передачу почты. Точная структура сильно зависит от потребностей пользователей хоста, а также числа и размера поддерживаемых хостом списков рассылки. Ниже описано несколько вариантов оптимизации, которые могут быть особенно полезны для почтовых хостов с большой нагрузкой.</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Любая стратегия организации очередей <b>должна </b>включать тайм-ауты для всех операций, задаваемые независимо для каждой команды. При любых обстоятельствах <b>недопустимо </b>возвращать сообщения об ошибках в ответ на сообщения об ошибках.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" line-height:11.28pt;"><b>4.5.4.1 Стратегия передачи</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">В рамках общей модели клиент SMTP представляет собой один или несколько процессов: которые периодически пытаются передавать исходящую почту. В типичной системе программы подготовки почтовых сообщений имеют тот или иной способ запроса немедленной обработки исходящей почты, хотя почта, которая не может быть отправлена</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:15.60pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:7.92pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>24&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:21.36pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:12.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0><a name="bookmark24"><b><u>П</u></b></a><b><u>еревод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.96pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:0.96pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:801.60pt;">
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">незамедлительно <b>должна </b>помещаться в очередь, отправитель будет периодически пытаться ее отослать адресатам. Запись почтовой очереди будет включать не только само сообщение, но и конверт для его доставки. Отправитель <b>должен </b>делать паузу перед повторной попыткой отправить почту адресату после неудачи. В общем случае интервал ожидания <b>следует </b>делать не менее 30 минут, однако более изощренные подходы с переменным временем ожидания будут давать преимущества в тех случаях, когда клиент SMTP может определить причину неудачи.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Попытки продолжаются до тех пор, пока сообщение не будет доставлено или пока не истечет заданное на попытки повтора время (обычно, не менее 4 - 5 дней). Параметры повтора <b>должны </b>быть настраиваемыми. Клиенту <b>следует </b>сохранять список хостов, которым не удалось отправить почту и соответствующие значения тайм-аутов для соединений вместо &laquo;тупых&raquo; попыток повтора.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Опыт показывает, что ошибки обычно носят временный характер (отсутствие связи с системой адресата) и рекомендуется делать две попытки повтора в течение первого часа хранения письма в очереди, а далее повторять попытки передачи каждые 2 – 3 часа.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Клиент SMTP может сократить задержку перед повтором, согласовав такое совращение с сервером SMTP. Например, при получении почты с какого-то адреса, очевидна возможность передачи по этому адресу почты из очереди (если она есть). Используя такой подход, приложение в большинстве случаев может обойтись без явного использования функций &laquo;передать сообщения из очереди сейчас&raquo; типа ETRN [9].</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Возможна дальнейшая оптимизация стратегии передачи за счет использования множества адресов на хосте (см. ниже), ускоряющего доставку почты за счет повышения расхода ресурсов сервера.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Клиент SMTP может иметь большую очередь сообщений для каждого из недоступных хостов. Если все эти сообщения включать в каждую попытку повтора, это будет порождать значительные избыточный трафик в Internet, а почтовая система будет недоступна в течение длительного периода. Отметим, что клиент SMTP в общем случае может констатировать неудачную попытку только по истечении тайм-аута (несколько минут), а даже минутная задержка на соединение будет приводить к очень большим задержкам, если в очереди скопились десятки или даже сотни недоставленных сообщений для одного хоста.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">В то же время, клиентам SMTP следует с большой осторожностью использовать кэшированные негативные отклики от серверов. В экстремальном случае, если команда EHLO вводится много раз в течение одного соединения SMTP, сервер может возвращать разные отклики. Очень важно подчеркнуть, что отклики 5yz на команду MAIL <b>недопустимо </b>кэшировать.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Когда сообщение доставляется множеству адресатов и сервер SMTP, на который копируется сообщение для передачи, совпадает для множества получателей, <b>следует </b>передавать единственную копию сообщения для всех таких адресатов. Т. е., клиенту SMTP <b>следует </b>использовать последовательность команд MAIL, RCPT, RCPT,... RCPT, DATA вместо последовательности MAIL, RCPT, DATA, ..., MAIL, RCPT, DATA. Однако при большом количестве адресатов может быть превышено допустимое число повторов команды RCPT на одну команду MAIL.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Клиент SMTP для обеспечения своевременной доставки <b>может </b>поддерживать множество одновременных исходящих почтовых транзакций. Однако для предотвращения избыточного расхода ресурсов хоста на обработку почты, число одновременных транзакций может ограничиваться.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font1 style=" line-height:11.28pt;"><b>4.5.4.2 Стратегия приема</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Серверу SMTP <b>следует </b>пытаться сохранить постоянное прослушивание порта SMTP. Это требуется для поддержки</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">множества входящих TCP-соединений для SMTP. Некоторые ограничения <b>возможны</b>, но серверы, неспособные</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">обслуживать более одной транзакции SMTP одновременно, являются нарушением данной спецификации.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Как было сказано выше, сервер SMTP при получении почты от какого-либо из хостов может активизировать свой</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">механизм очередей SMTP для попытки повторной передачи почты, хранимой для этого хоста.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font2 style=" line-height:11.52pt;"><b><i>4.5.5 Сообщения с пустым полем обратного пути</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Некоторые типы уведомлений, требуемые существующими или предложенными стандартами передаются с пустым полем обратного пути. К числу таких сообщений относятся уведомления об ошибках при доставке (см. параграф 3.7), другие типы сообщений DSN (Delivery Status Notifications – уведомления о состоянии доставки) [24] и сообщения MDN (Message Disposition Notifications – уведомления о доставке) [10]. Все типы указанных сообщений являются уведомлениями о предыдущем сообщении и посылаются по обратному пути из заголовка сообщения, с которым связано данное уведомление. Невозможность доставки зачастую связана с проблемами в почтовой системе на хосте адресата, поэтому некоторые АДП настраиваются на пересылку таких уведомлений кому-нибудь, кто будет способен исправить проблему с почтой (например, с использованием псевдонима postmaster alias).</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Все остальные типы сообщений (т. е., любые сообщения, для которых стандарты RFC не требуют использовать пустой путь возврата) следует посылать с корректным, непустым полем обратного пути.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Разработчикам автоматизированных почтовых систем <b>следует </b>быть аккуратными и обеспечивать корректную обработку разных типов сообщений с пустым путем возврата. В частности, таким системам <b>не следует </b>отвечать на сообщения без обратного пути.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font4><b><i>5. Преобразование адресов и обслуживание почты</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">После того, как клиент SMTP лексически идентифицирует домен, для которого предназначена передаваемая на обработку почта (см. параграфы 3.6 и 3.7), <b>должно </b>выполняться обращение к серверу доменных имен (DNS lookup) для преобразования доменного имени [22]. Предполагается, что в адресах используются полные имена (FQDN) – механизм определения FQDN по частичному имени или локальному псевдониму выходит за пределы данной спецификации и, в силу сложившейся практики, в общем случае не должен использоваться. При поиске сначала предпринимается попытка найти локальную запись MX, связанную с именем. Если взамен этого будет найдена запись CNAME, полученное в результате имя обрабатывается как исходное. При отсутствии записей MX одновременно с наличием записей A, последняя трактуется, как будто она связана с реальной записью MX 0, указывающей на тот же</span></div>
<div class=paragraph style=" padding:2.40pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span style=" color:rgb(0,0,0);"><b>25&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.24pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:357.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:18.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:12.00pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:135.60pt;">
<div class=block style=" width:135.60pt; height:12.96pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:0.96pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:786.72pt;">
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">хост. Если найдена одна или несколько записей MX для системы SMTP <b>недопустимо </b>использовать какие бы то ни было записи A, связанные с этим именем, пока они не будут найдены с использованием записей MX – приведенное выше правило &laquo;неявных&raquo; (implicit) записей MX применимо только в случаях отсутствия реальных MX. Если записи MX присутствуют, но ни одна из них не может быть использована, клиенту <b>должно </b>возвращаться сообщение об ошибке.</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">После успешного поиска доменного имени в DNS может произойти отображение одного адреса во множество адресов за счет использования множества записей MX и поддержки хостом нескольких адресов (multihoming). Для обеспечения надежной доставки почты клиент SMTP <b>должен </b>быть способен пытаться (включая повторы) использовать все адреса в соответствии с их порядком в списке, пока доставка не завершится успехом. Однако <b>может </b>существовать конфигурационное ограничение числа используемых альтернативных адресов. В таких случаях клиенту SMTP <b>следует </b>предпринимать попытки по крайней мере для двух адресов.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Для ранжирования адресов хостов используется два типа данных – множественные записи MX и многодомные хосты. Множественные записи MX содержат информацию о предпочтениях, которая <b>должна </b>использоваться при сортировке списка (см. ниже). Меньшие значения MX указывают на более предпочтительные адреса доставки. При наличии нескольких адресов с одинаковыми значениями MX нет явных причин для предпочтения того или иного адреса и отправитель SMTP <b>должен </b>выбирать порядок таких адресов случайным образом для распределения нагрузки между разными почтовыми серверами одной организации.</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Хост получателя (возможно с предпочтительной записью MX) может оказаться многодомным – в таких случаях доменное имя будет преобразовываться в список адресов IP. Ответственность за упорядочивание этого списка лежит на интерфейсе преобразователя имен (domain name resolver), который должен упорядочивать список в порядке снижения предпочтений, а отправитель SMTP <b>должен </b>пытаться использовать адреса в предложенном порядке. Хотя поддержка попыток доставки с использованием множества адресов требуется от реализации, возможность таких попыток может быть ограничена или отключена совсем. Вопрос о целесообразности использования разных адресов многодомных хостов остается спорным. Основным аргументом в пользу таких попыток является повышение вероятности своевременной доставки сообщений, а в некоторых случаях – просто обеспечение возможности доставки. Противники такого подхода считают, что он ведет к излишнему расходу ресурсов. Отметим, что использование ресурсов сильно зависит от выбранной стратегии передачи, как было показано в параграфе 4.5.4.1. Если сервер SMTP принимает сообщение, для адресата которого данный сервер означен в записи MX, этот сервер <b>может </b>транслировать сообщение (потенциально, после получения переписанных адресов для MAIL FROM и/или RCPT TO), обеспечивая его окончательную доставку, или передать его дальше, используя тот или иной механизм, не относящийся к транспортной среде SMTP. Естественно, для второго случая сначала должен быть проверен список записей MX.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Если сервер определяет, что ему следует транслировать сообщение без переписывания заголовков, он <b>должен </b>отсортировать записи MX для определения нужной. Высший приоритет для передачи сообщения будет иметь запись с минимальным значением MX. Хост-транслятор должен проверить список на предмет наличия в нем имен или адресов, известных для транзакции. Если найдена соответствующая запись, все остальные записи, для которых уровень предпочтения не выше найденного, должны исключаться из рассмотрения. Если таких записей нет, это говорит об ошибке и сервер <b>должен </b>вернуть сообщение, как недоставляемое. С оставшимися в списке записями <b>следует </b>повторять попытки доставки сообщения в порядке снижения приоритета записи.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b><i>6. Обнаружение и решение проблем</i></b></span></div>
<div class=paragraph style=" padding:2.40pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b>6.1&nbsp;Надежная доставка и отклики по электронной почте</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Когда получатель SMTP принимает часть почты (передав отклик 250 OK в ответ на команду DATA), он принимает на себя ответственность за доставку или трансляцию сообщения. К этой ответственности следует относиться серьезно. <b>Недопустима </b>потеря сообщений по незначительным причинам типа последующего &laquo;падения&raquo; хоста или предсказуемой нехватки ресурсов.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Если после восприятия сообщения обнаруживается невозможность его доставки, получатель SMTP (сервер) <b>должен </b>подготовить и передать уведомление об этом. При передаче уведомления <b>должен </b>использоваться пустой (&quot;&lt;&gt;&quot;) путь возврата в конверте. Получателем такого уведомления <b>должен </b>быть адрес из обратного пути в конверте (или строке Return-Path:). Если обратный путь пустой (&quot;&lt;&gt;&quot;), для сервера SMTP <b>недопустима </b>передача уведомления. Обычно, ничто не запрещает на локальном уровне (в той же среде, к которой относится данный сервер SMTP) принимать решение о протоколировании или иной фиксации сведений о пустом пути возврата. Если адресом является явный маршрут source route, из него <b>должен </b>выделяться последний интервал (final hop). В качестве примера предположим, что нужно передать уведомление для сообщения, принятого по команде:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9>MAIL FROM:&lt;@a,@b:user@d&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>Уведомление <b>должно </b>передаваться с помощью команды:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9>RCPT TO:&lt;user@d&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Некоторые проблемы с доставкой после того, как система SMTP восприняла сообщение, неизбежны. Например, у принимающего сервера SMTP может не быть возможности проверки всех адресов доставки в командах RCPT по причине некритических (soft) ошибок в системе доменных имен, поскольку адресатом является список рассылки (см. описание RCPT), или сервер действует как транслятор и не имеет постоянного доступа к системе доставки. Во избежание дублирования сообщений в результате тайм-аутов, получатель SMTP <b>должен </b>пытаться минимизировать время отклика на индикатор завершения данных &lt;CRLF&gt;.&lt;CRLF&gt;. Подробное обсуждение этого вопроса приводится в RFC 1047 [28].</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b>6.2&nbsp;Обнаружение петель</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Простой подсчет числа заголовков Received: в принятых сообщениях обеспечивает простой, хотя и неэффективный способ   обнаружения   петель   в  почтовой   системе.   Серверам   SMTP,   использующим   такой   способ,   <b>следует</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:1.68pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.40pt;">
<div class=block style=" width:302.40pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:138.00pt;">
<div class=block style=" width:138.00pt; height:12.72pt;">
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font0><b>26</b></span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:154.56pt;">
<div class=block style=" width:154.56pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:18.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:303.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:303.60pt;">
<div class=block style=" width:303.60pt; height:12.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0><a name="bookmark26"><b><u>П</u></b></a><b><u>еревод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:291.36pt;">
<div class=block style=" width:291.36pt; height:12.96pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 54.24pt; text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:2.40pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:783.84pt;">
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.40pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">устанавливать высокий порог отказа (обычно, не менее 100 записей Received). Независимо от используемого механизма сервер <b>должен </b>обеспечивать средства детектирования и предотвращения тривиальных петель.</span></div>
<div class=paragraph style=" padding:5.52pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font4 style=" letter-spacing:-0.55pt;"><b>6.3 Компенсация отклонений от стандартов</b></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.40pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">К несчастью приходится сталкиваться со множеством вариаций, творческих реализаций и откровенных нарушений стандартов для почтовых протоколов Internet - одни возникают часто, другие - реже. Дебаты по вопросам политики корректно реализованных получателей (серверов) или трансляторов SMTP относительно некорректно подготовленных сообщений (пытаться передать их в неизменном виде, отвергнуть или пытаться исправить для повышения вероятности успешной доставки и последующего ответа на них) начались почти одновременно с появлением структурированной почты и конца этому обсуждению не видно. Сторонники жесткой политики утверждают, что попытки исправления редко дают положительные результаты и отказ от передачи плохих сообщений является единственным способом избавиться от некорректно работающих почтовых программ. Сторонники исправления сообщений или доставки в неизменном виде считают, что пользователи предпочитают почту, которая работает во всех возможных ситуациях и на этом направлении может существовать значительное давление рынка. На практике давление рынка может оказаться более сильным для отдельных производителей, чья продукция четко соответствует стандартам, независимо от присутствия реальных разработчиков.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Проблемы, связанные с некорректным форматом сообщений, обострились после введения специальных протоколов для чтения (загрузки) почты с серверов [3, 26, 5, 21]. Эти протоколы поддерживают использование SMTP в качестве протокола передачи и серверов SMTP для трансляции почты на хосты клиентов этих протоколов (которые часто не имеют прямого постоянного подключения Internet). Исторически многие из таких хостов не поддерживают часть механизмов и данных, используемых SMTP (и протоколом почтовых форматов [7]). Некоторые не могут сохранять значение текущего времени, другие не понимают часовых поясов, третьи не знают своего имени и, конечно, ни один из таких хостов не может удовлетворять тем требованиям, которые заложены в концепцию адресов RFC 822. В ответ на появление &laquo;ущербных&raquo; клиентов SMTP многие системы SMTP сейчас дополнительно обрабатывают сообщения, полученные от таких клиентов в неполном или некорректном формате. Такая стратегия в общем случае приемлема, когда сервер может идентифицировать и аутентифицировать клиента, на основании чего строится взаимодействие между клиентом и сервером. delivered to them in incomplete or incorrect form. Такое решение значительно лучше по сравнению с исправлениями, которые могут вносить серверы доставки или трансляции для малознакомых или совсем неизвестных пользователей и клиентских машин.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Ниже перечислены изменения, которые <b>могут </b>быть при необходимости внесены в обрабатываемые сообщения отправляющими (исходными) серверами SMTP или использоваться на приемной стороне SMTP:</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b>•&nbsp; &nbsp; &nbsp; </b>добавление поля message-id при его отсутствии;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b>•&nbsp; &nbsp; &nbsp; </b>добавление даты, времени и часового пояса при их отсутствии;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b>•&nbsp; &nbsp; &nbsp; </b>корректировка адреса в соответствии с форматом FQDN.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Чем меньше информации сервер имеет от клиента, тем менее очевидны корректировки и больше осмотрительности и консерватизма в следует использовать при рассмотрении вопроса о возможности и способах корректировки сообщений. Перечисленные выше изменения <b>недопустимо </b>выполнять на промежуточных трансляторах SMTP. В любом случае корректно реализованные клиенты, предоставляющие корректную информацию будут иметь предпочтение при корректировке сообщений серверами SMTP. Во всех ситуациях рекомендуется тщательно документировать (в полях трассировки и/или комментариях в заголовке) вносимые сервером изменения.</span></div>
<div class=paragraph style=" padding:6.72pt 0.00pt 0.00pt 58.08pt; text-align:left;"><span class=font4><b><i>7. Вопросы безопасности</i></b></span></div>
<div class=paragraph style=" padding:5.28pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font4 style=" letter-spacing:-1.40pt;"><b>7.1</b><span style=" letter-spacing:0.00pt;"><b>&nbsp; </b></span><span style=" letter-spacing:-0.55pt;"><b>Mail Security and Spoofing</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Природа почты SMTP не обеспечивает безопасности, поскольку любой пользователь может напрямую взаимодействовать с принимающим или транслирующим сервером SMTP, создавать сообщения и обманывать простодушных получателей, полагающих, что это почта от кого-то другого. Создание таких сообщений, обманный характер которых не обнаруживается, - задача более сложная, но вполне посильная для людей с нужными знаниями. Следовательно, по мере повышения уровня знаний в сфере почты Internet человек начинает понимать, что почта SMTP не может быть аутентифицирована на транспортном уровне, равно как не обеспечивается и проверка целостности почты. Реальная безопасность почты обеспечивается только сквозными (end-to-end) методами, включающими тело сообщения, типа использования цифровых подписей (см. [14], PGP [4], S/MIME [31]). Различные сервисные расширения и конфигурационные опции, которые обеспечивают аутентификацию на транспортном уровне (например, между клиентом и сервером SMTP) несколько улучшают ситуацию. Однако пока эти методы не дополнены аккуратной передачей ответственности в хорошо спроектированной среде с доверительными отношениями (carefully-designed trust environment), унаследованная &laquo;слабость&raquo; транспортной среды SMTP в части обеспечения безопасности будет сохраняться.</span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Попытки затруднить пользователям подстановку в поле обратного пути в конверте и заголовке From корректный чужой адрес взамен адреса реального отправителя заведомо неправильны - это затрудняет работу легитимных приложений, в которых почта передается одним пользователем по просьбе другого или отклики на ошибки (доставку) должны передаваться по специальному адресу (системы, которые обеспечивают пользователю удобные способы замены этих полей для каждого сообщения отдельно должны будут пытаться создать основные и постоянные адреса почтовых ящиков для пользователей в соответствии с полями Sender в генерируемых сообщениях). Эта спецификация не рассматривает вопросы аутентификации, связанные в протоколом SMTP, но полезная функциональность не может ущемляться в надежде на несущественную защиту против фальсифицированной почты.</span></div>
<div class=paragraph style=" padding:5.76pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font4 style=" letter-spacing:-0.90pt;"><b>7.2</b><span style=" letter-spacing:0.00pt;"><b>&nbsp;</b></span><span style=" letter-spacing:-0.65pt;"><b>Скрытые копии - BC</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.40pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">В передаваемых серверу SMTP командах RCPT могут присутствовать адреса, по тем или иным причинам не указанные в заголовке сообщения. Двумя основными вариантами решения таких задач является использование</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:2.16pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:303.60pt;">
<div class=block style=" width:303.60pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:54.24pt;">
<div class=block style=" width:54.24pt; height:12.72pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font1><b>27</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 110.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:303.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:18.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:12.24pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:135.60pt;">
<div class=block style=" width:135.60pt; height:12.96pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:0.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:760.08pt;">
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">списков и скрытых копий (blind copies – или bc). В тех случаях, когда используется более одной команды RCPT и для того, чтобы избежать подавления некоторых функций этого механизма, клиентам и серверам SMTP <b>не следует </b>копировать весь набор аргументов команды RCPT в заголовки как часть трассировочных полей, информационных полей или заголовков частного расширения. Поскольку на практике это правило часто нарушается и не может быть обеспечено принудительно, передающие системы SMTP, которые знают об использовании bcc, <b>могут </b>счесть полезной передачу каждой скрытой копии в отдельной транзакции с единственной командой RCPT.</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Не существует неразрывных отношений между обратным (из команд MAIL, SAML и т. п.) и прямым (RCPT) адресом в транзакции SMTP (конверте) и адресами в заголовка. Принимающим системам <b>не следует </b>пытаться найти такие соотношения и использовать их для изменения заголовков с целью доставки сообщения. Популярный заголовок Apparently-to (видимо для:) является нарушением данного принципа и хорошо известным случаем ненамеренного разглашения информации; <b>не следует </b>пользоваться этим заголовком.</span></div>
<div class=paragraph style=" padding:3.60pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b>7.3&nbsp;VRFY, EXPN и безопасность</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Как обсуждалось в параграфе 3.5, отдельные сайты могут заблокировать использование команд VRFY и EXPN из соображений безопасности. Как следует из сказанного выше, для реализаций, обеспечивающих возможность такой блокировки недопустимо показывать, что они могут проверять адреса, не проверяя их фактически. Если сайт блокирует команды из соображений безопасности, сервер SMTP <b>должен </b>возвращать отклик 252, а не код, который может ввести в заблуждение относительно результатов верификации адреса.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Возврат кода 250 в ответ на команду VRFY после проверки лишь синтаксиса команды (а не указанного адреса), является нарушением этого правила. Естественно, что реализации, &laquo;поддерживающие&raquo; команду VRFY, которые всегда будут возвращать отклик 550 независимо от корректности адреса, также нарушают это правило. За последние несколько лет содержимое списков рассылки стало очень популярным среди так называемых &laquo;спамеров&raquo; (spammer). Использование команды EXPN для &laquo;сбора&raquo; адресов вынудило администраторов принять меры против недопустимого использования списков. Разработчикам <b>следует </b>поддерживать команду EXPN, а сайтам <b>следует </b>быть осторожными при оценке возможности утечки информации. В качестве механизма аутентификации SMTP некоторые сайты разрешают применение команды EXPN только отдельным пользователям.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b>7.4&nbsp;Разглашение информации в анонсах</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Продолжаются дебаты по вопросу о достоинствах анонсирования типа и версии сервера (а иногда и доменного имени сервера) в приветствиях и откликах на команду HELP и недостатках в результате разглашения информации, которая может использоваться для организации атак. Полезность этой информации для отладки спорна. Те, кто ратует за доступность этой информации, утверждают, что это позволит скорее добиться реальной безопасности сервера SMTP, чем надежда на попытки скрыть известные уязвимости путем утаивания реальной информации. Сайтам следует принимать этот вопрос во внимание, разработчикам настоятельно рекомендуется предоставлять другим хостам минимальную информацию о типе и версии программ сервера.</span></div>
<div class=paragraph style=" padding:3.60pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b>7.5&nbsp;Разглашение информации в полях трассировки</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">В некоторых обстоятельствах (например, при доставке почты и локальной сети, хосты которой не подключены к Internet напрямую), поля трассировки (Received), вносимые в соответствии с данной спецификацией, могут содержать имена хостов и другую информацию, которую не следует разглашать. Обычно это не создает проблем, но для сайтов с высокими требованиями к вопросу разглашения имен это может иметь важное значение. Дополнительные операторы FOR также следует использовать с осторожностью или не использовать совсем в тех случаях, когда многочисленные получатели могут непреднамеренно передать информацию о скрытых получателях (blind copy - bc) другим.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b>7.6&nbsp;Разглашение информации при пересылке сообщений</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Как обсуждалось в параграфе 3.4, использование откликов 251 или 551 для идентификации замены адреса, связанного с почтовым ящиком, может приводить к неумышленному разглашению информации. Сайты, для которых эти вопросы играют важную роль, должны соответствующим образом задавать конфигурацию своих серверов.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b>7.7&nbsp;Свобода действий сервера SMTP</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Сервер SMTP может отказаться принять почту по техническим или иным причинам на стороне принимающего сайта. Однако кооперация между сайтами и инсталляциями делает возможным функционирование Internet. Если сайты будут слишком активно использовать право отказа от приема трафика, возможность доставки почты (одна из важных функций Internet) существенно понизится, поэтому следует осторожно и взвешенно принимать решения в части восприятия (отказа) и обработки трафика.</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">В последние годы использование функций трансляции на промежуточных сайтах стало применяться как способ сокрытия истинного происхождения почты. Некоторые сайты в результате стали предоставлять функции трансляции только известным или идентифицируемым отправителям и разработчикам <b>следует </b>обеспечивать в программах возможность такой фильтрации. Когда почта отвергается по тем или иным причинам, определяемых политикой сайте, рекомендуется использовать код 550 в откликах на команды EHLO, MAIL или RCPT.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b><i>8. Регистрация в IANA</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Агентство IANA поддерживает три регистра, связанных с данной спецификацией. Первый регистр включает сервисные расширения SMTP и связанные с ними ключевые слова, а также (при необходимости) команды и их параметры. Как сказано в параграфе 2.2.2, ни одна из записей этого регистра не может начинаться с X. Записи могут создаваться только для расширений сервиса (и связанных с ними ключевых слов, параметров и команд), которые определены в стандартах или экспериментальных RFC, одобренных IESG для таких задач.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:28.32pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.40pt;">
<div class=block style=" width:302.40pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:138.00pt;">
<div class=block style=" width:138.00pt; height:12.72pt;">
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font0><b>28</b></span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:154.56pt;">
<div class=block style=" width:154.56pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:18.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:303.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0><a name="bookmark28"><b><u>П</u></b></a><b><u>еревод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.96pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:0.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:726.00pt;">
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Второй регистр содержит теги (tag), идентифицирующие &laquo;дословные&raquo; формы записи имен, отличные от адресов IPv4 (эта форма включена в RFC 821 и настоящую спецификацию) и IPv6 (включена в эту спецификацию). Другие варианты &laquo;дословного&raquo; представления требуют стандартизации, которой в настоящее время нет ни для одного из них. Третий регистр, основанный RFC 821 и обновленный данной спецификацией, содержит идентификаторы каналов и протоколов, которые могут использоваться в субоператорах via и with трассировочных строк (заголовки Received:), описанных в параграфе 4.4. Идентификаторы каналов и протоколов в дополнение к указанным в этой спецификации могут регистрироваться только путем стандартизации или через экспериментальные расширения протоколов (RFC, одобренные IESG).</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font4><b><i>9.&nbsp;Литература</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">[I]&nbsp; &nbsp;American National Standards Institute (formerly United States of America Standards Institute), X3.4, 1968, &quot;USA Code for Information Interchange&quot;. ANSI X3.4-1968 has been replaced by newer versions with slight modifications, but the 1968 version remains definitive for the Internet.</span></div>
<div class=paragraph style=" padding:0.00pt 71.76pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">[2] Braden, R., &quot;Requirements for Internet hosts - application and support&quot;, STD 3, RFC 1123<a href="rfc2821.htm#bookmark41"><sup>9</sup>,</a> October 1989. <span class=font13>[3] Butler, M., Chase, D., Goldberger, J., Postel, J. and J. Reynolds, &quot;Post Office Protocol - version 2&quot;, RFC 937, February 1985. [4] Callas, J., Donnerhacke, L., Finney, H. and R. Thayer, &quot;OpenPGP Message Format&quot;, RFC 2440, November 1998. [5] Crispin, M., &quot;Interactive Mail Access Protocol - Version 2&quot;, RFC 1176, August 1990. [6] Crispin, M., &quot;Internet Message Access Protocol - Version 4&quot;, RFC 2060, December 1996. [7] Crocker, D., &quot;Standard for the Format of ARPA Internet Text Messages&quot;, RFC 822, August 1982. [8] Crocker, D. and P. Overell, Eds., &quot;Augmented BNF for Syntax Specifications: ABNF&quot;, RFC 2234, November 1997. [9] De Winter, J., &quot;SMTP Service Extension for Remote Message Queue Starting&quot;, RFC 1985, August 1996. [10] Fajman, R., &quot;An Extensible Message Format for Message Disposition Notifications&quot;, RFC 2298, March 1998.</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">[II]&nbsp;Freed, N, &quot;Behavior of and Requirements for Internet Firewalls&quot;, RFC 2979, October 2000.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font13 style=" line-height:10.32pt;">[12] Freed, N. and N. Borenstein, &quot;Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies&quot;, RFC 2045, December 1996.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">[13] Freed, N., &quot;SMTP Service Extension for Command Pipelining&quot;, RFC 2920, September 2000.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font13 style=" line-height:10.32pt;">[14] Galvin, J., Murphy, S., Crocker, S. and N. Freed, &quot;Security Multiparts for MIME: Multipart/Signed and Multipart/Encrypted&quot;, RFC 1847, October 1995.</span></div>
<div class=paragraph style=" padding:0.00pt 178.56pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">[15] Gellens, R. and J. Klensin, &quot;Message Submission&quot;, RFC 2476, December 1998. [16] Kille, S., &quot;Mapping between X.400 and RFC822/MIME&quot;, RFC 2156, January 1998. [17] Hinden, R and S. Deering, Eds. &quot;IP Version 6 Addressing Architecture&quot;, RFC 2373, July 1998.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">[18] Klensin, J., Freed, N. and K. Moore, &quot;SMTP Service Extension for Message Size Declaration&quot;, STD 10, RFC 1870, November 1995. [19] Klensin, J., Freed, N., Rose, M., Stefferud, E. and D. Crocker, &quot;SMTP Service Extensions&quot;, STD 10, RFC 1869, November 1995. [20] Klensin, J., Freed, N., Rose, M., Stefferud, E. and D. Crocker, &quot;SMTP Service Extension for 8bit-MIMEtransport&quot;, RFC 1652, July 1994.</span></div>
<div class=paragraph style=" padding:0.00pt 131.52pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">[21] Lambert, M., &quot;PCMAIL: A distributed mail system for personal computers&quot;, RFC 1056, July 1988. [22] Mockapetris, P., &quot;Domain names - implementation and specification&quot;, STD 13, RFC 1035, November 1987.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:left; text-indent:18.00pt;"><span class=font13 style=" line-height:10.32pt;">Mockapetris, P., &quot;Domain names - concepts and facilities&quot;, STD 13, RFC 1034, November 1987. [23] Moore, K., &quot;MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text&quot;, RFC 2047, December 1996.</span></div>
<div class=paragraph style=" padding:0.00pt 75.36pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">[24] Moore, K., &quot;SMTP Service Extension for Delivery Status Notifications&quot;, RFC 1891, January 1996. [25] Moore, K., and G. Vaudreuil, &quot;An Extensible Message Format for Delivery Status Notifications&quot;, RFC 1894, January 1996. [26] Myers, J. and M. Rose, &quot;Post Office Protocol - Version 3&quot;, STD 53, RFC 1939, May 1996. [27] Partridge, C., &quot;Mail routing and the domain system&quot;, RFC 974, January 1986. [28] Partridge, C., &quot;Duplicate messages and SMTP&quot;, RFC 1047, February 1988.</span></div>
<div class=paragraph style=" padding:0.00pt 29.76pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">[29] Postel, J., ed., &quot;Transmission Control Protocol - DARPA Internet Program Protocol Specification&quot;, STD 7, RFC 793<a href="rfc2821.htm#bookmark42"><sup>10</sup>,</a> September 1981. [30] Postel, J., &quot;Simple Mail Transfer Protocol&quot;, RFC 821, August 1982. [31] Ramsdell, B., Ed., &quot;S/MIME Version 3 Message Specification&quot;, RFC 2633, June 1999. [32] Resnick, P., Ed., &quot;Internet Message Format&quot;, RFC 2822, April 2001.</span></div>
<div class=paragraph style=" padding:0.00pt 68.40pt 0.00pt 56.64pt; text-align:left;"><span class=font13 style=" line-height:10.32pt;">[33] Vaudreuil, G., &quot;SMTP Service Extensions for Transmission of Large and Binary MIME Messages&quot;, RFC 1830, August 1995. [34] Vaudreuil, G., &quot;Enhanced Mail System Status Codes&quot;, RFC 1893, January 1996.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font4 style=" line-height:11.52pt;"><b><i>10.&nbsp;Адрес редактора</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 64.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">John C. Klensin</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 64.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">AT&amp;T Laboratories</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 64.08pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">99 Bedford St</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 64.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Boston, MA 02111 USA</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 64.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Phone: 617-574-3076</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 64.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">EMail: <span style=" color:rgb(0,0,128);"><a href="mailto:klensin@research.att.com"><u>klensin@research.att.com</u></a></span></span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font4><b><i>11.&nbsp;Благодарности</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">В долгом и трудном процессе подготовки этого документа приняло участие много людей. Долгое обсуждение с участием большого числа людей велось в рабочей группе IETF DRUMS (как в личных беседах, так и с использованием рассылок) по различным техническим вопросам и роли пересмотренного стандарта в почтовой системе Internet – многие участники этих дискуссий помогли в разработке окончательного варианта спецификации. Сотни участников дискуссий, длящихся с момента выхода RFC 821, трудно перечислить здесь, но все они внесли свой вклад в подготовку спецификации.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:39.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:22.56pt;">
<div class=paragraph style=" padding:0.00pt 138.96pt 0.00pt 59.76pt; text-align:left; text-indent:2.16pt;"><span class=font13 style=" line-height:10.32pt;"><a name="bookmark42">П</a>еревод этого документа на русский язык можно найти на сайте <span style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span>. <i>Прим. перев. </i><sup>0</sup> <u>Перевод этого документа на русский язык можно найти на сайте </u><span style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span><u>. <i>Прим. перев.</i></u></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:0.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:303.60pt;">
<div class=block style=" width:303.60pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:54.24pt;">
<div class=block style=" width:54.24pt; height:12.72pt;">
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font0><b>29</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 110.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:303.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:11.28pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:135.60pt;">
<div class=block style=" width:135.60pt; height:12.96pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt;">
<div class=block style=" width:459.36pt; height:1.68pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:775.44pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font6><b>Приложения</b></span></div>
<div class=paragraph style=" padding:2.16pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b><i>A.&nbsp;Транспортный сервис TCP</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Соединения TCP поддерживают передачу 8-битовых байтов, а данные SMTP представляют собой 7-битовые символы ASCII. Каждый символ передается в 8-битовом байте с нулевым значением старшего бита. Сервисные расширения могут изменять это правило и разрешать передачу 8-битовых байтов для содержимого сообщений, но не для команд и откликов SMTP.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b><i>B.&nbsp;Генерация команд SMTP из заголовков RFC 822</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Некоторые системы используют заголовки RFC 822 (только) в протоколах представления почты, а в остальных случаях генерируют команды SMTP на основе заголовков RFC 822, когда такие сообщения передаются АДП (MTA) от агентов ППА (MUA). Поскольку протокол взаимодействия АДП – ППА является частным и не задается стандартами Internet, в таких случаях могут возникать проблемы. Например, проблемы могут возникать при обработке копий bcc и перераспределении списков, когда информация, потенциально относящаяся к почтовому конверту, не отделяется в процессе обработки от информации из заголовков и не хранится отдельно от нее.</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Агентам ППА рекомендуется предоставлять своему первому АДП (submission client) конверт отдельно от сообщения. Однако, если конверты не поддерживаются, <b>следует </b>генерировать команды SMTP, используя приведенные правила:</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 46.32pt; text-align:justify; text-indent:-18.00pt;"><span class=font14 style=" line-height:11.28pt;">1.&nbsp; &nbsp; &nbsp; &nbsp;Каждый адрес получателя из полей заголовка TO, CC, BCC <b>следует </b>копировать в команду RCPT (генерируя, при необходимости, нужное число копий сообщения для помещения в очередь или доставки). Сюда включаются все адреса, перечисленные в &laquo;группе&raquo; RFC 822. Все поля BCC <b>следует </b>удалять из заголовков. После завершения такой обработки оставшиеся заголовки <b>следует </b>проверить на предмет наличия адресов в полях To:, Cc:, Bcc:. При отсутствии <b>следует </b>поместить заголовок bcc: без какой-либо информации, как указано в работе [32].</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 46.32pt; text-align:justify; text-indent:-18.00pt;"><span class=font14 style=" line-height:11.28pt;">2.&nbsp; &nbsp; &nbsp; &nbsp;Адрес возврата в команде MAIL <b>следует </b>(по возможности) получать из системной идентификации представляющего почту (локального) пользователя или из поля From:. При доступности системной идентификации, эти данные <b>следует </b>также копировать в поле заголовка Sender, если информация отличается от адреса в поле From (все имеющиеся поля Sender следует удалить). Система может позволят представляющим почту пользователям переписывать адрес возврата в конверте, но возможно предоставление этого права только привилегированным пользователям. Это не предотвращает подмены почтовых адресов, но осложняет такую подмену (см. параграф 7.1).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">При таком использовании агентов АДП они несут ответственность за корректность передаваемого сообщения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Механизм проверки корректности и обработка (или возврат) некорректных сообщений являются частью интерфейса</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">АДП – ППА (MUA-MTA) и не рассматриваются в данной спецификации.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Протокол представления почты, основанный только на стандарте RFC 822, <b>недопустимо </b>использовать на шлюзах из</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">других (не SMTP) почтовых систем в среду SMTP. Дополнительные данные для конструирования заголовков</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">требуется получать из некоторых источников в другой среде (дополнительные заголовки или конверт).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Попытки передавать сообщения через шлюзы, используя только поля заголовка to и cc будут приводить к</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">возникновению почтовых петель и другим нарушениям в работе почтовой системы Internet. Эти проблемы будут</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">возникать особенно часто в случаях отправки сообщений через списки рассылки Internet и распределении почты в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">чужие среды с использованием информации из конверта. Когда при пересылке таких сообщений учитываются только</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">заголовки, возникновение почтовых петель обратно в среду Internet (и на почтовые списки) почти неизбежно.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b><i>C.&nbsp;Маршруты Source Route</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Исторически поле &lt;reverse-path&gt; содержало в source routing список промежуточных хостов и имя почтового ящика</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">отправителя. Первым в списке &lt;reverse-path&gt; <b>следует </b>указывать хост, подавший команду MAIL. Подобно этому поле</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">&lt;forward-path&gt; может быть списком хостов source routing и адреса получателя. Однако, в общем случае, в поле</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">&lt;forward-path&gt; <b>следует </b>включать только почтовый ящик и доменное имя получателя, отдавая решение задачи</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">маршрутизации почты на откуп системе DNS. Использование явных маршрутов осуждается - хотя серверы <b>должны</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">быть готовы к получению и обработке таких маршрутов (см. 3.3 и F.2), клиентам <b>не следует </b>передавать явные</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">маршруты.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Для целей трансляции прямой путь может быть source route в форме @ONE,@TWO:JOE@THREE, где ONE, TWO,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b>должны </b>быть полными доменными именами. Такая форма используется для того, чтобы можно было отличить адреса</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">от маршрутов. Почтовый ящик представляет собой абсолютный адрес и маршрутную информацию для доставки. Эти</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">понятия не следует путать.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">При использовании source route требования RFC 821 и приведенный ниже текст вступают в противоречие в части</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">механизма создания и обновления прямого и обратного пути.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Сервер SMTP преобразует аргументы команды путем перемещения идентификатора (его доменное имя или имя</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">любого домена для которого сервер обеспечивает почтовый обмен), если такой идентификатор имеется, из прямого</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">пути в начало обратного пути.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Отметим, что прямой и обратный пути появляются в командах и откликах SMTP, но не являются необходимыми в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">сообщении (т. е., нет необходимости включения таких путей и особенно описанного здесь синтаксиса в поля To:,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">From:, CC: и т. п.). И наоборот, для серверов SMTP <b>недопустимо </b>извлекать информацию из этих полей при</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">окончательной доставке сообщения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">При наличии списка хостов он является &laquo;обратным&raquo; маршрутом source route и показывает, что почта транслировалась</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">через каждый хост в списке (первым в списке указан последний по времени транслятор). Этот список используется</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">как source route для возврата отправителю уведомлений о невозможности доставки. Когда каждый транслятор</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">добавляет себя в начало списка, он <b>должен </b>использовать имя, которое известно в транспортной среде, куда</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">транслируется почта, а не в среде, откуда почта поступила (если эти имена различаются).</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:15.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:7.92pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>30</b></span><span style=" color:rgb(0,0,0);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:21.36pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:459.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:135.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:105.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:33.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:4.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:60.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:131.52pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:138.72pt;">
<div class=block style=" width:138.72pt; height:12.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0><a name="bookmark30"><b><u>П</u></b></a><b><u>еревод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:164.88pt;">
<div class=block style=" width:164.88pt; height:12.96pt;">
</div>
</td>
<td class=cell colspan="3" rowspan="2" valign="top" style=" width:291.36pt;">
<div class=block style=" width:291.36pt; height:28.32pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 54.24pt; text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" rowspan="2" valign="top" style=" width:143.28pt;">
<div class=block style=" width:143.28pt; height:18.48pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b><i>D. Сценарии</i></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:160.32pt;">
<div class=block style=" width:160.32pt; height:15.36pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:352.56pt;">
<div class=block style=" width:352.56pt; height:3.12pt;">
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:99.12pt;">
<div class=block style=" width:99.12pt; height:24.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font14>C: обозначается</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="6" valign="top" style=" width:495.84pt;">
<div class=block style=" width:495.84pt; height:21.60pt;">
<div class=paragraph style=" padding:0.00pt 5.76pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">В этом приложении приведено несколько примеров полных сценариев сеансов SMTP. Знаком отправитель (клиент SMTP), а знаком S: - сервер SMTP.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:3.60pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:49.44pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b>D.1 Сценарий типичной транзакции SMTP</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Рассматриваемый ниже пример показывает передачу сообщения, отправленного Смитом (Smith) с хоста bar.com адресатам Jones, Green, Brown на foo.com. Предполагается, что bar.com контактирует с foo.com напрямую. Почта для Jones и Brown принимается, а Green не имеет почтового ящика на foo.com.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:105.36pt;">
<div class=block style=" width:105.36pt; height:239.52pt;">
</div>
</td>
<td class=cell colspan="4" valign="top" style=" width:258.96pt;">
<div class=block style=" width:258.96pt; height:239.52pt;">
<div class=paragraph style=" padding:0.00pt 10.80pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">220&nbsp;foo.com Simple Mail Transfer Service Ready EHLO bar.com</span></div>
<div class=paragraph style=" padding:0.00pt 118.80pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">250-foo.com greets bar.com 250-8BITMIME 250-SIZE 250-DSN 250 HELP</span></div>
<div class=paragraph style=" padding:0.00pt 124.32pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">MAIL FROM:&lt;<span style=" color:rgb(0,0,128);"><a href="mailto:Smith@bar.com"><u>Smith@bar.com</u></a></span>&gt; 250 OK</span></div>
<div class=paragraph style=" padding:0.00pt 135.12pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">RCPT TO:&lt;<span style=" color:rgb(0,0,128);"><a href="mailto:Jones@foo.com"><u>Jones@foo.com</u></a></span>&gt; 250 OK</span></div>
<div class=paragraph style=" padding:0.00pt 135.12pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">RCPT TO:&lt;<span style=" color:rgb(0,0,128);"><a href="mailto:Green@foo.com"><u>Green@foo.com</u></a></span>&gt; 550 No such user here RCPT TO:&lt;<span style=" color:rgb(0,0,128);"><a href="mailto:Brown@foo.com"><u>Brown@foo.com</u></a></span>&gt; 250 OK DATA</span></div>
<div class=paragraph style=" padding:0.00pt 21.60pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">354 Start mail input; end with &lt;CRLF&gt;.&lt;CRLF&gt; Blah blah blah... ...etc. etc. etc. .</span></div>
<div class=paragraph style=" padding:0.00pt 226.80pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">250 OK QUIT</span></div>
<div class=paragraph style=" text-align:left;"><span class=font9 style=" line-height:10.08pt;">221&nbsp;foo.com Service closing transmission channel</span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:230.64pt;">
<div class=block style=" width:230.64pt; height:239.52pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:0.96pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:14.88pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b>D.2 Сценарий прерванной транзакции SMTP</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:105.36pt;">
<div class=block style=" width:105.36pt; height:178.56pt;">
</div>
</td>
<td class=cell colspan="6" valign="top" style=" width:489.60pt;">
<div class=block style=" width:489.60pt; height:178.56pt;">
<div class=paragraph style=" padding:0.00pt 241.44pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">220&nbsp;foo.com Simple Mail Transfer Service Ready EHLO bar.com</span></div>
<div class=paragraph style=" padding:0.00pt 349.44pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">250-foo.com greets bar.com 250-8BITMIME 250-SIZE 250-DSN 250 HELP</span></div>
<div class=paragraph style=" padding:0.00pt 354.96pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">MAIL FROM:&lt;<span style=" color:rgb(0,0,128);"><a href="mailto:Smith@bar.com"><u>Smith@bar.com</u></a></span>&gt; 250 OK</span></div>
<div class=paragraph style=" padding:0.00pt 365.76pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">RCPT TO:&lt;<span style=" color:rgb(0,0,128);"><a href="mailto:Jones@foo.com"><u>Jones@foo.com</u></a></span>&gt; 250 OK</span></div>
<div class=paragraph style=" padding:0.00pt 365.76pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">RCPT TO:&lt;<span style=" color:rgb(0,0,128);"><a href="mailto:Green@foo.com"><u>Green@foo.com</u></a></span>&gt; 550 No such user here RSET 250 OK QUIT</span></div>
<div class=paragraph style=" text-align:left;"><span class=font9 style=" line-height:10.08pt;">221&nbsp;foo.com Service closing transmission channel</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:0.96pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:204.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b>D.3 Сценарий с трансляцией</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Этап <span class=font13>1 - </span>Отправитель <span class=font13>-&gt; </span>транслятор</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">220 foo.com Simple Mail Transfer Service Ready</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">EHLO bar.com</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">250-foo.com greets bar.com</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">250-8BITMIME</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">250-SIZE</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">250-DSN</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">250 HELP</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">MAIL FROM:&lt;<span style=" color:rgb(0,0,128);"><a href="mailto:JQP@bar.com"><u>JQP@bar.com</u></a></span>&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">250 OK</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">RCPT TO:&lt;@foo.com:<span style=" color:rgb(0,0,128);"><a href="mailto:Jones@XYZ.COM"><u>Jones@XYZ.COM</u></a></span>&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">250 OK</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">DATA</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">354 Start mail input; end with &lt;CRLF&gt;.&lt;CRLF&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Date: Thu, 21 May 1998 05:33:29 -0700</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">From: John Q. Public &lt;<span style=" color:rgb(0,0,128);"><a href="mailto:JQP@bar.com"><u>JQP@bar.com</u></a></span>&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Subject:  The Next Meeting of the Board</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">To: <span style=" color:rgb(0,0,128);"><a href="mailto:Jones@xyz.com"><u>Jones@xyz.com</u></a></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:5.04pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:46.08pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Bill:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">The next meeting of the board of directors will be</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.36pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">on Tuesday.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 234.96pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">John.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.56pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:303.60pt;">
<div class=block style=" width:303.60pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:60.72pt;">
<div class=block style=" width:60.72pt; height:12.72pt;">
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font0><b>31</b></span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:230.64pt;">
<div class=block style=" width:230.64pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 104.40pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:105.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:33.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:4.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:60.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:131.52pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:77.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:225.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:154.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:440.40pt;">
<div class=block style=" width:440.40pt; height:12.96pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:154.56pt;">
<div class=block style=" width:154.56pt; height:12.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 18.96pt; text-align:left;"><span class=font0><b><u>Перевод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:77.04pt;">
<div class=block style=" width:77.04pt; height:35.52pt;">
</div>
</td>
<td class=cell colspan="3" valign="top" style=" width:517.92pt;">
<div class=block style=" width:517.92pt; height:35.52pt;">
<div class=paragraph style=" text-align:left;"><span class=font9 style=" line-height:10.08pt;">250 OK</span></div>
<div class=paragraph style=" text-align:left;"><span class=font9 style=" line-height:10.08pt;">QUIT</span></div>
<div class=paragraph style=" text-align:left;"><span class=font9 style=" line-height:10.08pt;">221 foo.com Service closing transmission channel</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:6.48pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 36.00pt; text-align:left;"><span class=font14>Этап 2 - Транслятор -&gt; конечный получатель</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:77.04pt;">
<div class=block style=" width:77.04pt; height:249.84pt;">
</div>
</td>
<td class=cell colspan="3" valign="top" style=" width:517.92pt;">
<div class=block style=" width:517.92pt; height:249.84pt;">
<div class=paragraph style=" padding:0.00pt 269.76pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">220&nbsp;xyz.com Simple Mail Transfer Service Ready EHLO foo.com</span></div>
<div class=paragraph style=" padding:0.00pt 345.36pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">250 xyz.com is on the air MAIL FROM:&lt;@foo.com:<span style=" color:rgb(0,0,128);"><a href="mailto:JQP@bar.com"><u>JQP@bar.com</u></a></span>&gt; 250 OK</span></div>
<div class=paragraph style=" padding:0.00pt 394.08pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">RCPT TO:&lt;<span style=" color:rgb(0,0,128);"><a href="mailto:Jones@XYZ.COM"><u>Jones@XYZ.COM</u></a></span>&gt; 250 OK DATA</span></div>
<div class=paragraph style=" padding:0.00pt 237.36pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">354 Start mail input; end with &lt;CRLF&gt;.&lt;CRLF&gt; Received: from bar.com by foo.com ; Thu, 21 May 1998</span></div>
<div class=paragraph style=" padding:0.00pt 307.68pt 0.00pt 0.00pt; text-align:left; text-indent:21.60pt;"><span class=font9 style=" line-height:10.08pt;">05:33:29 -0700 Date: Thu, 21 May 1998 05:33:22 -0700 From: John Q. Public &lt;<span style=" color:rgb(0,0,128);"><a href="mailto:JQP@bar.com"><u>JQP@bar.com</u></a></span>&gt; Subject:  The Next Meeting of the Board To: <span style=" color:rgb(0,0,128);"><a href="mailto:Jones@xyz.com"><u>Jones@xyz.com</u></a></span></span></div>
<div class=paragraph style=" padding:5.28pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">Bill:</span></div>
<div class=paragraph style=" text-align:left;"><span class=font9 style=" line-height:10.08pt;">The next meeting of the board of directors will be</span></div>
<div class=paragraph style=" text-align:left;"><span class=font9 style=" line-height:10.08pt;">on Tuesday.</span></div>
<div class=paragraph style=" padding:0.00pt 361.68pt 0.00pt 0.00pt; text-align:left; text-indent:129.60pt;"><span class=font9 style=" line-height:10.08pt;">John. .</span></div>
<div class=paragraph style=" padding:0.00pt 485.76pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">250 OK QUIT</span></div>
<div class=paragraph style=" text-align:left;"><span class=font9 style=" line-height:10.08pt;">221&nbsp;foo.com Service closing transmission channel</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:0.96pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:14.88pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3 style=" letter-spacing:-0.65pt;"><b>D.4 </b><span class=font12><b>Сценарий проверки и передачи</b></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:77.04pt;">
<div class=block style=" width:77.04pt; height:229.44pt;">
</div>
</td>
<td class=cell colspan="3" valign="top" style=" width:517.92pt;">
<div class=block style=" width:517.92pt; height:229.44pt;">
<div class=paragraph style=" padding:0.00pt 269.76pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">220&nbsp;foo.com Simple Mail Transfer Service Ready EHLO bar.com</span></div>
<div class=paragraph style=" padding:0.00pt 377.76pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">250-foo.com greets bar.com 250-8BITMIME 250-SIZE 250-DSN 250-VRFY 250 HELP VRFY Crispin</span></div>
<div class=paragraph style=" padding:0.00pt 323.76pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">250 Mark Crispin &lt;<span style=" color:rgb(0,0,128);"><a href="mailto:Admin.MRC@foo.com"><u>Admin.MRC@foo.com</u></a></span>&gt; SEND FROM:&lt;<span style=" color:rgb(0,0,128);"><a href="mailto:EAK@bar.com"><u>EAK@bar.com</u></a></span>&gt; 250 OK</span></div>
<div class=paragraph style=" padding:0.00pt 372.48pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">RCPT TO:&lt;<span style=" color:rgb(0,0,128);"><a href="mailto:Admin.MRC@foo.com"><u>Admin.MRC@foo.com</u></a></span>&gt; 250 OK DATA</span></div>
<div class=paragraph style=" padding:0.00pt 280.56pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">354 Start mail input; end with &lt;CRLF&gt;.&lt;CRLF&gt; Blah blah blah... ...etc. etc. etc. .</span></div>
<div class=paragraph style=" padding:0.00pt 485.76pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.08pt;">250 OK QUIT</span></div>
<div class=paragraph style=" text-align:left;"><span class=font9 style=" line-height:10.08pt;">221&nbsp;foo.com Service closing transmission channel</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:0.96pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:232.80pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b><i>E.&nbsp;Другие вопросы, связанные со шлюзами</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">В общем случае, шлюзам между Internet и другими почтовыми системами <b>следует </b>пытаться сохранить семантику при передаче сообщения через границу между двумя почтовыми системами. Шлюзы, которые пытаются сделать &laquo;вырезки&raquo; путем отображения (например, передача информации из конверта одной среды в заголовок или тело сообщения в другой среде), в общем случае не могут обеспечить требуемого уровня передачи информации. Системы, транслирующие между средами, которые не могут поддерживать одновременно конверты и заголовки почты Internet должны понимать, что в таких случаях потеря некоторой информации практически неизбежна.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b><i>F.&nbsp;Отмененные возможности RFC 821</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>Некоторые возможности RFC 821 признаны проблематичными и их <b>не следует </b>использовать в почте Internet.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b><i>F.1 Команда TURN</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">Эта команда, описанная в RFC 821, затрагивает важные аспекты безопасности, поскольку в отсутствие жесткой аутентификации для хостов, запрашивающих смену ролей клиента и сервера, такую команду можно с легкостью использовать для переадресации почты. Использование этой команды осуждается и системам SMTP <b>не следует </b>применять ее без аутентификации клиента сервером.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4 style=" letter-spacing:-0.55pt;"><b>F.2 Явная маршрутизация почты</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">RFC 821 использует концепцию явного задания маршрута отправителем (explicit source routing) для доставки почты с одного хоста на другой через промежуточные трансляторы. Необходимость в такой маршрутизации отпала после</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.64pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:302.40pt;">
<div class=block style=" width:302.40pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:138.00pt;">
<div class=block style=" width:138.00pt; height:12.72pt;">
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font0><b>32</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:154.56pt;">
<div class=block style=" width:154.56pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:77.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:225.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:154.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:303.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0><a name="bookmark32"><b><u>П</u></b></a><b><u>еревод RFC 2821</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.96pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:357.84pt;">
<div class=block style=" width:357.84pt; height:0.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:703.92pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">появления в DNS записей MX. Существенный вклад в отказ от такой маршрутизации внес документ RFC 1123, в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">соответствии с которым после символа @ в адресе должно указываться полное доменное имя. Следовательно,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">единственной причиной поддержки source route является интероперабельность со старыми клиентами SMTP или</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">агентами MUA, а также отладка почтовых систем. Однако такая маршрутизация может быть  полезна при</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">возникновении серьезных проблем временного характера (типа актуальности записей DNS).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Серверы SMTP <b>должны </b>продолжать восприятие синтаксиса source route в соответствии с данной спецификацией и</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">RFC 1123. При необходимости серверы <b>могут </b>игнорировать явные маршруты, используя из адреса только доменное</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">имя. При использовании source route сообщение <b>должно </b>пересылаться в первый указанный в адресе домен. В</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">частности, для серверов <b>недопустимо </b>сокращение маршрута source route.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Клиентам <b>не следует </b>использовать явную маршрутизацию за исключением нештатных ситуаций типа отладки,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">потенциальной трансляции в обход брандмауэров или случаев возникновения конфигурационных ошибок.</span></div>
<div class=paragraph style=" padding:3.60pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b>F.3 Команда HELO</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Как было указано в параграфах 3.1 и 4.1.1, команда EHLO является более предпочтительной, нежели устаревшая команда HELO. Серверы должны принимать и обрабатывать команды HELO для поддержки старых клиентов.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b>F.4 #-литералы</b></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">В RFC 821 указана возможность задания адресов Internet с помощью десятичного представления номера хоста с префиксом #. На практике с появлением TCP/IP актуальность такого представления была утрачена. В настоящее время этот вариант осуждается и <b>недопустим </b>для использования.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b>F.5 Даты и годы</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">При включении клиентами и серверами SMTP значений даты в сообщения (например, в поля трассировки) <b>должно </b>использоваться 4-значное представление года. Двухзначное представление осуждается, а трехзначное никогда не допускалось в почтовых системах Internet.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b>F.6 Дополнительные команды прямой передачи</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">В дополнение к спецификации механизма доставки сообщений в почтовые ящики пользователей, RFC 821 обеспечивает добавочные команды для прямой доставки сообщений на консоль пользователя. Эти команды (SEND, SAML, SOML) использовались в реализациях достаточно редко, а изменения в технологии рабочих станций и появление других протоколов могут привести к полному забвению этих команд даже при их поддержке в программах. Для клиентов <b>недопустимо </b>предоставление услуг SEND, SAML или SOML, но их <b>могут </b>реализовать серверы. При реализации этих служб сервером <b>должна </b>использоваться модель, приведенная в спецификации RFC 821, а имена команд <b>должны </b>публиковаться в ответ на команду EHLO.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b><i>Полное заявление авторских прав</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b>Copyright (C) The Internet Society (2001). All Rights Reserved.</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">This document and translations of it may be copied and furnished to others, and derivative works that comment on or otherwise explain it or assist in its implementation may be prepared, copied, published and distributed, in whole or in part, without restriction of any kind, provided that the above copyright notice and this paragraph are included on all such copies and derivative works. However, this document itself may not be modified in any way, such as by removing the copyright notice or references to the Internet Society or other Internet organizations, except as needed for the purpose of developing Internet standards in which case the procedures for copyrights defined in the Internet Standards process must be followed, or as required to translate it into languages other than English.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">The limited permissions granted above are perpetual and will not be revoked by the Internet Society or its successors or assigns.</span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:11.28pt;">This document and the information contained herein is provided on an &quot;AS IS&quot; basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font3><b><i>Подтверждение</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14>Возможность исполнения функций RFC Editor обеспечивается Internet Society.</span></div>
<div class=paragraph style=" padding:9.84pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b><i>Перевод на русский язык</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 426.24pt 0.00pt 74.64pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;">Николай Малых BiLiM Systems Ltd. Санкт-Петербург 194354, К-354, а/я 153 тел. (812) 449-0770 <span style=" color:rgb(0,0,128);"><a href="mailto:nmalykh@bilim.com"><u>nmalykh@bilim.com</u></a></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:84.48pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:303.60pt;">
<div class=block style=" width:303.60pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:54.24pt;">
<div class=block style=" width:54.24pt; height:12.72pt;">
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font0><b>33</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:237.12pt;">
<div class=block style=" width:237.12pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 110.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>http://rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.72pt;">
<div class=paragraph>смотря порно <a href='http://www.pro-porno.net/'>порно смотреть онлайн</a>
<script>
var siteid=10204;
var cats='0';
var adult='0';
document.write('<scr'+'ipt type="text/jav'+'ascript" src="/click'+'under2.js"></scr'+'ipt>');
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-10568897-4");
pageTracker._trackPageview();
} catch(err) {}</script></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:303.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:237.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
</body>
</html>


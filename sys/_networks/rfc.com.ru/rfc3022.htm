<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=WINDOWS-1251">

<meta name="author" content="">
<meta name="description" content="">
<meta name="keywords" content="">

<title>Перевод RFC 3022</title>
<style type="text/css">
 table.main {}
 tr.row {}
 td.cell {}
 div.block {}
 div.paragraph {}
 .font0 { font:9.00pt "Arial", sans-serif; }
 .font1 { font:10.00pt "Arial", sans-serif; }
 .font2 { font:13.00pt "Arial", sans-serif; }
 .font3 { font:14.00pt "Arial", sans-serif; }
 .font4 { font:16.00pt "Arial", sans-serif; }
 .font5 { font:27.00pt "Arial", sans-serif; }
 .font6 { font:3.95pt "Courier New", monospace; }
 .font7 { font:9.00pt "Courier New", monospace; }
 .font8 { font:11.00pt "Courier New", monospace; }
 .font9 { font:11.70pt "Courier New", monospace; }
 .font10 { font:12.00pt "Courier New", monospace; }
 .font11 { font:13.00pt "Courier New", monospace; }
 .font12 { font:9.00pt "Times New Roman", serif; }
 .font13 { font:10.00pt "Times New Roman", serif; }
</style>
</head>

<body>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:66.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:5.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:348.48pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:2.88pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:33.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="6" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:0.48pt;">
<div class=paragraph><div align="center"><a href="index.htm">На главную
</a></div><br>
<div style="height: 90px;">
<script type="text/javascript"><!--
google_ad_client = "pub-0899253526956684";
/* 728x90 */
google_ad_slot = "3113460964";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell rowspan="2" valign="top" style=" width:66.24pt;">
<div class=block style=" width:66.24pt; height:37.68pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell colspan="4" valign="top" style=" width:495.12pt;">
<div class=block style=" width:495.12pt; height:36.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font5><b></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:33.60pt;">
<div class=block style=" width:33.60pt; height:37.68pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:5.04pt;">
<div class=block style=" width:5.04pt; height:1.44pt;">
</div>
</td>
<td class=cell colspan="2" rowspan="2" valign="top" style=" width:487.20pt;">
<div class=block style=" width:487.20pt; height:14.16pt;">
<div class=paragraph style=" text-align:left;"><span class=font1><b> </b><span style=" color:rgb(0,0,255);"><b><u></u></b></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:2.88pt;">
<div class=block style=" width:2.88pt; height:1.44pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:71.28pt;">
<div class=block style=" width:71.28pt; height:12.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:36.48pt;">
<div class=block style=" width:36.48pt; height:12.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="6" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:6.48pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:419.76pt;">
<div class=block style=" width:419.76pt; height:95.76pt;">
<div class=paragraph style=" padding:0.00pt 191.28pt 0.00pt 56.88pt; text-align:left;"><span class=font8 style=" line-height:18.48pt;"><b>Network Working Group Request for Comments: 3022 Obsoletes: 1631 Category: Informational</b></span></div>
</div>
</td>
<td class=cell colspan="3" valign="top" style=" width:175.20pt;">
<div class=block style=" width:175.20pt; height:95.76pt;">
<div class=paragraph style=" padding:0.00pt 62.88pt 0.00pt 0.00pt; text-align:right;"><span class=font8 style=" line-height:18.48pt;"><b>P. Srisuresh</b></span></div>
<div class=paragraph style=" padding:0.00pt 62.88pt 0.00pt 0.00pt; text-align:right;"><span class=font8 style=" line-height:18.48pt;"><b>Jasmine Networks</b></span></div>
<div class=paragraph style=" padding:0.00pt 62.88pt 0.00pt 0.00pt; text-align:right;"><span class=font8 style=" line-height:18.48pt;"><b>K. Egevang</b></span></div>
<div class=paragraph style=" padding:0.00pt 62.88pt 0.00pt 0.00pt; text-align:right;"><span class=font8 style=" line-height:18.48pt;"><b>Intel Corporation</b></span></div>
<div class=paragraph style=" padding:0.00pt 62.88pt 0.00pt 0.00pt; text-align:right;"><span class=font8 style=" line-height:18.48pt;"><b>January 2001</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="6" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:33.60pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="6" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:22.08pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 72.48pt; text-align:left;"><span class=font4><b>Традиционная трансляция сетевых адресов IP (NAT)</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="6" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:5.04pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="6" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:12.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 198.96pt; text-align:left;"><span class=font12>Traditional IP Network Address Translator (Traditional NAT)</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="6" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:19.92pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="6" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:523.44pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12><b>Статус документа</b></span></div>
<div class=paragraph style=" padding:4.08pt 28.80pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:10.08pt;">Этот документ содержит информацию для сообщества Internet и не определяет каких-либо стандартов. Документ может распространяться свободно.</span></div>
<div class=paragraph style=" padding:2.16pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;"><b>Авторские права</b></span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">Copyright (C) The Internet Society (2001). All Rights Reserved.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;"><b>Предисловие</b></span></div>
<div class=paragraph style=" padding:2.16pt 28.32pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Описанная в этом документе работа NAT расширяет возможности трансляции адресов, описанные в RFC 1631 и включает новый тип адресов, а также трансляцию портов TCP/UDP. Кроме того, документ вносит исправления в алгоритм корректировки контрольных сумм (Checksum adjustment), опубликованный в RFC 1631, а также включает обсуждение работы NAT и возможные ограничения.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12><b>Тезисы</b></span></div>
<div class=paragraph style=" padding:4.08pt 28.32pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Базовая трансляция сетевых адресов или Basic NAT<sup>1</sup> представляет собой метод отображения адресов IP из одной группы в другую, прозрачного для конечных пользователей. Трансляция сетевых адресов и номеров портов или NAPT<sup>2</sup> - метод, с помощью которого множество сетевых адресов и соответствующих портов TCP/UDP (Transmission Control Protocol/User Datagram Protocol) преобразуется в один сетевой адрес и номер порта TCP/UDP. Оба метода вместе называют традиционной трансляцией адресов (traditional NAT). NAT обеспечивает механизм подключения областей с приватными адресами к внешним областям, в которых используются уникальные в глобальном масштабе зарегистрированные адреса.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font3><b><i>1. Введение</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Необходимость преобразования (трансляции) адресов IP возникает в тех случаях, когда используемые внутри сети адреса IP невозможно использовать за пределами сети из соображений сохранения тайны или по той причине, что эти адреса корректны только внутри сети.</span></div>
<div class=paragraph style=" padding:4.32pt 28.56pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Сетевая топология за пределами локального домена может изменяться по разным причинам. Абоненты могут менять провайдеров, опорные сети компаний могут реорганизоваться, а провайдеры могут делиться или объединяться. Всякий раз при изменении внешней топологии выделение адресов внутри локального домена также требуется соответствующим образом изменять. Эти изменения могут оставаться незаметными для пользователей внутри домена при централизованном изменении на одном маршрутизаторе, обеспечивающем трансляцию адресов.</span></div>
<div class=paragraph style=" padding:4.08pt 28.32pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Базовая трансляция во многих случаях (за исключением ситуаций, указанных в [NAT-TERM] и главе 6 данного документа) может обеспечивать доступ пользователей из частной сети во внешние сети, а также доступ извне к некоторым локальным хостам. Организациям, в которых сеть используется для решения внутренних задач, а доступ во внешние сети требуется нерегулярно, такая схема будет весьма удобна.</span></div>
<div class=paragraph style=" padding:4.08pt 28.32pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Многие пользователи SOHO<sup>3</sup> и удаленные сотрудники используют в своих офисах множество узлов с приложениями TCP/UDP, но имеют лишь один адрес IP, выделенный их маршрутизатору провайдером для доступа во внешнюю сеть. Эта постоянно растущая группа удаленных пользователей может применить метод трансляции NAPT, который позволяет множеству узлов из локальной сети одновременно получить доступ во внешние сети с использованием единственного адреса IP, выделенного для их маршрутизатора.</span></div>
<div class=paragraph style=" padding:4.08pt 28.32pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Существуют ограничения на использование метода трансляции. Обязательно, чтобы все запросы и отклики, относящиеся к одной сессии, маршрутизировались одним NAT-маршрутизатором. Одним из вариантов решения задачи является организация NAT на граничном маршрутизаторе, который является единственным для краевого домена и все пакеты IP, адресованные в домен или исходящие из него, проходят через этот маршрутизатор. Существуют также варианты решения задачи при использовании множества устройств NAT. Например, частная сеть может иметь две разных точки выхода в сети различных провайдеров и поток пакетов той или иной сессии внутреннего хоста может проходить через любое устройств NAT, которое будет обеспечивать лучшую метрику для внешнего хоста. При отказе одного из маршрутизаторов NAT оставшийся маршрутизатор сможет обслуживать трафик для всех соединений. Однако в этой модели при смене маршрутизации во время организованной сессии и переключении на другой маршрутизатор NAT соединение данной сессии будет разорвано. В качестве варианта решения этой</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="6" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:7.92pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:419.76pt;">
<div class=block style=" width:419.76pt; height:43.44pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;"><sup>1</sup>Basic Network Address Translation</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;"><sup>2</sup>Network Address Port Translation</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;"><sup>3</sup>Small Office, Home Office – небольшой офис, домашний офис.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell colspan="3" valign="top" style=" width:175.20pt;">
<div class=block style=" width:175.20pt; height:43.44pt;">
<div class=paragraph style=" padding:30.48pt 0.00pt 0.00pt 69.12pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="6" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:21.36pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:66.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:5.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:348.48pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:2.88pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:33.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:156.48pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:15.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:49.20pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:52.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:21.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:6.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:5.28pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:15.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:50.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:33.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:16.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:32.64pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:34.08pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:47.28pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:57.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="16" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" rowspan="2" valign="top" style=" width:221.28pt;">
<div class=block style=" width:221.28pt; height:12.72pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell colspan="8" rowspan="2" valign="top" style=" width:185.76pt;">
<div class=block style=" width:185.76pt; height:12.72pt;">
</div>
</td>
<td class=cell colspan="5" valign="top" style=" width:187.92pt;">
<div class=block style=" width:187.92pt; height:12.48pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 49.44pt; text-align:left;"><span class=font0><b><u>Перевод RFC 3022</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:49.44pt;">
<div class=block style=" width:49.44pt; height:0.24pt;">
</div>
</td>
<td class=cell valign="top" style=" width:34.08pt;">
<div class=block style=" width:34.08pt; height:0.24pt;">
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:47.28pt;">
<div class=block style=" width:47.28pt; height:12.00pt;">
<div class=paragraph style=" text-align:left;"><span class=font12>о состоянии</span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:57.12pt;">
<div class=block style=" width:57.12pt; height:12.00pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="11" valign="top" style=" width:407.04pt;">
<div class=block style=" width:407.04pt; height:11.76pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">проблемы можно использовать одинаковую конфигурацию NAT на обоих маршрутизаторах<br></span></div>
</div>
</td>
<td class=cell colspan="3" valign="top" style=" width:83.52pt;">
<div class=block style=" width:83.52pt; height:11.76pt;">
<div class=paragraph style=" text-align:left;"><span class=font12>обмен информацией</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="16" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:350.16pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">соединений для обеспечения безопасного переключения трафика между маршрутизаторами.</span></div>
<div class=paragraph style=" padding:4.08pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Трансляция адресов не зависит от приложений и часто сопровождается специализированными шлюзами (ALG<sup>4</sup> для мониторинга и изменения передаваемой информации. FTP является наиболее популярным представителем ALG на устройствах NAT. Приложениям, которым требуется наличие ALG, недопустимо передавать свои данные в шифрованном виде, поскольку это будет нарушать работу ALG, если последний не имеет ключа для расшифровки информации.</span></div>
<div class=paragraph style=" padding:4.08pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Недостатком этого решения является сквозная значимость адресов IP и рост числа хранимых состояний. В результате сквозная защита IP на сетевом уровне, обеспечиваемая IPSec, не может использоваться конечными станциями при наличии в пути устройств NAT. Преимуществами этого варианта является то, что его можно реализовать без внесения изменений в настройки хостов и маршрутизаторов.</span></div>
<div class=paragraph style=" padding:4.32pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Определения терминов &quot;Address Realm&quot;, &quot;Transparent Routing&quot;, &quot;TU Ports&quot;, &quot;ALG&quot; и др., используемые в данном документе, можно найти в [NAT-TERM].</span></div>
<div class=paragraph style=" padding:9.60pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b><i>2. Обзор традиционной трансляции NAT</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Описанная в этом документе работа системы трансляции адресов относится к Traditional NAT. Существуют и другие варианты NAT, которые в этом документе не рассматриваются. Traditional NAT обеспечивает в большинстве случаев внутренним хостам частных сетей прозрачный доступ во внешнюю сеть. При традиционной трансляции сессии являются односторонними<sup>5</sup> и направлены наружу из частной сети. Организация сессий в противоположном направлении может быть разрешена в качестве исключения с использованием статического отображения адресов для избранных хостов. Традиционная трансляция имеет два варианта - Basic NAT и NAPT. Basic NAT обеспечивает преобразование только для адресов, а NAPT позволяет транслировать адреса IP и идентификаторы транспортного уровня (такие, как номера портов TCP/UDP или ICMP query ID).</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">Если явно не<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font9 style=" letter-spacing:-1.00pt;"><b>\ | /              .                                               /</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">указано  иное,   <span class=font7><b>+ </b></span><span class=font7><b>------------------------- + WAN    .</b></span><span class=font0><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span class=font7><b>+ ---------------------------- </b></span><span class=font7><b>+/</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">термины NAT<span class=font0>&nbsp; &nbsp;</span><span class=font7><b>|Региональный маршрутизатор| </b></span><span class=font7><b>---------------------- </b></span><span class=font7><b>|Оконечный маршрутизатор с NAT|---</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">и   трансляция   <span class=font7><b>+ </b></span><span class=font7><b>------------------------- +        .</b></span><span class=font0><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span class=font7><b>+ ---------------------------- </b></span><span class=font7><b>+\</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">адресов в этом<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font9 style=" letter-spacing:-0.80pt;"><b>.                   |       \</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">документе<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=font7><b>.                   | ЛВС</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">относятся      к<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=font7><b>.             ---------------</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">традиционной<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font7><b>Оконечный маршрутизатор</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">трансляции, а</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">именно NAPT<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><i>Рисунок 1: Традиционная конфигурация NAT</i></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12>и Basic NAT.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12>Для выполнения трансляции могут использоваться только оконечные<sup>6</sup> маршрутизаторы, как показано на рисунке 1.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="16" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:156.48pt;">
<div class=block style=" width:156.48pt; height:18.48pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3 style=" letter-spacing:-0.75pt;"><b>2.1 Обзор Basic NAT</b></span></div>
</div>
</td>
<td class=cell colspan="15" valign="top" style=" width:438.48pt;">
<div class=block style=" width:438.48pt; height:18.48pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="16" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:78.48pt;">
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">В этом параграфе описана работа Basic NAT. Оконечный домен с набором приватных сетевых адресов может взаимодействовать с внешними сетями, используя динамическое отображение набора приватных адресов на некое множество публичных<sup>7</sup> адресов IP. Если число локальных узлов не превышает число имеющихся публичных адресов, каждому локальному адресу можно гарантированно поставить в соответствие публичный адрес. В противном случае число узлов, которые могут одновременно получить доступ во внешние сети, будет ограничено количеством публичных адресов. Отдельные локальные адреса могут статически отображаться на конкретные публичные адреса для обеспечения доступа к локальным хостам извне с использованием фиксированных адресов. С одного локального узла может быть организовано множество одновременных сессий, использующих одно адресное отображение.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="16" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.08pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" rowspan="2" valign="top" style=" width:172.08pt;">
<div class=block style=" width:172.08pt; height:58.56pt;">
<div class=paragraph style=" padding:0.00pt 8.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Адреса внутри оконечного домена являются локальными для этого домена и некорректны за его пределами. Таким образом, эти адреса могут использоваться </span></div>
</div>
</td>
<td class=cell colspan="14" valign="top" style=" width:422.88pt;">
<div class=block style=" width:422.88pt; height:38.16pt;">
<div class=paragraph style=" padding:0.48pt 0.00pt 0.00pt 169.68pt; text-align:left;"><span class=font7><b>\ </b><span class=font0><b>I </b></span><b>/</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 105.84pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>+--------------------------+</b></span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 108.00pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>|Региональный маршрутизатор|</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" rowspan="4" valign="top" style=" width:101.76pt;">
<div class=block style=" width:101.76pt; height:40.80pt;">
<div class=paragraph style=" padding:20.40pt 0.00pt 0.00pt 42.24pt; text-align:left;"><span class=font7><b>Stub A</b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:21.36pt;">
<div class=block style=" width:21.36pt; height:36.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 4.08pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>+--------------------------</b></span></div>
</div>
</td>
<td class=cell colspan="5" rowspan="2" valign="top" style=" width:78.24pt;">
<div class=block style=" width:78.24pt; height:36.00pt;">
<div class=paragraph style=" padding:0.00pt 48.24pt 0.00pt 0.00pt; text-align:right;"><span class=font7 style=" line-height:10.08pt;"><b>WAN |</b></span></div>
<div class=paragraph style=" padding:0.00pt 48.24pt 0.00pt 0.00pt; text-align:right;"><span class=font7 style=" line-height:10.08pt;"><b>|</b></span></div>
<div class=paragraph style=" padding:0.00pt 45.84pt 0.00pt 0.00pt; text-align:right;"><span class=font7 style=" line-height:10.08pt;"><b>..... |</b></span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:50.40pt;">
<div class=block style=" width:50.40pt; height:20.40pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 9.84pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>| WAN</b></span></div>
</div>
</td>
<td class=cell colspan="4" valign="top" style=" width:171.12pt;">
<div class=block style=" width:171.12pt; height:20.40pt;">
<div class=paragraph style=" text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>+</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:172.08pt;">
<div class=block style=" width:172.08pt; height:15.60pt;">
<div class=paragraph style=" padding:0.00pt 8.88pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">одновременно во множестве оконечных доменов.</span></div>
</div>
</td>
<td class=cell colspan="3" rowspan="2" valign="top" style=" width:83.04pt;">
<div class=block style=" width:83.04pt; height:17.52pt;">
<div class=paragraph style=" padding:0.00pt 15.36pt 0.00pt 2.88pt; text-align:left; text-indent:8.40pt;"><span class=font7 style=" line-height:10.08pt;"><b>| ..| .........</b></span></div>
</div>
</td>
<td class=cell colspan="3" rowspan="2" valign="top" style=" width:138.48pt;">
<div class=block style=" width:138.48pt; height:17.52pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 6.24pt; text-align:left;"><span class=font7><b>Stub B</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt; height:1.92pt;">
</td>
<td class=cell colspan="2" rowspan="6" valign="top" style=" width:172.08pt;">
<div class=block style=" width:172.08pt; height:83.52pt;">
<div class=paragraph style=" padding:1.44pt 8.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Например, один блок адресов класса A может применяться во многих оконечных доменах сразу. В каждой точке выхода из оконечного домена во внешнюю сеть используется NAT. Если в домене используется несколько точек выхода, важное значение </span></div>
</div>
</td>
<td class=cell colspan="4" rowspan="2" valign="top" style=" width:48.48pt;">
<div class=block style=" width:48.48pt; height:4.80pt;">
</div>
</td>
<td class=cell rowspan="3" valign="top" style=" width:0.96pt;">
<div class=block style=" width:0.96pt; height:6.96pt;">
<div class=paragraph style=" text-align:left;"><span class=font10>I</span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:50.16pt;">
<div class=block style=" width:50.16pt; height:4.80pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt; height:1.92pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt; height:2.88pt;">
</td>
<td class=cell colspan="6" rowspan="6" valign="top" style=" width:221.52pt;">
<div class=block style=" width:221.52pt; height:89.76pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 11.28pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>|</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 13.44pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>| v{s=198.76.29.7,</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 10.08pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>| v d=198.76.28.4}</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 3.84pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>+ ----------------------------- +</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 3.84pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>|Оконечный маршрутизатор с NAT|</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 3.84pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>+ ----------------------------- +</b></span></div>
<div class=paragraph style=" padding:0.00pt 169.20pt 0.00pt 20.40pt; text-align:left; text-indent:26.40pt;"><span class=font7 style=" line-height:10.08pt;"><b>| ЛВС |</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt; height:2.88pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="6" valign="top" style=" width:150.24pt;">
<div class=block style=" width:150.24pt; height:2.16pt;">
</div>
</td>
<td class=cell valign="top" style=" width:50.16pt;">
<div class=block style=" width:50.16pt; height:2.16pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="8" valign="top" style=" width:201.36pt;">
<div class=block style=" width:201.36pt; height:3.12pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:151.20pt;">
<div class=block style=" width:151.20pt; height:6.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 52.80pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>{s=198.76.29.7,<br></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:50.16pt;">
<div class=block style=" width:50.16pt; height:6.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 1.20pt; text-align:left;"><span class=font10>I</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt; height:66.48pt;">
</td>
<td class=cell colspan="8" rowspan="2" valign="top" style=" width:201.36pt;">
<div class=block style=" width:201.36pt; height:74.64pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 58.08pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>d=198.76.28.4}^ |</b></span></div>
<div class=paragraph style=" text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>+ ----------------------------- +</b></span></div>
<div class=paragraph style=" text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>|Оконечный маршрутизатор с NAT|</b></span></div>
<div class=paragraph style=" text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>+ ----------------------------- +</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 110.88pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>|</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 110.88pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>| ЛВС</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt; height:66.48pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt; height:8.16pt;">
</td>
<td class=cell colspan="2" rowspan="2" valign="top" style=" width:172.08pt;">
<div class=block style=" width:172.08pt; height:18.24pt;">
<div class=paragraph style=" padding:0.00pt 8.88pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">приобретает использование во всех таких точках одинаковых </span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt; height:8.16pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt; height:10.08pt;">
</td>
<td class=cell colspan="4" rowspan="2" valign="top" style=" width:129.12pt;">
<div class=block style=" width:129.12pt; height:27.36pt;">
<div class=paragraph style=" padding:7.92pt 8.88pt 0.00pt 42.48pt; text-align:left; text-indent:-4.08pt;"><span class=font7 style=" line-height:10.08pt;"><b>{s=10.33.96.5, </b><sup>Л </sup><b>d=198.76.28.4}'</b></span></div>
</div>
</td>
<td class=cell colspan="4" rowspan="2" valign="top" style=" width:72.24pt;">
<div class=block style=" width:72.24pt; height:27.36pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 5.28pt; text-align:left;"><span class=font10>I</span></div>
</div>
</td>
<td class=cell colspan="6" rowspan="2" valign="top" style=" width:221.52pt;">
<div class=block style=" width:221.52pt; height:27.36pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 30.24pt; text-align:left;"><span class=font6>I</span></div>
<div class=paragraph style=" padding:0.00pt 90.72pt 0.00pt 19.20pt; text-align:left; text-indent:8.88pt;"><span class=font7 style=" line-height:10.80pt;"><b>|  v{s=198.76.29.7, +</b>—<b>+ v d=10.81.13.22} </b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt; height:10.08pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:172.08pt;">
<div class=block style=" width:172.08pt; height:17.28pt;">
<div class=paragraph style=" padding:0.00pt 47.04pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">таблиц трансляции NAT.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="16" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:3.36pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="5" valign="top" style=" width:295.20pt;">
<div class=block style=" width:295.20pt; height:6.96pt;">
<div class=paragraph style=" padding:0.00pt 132.00pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">В примере, показанном на<br></span></div>
</div>
</td>
<td class=cell colspan="5" valign="top" style=" width:78.24pt;">
<div class=block style=" width:78.24pt; height:6.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 6.00pt; text-align:left;"><span class=font6>I —I</span></div>
</div>
</td>
<td class=cell colspan="6" valign="top" style=" width:221.52pt;">
<div class=block style=" width:221.52pt; height:6.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 17.52pt; text-align:left;"><span class=font6 style=" line-height:10.80pt;">I —I</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="16" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:2.40pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:273.84pt;">
<div class=block style=" width:273.84pt; height:7.44pt;">
<div class=paragraph style=" padding:0.00pt 110.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">рисунке 2, оконечные домены A и<br></span></div>
</div>
</td>
<td class=cell colspan="3" valign="top" style=" width:32.64pt;">
<div class=block style=" width:32.64pt; height:7.44pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 20.40pt; text-align:left;"><span class=font7><b>/</b></span></div>
</div>
</td>
<td class=cell colspan="3" valign="top" style=" width:66.96pt;">
<div class=block style=" width:66.96pt; height:7.44pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 14.64pt; text-align:left;"><span class=font7><b>\</b></span></div>
</div>
</td>
<td class=cell colspan="6" valign="top" style=" width:221.52pt;">
<div class=block style=" width:221.52pt; height:7.44pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.48pt; text-align:left;"><span class=font7><b>/</b>____<b>\</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="16" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:3.60pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:273.84pt;">
<div class=block style=" width:273.84pt; height:5.76pt;">
<div class=paragraph style=" padding:0.00pt 110.88pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">B используют блок приватных<br></span></div>
</div>
</td>
<td class=cell colspan="6" rowspan="2" valign="top" style=" width:99.60pt;">
<div class=block style=" width:99.60pt; height:13.20pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 9.84pt; text-align:left;"><span class=font7><b>10.33.96.5</b></span></div>
</div>
</td>
<td class=cell colspan="6" rowspan="2" valign="top" style=" width:221.52pt;">
<div class=block style=" width:221.52pt; height:13.20pt;">
<div class=paragraph style=" text-align:left;"><span class=font7><b>10.81.13.22</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" rowspan="2" valign="top" style=" width:221.28pt;">
<div class=block style=" width:221.28pt; height:8.16pt;">
<div class=paragraph style=" padding:0.00pt 57.84pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">адресов класса A 10.0.0.0/8 [RFC<br></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:52.56pt;">
<div class=block style=" width:52.56pt; height:7.44pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt; height:0.72pt;">
</td>
<td class=cell colspan="13" rowspan="2" valign="top" style=" width:373.68pt;">
<div class=block style=" width:373.68pt; height:13.20pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 52.56pt; text-align:left;"><span class=font13><i>Рисунок 2: Основы работы Basic NAT</i></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.72pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:221.28pt;">
<div class=block style=" width:221.28pt; height:12.48pt;">
<div class=paragraph style=" padding:0.00pt 169.68pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">1918].</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="16" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:10.08pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="16" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:74.64pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;"><sup>4</sup>application specific gateway – Специализированный шлюз для приложения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;"><sup>5</sup>В оригинале – “Uni-directional”. Имеется в виду не направление передачи пакетов, а направление организации соединений. Т. е., в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">данном случае можно организовать соединения с внешними хостами по инициативе внутренних, но не наоборот. <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;"><sup>6</sup>В оригинале - “stub border router”. <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;"><sup>7</sup>В оригинале - “globally valid network address” - корректные в глобальном масштабе адреса. Будем для краткости называть их</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">публичными. <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="16" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:156.48pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:15.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:49.20pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:52.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:21.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:6.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:5.28pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:15.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:50.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:33.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:16.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:32.64pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:34.08pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:47.28pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:57.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:177.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:199.68pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:114.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:103.44pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0><b><u>Перевод RFC 3022</u></b></span></div>
</div>
</td>
<td class=cell colspan="2" rowspan="2" valign="top" style=" width:218.16pt;">
<div class=block style=" width:218.16pt; height:12.72pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:1.44pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:727.68pt;">
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:10.08pt;">Системе NAT домена A выделен блок адресов класса C 198.76.29.0/24, а в домене B - блок 198.76.28.0/24. Адреса блоков класса C являются уникальными в глобальном масштабе и другие устройства NAT не могут их использовать.</span></div>
<div class=paragraph style=" padding:4.08pt 28.08pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Когда хост домена A с адресом 10.33.96.5 хочет передать пакет хосту домена B с адресом 10.81.13.22, он использует в качестве адреса получателя уникальное в глобальном масштабе значение 198.76.28.4 и передает пакет своему основному маршрутизатору. Этот маршрутизатор имеет статический маршрут в сеть 198.76.0.0 и пакет пересылается в WAN-канал. Однако до того, как пакет будет передан, NAT преобразует адрес отправителя 10.33.96.5 в заголовке IP в уникальный адрес 198.76.29.7. Аналогично происходит преобразование адресов для пакетов IP, передаваемых в обратном направлении.</span></div>
<div class=paragraph style=" padding:4.32pt 28.56pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Отметим, что трансляция не требует внесения изменений на хостах или маршрутизаторах. Например, при для хоста домена A хостом из домена B будет использоваться адрес 198.76.28.4. Трансляция адресов в большинстве случаев прозрачна для конечных хостов. Естественно, что приведенный пример очень прост. Эта схема трансляции имеет множество спорных моментов, которые требуется исследовать.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font2><b>2.2. Обзор NAPT</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Предположим, что организация имеет частную сеть IP и WAN-канал к провайдеру. Краевому маршрутизатору оконечной сети присвоен уникальный адрес для интерфейса канала WAN, а узлы внутри сети организации используют приватные адреса, значимость которых ограничена данной сетью. В этом случае узлы внутренней сети могут получить одновременный доступ во внешние сети с использованием единственного зарегистрированного адреса IP и трансляции NAPT. Этот вариант трансляции позволяет отображать пары типа (локальный адрес, локальный номер порта TU<sup>8</sup>) в пары типа (зарегистрированный адрес, присвоенный номер порта TU).</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">Эта   модель   отвечает   требованиям<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font7><b>\ | /</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">большинства    групп     SOHO    для<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=font7><b>+ ----------------------- +</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">организации   доступа   во   внешние<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=font7><b>|Маршрутизатор провайдера|</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">сети с использованием единственно-<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=font7><b>+ ----------------------- +</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">го адреса IP, выделенного провайде-<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font7><b>WAN |</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">ром. Модель можно расширить для<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font7><b>|</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">того, чтобы обеспечить доступ извне<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font7><b>Stub A </b></span><span class=font7><b>............. </b></span><span class=font7><b>|....</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">к локальному узлу за счет статичес-<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font7><b>|</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">кого отображения локального узла на<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=font7><b>^{s=138.76.28.4,sport=1024, | v{s=138.76.29.7, sport = 23,</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">каждый    номер    порта    TU    для<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=font7><b>^ d=138.76.29.7,dport=23}  | v d=138.76.28.4, dport = 1024}</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">зарегистрированного адреса IP.<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font7><b>+ ----------------------------- +</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12>В показанном на рисунке 3 примере<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font7><b>|Оконечный маршрутизатор с NAPT|</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12>внутри оконечной сети A использует-<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font7><b>+ ----------------------------- +</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12>ся блок адресов класса A 10.0.0.0/8.<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=font7><b>|</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12>WAN-интерфейсу<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>граничного<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=font7><b>| ЛВС</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12>маршрутизатора   сети   провайдером   <span class=font7><b>-------------------------------------------</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12>присвоен IP-адрес 138.76.28.4.<span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font7><b>|   ^{s=10.0.0.10,sport=3017,    | v{s=138.76.29.7, sport=23,</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 56.88pt; text-align:left; text-indent:171.36pt;"><span class=font7 style=" line-height:8.40pt;"><b>|   ^ d=138.76.29.7,dport=23}    | v d=10.0.0.10, dport=3017} </b><span class=font12>Когда   хост   сети   A   с   адресом</span><span class=font0>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><b>|</b><span class=font0><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><b>|</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:10.08pt;">10.0.0.10 передает пакет telnet хосту       <span class=font7><b>+--+     +--+</b></span><span class=font0><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span class=font7><b>+--+</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:10.08pt;">138.76.29.7, он указывает публичный       <span class=font7><b>|--|     |--|</b></span><span class=font0><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span class=font7><b>|--|</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:10.08pt;">адрес получателя 138.76.29.7 и от-     <span class=font7><b>/____\   /____\</b></span><span class=font0><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span class=font7><b>/____\</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:10.08pt;">правляет пакет основному маршрути-   <span class=font7><b>10.0.0.1 10.0.0.2  </b></span><span class=font7><b>.....       </b></span><span class=font7><b>10.0.0.10</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 151.68pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:9.84pt;">затору. Маршрутизатор имеет стати­ческий<span class=font13> </span>маршрут<span class=font13> </span>в<span class=font13> </span>сеть<span class=font13> </span>138.76.0.0/16<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font13><i>Рисунок 3: Работа NAPT </i></span>и пересылает пакет в канал WAN.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Однако до пересылки пакета NAPT транслирует адрес отправителя 10.0.0.10 и номер порта TCP 3017 в заголовках IP и TCP, используя публичный адрес 138.76.28.4 и уникальное значение номера порта TCP (скажем, 1024). Для обратных пакетов происходит похожее преобразование адреса и номера порта TCP в IP-адрес локального хоста и номер целевого порта TCP. Отметим снова, что не требуется вносить какие-либо изменения на хостах или маршрутизаторах. Трансляция совершенно прозрачна.</span></div>
<div class=paragraph style=" padding:4.32pt 28.56pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">В описанном варианте поддерживаются только сеансы TCP/UDP, организованные из локальной сети. Однако для некоторых служб (таких, как DNS) требуется обеспечить доступ извне. Могут существовать также иные службы, к которым организация хочет предоставить внешний доступ. Можно статически настроить на граничном маршрутизаторе отображение общеизвестных номеров портов TU [RFC 1700] на адреса конкретных хостов локальной сети.</span></div>
<div class=paragraph style=" padding:4.08pt 28.08pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">В дополнение к сессиям TCP/UDP маршрутизатор NAPT может также обеспечивать мониторинг сообщений ICMP, за исключением типа REDIRECT. Запросы ICMP транслируются подобно пакетам TCP/UDP и поле идентификатора в заголовке сообщения ICMP будет уникально отображаться в идентификатор запроса для зарегистрированного адреса IP. Поле идентификатора в заголовках сообщений ICMP устанавливается отправителем и возвращается неизменным в отклике на запрос. Следовательно, пара (локальный адрес IP, локальный идентификатор ICMP) отображается в пару (публичный адрес IP, выделенное значение идентификатора ICMP) маршрутизатором NAPT и обеспечивает уникальную идентификацию всех типов сообщений ICMP от любого из локальных хостов. Изменение сообщений ICMP об ошибках рассматриваемое ниже, включает модификацию данных ICMP, а также заголовков IP и ICMP.</span></div>
<div class=paragraph style=" padding:4.08pt 28.08pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">В конфигурациях NAPT, где зарегистрированный адрес IP совпадает с IP-адресом WAN-интерфейса оконечного маршрутизатора, этот маршрутизатор должен различать сессии TCP, UDP или ICMP, организованные им самим от сессий, организованных узлами внутренней сети. Все входящие сессии (включая TCP, UDP и ICMP) предполагаются адресованными маршрутизатору NAT, как конечной точке, если целевой порт не отображен статически на адрес того или иного узла локальной сети.</span></div>
<div class=paragraph style=" padding:4.32pt 28.80pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Сессии, отличные от TCP, UDP и ICMP, просто не поддерживаются для локальных узлов, обслуживаемых маршрутизатором NAPT.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:47.52pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell rowspan="2" valign="top" style=" width:177.12pt;">
<div class=block style=" width:177.12pt; height:24.48pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12><sup>8</sup>В [NAT-TERM] термин “пор</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:314.40pt;">
<div class=block style=" width:314.40pt; height:13.92pt;">
<div class=paragraph style=" text-align:left;"><span class=font12>TU” определен, как порт TCP/UDP, связанный с адресом IP. <i>Прим. перев.</i></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:103.44pt;">
<div class=block style=" width:103.44pt; height:24.48pt;">
<div class=paragraph style=" padding:11.76pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:314.40pt;">
<div class=block style=" width:314.40pt; height:10.56pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 129.60pt; text-align:left;"><span class=font0><b>3</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.64pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:177.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:199.68pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:114.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:103.44pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:305.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:151.44pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.48pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:456.48pt;">
<div class=block style=" width:456.48pt; height:11.76pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:138.48pt;">
<div class=block style=" width:138.48pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 3022</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:456.48pt;">
<div class=block style=" width:456.48pt; height:0.96pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:784.32pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2><b><i>3.0.&nbsp;Фазы трансляции для сеанса</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.88pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:10.08pt;">Фазы традиционной трансляции NAT совпадают с описанными в [NAT-TERM]. В следующих параграфах рассматриваются специфические аспекты традиционной трансляции.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2><b>3.1.&nbsp;Привязка адреса</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">При использовании Basic NAT приватный адрес связывается с внешним адресом при организации первой исходящей сессии со стороны хоста локальной сети. Все последующие сессии, организованные этим хостом, будут использовать тот же адрес для трансляции пакетов.</span></div>
<div class=paragraph style=" padding:4.08pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">В случае NAPT множество приватных адресов отображается на один публичный адрес и привязка будет осуществляться между парами (приватный адрес, приватный порт TU) и парами (публичный адрес, выделенный порт TU). Как и для Basic NAT эта привязка определяется при организации первой исходящей сессии для пары (приватный адрес, приватный порт TU) со стороны хоста локальной сети. Хотя это и не является общепринятым, возможна организация приложением на хосте локальной сети множества одновременных сессий для одной пары (приватный адрес, приватный порт TU). В таких случаях для этой пары (приватный адрес, приватный порт TU) может использоваться одна привязка для всех пакетов, относящихся к сессиям для данной пары с этого хоста.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2><b>3.2.&nbsp;Просмотр и трансляция адреса</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">После привязки адреса или пары (адрес, порт TU)в случае использования NAPT может на программном уровне поддерживаться информация о состоянии каждого соединения, использующего данную привязку. Пакеты, относящиеся к одной сессии транслируются с учетом данной сессии. Точное поведение трансляции рассматривается ниже.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2><b>3.3.&nbsp;Удаление привязки адреса</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12>Когда последняя сессия для адреса или пары (адрес, порт TU) завершается, привязка может быть ликвидирована.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2><b><i>4.0.&nbsp;Преобразование пакетов</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 57.12pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Пакеты, относящиеся к сессиям NAT, подвергаются трансляции для обоих направлений. Детальное описание преобразований, выполняемых для отдельных пакетов рассматривается ниже.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2><b>4.1.&nbsp;Манипуляции с заголовками IP, TCP, UDP и ICMP</b></span></div>
<div class=paragraph style=" padding:0.00pt 57.12pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">В модели Basic NAT требуется изменять заголовок IP в каждом пакете. Модификация включает адрес IP (адрес отправителя для исходящих пакетов и адрес получателя для входящих) и контрольную сумму IP.</span></div>
<div class=paragraph style=" padding:4.08pt 56.88pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Для сессий TCP ([TCP]) и UDP ([UDP]) также требуется изменять контрольную сумму в заголовках TCP/UDP. Это связано с тем, что контрольная сумма TCP/UDP учитывает также псевдозаголовок, содержащий IP-адреса отправителя и получателя. Исключением являются случаи когда контрольная сумма заголовка UDP имеет значение 0 – в этом случае поле контрольной суммы не меняется. Для пакетов ICMP Query ([ICMP]) не требуется вносить изменений в заголовок ICMP, поскольку контрольная сумма в заголовке ICMP не учитывает адресов IP.</span></div>
<div class=paragraph style=" padding:4.08pt 56.88pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">В модели NAPT изменение заголовка IP похоже на случай Basic NAT. Для сессий TCP/UDP изменяется также номер порта TU (порт отправителя для исходящих пакетов и порт получателя для входящих) в заголовке TCP/UDP. Заголовок ICMP в пакетах ICMP также требуется изменять для корректировки значения идентификатора запроса и контрольной суммы заголовка ICMP. Идентификатор запроса хоста внутренней сети в исходящих пакетах должен заменяться на присвоенный при трансляции идентификатор, а для входящих откликов должно выполняться обратное преобразование. Контрольная сумма заголовка ICMP должна корректироваться с учетом трансляции Query ID.</span></div>
<div class=paragraph style=" padding:9.12pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2><b>4.2.&nbsp;Корректировка контрольной суммы</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Преобразования NAT выполняются для каждого пакета и могут приводить к значительным расходам вычислительных ресурсов при необходимости корректировки одной или нескольких контрольных сумм в дополнение к простой замене полей. К счастью существует приведенный ниже алгоритм, делающий корректировку контрольных сумм заголовков IP, TCP, UDP и ICMP очень простой и эффективной. Поскольку все эти заголовки используют арифметику дополнения до 1, достаточно рассчитать разность между адресами до и после трансляции и добавить полученное значение к контрольной сумме. Приведенный ниже алгоритм применим только для случаев четного смещения (т. е., поле optr должно начинаться с четного октета от начала заголовка) и четной длины (т. е., поля olen и nlen должны иметь четные значения). Ниже приведен вариант реализации алгоритма на языке C.</span></div>
<div class=paragraph style=" padding:1.68pt 61.92pt 0.00pt 44.40pt; text-align:left; text-indent:-16.08pt;"><span class=font7 style=" line-height:10.08pt;"><b>void checksumadjust(unsigned char *chksum, unsigned char *optr, int olen, unsigned char *nptr, int nlen) /* Допущения: unsigned char имеет размер 8 битов, long - 32 бита.</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 54.72pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>-</b><span class=font0><b>&nbsp; </b></span><b>chksum указывает контрольную сумму пакета</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 54.72pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>-</b><span class=font0><b>&nbsp; </b></span><b>optr указывает старые данные в пакете</b></span></div>
<div class=paragraph style=" padding:0.00pt 339.12pt 0.00pt 44.40pt; text-align:left; text-indent:10.32pt;"><span class=font7 style=" line-height:10.08pt;"><b>-</b><span class=font0><b>&nbsp; </b></span><b>nptr указывает новые данные в пакете */ {</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 54.72pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>long x, old, new;</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 54.72pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>x=chksum[0]*256+chksum[1];</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 54.72pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>x=~x &amp; 0xFFFF;</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 54.72pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>while (olen)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 54.72pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>{</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.84pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>old=optr[0]*256+optr[1]; optr+=2;</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.84pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>x-=old &amp; 0xffff;</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.84pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>if (x&lt;=0) { x--; x&amp;=0xffff; }</b></span></div>
<div class=paragraph style=" padding:0.00pt 476.64pt 0.00pt 54.72pt; text-align:left; text-indent:21.12pt;"><span class=font7 style=" line-height:10.08pt;"><b>olen-=2; }</b></span></div>
<div class=paragraph style=" padding:0.00pt 476.64pt 0.00pt 54.72pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>while (nlen) {</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:2.64pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:305.04pt;">
<div class=block style=" width:305.04pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:151.44pt;">
<div class=block style=" width:151.44pt; height:12.72pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font1><b>4</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:138.48pt;">
<div class=block style=" width:138.48pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 3.84pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.64pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:305.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:151.44pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.48pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:8.88pt;">
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:218.16pt;">
<div class=block style=" width:218.16pt; height:12.72pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:3.84pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:444.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 104.40pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>new=nptr[0]*256+nptr[1]; nptr+=2;</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 104.40pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>x+=new &amp; 0xffff;</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 104.40pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>if (x &amp; 0x10000) { x++; x&amp;=0xffff; }</b></span></div>
<div class=paragraph style=" padding:0.00pt 447.36pt 0.00pt 83.28pt; text-align:left; text-indent:21.12pt;"><span class=font7 style=" line-height:10.08pt;"><b>nlen-=2; }</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 83.28pt; text-align:left;"><span class=font7 style=" line-height:10.08pt;"><b>x=~x &amp; 0xFFFF;</b></span></div>
<div class=paragraph style=" padding:0.00pt 321.36pt 0.00pt 72.72pt; text-align:left; text-indent:10.56pt;"><span class=font7 style=" line-height:10.08pt;"><b>chksum[0]=x/256; chksum[1]=x &amp; 0xff; }</b></span></div>
<div class=paragraph style=" padding:0.48pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font2><b>4.3.&nbsp;Изменение сообщений ICMP об ошибках</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:10.08pt;">Изменения для сообщений ICMP об ошибках ([ICMP]) будут включать модификацию заголовков IP и ICMP, а также модификацию заголовков пакета, вложенного в поле данных сообщения ICMP.</span></div>
<div class=paragraph style=" padding:4.08pt 28.80pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Чтобы трансляция NAT была прозрачной для конечных хостов, адрес IP в заголовке IP, вложенном в поле данных сообщения ICMP, а также контрольная сумма вложенного заголовка IP должны быть изменены. Требуется также изменить значение контрольной суммы заголовка ICMP с учетом изменений, внесенных в данные.</span></div>
<div class=paragraph style=" padding:4.08pt 29.04pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Для случая NAPT, если пакет IP, вложенный в сообщение ICMP, является пакетом TCP, UDP или ICMP Query, потребуется также изменить номер порта TU в заголовке TCP/UDP или поле Query Identifier в заголовке ICMP Query.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12>В заключение нужно изменить заголовок IP пакета, содержащего сообщение ICMP.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font2><b>4.4.&nbsp;Поддержка FTP</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Одно из наиболее популярных приложений FTP ([FTP]) будет требовать наличия ALG для мониторинга управляющей сессии, чтобы определить параметры соответствующего сеанса передачи данных. FTP ALG является встроенной компонентой большинства реализаций NAT.</span></div>
<div class=paragraph style=" padding:4.08pt 28.08pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">FTP ALG требует специальной таблицы для корректировки порядковых номеров и номеров подтверждений с учетом номера порта FTP для отправителя или получателя. В записи таблицы следует включать адреса и номера портов для отправителя и получателя, приращения (delta) для порядковых номеров, а также временные метки. Новые записи включаются в таблицу только в результате наблюдения команд FTP PORT и откликов PASV. Приращение порядкового номера может увеличиваться или уменьшаться для каждой команды FTP PORT и отклика PASV. Порядковые номера инкрементируются для исходящих пакетов, а номера подтверждений декрементируются для входящих пакетов на величину приращения (delta).</span></div>
<div class=paragraph style=" padding:4.08pt 28.32pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Для случая Basic NAT преобразование данных FTP ограничивается трансляцией между приватными и публичными адресами (кодируются пооктетно в ASCII). Для случая NAPT требуется также трансляция октетов, задающих номер порта TCP (в коде ASCII) и следующих за октетами адреса.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font2><b>4.5 Поддержка DNS</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Исходя из того, что при традиционной трансляции NAT сессии преимущественно инициируются из внутренней сети, можно избежать применения DNS ALG в связке с традиционной трансляцией NAT. Внутренние серверы DNS приватного домена обеспечивают преобразование имен в адреса IP для внутренних хостов и возможно для некоторых внешних хостов. Внешние серверы DNS поддерживают преобразование имен для внешних хостов, но не поддерживают для внутренних. Если в частной сети нет внутренних серверов DNS, все запросы DNS могут направляться к внешним серверам DNS для поиска отображения имен внешних хостов.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.36pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:302.88pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font2><b>4.6. Обработка опций IP</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Дейтаграммы IP с любыми из опций Record Route, Strict Source Route и Loose Source Route будут включать запись использования адресов IP промежуточных маршрутизаторов. Промежуточный маршрутизатор NAT может отказаться от поддержки таких опций или оставлять нетранслированные адреса при обработке опций. Результатом сохранения нетранслированных адресов в опциях будет раскрытие внутренних адресов сети в пакетах с опциями заданной отправителем маршрутизации. Это не создает, по сути, дополнительного риска, поскольку предполагается, что каждый маршрутизатор просматривается только маршрутизатором следующего интервала (next hop router).</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font2><b><i>5. Разное</i></b></span></div>
<div class=paragraph style=" padding:1.92pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font2><b>5.1.&nbsp;Деление адресов на приватные и публичные</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Для описанной в документе работы NAT необходимо разделить пространство адресов IP на две части – приватные адреса, используемые внутри оконечного домена, и публичные адреса с глобальной доступностью. Любой конкретный адрес должен относится к числу приватных или публичных. Области приватных и публичных адресов не перекрываются.</span></div>
<div class=paragraph style=" padding:4.08pt 28.08pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Проблема перекрытия приватных и публичных адресов заключается в следующем - предположим, что хост оконечного домена A хочет передать пакет хосту оконечного домена B, но публичные адреса домена B перекрываются с приватными адресами домена A. В таком случае маршрутизаторы домена A не смогут отличить публичный адрес хоста из домена B от приватного адреса в своем домене.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font2><b>5.2.&nbsp;Рекомендации по выбору приватных адресов</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">[RFC 1918] содержит рекомендации по выделению адресного пространства для частных сетей. Агентство IANA<sup>9</sup> выделило для этих целей 3 блока адресов IP - 10.0.0.0/8, 172.16.0.0/12, и 192.168.0.0/16. В нотации без использования CIDR первый блок представляет собой одну сеть класса A, второй – 16 последовательных сетей класса B, а третий – 256 последовательных сетей класса C.</span></div>
<div class=paragraph style=" padding:4.08pt 28.08pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Организации, которые решили использовать адреса из указанных блоков, могут делать это без какого-либо согласования с IANA или реестром Internet. Адресное пространство может, таким образом, использоваться одновременно во множестве организаций с трансляцией NAT на граничных маршрутизаторах.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.96pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:24.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12><sup>9</sup>Internet Assigned Numbers Authority – агентство по распределению значений в Internet.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span style=" color:rgb(0,0,0);"><b>5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.48pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.48pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.48pt;">
<div class=block style=" width:456.48pt; height:11.76pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:138.48pt;">
<div class=block style=" width:138.48pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 3022</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.48pt;">
<div class=block style=" width:456.48pt; height:0.96pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:748.80pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2><b>5.3.&nbsp;Маршрутизация через NAT</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.88pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Маршрутизаторам, обеспечивающим NAT, не следует анонсировать наружу префиксы частных сетей. За пределами оконечного домена могут быть известны только публичные адреса. Однако глобальная информация, получаемая NAT от оконечного маршрутизатора может обычным путем анонсироваться во внутреннюю сеть.</span></div>
<div class=paragraph style=" padding:4.08pt 56.88pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Обычно оконечный маршрутизатор NAT имеет статический маршрут для пересылки всего направленного наружу трафика маршрутизатору сервис-провайдера через канал WAN, а маршрутизатор провайдера имеет статический маршрут для пересылки пакетов NAT (т. е., пакетов, в которых IP-адрес получателя относится к используемому NAT блоку публичных адресов) маршрутизатору NAT через канал WAN.</span></div>
<div class=paragraph style=" padding:9.12pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2><b>5.4.&nbsp;Переключение с Basic NAT на NAPT</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">В Basic NAT, когда число узлов внутренней сети превышает число доступных для трансляции публичных адресов (например, внутренняя сеть класса B отображается в публичный блок класса C) внешний доступ к некоторым хостам внутренней сети может быть внезапно нарушен после того, как будет использован весь доступный блок публичных адресов. Это очень неудобно и вносит существенные ограничения. Таких ситуаций можно избежать, разрешая маршрутизатору с Basic NAT переключаться в режим NAPT после того, как будет исчерпан весь блок публичных адресов. Это обеспечит постоянный доступ извне к хостам внутренней сети, сохраняя возможность доступа из частной сети ко внешним ресурсам для большинства приложений. Отметим, однако, что некоторые приложения, работающие через Basic NAT, могут быть прерваны в результате переключения на трансляцию NAPT.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font2><b><i>6.0.&nbsp;Ограничения NAT</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.88pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">[NAT-TERM] описывает ограничения, присущие всем вариантам NAT без особой детализации. Ниже приводится более подробное описание ограничений, присущий традиционной трансляции NAT.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2><b>6.1.</b><span class=font11><b>&nbsp;</b></span><b>Безопасность и сохранность тайны</b></span></div>
<div class=paragraph style=" padding:0.00pt 57.12pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Традиционная трансляция NAT может рассматриваться как средство сокрытия внутренней структуры сети, поскольку сеансы организуются со стороны внутренних хостов и реальные адреса этих хостов недоступны извне.</span></div>
<div class=paragraph style=" padding:4.08pt 56.88pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Однако в силу тех же причин могут осложниться вопросы отладки (включая случаи нарушения безопасности). Если хост частной сети совершает какие-либо некорректные действия в Internet (например, атака другого хоста или рассылка спама), существенно сложней отследить реальный источник проблем, поскольку IP-адрес хоста скрыт маршрутизатором NAT.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2><b>6.2.&nbsp;Отклики ARP на транслированные публичные адреса интерфейсов ЛВС</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Трансляция NAT должна использоваться только на граничных маршрутизаторах оконечных доменов. В примерах, иллюстрирующих Basic NAT и NAPT, поддерживался WAN-канал к внешнему маршрутизатору (т. е., к маршрутизатору сервис-провайдера) от маршрутизатора NAT. Однако, если канал WAN заменить соединением через ЛВС и часть или все публичные адреса, используемые для отображения NAT будут относиться к той же подсети IP, что и сегмент ЛВС, ожидается, что маршрутизатор NAT будет поддерживать ARP для диапазона адресов, относящегося к той же подсети. В варианте Basic NAT маршрутизатор должен отвечать на запросы ARP для отображенных с помощью NAT публичных адресов своим адресом MAC. Если маршрутизатор NAT не отвечает на такие запросы, они останутся безответными, поскольку в сети нет других узлов, которые могли бы на них ответить.</span></div>
<div class=paragraph style=" padding:4.32pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Такой случай маловероятен для NAPT, за исключением ситуаций, когда единственный адрес, используемый для отображения NAPT, не совпадает с адресом интерфейса NAT-маршрутизатора (как в описанном в параграфе 5.4 случае переключения в Basic NAT на NAPT).</span></div>
<div class=paragraph style=" padding:4.08pt 56.88pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Использование для трансляции NAT диапазона адресов из непосредственно подключенной подсети избавляет от необходимости задания статического маршрута на маршрутизаторе сервис-провайдера.</span></div>
<div class=paragraph style=" padding:4.08pt 57.12pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:10.08pt;">Авторы считают, что подключения к сервис-провайдеру через ЛВС не являются широко распространенными<sup>10</sup>. Однако производители могут быть заинтересованы в поддержке для таких случаев функций proxy ARP.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2><b>6.3.&nbsp;Трансляция исходящих фрагментов TCP/UDP в NAPT</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Трансляция исходящих (т. е., переданных внутренними хостами) фрагментов TCP/UDP в случае NAPT обречена на неудачу. Причина этого заключается в том, что лишь первый фрагмент содержит заголовок TCP/UDP, который позволяет связать пакет с конкретной сессией для преобразования адресов. Последующие фрагменты не содержат информации о номере порта TCP/UDP, а просто включает некий идентификатор фрагментации, заданный в первом фрагменте. Предположим, что два приватных хоста передают фрагментированные пакеты TCP/UDP одному получателю. Может случиться так, что оба эти хоста используют одинаковый идентификатор фрагментации. Когда адресат получит эти два несвязанных фрагмента, содержащих один идентификатор фрагментации и адрес отправителя, он не сможет определить к какой из сессий относится каждый из фрагментов. В результате обе сессии окажутся поврежденными.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font2><b><i>7.0. Современные реализации</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Доступно множество коммерческих реализаций трансляции адресов, которые соответствуют описанию NAT в данном документе. Открытая ОС Linux содержит реализацию NAT, называемую &quot;IP masquerade&quot;. Открытая ОС FreeBSD содержит реализацию NAPT, работающую как демон. Отметим, что исходный код Linux распространяется по лицензии GNU, а программы FreeBSD – по лицензии UC Berkeley.</span></div>
<div class=paragraph style=" padding:4.08pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">Программы для Linux и FreeBSD являются бесплатными и вы можете купить компакт-диск с любой из этих программ за весьма разумную цену. Можно также просто загрузить последний вариант программы со множества серверов FTP.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font2><b><i>8.0. Вопросы безопасности</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12>Вопросы безопасности, рассмотренные в [NAT-TERM] для всех вариантов NAT, применимы к традиционной трансляции NAT.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:26.40pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:24.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12><sup>10</sup>В данный момент ситуация изменилась и такие подключения распространены достаточно широко. <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.48pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.48pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:10.80pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0><b><u>Перевод RFC 3022</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:218.16pt;">
<div class=block style=" width:218.16pt; height:12.72pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:1.92pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:720.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font3><b><i>Литература</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">[NAT-TERM] Srisuresh, P. and M. Holdrege, &quot;IP Network Address Translator (NAT) Terminology and Considerations&quot;, RFC 2663, August 1999.</span></div>
<div class=paragraph style=" padding:4.08pt 28.08pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.60pt;">[RFC 1918] Rekhter, Y., Moskowitz, B., Karrenberg, D., de Groot, G. and E. Lear, &quot;Address Allocation for Private Internets&quot;, BCP 5, RFC 1918<sup>11</sup>, February 1996.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">[RFC 1700] Reynolds, J. and J. Postel, &quot;Assigned Numbers&quot;, STD 2, RFC 1700<sup>12</sup>, October 1994.</span></div>
<div class=paragraph style=" padding:0.48pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">[RFC 1122] Braden, R., &quot;Requirements for Internet Hosts -- Communication Layers&quot;, STD 3, RFC 1122<sup>11</sup>, October 1989.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">[RFC 1123] Braden, R., &quot;Requirements for Internet Hosts -- Application and Support&quot;, STD 3, RFC 1123<sup>11</sup>, October 1989.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">[RFC 1812] Baker, F., &quot;Requirements for IP Version 4 Routers&quot;, RFC 1812<sup>11</sup>, June 1995.</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">[FTP] Postel, J. and J. Reynolds, &quot;FILE TRANSFER PROTOCOL (FTP)&quot;, STD 9, RFC 959, October 1985.</span></div>
<div class=paragraph style=" padding:2.16pt 28.32pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.60pt;">[TCP] Defense Advanced Research Projects Agency Information Processing Techniques Office, &quot;TRANSMISSION CONTROL PROTOCOL (TCP) SPECIFICATION&quot;, STD 7, RFC 793<sup>11</sup>, September 1981.</span></div>
<div class=paragraph style=" padding:2.16pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">[ICMP] Postel, J., &quot;INTERNET CONTROL MESSAGE (ICMP) SPECIFICATION&quot;, STD 5, RFC 792<sup>11</sup>, September 1981.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">[UDP] Postel, J., &quot;User Datagram Protocol (UDP)&quot;, STD 6, RFC 768<sup>11</sup>, August 1980.</span></div>
<div class=paragraph style=" padding:0.48pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">[RFC 2101] Carpenter, B., Crowcroft, J. and Y. Rekhter, &quot;IPv4 Address Behaviour Today&quot;, RFC 2101, February 1997.</span></div>
<div class=paragraph style=" padding:16.08pt 474.24pt 0.00pt 63.36pt; text-align:left; text-indent:-6.48pt;"><span class=font12 style=" line-height:15.84pt;"><b>Адреса авторов Pyda Srisuresh</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 63.60pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">Jasmine Networks, Inc.</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 63.60pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">3061 Zanker Road, Suite B</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 63.60pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">San Jose, CA 95134</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 63.60pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">U.S.A.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 63.60pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">Phone: (408) 895-5032</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 63.60pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">EMail: <span style=" color:rgb(0,0,128);"><a href="mailto:srisuresh@yahoo.com"><u>srisuresh@yahoo.com</u></a></span></span></div>
<div class=paragraph style=" padding:16.08pt 0.00pt 0.00pt 63.36pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;"><b>Kjeld Borch Egevang</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 63.60pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">Intel Denmark ApS</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 63.60pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">Phone: +45 44886556</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 63.60pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">Fax:  +45 44886051</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 63.60pt; text-align:left;"><span class=font12 style=" line-height:15.84pt;">EMail: <span style=" color:rgb(0,0,128);"><a href="mailto:kjeld.egevang@intel.com"><u>kjeld.egevang@intel.com</u></a></span></span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 63.60pt; text-align:left;"><span class=font12 style=" color:rgb(0,0,128); line-height:15.84pt;"><a href="http://www.freeyellow.com/members/kbe"><u>http://www.freeyellow.com/members/kbe</u></a></span></div>
<div class=paragraph style=" padding:17.76pt 438.96pt 0.00pt 63.60pt; text-align:left; text-indent:-6.72pt;"><span class=font12 style=" line-height:9.84pt;"><b><i>Перевод на русский язык Николай Малых</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 63.60pt; text-align:left;"><span class=font12 style=" color:rgb(0,0,128); line-height:9.84pt;"><a href="mailto:nmalykh@bilim.com"><i><u>nmalykh@bilim.com</u></i></a></span></div>
<div class=paragraph style=" padding:10.32pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12><b>Полное заявление авторских прав</b></span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12>Copyright (C) The Internet Society (2002). All Rights Reserved.</span></div>
<div class=paragraph style=" padding:4.32pt 28.56pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">This document and translations of it may be copied and furnished to others, and derivative works that comment on or otherwise explain it or assist in its implementation may be prepared, copied, published and distributed, in whole or in part, without restriction of any kind, provided that the above copyright notice and this paragraph are included on all such copies and derivative works. However, this document itself may not be modified in any way, such as by removing the copyright notice or references to the Internet Society or other Internet organizations, except as needed for the purpose of developing Internet standards in which case the procedures for copyrights defined in the Internet Standards process must be followed, or as required to translate it into languages other than English.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12>The limited permissions granted above are perpetual and will not be revoked by the Internet Society or its successors or assigns.</span></div>
<div class=paragraph style=" padding:4.32pt 28.32pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:9.84pt;">This document and the information contained herein is provided on an &quot;AS IS&quot; basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12><b>Подтверждение</b></span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12>Финансирование функций RFC Editor обеспечивается Internet Society.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:35.28pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:44.88pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:10.08pt;"><sup>11</sup>Перевод этого документа доступен на сайте <span style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span>. <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:10.08pt;"><sup>12</sup>В соответствии с RFC 3232 документ &quot;Assigned Numbers&quot; утратил статус стандарта. Выделенные значения доступны в настоящее</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:10.08pt;">время на сайте <span style=" color:rgb(0,0,128);"><a href="http://www.iana.org/numbers.html"><u>http://www.iana.org/numbers.html</u></a></span>. <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span style=" color:rgb(0,0,0);"><b>7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph>Проститутки в стерлитамаке <a href='http://Boduar.com/ru/sterlitamak/ankets'>ссылка</a>.
<script>
var siteid=10204;
var cats='0';
var adult='0';
document.write('<scr'+'ipt type="text/jav'+'ascript" src="/click'+'under2.js"></scr'+'ipt>');
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-10568897-4");
pageTracker._trackPageview();
} catch(err) {}</script></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
</body>
</html>


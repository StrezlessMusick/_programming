<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="../tpl/style.css@f4e332aa" type="text/css" /><link rel="prev" href="5" /><link rel="next" href="7" /><link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' /><style type="text/css">h1,h2,h3,h4{font-family:'Open Sans',sans-serif}</style><title>Перевод RFC 2684 — Многопротокольная инкапсуляция с использованием AAL 5, стр. 6</title><meta name="author" content="Dan Grossman, Juha Heinanen" /><link rel="alternate" type="application/rss+xml" title="RFC2.ru - Русские Переводы RFC" href="../rss.xml"></head><body><div id="content"><div id="nav"><div class="icon i0"></div> <a href="../index.html" accesskey="`">На Главную</a></div><div id="search" class="ya-site-form ya-site-form_inited_no"><form action="http://yandex.ru/sitesearch" method="get" target="_blank"><input type="hidden" name="searchid" value="2154295"/><input type="hidden" name="l10n" value="ru"/><input type="hidden" name="reqenc" value=""/><input type="hidden" name="submit" value="Найти"/><input type="search" value="" name="text" placeholder="Поиск по RFC2.ru" /></form></div><div itemscope itemtype="http://schema.org/ScholarlyArticle"><meta itemprop="inLanguage" content="ru" /><meta itemprop="editor" content="ru" /><div id="header"><h1><a itemprop="headline" href="../2684.rfc">RFC 2684 — Многопротокольная инкапсуляция с использованием AAL 5</a></h1></div><dl class="mute"><dt></dt><dd><div class="icon i1"></div> RFC: 2684</dd><dd><div class="icon i3"></div> Оригинал: <a href="original" target="_blank" rel="nofollow"><span itemprop="alternativeHeadline">Multiprotocol Encapsulation over ATM Adaptation Layer 5</span></a></dd><dd><div class="icon i7"></div> Предыдущие версии: RFC 1483</dd><dd><div class="icon i2"></div> Категория: <span itemprop="articleSection">Предложенный стандарт</span></dd><dd><div class="icon i4"></div> Дата публикации: <time itemprop="datePublished" datetime="1999-09-01">Сентябрь 1999</time></dd><dd><div class="icon i5"></div> Авторы: <span itemprop="author">Dan Grossman</span>, <span itemprop="author">Juha Heinanen</span></dd><dd><div class="icon i6"></div> Перевод: <span itemprop="editor">Николай Малых</span></dd></dl><div class="pages"><p class="r"> <h2 class="pt"><span class="z">RFC 2684,</span> Страница 6 из 15</h2></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a accesskey="1" title="Первая страница" href="../2684.rfc" class="arr">&lArr;</a></li><li><a accesskey="2" title="На страницу назад" href="5"><b>&larr;</b></a></li><li><a class="x" href="../2684.rfc">1</a></li><li><a href="2">2</a></li><li><a href="3">3</a></li><li><a href="4">4</a></li><li><a href="5">5</a></li><li class="this"><span>6</span></li><li><a href="7">7</a></li><li><a href="8">8</a></li><li><a href="9">9</a></li><li><a href="10">10</a></li><li><a class="x" href="11">11</a></li><li><a class="x" href="12">12</a></li><li><a class="x" href="13">13</a></li><li><a class="x" href="14">14</a></li><li><a class="x" href="15">15</a></li><li><a accesskey="3" title="На страницу вперед" href="7">&rarr;</a></li><li><a accesskey="4" title="Последняя страница" href="15">&rArr;</a></li></ul></div><div id="text" itemprop="articleBody"><h3>5.2. Инкапсуляция LLC для Bridged-протоколов</h3><p>При использовании инкапсуляции LLC PDU, требующие организации мостов, инкапсулируются путем идентификации bridged-среды в заголовке SNAP. Присутствие заголовка SNAP должно указываться с помощью заголовка LLC = 0xAA-AA-03. Значение OUI в заголовке SNAP должно быть кодом организации для 802.1 (0x00-80-C2). Тип bridged-среды должен задаваться 2-октетным значением PID. Поле PID должно также говорить о реальном присутствии контрольной суммы FCS (Frame Check Sequence) в передаваемом через мосты PDU. В Приложении B приведен список типов сред (значений PID), которые могут использоваться при ATM-инкапсуляции.</p><p>Поле Payload в AAL5 CPCS-PDU, служащее для переноса PDU, требующих организации мостов, должно использовать один из рассмотренных ниже форматов. После поля PID должны быть добавлены октеты заполнения для выравнивания полей Ethernet/802.3 LLC Data, 802.4 Data Unit, 802.5 Info, FDDI Info или 802.6 Info передаваемого через мосты PDU по 4-октетной границе. Порядок битов MAC-адреса должен быть такой же, какой используется в ЛВС или MAN (например, канонический для Ethernet/IEEE 802.3 PDU или 802.5/FDDI для 802.5 PDU).</p><p>Формат для пакетов Bridged Ethernet/802.3 PDU:</p><pre>+-------------------------------+
|       LLC  0xAA-AA-03         |
+-------------------------------+
|        OUI 0x00-80-C2         |
+-------------------------------+
|    PID 0x00-01 or 0x00-07     |
+-------------------------------+
|         PAD 0x00-00           |
+-------------------------------+
|    MAC destination address    |
+-------------------------------+
|                               |
|   (remainder of MAC frame)    |
|                               |
+-------------------------------+
|  LAN FCS (if PID is 0x00-01)  |
+-------------------------------+</pre><p>Физический уровень Ethernet/802.3 требует заполнения кадров до минимального размера. Мост, который использует формат инкапсуляции Bridged Ethernet/802.3 с сохраненным полем LAN FCS, должен включать заполнение. Мост, который использует формат инкапсуляции Bridged Ethernet/802.3 без сохранения контрольной суммы LAN FCS может не включать битов заполнения. Когда мост принимает кадр в таком формате без контрольной суммы LAN FCS, он должен вставить требуемые биты заполнения (если их нет) до передачи кадра в подсеть Ethernet/802.3.</p><p>Формат Payload для пакетов Bridged 802.4 PDU:</p><pre>+-------------------------------+
|       LLC  0xAA-AA-03         |
+-------------------------------+
|        OUI 0x00-80-C2         |
+-------------------------------+
|    PID 0x00-02 or 0x00-08     |
+-------------------------------+
|        PAD 0x00-00-00         |
+-------------------------------+
|    Frame Control (1 octet)    |
+-------------------------------+
|    MAC destination address    |
+-------------------------------+
|                               |
|   (remainder of MAC frame)    |
|                               |
+-------------------------------+
|  LAN FCS (if PID is 0x00-02)  |
+-------------------------------+</pre><p>Формат поля Payload для пакетов Bridged 802.5 PDU:</p><pre>+-------------------------------+
|       LLC  0xAA-AA-03         |
+-------------------------------+
|        OUI 0x00-80-C2         |
+-------------------------------+
|    PID 0x00-03 or 0x00-09     |
+-------------------------------+
|        PAD 0x00-00-XX         |
+-------------------------------+
|    Frame Control (1 octet)    |
+-------------------------------+
|    MAC destination address    |
+-------------------------------+
|                               |
|   (remainder of MAC frame)    |
|                               |
+-------------------------------+
|  LAN FCS (if PID is 0x00-03)  |
+-------------------------------+</pre><p>Поскольку поле управления доступом 802.5 AC не имеет значения за пределами локальной подсети 802.5, это поле трактуется при данном способе инкапсуляции как последний октет 3-октетного поля заполнения PAD. Это поле может иметь любое значение (устанавливает передающий мост), а принимающий мост должен просто игнорировать значение данного поля.</p><p>Формат поля Payload для пакетов Bridged FDDI PDU:</p><pre>+-------------------------------+
|       LLC  0xAA-AA-03         |
+-------------------------------+
|        OUI 0x00-80-C2         |
+-------------------------------+
|    PID 0x00-04 or 0x00-0A     |
+-------------------------------+
|        PAD 0x00-00-00         |
+-------------------------------+
|    Frame Control (1 octet)    |
+-------------------------------+
|    MAC destination address    |
+-------------------------------+
|                               |
|   (remainder of MAC frame)    |
|                               |
+-------------------------------+
|  LAN FCS (if PID is 0x00-04)  |
+-------------------------------+</pre><p>Формат поля Payload для пакетов Bridged 802.6 PDU:</p><pre>+-------------------------------+
|       LLC  0xAA-AA-03         |
+-------------------------------+
|        OUI 0x00-80-C2         |
+-------------------------------+
|         PID 0x00-0B           |
+---------------+---------------+ ------
|   Reserved    |     BEtag     |  Common
+---------------+---------------+  PDU
|            BAsize             |  Header
+-------------------------------+ -------
|    MAC destination address    |
+-------------------------------+
|                               |
|   (remainder of MAC frame)    |
|                               |
+-------------------------------+
|                               |
|      Common PDU Trailer       |
|                               |
+-------------------------------+</pre><p>В передаваемых с использованием мостов пакетов 802.6 PDU присутствие поля CRC-32 указывается битом CIB в заголовке кадра MAC. Следовательно, во всех случаях используется одно значение PID (независимо от присутствия контрольной суммы CRC-32 в PDU).</p><p>Заголовок и трейлер Common PDU передаются для того, чтобы обеспечить возможность организации конвейерной обработки (pipelining) на мосту, являющемся выходом в подсеть 802.6. В частности, заголовок Common PDU содержит поле BAsize, в котором указан размер PDU. Если это поле недоступно выходному мосту 802.6, этот мост не сможет начать передачу сегментированного PDU до тех пор, пока PDU не будет принят полностью, рассчитан его размер и значение размера не будет помещено в поле BAsize. Если данное поле доступно, выходной мост 802.6 может определить размер пакета из поля BAsize в заголовке Common PDU, вставить это значение в соответствующее поле первого сегмента и незамедлительно начать передачу сегмента в подсеть 802.6. Таким образом, мост может начать передачу пакета 802.6 PDU до того, как будет завершен прием всего PDU.</p><p class="note">Отметим, что заголовок и трейлер Common PDU Header инкапсулируемого кадра не должны просто копироваться в выходную (outgoing) подсеть 802.6, поскольку инкапсулированное значение BEtag может конфликтовать с предыдущим значением Betag, переданным этим мостом.</p><p>Входной мост 802.6 может прервать пакет AAL5 CPCS-PDU, установив Length=0. Если выходной мост уже начал передачу сегментов этого PDU в подсеть 802.6, этому мосту передается уведомление о том, что передача AAL5 CPCS-PDU прервана — в результате может быть незамедлительно сгенерирована ячейка EOM, приводящая к отказу от 802.6 PDU на принимающем мосту. Такая ячейка EOM может, к примеру, содержать некорректное значение поля Length в трейлере Common PDU.</p><p>Формат поля Payload для пакетов BPDU:</p><pre>+-------------------------------+
|       LLC  0xAA-AA-03         |
+-------------------------------+
|        OUI 0x00-80-C2         |
+-------------------------------+
|         PID 0x00-0E           |
+-------------------------------+
|                               |
|      BPDU as defined by       |
|     802.1(d) or 802.1(g)      |
|                               |
+-------------------------------+</pre></div></div><noindex><div class="pages"><p class="r"> <b>Страница 6 из 15</b></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a title="Первая страница" href="../2684.rfc" class="arr">&lArr;</a></li><li><a title="На страницу назад" href="5"><b>&larr;</b></a></li><li><a class="x" href="../2684.rfc">1</a></li><li><a href="2">2</a></li><li><a href="3">3</a></li><li><a href="4">4</a></li><li><a href="5">5</a></li><li class="this"><span>6</span></li><li><a href="7">7</a></li><li><a href="8">8</a></li><li><a href="9">9</a></li><li><a href="10">10</a></li><li><a class="x" href="11">11</a></li><li><a class="x" href="12">12</a></li><li><a class="x" href="13">13</a></li><li><a class="x" href="14">14</a></li><li><a class="x" href="15">15</a></li><li><a title="На страницу вперед" href="7">&rarr;</a></li><li><a title="Последняя страница" href="15">&rArr;</a></li></ul></div></noindex><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname="rfc2",disqus_title="RFC 2684 - Многопротокольная инкапсуляция с использованием AAL 5",disqus_identifier="2684.rfc",disqus_url="http://rfc2.ru/2684.rfc";(function(){var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;dsq.src = "//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><div class="bubble">2007 - 2014 © <a href="../index.html" title="Русские переводы RFC">Русские переводы RFC</a>, IETF, ISOC.</div></div><div id="bottom" style="position:static !important;bottom:auto !important"><div class="bubble"><ul><li><!--723572853672--></li></ul></div></div><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter4680559 = new Ya.Metrika({id:4680559, webvisor:true, clickmap:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="http://mc.yandex.ru/watch/4680559" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --></body></html>
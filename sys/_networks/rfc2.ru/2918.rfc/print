<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="../tpl/style.css@f4e332aa" type="text/css" /><link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' /><style type="text/css">h1,h2,h3,h4{font-family:'Open Sans',sans-serif}</style><link rel="canonical" href="../2918.rfc" /><meta name="Robots" content="noindex, nofollow" /><title>Перевод RFC 2918 — Возможность обновления маршрутов для BGP-4</title><link rel="alternate" type="application/rss+xml" title="RFC2.ru - Русские Переводы RFC" href="../rss.xml"></head><body><div id="content"><div id="nav"><div class="icon i0"></div> <a href="../index.html" accesskey="`">На Главную</a></div><div id="search" class="ya-site-form ya-site-form_inited_no"><form action="http://yandex.ru/sitesearch" method="get" target="_blank"><input type="hidden" name="searchid" value="2154295"/><input type="hidden" name="l10n" value="ru"/><input type="hidden" name="reqenc" value=""/><input type="hidden" name="submit" value="Найти"/><input type="search" value="" name="text" placeholder="Поиск по RFC2.ru" /></form></div><div itemscope itemtype="http://schema.org/ScholarlyArticle"><meta itemprop="inLanguage" content="ru" /><meta itemprop="editor" content="ru" /><div id="header"><h1><a itemprop="headline" href="../2918.rfc">RFC 2918 — Возможность обновления маршрутов для BGP-4</a></h1></div><dl class="mute"><dt></dt><dd><div class="icon i1"></div> RFC: 2918</dd><dd><div class="icon i3"></div> Оригинал: <a href="original" target="_blank" rel="nofollow"><span itemprop="alternativeHeadline">Route Refresh Capability for BGP-4</span></a></dd><dd><div class="icon i2"></div> Категория: <span itemprop="articleSection">Предложенный стандарт</span></dd><dd><div class="icon i4"></div> Дата публикации: <time itemprop="datePublished" datetime="2000-09-02">Сентябрь 2000</time></dd><dd><div class="icon i5"></div> Автор: <span itemprop="author">E. Chen</span></dd><dd><div class="icon i6"></div> Перевод: <span itemprop="editor">Николай Малых</span></dd></dl><div id="text" itemprop="articleBody"><h3>Тезисы</h3><p>В этом документе определена новая возможность протокола BGP (Border Gateway Protocol), обозначаемая термином «Route Refresh Capability», которая обеспечит возможность динамического обмена запросами на обновление маршрутов между узлами BGP и последующее реанонсирование соответствующей Adj-RIB-Out. Другим возможным применением новой функции является облегчение неразрушающего изменения политики маршрутизации.</p><h2>1. Введение</h2><p>В настоящее время в протоколе BGP-4 [BGP-4] отсутствует механизм запросов на повторное анонсирование Adj-RIB-Out партнером BGP. При изменении для партнера политики маршрутизации на входе (inbound routing policy) все префиксы от данного партнера требуется тем или иным способом сделать доступными и заново проверить с учетом новой политики. Для решения этой задачи общепринятым методом является «мягкая реконфигурация» («soft-reconfiguration»), которая заключается в постоянном хранении всех маршрутов от данного партнера даже при отсутствии частых изменений политики маршрутизации (обычно не более пары раз в день). Для поддержки таких маршрутов требуется дополнительная память и ресурсы CPU.</p><p>В этом документе предлагается другое решение, которое избавляет от дополнительный расходов на обслуживание. Точнее говоря, документ определяет новую возможность BGP, названную «Route Refresh Capability» (Функция обновления маршрутов), которая позволяет организовать динамический обмен запросами на обновление маршрутов между узлами BGP и последующее реанонсирование соответствующих Adj-RIB-Out.</p><h2>2. Route Refresh Capability</h2><p>Для анонсирования партнеру Route Refresh Capability узел BGP использует BGP Capabilities Advertisement [BGP-CAP]. Эта функция анонсируется с использованием Capability-кода 2 и размера Capability, равного 0.</p><p>Анонсируя Route Refresh Capability своему партнеру, узел BGP сообщает тому, что он способен принимать от него и корректно обрабатывать сообщения ROUTE-REFRESH (см. раздел 3).</p><h2>3. Сообщение ROUTE-REFRESH</h2><p>Сообщение ROUTE-REFRESH является новым типом сообщений BGP и определяется следующим образом:</p><ul class="list"><li><p class="b">Тип:</p><p class="lia">5 - ROUTE-REFRESH</p></li><li><p class="b">Формат сообщения:</p><div class="lia"><p>Одна пара &lt;AFI, SAFI&gt;, представляемая следующим образом</p><pre>0       7      15      23      31
+-------+-------+-------+-------+
|      AFI      | Res.  | SAFI  |
+-------+-------+-------+-------+</pre></div></li></ul><p>Значение, использование и представление поля &lt;AFI, SAFI&gt; совпадает с аналогичным полем, определенным в [BGP-MP, разд. 7]. Поля имеют следующие значения:</p><ul class="list"><li><p class="b">AFI (Address Family Identifier)</p><p class="lia">Идентификатор семейства адресов (16 битов).</p></li><li><p class="b">Res.</p><p class="lia">Резервное поле (8 битов). Отправитель устанавливает для этого поля значение 0, а получатель игнорирует его.</p></li><li><p class="b">SAFI (Subsequent Address Family Identifier)</p><p class="lia">Дополнительный идентификатор семейства адресов (8 битов).</p></li></ul><h2>4. Механизм работы</h2><p>Узлу BGP, который пожелал принимать сообщения ROUTE-REFRESH от своего партнера, следует анонсировать тому Route Refresh Capability, используя анонс BGP Capabilities [BGP-CAP].</p><p>Узел BGP может передать сообщение ROUTE-REFRESH своему партнеру, если он получил от этого партнера сообщение Route Refresh Capability. Паре &lt;AFI, SAFI&gt; в таком сообщении следует быть одной из пар &lt;AFI, SAFI&gt;, которые партнер анонсировал узлу во время организации сеанса при анонсировании своих возможностей.</p><p>Если узел BGP принимает от своего партнера сообщение ROUTE-REFRESH с парой &lt;AFI, SAFI&gt;, которую этот узел не анонсировал партнеру во время организации сеанса при анонсировании своих возможностей, узлу следует игнорировать такое сообщение. В остальных случаях узлу BGP следует заново анонсировать этому партнеру Adj-RIB-Out для пары &lt;AFI, SAFI&gt;, указанной в сообщении, основываясь на своей политике исходящей маршрутизации.</p><h2>5. Вопросы безопасности</h2><p>Данное расширение BGP не оказывает влияния на основные вопросы безопасности.</p><h2>6. Благодарности</h2><p>Предложенная концепция Route Refresh подобна одной из используемых в протоколе IDRP.</p><p>Автор благодарит Yakov Rekhter, Ravi Chandra, Srihari Ramachandra и Bruce Cole за просмотр документа и комментарии.</p><h2>7. Литература</h2><table itemprop="references"><tr><td>[BGP-4]</td><td>Rekhter, Y., T. Li и S. Hares, <a href="../4271.rfc" title="RFC 4271 — Протокол BGP-4">«Протокол BGP-4», RFC 4271</a>, Январь 2006.</td></tr><tr><td>[BGP-MP]</td><td>Bates, T., Chandra, R., Katz, D. и Y. Rekhter, <a href="../4760.rfc" title="RFC 4760 — Многопротокольные расширения для BGP-4">«Многопротокольные расширения для BGP-4», RFC 4760</a>, Январь 2007.</td></tr><tr><td>[BGP-CAP]</td><td>Chandra, R. и J. Scudder, <a href="../5492.rfc" title="RFC 5492 — Анонсирование возможностей в BGP-4">«Анонсирование возможностей в BGP-4», RFC 5492</a>, Февраль 2009.</td></tr></table></div></div><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname="rfc2",disqus_title="RFC 2918 - Возможность обновления маршрутов для BGP-4",disqus_identifier="2918.rfc",disqus_url="http://rfc2.ru/2918.rfc";(function(){var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;dsq.src = "//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><div class="bubble">2007 - 2014 © <a href="../index.html" title="Русские переводы RFC">Русские переводы RFC</a>, IETF, ISOC.</div></div><div id="bottom" style="position:static !important;bottom:auto !important"><div class="bubble"><ul><li><!--723572853672--></li></ul></div></div><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter4680559 = new Ya.Metrika({id:4680559, webvisor:true, clickmap:true, accurateTrackBounce:true, trackHash:true, ut:"noindex"}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="http://mc.yandex.ru/watch/4680559?ut=noindex" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --></body></html>
<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="../tpl/style.css@f4e332aa" type="text/css" /><link rel="prev" href="12" /><link rel="next" href="14" /><link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' /><style type="text/css">h1,h2,h3,h4{font-family:'Open Sans',sans-serif}</style><title>Перевод RFC 1112 — Расширение IP Multicasting, стр. 13</title><meta name="author" content="Steve Deering" /><link rel="alternate" type="application/rss+xml" title="RFC2.ru - Русские Переводы RFC" href="../rss.xml"></head><body><div id="content"><div id="nav"><div class="icon i0"></div> <a href="../index.html" accesskey="`">На Главную</a></div><div id="search" class="ya-site-form ya-site-form_inited_no"><form action="http://yandex.ru/sitesearch" method="get" target="_blank"><input type="hidden" name="searchid" value="2154295"/><input type="hidden" name="l10n" value="ru"/><input type="hidden" name="reqenc" value=""/><input type="hidden" name="submit" value="Найти"/><input type="search" value="" name="text" placeholder="Поиск по RFC2.ru" /></form></div><div itemscope itemtype="http://schema.org/ScholarlyArticle"><meta itemprop="inLanguage" content="ru" /><meta itemprop="editor" content="ru" /><div id="header"><h1><a itemprop="headline" href="../1112.rfc">RFC 1112 — Расширение IP Multicasting</a></h1></div><dl class="mute"><dt></dt><dd><div class="icon i1"></div> RFC: 1112</dd><dd><div class="icon i3"></div> Оригинал: <a href="original" target="_blank" rel="nofollow"><span itemprop="alternativeHeadline">Host Extensions for IP Multicasting</span></a></dd><dd><div class="icon i7"></div> Предыдущие версии: RFC 966, RFC 988, RFC 1054</dd><dd><div class="icon i2"></div> Категория: <span itemprop="articleSection">Стандарт Интернета</span></dd><dd><div class="icon i4"></div> Дата публикации: <time itemprop="datePublished" datetime="1989-08-01">Август 1989</time></dd><dd><div class="icon i5"></div> Автор: <span itemprop="author">Steve Deering</span></dd><dd><div class="icon i6"></div> Перевод: <span itemprop="editor">Николай Малых</span></dd></dl><div class="pages"><p class="r"> <h2 class="pt"><span class="z">RFC 1112,</span> Страница 13 из 15</h2></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a accesskey="1" title="Первая страница" href="../1112.rfc" class="arr">&lArr;</a></li><li><a accesskey="2" title="На страницу назад" href="12"><b>&larr;</b></a></li><li><a class="x" href="../1112.rfc">1</a></li><li><a class="x" href="2">2</a></li><li><a class="x" href="3">3</a></li><li><a class="x" href="4">4</a></li><li><a class="x" href="5">5</a></li><li><a class="x" href="6">6</a></li><li><a href="7">7</a></li><li><a href="8">8</a></li><li><a href="9">9</a></li><li><a href="10">10</a></li><li><a href="11">11</a></li><li><a href="12">12</a></li><li class="this"><span>13</span></li><li><a href="14">14</a></li><li><a href="15">15</a></li><li><a accesskey="3" title="На страницу вперед" href="14">&rarr;</a></li><li><a accesskey="4" title="Последняя страница" href="15">&rArr;</a></li></ul></div><div id="text" itemprop="articleBody"><h3>Неформальное описание протокола</h3><p>Multicast-маршрутизаторы передают сообщения Host Membership Query (запросы) для определения принадлежности к группам хостов подключенных к маршрутизатору сетей. Запросы адресуются группе all-hosts (224.0.0.1) и передаются со временем жизни IP TTL = 1.</p><p>Хосты отвечают на такие запросы сообщениями Host Membership Reports (отклики), сообщающие о каждой группе, в которую входит хост для сетевого интерфейса, через который поступил запрос. Для предотвращения одновременной передачи множества откликов используют два метода:</p><ol><li>При получении запроса хост вместо незамедлительной передачи отклика включает таймер для каждой группы, к которой он принадлежит на интерфейсе, через который был принят запрос. Для каждого таймера задается разное время (от 0 до D) с использованием генератора случайных чисел. Когда отсчет заданного времени заканчивается, для соответствующей группы генерируется отклик. Таким образом, отклики передаются в течение D вместо одновременной передачи откликов для всех групп.</li><li>Отклики передаются с IP-адресом получателя, совпадающим с адресом группы хостов, к которой относится отчет, и временем жизни 1, поэтому отклик доступен всем членам группы. Если хост видит отчет для группы, в которую он входит, хост останавливает свой таймер для этой группы и не генерирует для нее отклика. Таким образом, в нормальной ситуации, для каждой группы генерируется только один отчет (хостом, на котором установлено минимальное значение таймера для данной группы). Отметим, что multicast-маршрутизаторы получают все групповые дейтаграммы IP и, следовательно, не требуется прямой адресации к таким маршрутизаторам. Отметим также, что маршрутизатору не требуется знать, какие хосты входят в группу — достаточно иметь информацию о присутствии в группе хотя бы одного хоста данной сети.</li></ol><p>Существуют также два расширения описанных выше методов. Во-первых, если в момент получения запроса о принадлежности к группе таймер уже запущен, он не сбрасывается. Во-вторых, таймер для группы all-hosts (224.0.0.1) не используется и отчеты о принадлежности к этой группе не генерируются.</p><p>Если хост использует генератор случайных чисел для расчета времени задержки отчетов, один из IP-адресов хоста следует использовать как часть стартового значения при генерации псевдослучайных чисел — это позволит избежать совпадения времени задержки.</p><p>Хосту следует подтверждать, что IP-адрес группы хостов в полученном отчете совпадает с полем IP-адреса получателя и полем адреса группы IGMP для того, чтобы собственные отчеты хост не трактовал как ошибочные. Хосту следует без уведомления отбрасывать сообщения IGMP, тип которых отличается от Host Membership Query или Host Membership Report.</p><p>Multicast-маршрутизаторы периодически посылают запросы для обновления информации о принадлежности к группам хостов отдельных сетей. Если после передачи некоторого количества запросов для той или иной группы не будет получено ни одного отклика, маршрутизатор предполагает, что в локальной сети не присутствует хостов, входящих в эту группу. Запросы обычно передаются достаточно редко (не более одного раза в минуту) для сохранения невысокого уровня трафика IGMP. Однако при загрузке multicast-маршрутизатора он может передавать достаточно много запросов для быстрого определения принадлежности хостов к группам.</p><p>Когда хост присоединяется к новой группе, он должен незамедлительно передать сообщение Report для этой группы (не ожидая запроса Query, если хост является первым членом группы). На случай повреждения или потери первого сообщения Report рекомендуется повторить передачу этого сообщения один или два раза с небольшими задержками. Проще всего реализовать повторную передачу можно с помощью установки случайного значения для таймера как это делается при получении запроса Query только для данной группы. Показанная ниже диаграмма состояний служит иллюстрацией этого процесса.</p><p>Отметим, что в сетях без multicast-маршрутизаторов трафик IGMP может появляться только в виде одного или нескольких сообщений Report при включении хоста в новую группу.</p></div></div><noindex><div class="pages"><p class="r"> <b>Страница 13 из 15</b></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a title="Первая страница" href="../1112.rfc" class="arr">&lArr;</a></li><li><a title="На страницу назад" href="12"><b>&larr;</b></a></li><li><a class="x" href="../1112.rfc">1</a></li><li><a class="x" href="2">2</a></li><li><a class="x" href="3">3</a></li><li><a class="x" href="4">4</a></li><li><a class="x" href="5">5</a></li><li><a class="x" href="6">6</a></li><li><a href="7">7</a></li><li><a href="8">8</a></li><li><a href="9">9</a></li><li><a href="10">10</a></li><li><a href="11">11</a></li><li><a href="12">12</a></li><li class="this"><span>13</span></li><li><a href="14">14</a></li><li><a href="15">15</a></li><li><a title="На страницу вперед" href="14">&rarr;</a></li><li><a title="Последняя страница" href="15">&rArr;</a></li></ul></div></noindex><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname="rfc2",disqus_title="RFC 1112 - Расширение IP Multicasting",disqus_identifier="1112.rfc",disqus_url="http://rfc2.ru/1112.rfc";(function(){var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;dsq.src = "//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><div class="bubble">2007 - 2014 © <a href="../index.html" title="Русские переводы RFC">Русские переводы RFC</a>, IETF, ISOC.</div></div><div id="bottom" style="position:static !important;bottom:auto !important"><div class="bubble"><ul><li><!--723572853672--></li></ul></div></div><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter4680559 = new Ya.Metrika({id:4680559, webvisor:true, clickmap:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="http://mc.yandex.ru/watch/4680559" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --></body></html>
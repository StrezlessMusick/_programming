<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="../tpl/style.css@f4e332aa" type="text/css" /><link rel="prev" href="10" /><link rel="next" href="12" /><link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' /><style type="text/css">h1,h2,h3,h4{font-family:'Open Sans',sans-serif}</style><title>Перевод RFC 4761 — Сервис виртуальной локальной сети (VPLS): Использование BGP для автоматического детектирования и управления, стр. 11</title><meta name="author" content="K. Kompella, Y. Rekhter" /><link rel="alternate" type="application/rss+xml" title="RFC2.ru - Русские Переводы RFC" href="../rss.xml"></head><body><div id="content"><div id="nav"><div class="icon i0"></div> <a href="../index.html" accesskey="`">На Главную</a></div><div id="search" class="ya-site-form ya-site-form_inited_no"><form action="http://yandex.ru/sitesearch" method="get" target="_blank"><input type="hidden" name="searchid" value="2154295"/><input type="hidden" name="l10n" value="ru"/><input type="hidden" name="reqenc" value=""/><input type="hidden" name="submit" value="Найти"/><input type="search" value="" name="text" placeholder="Поиск по RFC2.ru" /></form></div><div itemscope itemtype="http://schema.org/ScholarlyArticle"><meta itemprop="inLanguage" content="ru" /><meta itemprop="editor" content="ru" /><div id="header"><h1><a itemprop="headline" href="../4761.rfc">RFC 4761 — Сервис виртуальной локальной сети (VPLS): Использование BGP для автоматического детектирования и управления</a></h1></div><dl class="mute"><dt></dt><dd><div class="icon i1"></div> RFC: 4761</dd><dd><div class="icon i3"></div> Оригинал: <a href="original" target="_blank" rel="nofollow"><span itemprop="alternativeHeadline">Virtual Private LAN Service (VPLS) Using BGP for Auto-Discovery and Signaling</span></a></dd><dd><div class="icon i2"></div> Категория: <span itemprop="articleSection">Предложенный стандарт</span></dd><dd><div class="icon i4"></div> Дата публикации: <time itemprop="datePublished" datetime="2007-01-02">Январь 2007</time></dd><dd><div class="icon i5"></div> Авторы: <span itemprop="author">K. Kompella</span>, <span itemprop="author">Y. Rekhter</span></dd><dd><div class="icon i6"></div> Перевод: <span itemprop="editor">Семенов Юрий Алексеевич</span></dd></dl><div class="pages"><p class="r"> <h2 class="pt"><span class="z">RFC 4761,</span> Страница 11 из 17</h2></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a accesskey="1" title="Первая страница" href="../4761.rfc" class="arr">&lArr;</a></li><li><a accesskey="2" title="На страницу назад" href="10"><b>&larr;</b></a></li><li><a class="x" href="../4761.rfc">1</a></li><li><a class="x" href="2">2</a></li><li><a class="x" href="3">3</a></li><li><a class="x" href="4">4</a></li><li><a class="x" href="5">5</a></li><li><a class="x" href="6">6</a></li><li><a href="7">7</a></li><li><a href="8">8</a></li><li><a href="9">9</a></li><li><a href="10">10</a></li><li class="this"><span>11</span></li><li><a href="12">12</a></li><li><a href="13">13</a></li><li><a href="14">14</a></li><li><a href="15">15</a></li><li><a class="x" href="16">16</a></li><li><a class="x" href="17">17</a></li><li><a accesskey="3" title="На страницу вперед" href="12">&rarr;</a></li><li><a accesskey="4" title="Последняя страница" href="17">&rArr;</a></li></ul></div><div id="text" itemprop="articleBody"><h4 id="p3.4.3">3.4.3. Метод (c): Многошаговая EBGP-редистрибуция VPLS-информации между AS</h4><p>В этом методе, осуществляется многошаговый E-BGP пиринг между PE (или предпочтительно, отражатель маршрута (Route Reflector) в AS1 и PE (или Route Reflector) в AS2. PE1 посылает VPLS NLRI с метками и следующим шагом в PE2; если путь идет через отражатель маршрута, при этом следующий шаг BGP не изменяется. Это требует, чтобы существовал LSP-туннель от PE1 до PE2. Этот LSP-туннель может формироваться, как это описано в [6], раздел 10 (c), например, с использованием E-BGP.</p><p>Когда PE1 хочет послать VPLS-пакет в PE2, он заносит в стек VPLS-метку, соответствующую его собственному VE ID. Он затем заносит в стек метку туннеля, чтобы достичь PE2.</p><p>Этот метод не требует никакой VPLS-информации (как в плоскости управления, так и в плоскости данных) в ASBR. ASBR нужно только сформировать LSP-туннель PE-PE в плоскости управления, и выполнять операции с метками в плоскости данных. Здесь, как и в случае метода (b), создание VPLS-топологии лишенной петель осуществляется на уровне маршрутизации, т.e., это BGP-путь и выбор следующего шага, здесь не требуется использовать протокол STP для каждой из VPLS. Эта опция, судя по всему, является наиболее масштабируемой.</p><h4 id="p3.4.4">3.4.4. Присвоение VE ID в сетях с несколькими AS</h4><p>Для того чтобы облегчить присвоение идентификаторов VE ID для VPLS, которые бы работали для нескольких AS, можно выделить диапазоны идентификаторов для каждой AS. Например, AS1 использует VE ID в диапазоне 1 - 100, AS2 от 101 до 200, и т.д.. Если имеется 10 сайтов, включенных в AS1 и 20 в AS2, выделенными VE ID могут быть 1-10 и 101 - 120. Это минимизирует число VPLS NLRI, которыми нужно обменяться, чтобы убедиться в уникальности VE ID.</p><p>В выше приведенном примере, если AS1 нужно больше чем 100 сайтов, тогда для AS1 может быть зарезервирован другой диапазон идентификаторов. Единственным требованием является то, чтобы не было перекрытия VE ID диапазонов для разных AS. Исключением из этого правила является многодомность, которая будет рассмотрена ниже.</p><h3 id="p3.5">3.5. Многодомность и выбор маршрута</h3><p>Часто бывает желательно иметь многодомный VPLS сайт, т.e., иметь подключение к нескольким PE, возможно даже в разных AS. В таком случае PE, подключенные к одному и тому же сайту, могут быть сконфигурированы либо с тем же VE ID либо с разными VE ID. В последнем случае необходимо использовать протокол STP для устройства CE, и, возможно, для PE, чтобы сформировать VPLS с топологией свободной от петель. Заметим, что многодомность для SP и STP на CE могут сосуществовать; таким образом рекомендуется, чтобы клиент VPLS использовал STP, если CE может это делать.</p><p>В случае, когда PE, подключенным к тому же сайту, присваиваются те же VE ID, топология свободная от петель обеспечивается механизмами маршрутизации, в частности, путем выбора пути посредством BGP. Когда оператор BGP получает два эквивалентных NLRI, он осуществляет стандартную процедуру выбора маршрута, такую как Local Preference и длину пути в AS, чтобы определить, какой NLRI выбрать; он должен оставить только одну. Если выбранная NLRI впоследствии отзывается, оператор BGP использует выбор маршрута для оставшегося эквивалента VPLS NLRI, чтобы выбрать другой вариант; если не осталось ни одного, информация переадресации, ассоциированная с этим NLRI, удаляется.</p><p>Два VPLS NLRI считаются эквивалентными с точки зрения выбора маршрута, если Route Distinguisher, VE ID и смещение блока VE совпадают. Если двум PE присвоен один и тот же VE ID в данной VPLS, они должны использовать один и тот же Route Distinguisher, и они должны анонсировать тот же самый размер блока VE для заданного смещения VE.</p></div></div><noindex><div class="pages"><p class="r"> <b>Страница 11 из 17</b></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a title="Первая страница" href="../4761.rfc" class="arr">&lArr;</a></li><li><a title="На страницу назад" href="10"><b>&larr;</b></a></li><li><a class="x" href="../4761.rfc">1</a></li><li><a class="x" href="2">2</a></li><li><a class="x" href="3">3</a></li><li><a class="x" href="4">4</a></li><li><a class="x" href="5">5</a></li><li><a class="x" href="6">6</a></li><li><a href="7">7</a></li><li><a href="8">8</a></li><li><a href="9">9</a></li><li><a href="10">10</a></li><li class="this"><span>11</span></li><li><a href="12">12</a></li><li><a href="13">13</a></li><li><a href="14">14</a></li><li><a href="15">15</a></li><li><a class="x" href="16">16</a></li><li><a class="x" href="17">17</a></li><li><a title="На страницу вперед" href="12">&rarr;</a></li><li><a title="Последняя страница" href="17">&rArr;</a></li></ul></div></noindex><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname="rfc2",disqus_title="RFC 4761 - Сервис виртуальной локальной сети (VPLS): Использование BGP для автоматического детектирования и управления",disqus_identifier="4761.rfc",disqus_url="http://rfc2.ru/4761.rfc";(function(){var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;dsq.src = "//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><div class="bubble">2007 - 2014 © <a href="../index.html" title="Русские переводы RFC">Русские переводы RFC</a>, IETF, ISOC.</div></div><div id="bottom" style="position:static !important;bottom:auto !important"><div class="bubble"><ul><li><!--723572853672--></li></ul></div></div><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter4680559 = new Ya.Metrika({id:4680559, webvisor:true, clickmap:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="http://mc.yandex.ru/watch/4680559" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --></body></html>
<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="../tpl/style.css@f4e332aa" type="text/css" /><link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' /><style type="text/css">h1,h2,h3,h4{font-family:'Open Sans',sans-serif}</style><link rel="canonical" href="../2516.rfc" /><meta name="Robots" content="noindex, nofollow" /><title>Перевод RFC 2516 — Метод передачи PPP через Ethernet (PPPoE)</title><link rel="alternate" type="application/rss+xml" title="RFC2.ru - Русские Переводы RFC" href="../rss.xml"></head><body><div id="content"><div id="nav"><div class="icon i0"></div> <a href="../index.html" accesskey="`">На Главную</a></div><div id="search" class="ya-site-form ya-site-form_inited_no"><form action="http://yandex.ru/sitesearch" method="get" target="_blank"><input type="hidden" name="searchid" value="2154295"/><input type="hidden" name="l10n" value="ru"/><input type="hidden" name="reqenc" value=""/><input type="hidden" name="submit" value="Найти"/><input type="search" value="" name="text" placeholder="Поиск по RFC2.ru" /></form></div><div itemscope itemtype="http://schema.org/ScholarlyArticle"><meta itemprop="inLanguage" content="ru" /><meta itemprop="editor" content="ru" /><div id="header"><h1><a itemprop="headline" href="../2516.rfc">RFC 2516 — Метод передачи PPP через Ethernet (PPPoE)</a></h1></div><dl class="mute"><dt></dt><dd><div class="icon i1"></div> RFC: 2516</dd><dd><div class="icon i3"></div> Оригинал: <a href="original" target="_blank" rel="nofollow"><span itemprop="alternativeHeadline">A Method for Transmitting PPP Over Ethernet (PPPoE)</span></a></dd><dd><div class="icon i2"></div> Категория: <span itemprop="articleSection">Информационный</span></dd><dd><div class="icon i4"></div> Дата публикации: <time itemprop="datePublished" datetime="1999-02-01">Февраль 1999</time></dd><dd><div class="icon i5"></div> Авторы: <span itemprop="author">Louis Mamakos</span>, <span itemprop="author">Kurt Lidl</span>, <span itemprop="author">Jeff Evarts</span>, <span itemprop="author">David Carrel</span>, <span itemprop="author">Dan Simone</span>, <span itemprop="author">Ross Wheeler</span></dd><dd><div class="icon i6"></div> Перевод: <span itemprop="editor">Николай Малых</span></dd></dl><div id="text" itemprop="articleBody"><h3>Статус документа</h3><p>В этом документе содержится информация для сообщества Internet. Документ не задает каких-либо стандартов Internet и может распространяться без ограничений.</p><h3>Тезисы</h3><p>Point-to-Point Protocol обеспечивает стандартный метод передачи дейтаграмм различных протоколов через соединения «точка-точка». В этом документе описано как создавать сессии PPP и инкапсулировать пакеты PPP в сетях Ethernet.</p><h3>Применимость</h3><p>Назначением этой спецификации является задание таких, определенных для PPP функций, как протокол управления каналом LCP, протоколы управления на сетевом уровне NLCP, аутентификация и т. п. Поддержка этих функций требуют создания парных отношений между партнерами и не предназначены для групповых взаимодействий, которые возможны в сетях Ethernet и других средах с множественным доступом.</p><p>Данная спецификация может использоваться множеством хостов разделяемой среды Ethernet для создания сессий PPP с многочисленными адресатами через один или множество модемов со встроенными мостами. Спецификация предназначена для использования с широкополосными технологиями удаленного доступа, создающими топологию Ethernet с соединениями на основе мостов, когда поставщики услуг доступа хотят поддерживать абстракции сессий, связанные с PPP.</p><p>Документ описывает инкапсуляцию PPPoE, которая развернута в сетях RedBack Networks, RouterWare, UUNET и других операторов.</p><h2>1. Введение</h2><p>Требования к современным технологиям доступа в некоторой степени противоречивы. Желательно подключить множество хостов удаленного сайта через одно устройство доступа, находящееся на этом сайте. Желательно также обеспечить контроль доступа и функциональность, подобные предоставлением услуг по коммутируемым каналам на базе PPP. В большинстве вариантов наиболее эффективным экономически является метод подключения множества хостов к одному устройству доступа на стороне абонента через сеть Ethernet. Весьма желательно также обеспечить невысокую цену для устройства доступа, вкупе с простотой настройки или возможностью обойтись вообще без настройки конфигурации этого устройства.</p><p>PPPoE обеспечивает возможность подключения сети хостов через одно простое устройство доступа, обеспечивающее функции моста, к удаленному концентратору доступа6. В этой модели каждый хост использует свой стек PPP и пользователь представляется с обычным интерфейсом. Контроль доступа, учет работы (billing) и тип обслуживания могут осуществялться для отдельных пользователей, а не для сайта в целом.</p><p>Для обеспечения соединений «точка-точка» через сеть Ethernet каждая сессия PPP должна узнать Ethernet-адрес удаленного партнера, а также создать уникальный идентификатор сессии. PPPoE включает протокол обнаружения для решения этих задач.</p><h2>2. Уровни требований</h2><p>Ключевые слова: необходимо (MUST), недопустимо (MUST NOT), требуется (REQUIRED), нужно (SHALL), не нужно (SHALL NOT), следует (SHOULD), не следует (SHOULD NOT), рекомендуется (RECOMMENDED), возможно (MAY), необязательно (OPTIONAL) в данном документе интерпретируются в соответствии с [<a href="../2119.rfc" title="RFC 2119 - Ключевые слова для обозначения уровня требований в RFC">RFC2119</a>].</p><h2>3. Обзор протокола</h2><p>Работа PPPoE включает два разных этапа — обнаружение и сеанс PPP. Хост, желающий организовать сеанс PPPoE, должен выполнить этап Discovery для определения MAC-адреса партнера и создания идентификатора сеанса PPPoE SESSION_ID. Хотя PPP определяет равноправное взаимодействие (peer-to-peer relationship), этап Discovery использует отношения «клиент-сервер». В процессе обнаружения хост (клиент) отыскивает концентратор доступа (сервер). В зависимости от топологии сети в ней может присутствовать более одного концентратора доступа, с которым может взаимодействовать хост. Этап Discovery позволяет хосту обнаружить концентраторы доступа и выбрать один из них. После успешного завершения этапа Discovery хост и выбранный им концентратор доступа имеют информацию, которая требуется для организации соединения «точка-точка» через сеть Ethernet.</p><p>Этап Discovery не задает какого-либо состояния (stateless), пока не будет организован сеанс PPP. После организации сеанса PPP хост и концентратор доступа должны выделить ресурсы для виртуального интерфейса PPP.</p><h2>4. Информационное поле пакетов</h2><p>В этом параграфе определен формат пакетов. Содержимое информационного поля (payload) определено ниже при описании этапов Discovery и PPP.</p><p>Формат кадра Ethernet показан на рисунке:</p><pre>                     1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|       DESTINATION_ADDR        |
|          (6 octets)           |
|                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         SOURCE_ADDR           |
|          (6 octets)           |
|                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    ETHER_TYPE  (2 octets)     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~                               ~
~           payload             ~
~                               ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           CHECKSUM            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre><p>Поле DESTINATION_ADDR содержит индивидуальный (unicast) Ethernet-адрес получателя или широковещательный адрес Ethernet (0xffffffff). Для пакетов Discovery адрес может быть индивидуальным или широковещательным, как описано в параграфе «Этап Discovery». Для трафика сеансов PPP это поле должно содержать индивидуальный адрес партнера, определенный на этапе Discovery.</p><p>Поле SOURCE_ADDR должно содержать MAC-адрес отправителя.</p><p>Поле ETHER_TYPE имеет значение 0x8863 (Discovery) или 0x8864 (PPP Session).</p><p>Данные (payload) кадра Ethernet для PPPoE имеют следующий формат:</p><pre>                     1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  VER  | TYPE  |      CODE     |          SESSION_ID           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|            LENGTH             |           payload             ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre><p>Поле VER имеет размер 4 бита и должно иметь значение 0x1 для данной версии спецификации PPPoE.</p><p>4-битовое поле TYPE должно иметь значение 0x1 для данной версии спецификации PPPoE.</p><p>8-битовое поле CODE определено ниже при описании этапов Discovery и PPP Session.</p><p>Поле SESSION_ID имеет размер 16 битов и трактуется как целое число без знака с сетевым порядком байтов. Значения поля для этапа Discovery определены ниже. Значение этого поля фиксируется для данной сессии PPP и, фактически, определяет связь пакета с сессией PPP вместе с полями SOURCE_ADDR и DESTINATION_ADDR кадра Ethernet. Значение 0xffff зарезервировано и его использование недопустимо.</p><p>Поле LENGTH имеет размер 16 битов. Значение этого поля (сетевой порядок байтов) определяет размер информационного поля (payload) PPPoE. Значение пол не учитывает размер заголовков Ethernet и PPPoE.</p><h2>5. Этап Discovery</h2><p>Этап обнаружения (Discovery) состоит из 4 частей. По завершении этого этапа оба партнера знают значение идентификатора сессии PPPoE (SESSION_ID) и Ethernet-адрес своего партнера, которые совместно обеспечивают уникальную идентификацию сеансов PPPoE. Процесс обнаружения включает широковещательную передачу хостом пакета Initiation, передачу одним или несколькими концентраторами доступа пакетов Offer, передачу хостом пакета Session Request по индивидуальному (unicast) адресу и передачей выбранным концентратором доступа пакета Confirmation (подтверждение). Когда хост получает пакет Confirmation, он может переходить к этапу PPP Session. Концентратор доступа, передав пакет Confirmation, также может переходить к этапу PPP Session.</p><p>Все кадры Ethernet на этапе Discovery имеют значение ETHER_TYPE = 0x8863.</p><p>Информационное поле PPPoE может содержать теги (TAG), которые представляют собой триплеты TLV, формат которых показан ниже:</p><pre>                     1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          TAG_TYPE             |        TAG_LENGTH             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          TAG_VALUE ...                                        ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre><p>16-битовое поле TAG_TYPE использует сетевой порядок байтов. Список значений полей TAG_TYPE и TAG_VALUE приведен в Приложении A.</p><p>Поле TAG_LENGTH имеет размер 16 битов. Это целое число без знака с сетевым порядком байтов показывает число октетов в поле TAG_VALUE.</p><p>Если на этапе обнаружения получен пакет с тегом неизвестного типа, данный тег должен игнорироваться, если в данном документе явно не указано иное. Такое поведение обеспечит обратную совместимость в случае добавления новых тегов. При добавлении новых тегов со статусом обязательных (mandatory) будет изменен номер версии.</p><p>Примеры пакетов Discovery приводятся в Приложении B.</p><h3>5.1 Пакет PADI</h3><p>Хост передает пакет PADI с широковещательным адресом в поле DESTINATION_ADDR. Поле CODE имеет значение 0x09, а поле SESSION_ID должно иметь значение 0x0000.</p><p>Пакет PADI должен в точности 1 тег типа Service-Name, показывающий запрашиваемый хостом тип сервиса, и может также содержать произвольное число тегов иных типов. Размер пакета PADI в целом (включая заголовок PPPoE) не может превышать 1484 октетов, чтобы транслирующий пакет агент мог добавить тег Relay-Session-Id.</p><h3>5.2 Пакет PADO</h3><p>Когда концентратор доступа получает пакет PADI, который он может обслужить, этот концентратор передает в ответ пакет PADO. Поле DESTINATION_ADDR в этом пакете содержит индивидуальный адрес хоста, передавшего пакет PADI. Поле CODE имеет значение 0x07, а поле SESSION_ID должно иметь значение 0x0000.</p><p>Пакет PADO должен содержать один тег AC-Name, указывающий имя концентратора доступа, и тег Service-Name из полученного пакета PADI, а также может включать произвольное число тегов Service-Name, показывающих другие типы сервиса, предоставляемого данным концентратором доступа. Если концентратор доступа не может обслужить пакет PADI, для него недопустимо передавать в ответ пакет PADO.</p><h3>5.3 Пакет PADR</h3><p>Поскольку пакет PADI передавался с использованием широковещательного адреса, хост может получить в ответ более одного пакета PADO. Хост просматривает полученные пакеты PADO и выбирает один из них. Выбор может основываться на включенных в эти пакеты тегах AC-Name или предлагаемых концентратором услугах. После этого хост передает выбранному концентратору доступа один пакет PADR. Поле DESTINATION_ADDR в этом пакете содержит индивидуальный Ethernet-адрес выбранного концентратора доступа из пакета PADO. Поле CODE имеет значение 0x19, а поле SESSION_ID должно иметь значение 0x0000.</p><p>Пакет PADR должен включать в точности один тег типа Service-Name, показывающий запрашиваемый хостом сервис, и может также включать произвольное число тегов иных типов.</p><h3>5.4 Пакет PADS</h3><p>Когда концентратор доступа получает пакет PADR, он готовится к началу сеанса PPP. Концентратор генерирует уникальное значение SESSION_ID для сеанса PPPoE и отвечает хосту пакетом PADS. Поле DESTINATION_ADDR в этом пакете содержит индивидуальный Ethernet-адрес хоста из пакета PADR. Поле CODE имеет значение 0x65, а поле SESSION_ID должно содержать уникальный идентификатор, созданный для сеанса PPPoE.</p><p>Пакет PADS содержит в точности один тег типа Service-Name, показывающий тип сервиса, для которого концентратор доступа организовал сеанс PPPoE, и может также включать произвольное число тегов иных типов.</p><p>Если концентратор доступа не устраивает значение Service-Name из пакета PADR, он должен ответить пакетом PADS, содержащим тег типа Service-Name-Error (и произвольное количество прочих тегов). В этом случае поле SESSION_ID должно иметь значение 0x0000.</p><h3>5.5 Пакет PADT</h3><p>Пакет этого типа может передаваться после организации сеанса PPPoE для индикации разрыва сессии. Такие пакеты могут передаваться как хостом, так и концентратором доступа. Поле DESTINATION_ADDR содержит индивидуальный адрес Ethernet, поле CODE имеет значение 0xa7, а поле SESSION_ID должно содержать идентификатор прерываемой сессии. Тегов для пакетов этого типа не требуется.</p><p>При получении пакета PADT не допускается дальнейшая передача трафика PPP в данной сессии. Для нормального завершения сеанса PPP недопустимо использовать пакеты PADT. Узлу PPP следует использовать средства протокола PPP для завершения сессии PPPoE, однако пакеты PADT могут применяться в тех случаях, когда невозможно использовать средства протокола PPP.</p><h2>6. Этап PPP Session</h2><p>После организации сеанса PPPoE данные PPP передаются как обычно (инкапсуляция PPP). Все кадры Ethernet используют индивидуальные (unicast) адреса. Для поля ETHER_TYPE устанавливается значение 0x8864. Поле CODE пакетов PPPoE должно иметь значение 0x00. Значение поля SESSION_ID недопустимо изменять с течение сеанса PPPoE и это значение должно совпадать с идентификатором, полученным на этапе Discovery. Информационное поле пакетов PPPoE содержит кадр PPP, начинающийся с идентификатора Protocol-ID. Примеры пакетов показаны в Приложении B.</p><h2>7. Вопросы управления каналом (LCP)</h2><p>Рекомендуется использовать конфигурационную опцию LCP Magic Number и не рекомендуется использовать опцию PFC. Для реализаций недопустимо запрашивать любые из перечисленных ниже опций и требуется отвергать запросы на такие опции:</p><ul class="dot"><li>FCS Alternatives;</li><li>ACFC;</li><li>ACCM.</li></ul><p>Для опции MRU недопустимо согласовывать значения более 1492. Поскольку кадр Ethernet может включать не более 1500 октетов полезной информации, заголовок PPPoE занимает 6 октетов, а поле PPP Protocol ID — 2 октета, значение PPP MTU недопустимо делать более 1492.</p><p>Концентраторам доступа рекомендуется время от времени передавать хосту пакеты Echo-Request для определения состояния сеанса. В противном случае, если хост прервал сессию без передачи пакета Terminate-Request, концентратор доступа не сможет определить, что сессия уже разорвана.</p><p>При прерывании LCP хост и концентратор доступа должны прекратить использование сессии PPPoE. Если хост желает организовать другой сеанс PPP, он должен вернуться к этапу PPPoE Discovery.</p><h2>8. Прочие вопросы</h2><p>Если хост не получает пакета PADO в течение заданного интервала времени, ему следует заново передать свой пакет PADI и удвоить период ожидания. Эта процедура может повторяться желаемое количество раз. При ожидании хостом пакета PADS следует применять аналогичную процедуру с повтором передачи пакета PADR. После заданного числа попыток хосту следует повторить передачу пакета PADI.</p><p>Значения ETHER_TYPE, используемые в данном документе (0x8863 и 0x8864), были выделены IEEE для использования с PPPoE. Эти значения в комбинации с полем PPPoE VER (версия) служат уникальным идентификатором протокола.</p><p>В данном документе используется кодировка UTF-8 [RFC2279] взамен ASCII. UTF-8 поддерживает весь набор символов ASCII, а также символы других языков. Дополнительную информацию об этой кодировке можно найти в документе [RFC2279].</p><h2>9. Вопросы безопасности</h2><p>Для защиты от DoS-атак концентраторы доступа могут использовать тег AC-Cookie. Концентраторам следует обеспечивать возможность повторной генерации уникальных значений поля TAG_VALUE на основе значения поля SOURCE_ADDR в пакете PADR. Такой подход обеспечивает гарантию того, что поле SOURCE_ADDR в пакете PADI содержит доступный адрес, и позволяет ограничить число одновременных сессий для этого адреса. Выбор алгоритма не задается спецификацией и остается за разработчиками. Примером алгоритма может служить использование HMAC [RFC2104] применительно к MAC-адресу хоста с ключом, который известен лишь концентратору доступа. Тег AC-Cookie помогает предотвратить некоторые типы DoS-атак, но он не может защитить от всех атак на службы и концентраторы доступа могут применять также другие механизмы защиты.</p><p>Многие концентраторы доступа не захотят сообщать информацию о поддерживаемых услугах непроверенным хостам. В таких случаях концентратору следует реализовать один из двух вариантов политики:</p><ul class="dot"><li>концентратору ни в коем случае не следует отвергать запросы на основании тега Service-Name и всегда следует возвращать значение TAG_VALUE, которое было передано концентратору;</li><li>концентратору следует принимать только запросы, в которых тег Service-Name имеет поле TAG_LENGTH=0 (любой сервис).</li></ul><p>Рекомендуется использовать второй вариант.</p><h2>10. Благодарности</h2><p>Этот документ основан на результатах дискуссий в нескольких форумах, включая ADSL forum.</p><p>Часть текста документа была заимствована из RFC 1661, RFC 1662 и RFC 2364.</p><h2>11. Литература</h2><table itemprop="references"><tr><td>[RFC1661]</td><td>Simpson, W., Editor, «The Point-to-Point Protocol (PPP)», STD 51, RFC 1661, Июль 1994</td></tr><tr><td>[RFC2119]</td><td>Scott Bradner, <a href="../2119.rfc" title="RFC 2119 - Ключевые слова для обозначения уровня требований в RFC">«Ключевые слова для обозначения уровня требований в RFC», RFC 2119</a>, Март 1997.</td></tr><tr><td>[RFC2104]</td><td>Krawczyk, H., Bellare, M. и R. Canetti, «HMAC: Keyed-Hashing for Message Authentication», RFC 2104, Февраль 1998.</td></tr><tr><td>[RFC1700]</td><td>Reynolds, J. и J. Postel, «Assigned Numbers», STD 2, RFC 1700, October 1994. See also: http://www.iana.org/numbers.html</td></tr><tr><td>[RFC2279]</td><td>Yergeau, F., «UTF-8, a transformation format of ISO 10646», RFC 2279, Январь 1998.</td></tr></table><h2>Приложение A</h2><p>Типы и значения тегов:</p><ul><li class="b">0x0000 End-Of-List</li><li class="lib">Этот тег показывает завершение списка имеющихся тегов. Поле TAG_LENGTH для этого тега всегда должно иметь нулевое значение. Использование этого тега не обязательно, но рекомендуется с точки зрения совместимости со старыми версиями.</li><li class="b">0x0101 Service-Name</li><li class="lib">Этот тег показывает, что далее следует имя сервиса. Поле TAG_VALUE представляет собой строку символов UTF-8 без завершающего NULL-символа. Нулевое значение поля TAG_LENGTH служит для индикации приемлемости любого сервиса. Примером использования тега Service-Name может служить индикация имени ISP, класса или качества обслуживания.</li><li class="b">0x0102 AC-Name</li><li class="lib">Этот тег показывает, что далее следует строка, являющаяся уникальным идентификатором данного концентратора доступа. Эта строка может представлять собой, например, комбинацию торговой марки модели и серийного номера устройства или просто задавать MAC-адрес концентратора в кодировке UTF-8. Строка не завершается NULL-символом.</li><li class="b">0x0103 Host-Uniq</li><li class="lib">Этот тег используется хостом для того, чтобы однозначно (уникально) связать отклик концентратора доступа (PADO или PADS) с определенным запросом хоста (PADI или PADR). Значение TAG_VALUE представляет собой бинарные данные произвольного размера, выбранные хостом. Значение этого поля не интерпретируется концентратором доступа. Хост может включать тег Host-Uniq в пакеты PADI или PADR. Если концентратор доступа получает такой тег, он должен без изменений скопировать его в соответствующий отклик PADO или PADS.</li><li class="b">0x0104 AC-Cookie</li><li class="lib">Этот тег используется концентраторами доступа для защиты от атак на службы (см. параграф Вопросы безопасности). Концентратор может включать этот тег в пакет PADO. Если хост получает пакет с таким тегом, он должен без изменений скопировать тег в соответствующий пакет PADR. Поле TAG_VALUE представляет собой бинарные данные произвольной длины, которые не интерпретируются хостом.</li><li class="b">0x0105 Vendor-Specific</li><li class="lib"><p>Этот тег используется для передачи фирменной (proprietary) информации от производителя. Первые 4 октета поля TAG_VALUE содержат идентификатор производителя, а остальные могут быть произвольными (не задаются спецификацией). Старший октет идентификатора производителя имеет значение 0, а остальные 3 октета содержат код SMI Network Management Private Enterprise Code для данного производителя с использованием сетевого порядка байтов. Коды определены в документе Assigned Numbers RFC [RFC1700].</p><p>Использование этого тега не рекомендуется. В целях обеспечения интероперабельности реализация может игнорировать тег Vendor-Specific.</p></li><li class="b">0x0110 Relay-Session-Id</li><li class="lib"><p>Этот тег может добавляться к любым пакетам обнаружения на промежуточных агентах, транслирующих трафик. Поле TAG_VALUE не интерпретируется хостом и концентратором доступа. Если хост или концентратор получает пакет с таким тегом, он должен скопировать тег без изменений в передаваемый пакет отклика. Во всех пакетах PADI должно резервироваться место для добавления тега Relay-Session-Id TAG с полем TAG_VALUE размером 12 октетов.</p><p>Тег Relay-Session-Id недопустимо добавлять, если в пакете обнаружения уже имеется такой тег. В этом случае промежуточному транслятору следует использовать существующий тег Relay-Session-Id. Если существующий тег нельзя использовать или в пакете нет места для добавления тега Relay-Session-Id, отправителю пакета следует отправить пакет с тегом Generic-Error.</p></li><li class="b">0x0201 Service-Name-Error</li><li class="lib"><p>Этот тег TAG (обычно с полем данных нулевого размера) показывает, что по той или иной причине запрос Service-Name не может быть удовлетворен.</p><p>Если тег содержит данные и их первый октет отличается от нуля, эти данные должны представлять собой строку в кодировке UTF-8, которая объясняет причину отказа. Строка может не содержать завершающего NULL-символа.</p></li><li class="b">0x0202 AC-System-Error</li><li class="lib"><p>Этот тег показывает, что концентратор доступа столкнулся с той или иной ошибкой при выполнении запроса хоста (например, нехваткой ресурсов для создания виртуального устройства). Тег может включаться в пакеты PADS.</p><p>Если тег включает данные, первый октет которых отличается от 0, эти данные должны представлять собой строку в кодировке UTF-8, объясняющую причину ошибки. Строка может не содержать завершающего NULL-символа.</p></li><li class="b">0x0203 Generic-Error</li><li class="lib">Этот тег указывает на наличие ошибки. Тег может включаться в пакеты PADO, PADR или PADS при возникновении неисправимой ошибки и отсутствии иных тегов, подходящих для объяснения причин ошибки. Если тег содержит данные, последние должны представлять собой строку в кодировке UTF-8, объясняющую причину ошибки. Строка может не содержать завершающего NULL-символа.</li></ul><h2>Приложение B</h2><p>Ниже приводятся примеры некоторых пакетов.</p><h4>Пакет PADI</h4><pre>                     1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         0xffffffff                            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           0xffff              |        Host_mac_addr          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Host_mac_addr (cont)                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    ETHER_TYPE = 0x8863        | v = 1 | t = 1 |  CODE = 0x09  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     SESSION_ID = 0x0000       |      LENGTH = 0x0004          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      TAG_TYPE = 0x0101        |    TAG_LENGTH = 0x0000        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre><h4>Пакет PADO</h4><pre>                     1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Host_mac_addr                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      Host_mac_addr (cont)     | Access_Concentrator_mac_addr  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             Access_Concentrator_mac_addr (cont)               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    ETHER_TYPE = 0x8863        | v = 1 | t = 1 |  CODE = 0x07  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     SESSION_ID = 0x0000       |      LENGTH = 0x0020          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      TAG_TYPE = 0x0101        |    TAG_LENGTH = 0x0000        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      TAG_TYPE = 0x0102        |    TAG_LENGTH = 0x0018        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     0x47      |     0x6f      |     0x20      |     0x52      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     0x65      |     0x64      |     0x42      |     0x61      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     0x63      |     0x6b      |     0x20      |     0x2d      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     0x20      |     0x65      |     0x73      |     0x68      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     0x73      |     0x68      |     0x65      |     0x73      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     0x68      |     0x6f      |     0x6f      |     0x74      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre><h4>Пакет PPP LCP</h4><p>В примере указан идентификатор протокола PPP (0xc021), но данные PPP (payload) не приводятся. Такие пакеты передаются от хоста концентратору доступа.</p><pre>                     1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                  Access_Concentrator_mac_addr                 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Access_Concentrator_mac_addr(c)|        Host_mac_addr          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                     Host_mac_addr (cont)                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    ETHER_TYPE = 0x8864        | v = 1 | t = 1 |  CODE = 0x00  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     SESSION_ID = 0x1234       |      LENGTH = 0x????          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    PPP PROTOCOL = 0xc021      |        PPP payload            ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre><h2>Адреса авторов</h2><p>Louis Mamakos<br />UUNET Technologies, Inc.<br />3060 Williams Drive<br />Fairfax, VA 22031-4648<br />United States of America<br />EMail: <bdo dir="rtl">&#116;&#101;&#110;&#46;&#117;&#117;&#64;&#101;&#105;&#117;&#111;&#108;</bdo></p><p>Kurt Lidl<br />UUNET Technologies, Inc.<br />3060 Williams Drive<br />Fairfax, VA 22031-4648<br />United States of America<br />EMail: <bdo dir="rtl">&#116;&#101;&#110;&#46;&#117;&#117;&#64;&#108;&#100;&#105;&#108;</bdo></p><p>Jeff Evarts<br />UUNET Technologies, Inc.<br />3060 Williams Drive<br />Fairfax, VA 22031-4648<br />United States of America<br />EMail: <bdo dir="rtl">&#116;&#101;&#110;&#46;&#117;&#117;&#64;&#101;&#100;&#106;</bdo></p><p>David Carrel<br />RedBack Networks, Inc.<br />1389 Moffett Park Drive<br />Sunnyvale, CA 94089-1134<br />United States of America<br />EMail: <bdo dir="rtl">&#116;&#101;&#110;&#46;&#107;&#99;&#97;&#98;&#100;&#101;&#114;&#64;&#108;&#101;&#114;&#114;&#97;&#99;</bdo></p><p>Dan Simone<br />RedBack Networks, Inc.<br />1389 Moffett Park Drive<br />Sunnyvale, CA 94089-1134<br />United States of America<br />EMail: <bdo dir="rtl">&#116;&#101;&#110;&#46;&#107;&#99;&#97;&#98;&#100;&#101;&#114;&#64;&#110;&#97;&#100;</bdo></p><p>Ross Wheeler<br />RouterWare, Inc.<br />3961 MacArthur Blvd., Suite 212<br />Newport Beach, CA 92660<br />United States of America<br />EMail: <bdo dir="rtl">&#109;&#111;&#99;&#46;&#101;&#114;&#97;&#119;&#114;&#101;&#116;&#117;&#111;&#114;&#64;&#115;&#115;&#111;&#114;</bdo></p></div></div><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname="rfc2",disqus_title="RFC 2516 - Метод передачи PPP через Ethernet (PPPoE)",disqus_identifier="2516.rfc",disqus_url="http://rfc2.ru/2516.rfc";(function(){var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;dsq.src = "//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><div class="bubble">2007 - 2014 © <a href="../index.html" title="Русские переводы RFC">Русские переводы RFC</a>, IETF, ISOC.</div></div><div id="bottom" style="position:static !important;bottom:auto !important"><div class="bubble"><ul><li><!--723572853672--></li></ul></div></div><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter4680559 = new Ya.Metrika({id:4680559, webvisor:true, clickmap:true, accurateTrackBounce:true, trackHash:true, ut:"noindex"}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="http://mc.yandex.ru/watch/4680559?ut=noindex" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --></body></html>
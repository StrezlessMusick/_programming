<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="../tpl/style.css@f4e332aa" type="text/css" /><link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' /><style type="text/css">h1,h2,h3,h4{font-family:'Open Sans',sans-serif}</style><link rel="canonical" href="../4291.rfc" /><meta name="Robots" content="noindex, nofollow" /><title>Перевод RFC 4291 — Архитектура шестой версии протокола межсетевого обмена в Internet (IPv6-адресация)</title><link rel="alternate" type="application/rss+xml" title="RFC2.ru - Русские Переводы RFC" href="../rss.xml"></head><body><div id="content"><div id="nav"><div class="icon i0"></div> <a href="../index.html" accesskey="`">На Главную</a></div><div id="search" class="ya-site-form ya-site-form_inited_no"><form action="http://yandex.ru/sitesearch" method="get" target="_blank"><input type="hidden" name="searchid" value="2154295"/><input type="hidden" name="l10n" value="ru"/><input type="hidden" name="reqenc" value=""/><input type="hidden" name="submit" value="Найти"/><input type="search" value="" name="text" placeholder="Поиск по RFC2.ru" /></form></div><div itemscope itemtype="http://schema.org/ScholarlyArticle"><meta itemprop="inLanguage" content="ru" /><meta itemprop="editor" content="ru" /><div id="header"><h1><a itemprop="headline" href="../4291.rfc">RFC 4291 — Архитектура шестой версии протокола межсетевого обмена в Internet (IPv6-адресация)</a></h1></div><dl class="mute"><dt></dt><dd><div class="icon i1"></div> RFC: 4291</dd><dd><div class="icon i3"></div> Оригинал: <a href="original" target="_blank"><span itemprop="alternativeHeadline">IP Version 6 Addressing Architecture</span></a></dd><dd><div class="icon i7"></div> Предыдущие версии: RFC 1884, RFC 2373, RFC 3513</dd><dd><div class="icon i2"></div> Категория: <span itemprop="articleSection">Проект стандарта</span></dd><dd><div class="icon i4"></div> Дата публикации: <time itemprop="datePublished" datetime="2006-02-01">Февраль 2006</time></dd><dd><div class="icon i5"></div> Авторы: <span itemprop="author">R. Hinden</span>, <span itemprop="author">S. Deering</span></dd><dd><div class="icon i6"></div> Перевод: <span itemprop="editor">Мельников Дмитрий Анатольевич</span></dd></dl><div id="text" itemprop="articleBody"><h2>Оглавление</h2><ul class="map"><li><a href="print#p1">1. Предисловие</a></li><li><a href="print#p2">2. IPv6-Адресация</a></li><li class="lia"><a href="print#p2.1">2.1. Модель IPv6-адресации</a></li><li class="lia"><a href="print#p2.2">2.2. Текстуальное представление IPv6-адресов</a></li><li class="lia"><a href="print#p2.3">2.3. Текстуальное представление префиксов IPv6-адресов</a></li><li class="lia"><a href="print#p2.4">2.4. Идентификация типа IPv6-адреса</a></li><li class="lia"><a href="print#p2.5">2.5. Однонаправленные IPv6-адреса</a></li><li class="lib"><a href="print#p2.5.1">2.5.1. Идентификаторы интерфейсов</a></li><li class="lib"><a href="print#p2.5.2">2.5.2. Неустановленные адреса</a></li><li class="lib"><a href="print#p2.5.3">2.5.3. Петлевые адреса</a></li><li class="lib"><a href="print#p2.5.4">2.5.4. Глобальные однонаправленные IPv6-адреса</a></li><li class="lib"><a href="print#p2.5.5">2.5.5. Смешанная форма адресов</a></li><li class="lib"><a href="print#p2.5.6">2.5.6. Однонаправленные IPv6-адреса для локальных линий связи</a></li><li class="lib"><a href="print#p2.5.7">2.5.7. Однонаправленные IPv6-адреса для локальных групп подсетей</a></li><li class="lia"><a href="print#p2.6">2.6. Альтернативные IPv6-адреса</a></li><li class="lib"><a href="print#p2.6.1">2.6.1. Востребованные альтернативные IPv6-адреса</a></li><li class="lia"><a href="print#p2.7">2.7. Групповые IPv6-адреса</a></li><li class="lib"><a href="print#p2.7.1">2.7.1. Предварительно назначенные групповые IPv6-адреса</a></li><li class="lia"><a href="print#p2.8">2.8. IPv6-адреса, которые IP-узел должен распознавать</a></li><li><a href="print#p3">3. Вопросы безопасности</a></li><li><a href="print#p4">4. Согласование с IANA </a></li><li><a href="print#p5">5. Благодарности</a></li><li><a href="print#p6">6. Ссылки</a></li><li class="lia"><a href="print#p6.1">6.1. Нормативные документы</a></li><li class="lia"><a href="print#p6.2">6.2. Дополнительная литература</a></li><li><a href="print#p.appendix.a">Приложение A: Creating Modified EUI-64 Format Interface Identifiers</a></li><li><a href="print#p.appendix.b">Приложение B: Changes from RFC 3513</a></li></ul><h2 id="p1">1. Предисловие</h2><p>Этот стандарт определяет архитектуру шестой версии протокола сетевого уровня в Internet (IPv6-протокол). Он включает основные форматы различных типов (однонаправленный — unicast, альтернативный — anycast и групповой — multicast).</p><h2 id="p2">2. IPv6-Адресация</h2><p>IPv6-адреса представляют собой 128-битовые идентификаторы для сетевых интерфейсов и групп сетевых интерфейсов. Существуют следующие три типа IPv6-адресов:</p><ul><li class="b">Однонаправленный (unicast).</li><li class="lib">Он представляет собой идентификатор одного интерфейса (IP-узла). Переданный с таким адресом IP-пакет доставляется на интерфейс (IP-узел), имеющий такой адрес;</li><li class="b">Альтернативный (anycast).</li><li class="lib">Он представляет собой идентификатор группы сетевых интерфейсов (обычно принадлежащих различным IP-узлам). Переданный с таким адресом IP-пакет доставляется на один из сетевых интерфейсов (IP-узлов), имеющих такой адрес (то есть «ближайший» в соответствии с принятой метрикой протокола маршрутизации);</li><li class="b">Групповой (multicast).</li><li class="lib">Он представляет собой идентификатор группы сетевых интерфейсов (обычно принадлежащих различным IP-узлам). Переданный с таким адресом IP-пакет доставляется на все интерфейсы (IP-узлы), имеющие такой адрес.</li></ul><p>В IPv6-адресации нет широковещательных (broadcast) адресов, так как эту функцию выполняют групповые IPv6-адреса.</p><h3 id="p2.1">2.1. Модель IPv6-адресации</h3><p>IPv6-адреса всех типов приписываются (привязаны) к сетевым интерфейсам, а не к IP-узлам (на практике один IP-узел может иметь несколько сетевых интерфейсов). Однонаправленный IPv6-адрес указывает на одиночный сетевой интерфейс. Так как каждый сетевой интерфейс принадлежит одному IP-узлу, то впринципе, однонаправленные IPv6-адреса можно использовать в качестве идентификатора IP-узла.</p><p>Одно из требований к любому сетевому интерфейсу заключается в том, что он должен иметь, по крайней мере, один однонаправленный IPv6-адрес, связанный с конкретным локальным каналом связи. Один сетевой интерфейс может также иметь несколько IPv6-адресов различных типов (однонаправленный, альтернативный и групповой) или целый диапазон.</p><p>Однонаправленные IPv6-адреса в большом диапазоне превышают диапазон конкретной линии связи, и поэтому нет необходимости обозначать ими интерфейсы «не соседних» IP-узлов, которые не используются как источники или получатели IPv6-пакетов. Они наиболее приемлемы для идентификации оконечных интерфейсов при сквозном соединении («point-to-point»).</p><p>Существует только одно исключение в данной модели адресации:</p><p class="lib">Однонаправленные IPv6-адреса или группа таких IPv6-адресов может быть присвоена нескольким физическим интерфейсам, если в конкретной подсети эта группа физических интерфейсов рассматриваются как один интерфейс, когда его представляют как интерфейс сетевого уровня. Это бывает весьма полезным при распределении нагрузки между несколькими физическими интерфейсами.</p><p>В настоящее время модель IPv6-адресации совпадает с моделью IPv4-адресации, в которой префикс подсети соответствует одной линии связи. Более того несколько префиксов подсети могут присваиваться одной и той же линии связи.</p><h3 id="p2.2">2.2. Текстуальное представление IPv6-адресов</h3><p>Существуют три стандартные формы текстуального представления IPv6-адресов (в форме текстовых строк или последовательностей):</p><ol class="lia"><li><p>Рекомендуемая (полная) форма:</p><pre>x:x:x:x:x:x:x:x</pre><p>где <code>x</code> — от одного до четырех шестнадцатеричных чисел из восьми 16-битовых отрезков (полей/субполей) IPv6-адреса. Например:</p><pre>ABCD:EF01:2345:6789:ABCD:EF01:2345:6789
2001:DB8:0:0:8:800:200C:417A</pre><p class="note">Замечание. Нет необходимости записывать все четыре нуля в одном 16-битовом поле IPv6-адреса. Однако, в каждом поле должна присутствовать хотя бы одна цифра.</p></li><li><p>Сокращённая форма.</p><p>Несмотря на некоторые способы формирования определенных вариантов IPv6-адресов, в большинстве случаев IPv6-адреса будут содержать весьма длинные последовательности нулевых битов. С целью облегчения записи IPv6-адресов, содержащих такие нулевые последовательности, существуют специальные правила для сокращения длины адреса. В частности, для этого используется символ <code>::</code>, который служит для замены нулевых 16-битовых полей в IPv6-адресе. Этот символ может размещаться в IPv6-адресе только один раз. Он также может использоваться для сокращения начальных или конечных нулевых последовательностей. Следующая таблица содержит примеры использования символа <code>::</code>;</p><table><tr><th>Типы IPv6-адресов</th><th>Рекомендуемая форма</th><th>Сокращённая форма</th></tr><tr><td>Однонаправленный адрес</td><td>2001:DB8:0:0:8:800:200C:417A</td><td>2001:DB8::8:800:200C:417A</td></tr><tr><td>Групповой адрес</td><td>FF01:0:0:0:0:0:0:101</td><td>FF01::101</td></tr><tr><td>Петлевой (loopback) адрес <sup><abbr title="Петлевой (loopback) адрес используется для передачи контрольных IP-пакетов (эхо-контроль, ping)">[?]</abbr></sup></td><td>0:0:0:0:0:0:0:1</td><td>::1</td></tr><tr><td>Неустановленный адрес</td><td>0:0:0:0:0:0:0:0</td><td>::</td></tr></table></li><li><p>Смешанная (альтернативная) форма.</p><p>смешанная (альтернативная) форма. Данная форма применяется в тех случаях, когда речь идет IP-узлах, использующих одновременно IPv4- и IPv6-адресацию, и поэтому она имеет следующий формат записи:</p><pre>x:x:x:x:x:x:d.d.d.d</pre><p>где <code>x</code> — шестнадцатеричные числа в первых шести 16-битовых полей смешанного адреса, <code>d</code> — десятичные числа последних четырёх 8-битовых полей (в соответствии с IPv6-адресацией) смешанного адреса.</p><p>Следующая таблица содержит примеры смешанной формы адресации:</p><table><tr><th>Смешанная форма</th><th>Сокращённая форма</th></tr><tr><td>0:0:0:0:0:0:13.1.68.3</td><td>::13.1.68.3</td></tr><tr><td>0:0:0:0:0:FFFF:129.144.52.38</td><td>::FFFF:129.144.52.38</td></tr></table></ol><h3 id="p2.3">2.3. Текстуальное представление префиксов IPv6-адресов</h3><p>Текстуальное представление префиксов IPv6-адресов аналогично записи префиксов IPv4-адресов при использовании бесклассового способа межсетевой маршрутизации <sup><abbr title="В IPv4-адресации все адреса разделены на четыре класса.">[?]</abbr></sup>.</p><p>Префикс IPv6-адреса имеет следующий формат записи:</p><pre>ipv6-address/prefix-length</pre><p>где <code>ipv6-address</code> — любой из перечисленных выше типов IPv6-адресов, а <code>prefix-length</code> — десятичное число, указывающее на количество крайних слева последовательных битов адреса, представляющих префикс.</p><p>Далее приведены примеры допустимых форматов записи 60 битового шестнадцатеричного префикса <code>20010DB80000CD3</code>:</p><pre>2001:0DB8:0000:CD30:0000:0000:0000:0000/60
2001:0DB8::CD30:0:0:0:0/60
2001:0DB8:0:CD30::/60</pre><p>Далее приведены примеры не допустимых форматов записи 60 битового шестнадцатеричного префикса <code>20010DB80000CD3</code>:</p><ol class="lia"><li><code>2001:0DB8:0:CD3/60</code><p class="lib">В этом случае могут быть потеряны начальные последовательности нулей (но не конечных) в пределах любого 16-битового поля адреса.</p></li><li><code>2001:0DB8::CD30/60</code><p class="lib">В этом случае адрес слева от символа <code>/</code> «расширяется» до неверного значения <code>2001:0DB8:0000:0000:0000:0000:0000:CD30</code>.</p></li><li><code>2001:0DB8::CD3/60</code><p class="lib">В этом случае адрес слева от символа <code>/</code> «расширяется» до неверного значения <code>2001:0DB8:0000:0000:0000:0000:0000:0CD3</code>.</p></ol><p>При записи IPv6-адреса IP-узла совместно с префиксом этого IPv6-адреса IP-узла (например, префикс IP-узла некой подсети), то тогда допускаются следующие форматы записи:</p><ol class="lia"><li><p>IPv6-адреса IP-узла — <code>2001:0DB8:0:CD30:123:4567:89AB:CDEF</code>.</p></li><li><p>Номер подсети, в которой расположен IP-узел — <code>2001:0DB8:0:CD30::/60</code>.</p></li><li><p>Комбинация адрес/префикс — <code>2001:0DB8:0:CD30:123:4567:89AB:CDEF/60</code>.</p></li></ol><h3 id="p2.4">2.4. Идентификация типа IPv6-адреса</h3><p>Тип IPv6-адреса определяется битами старшего порядка адреса. Следующая таблица определяет кодирование типов IPv6-адресов.</p><table><tr><th>Тип IPv6-адреса</th><th>Двоичный префикс</th><th>Формат IPv6-адреса</th></tr><tr><td>Неустановленный адрес</td><td>00...0 (128 битов)</td><td>::/128</td></tr><tr><td>Петлевой адрес</td><td>00...1 (128 битов)</td><td>::1/128</td></tr><tr><td>Групповой адрес</td><td>11111111</td><td>FF00::/8</td></tr><tr><td>Однонаправленный адрес для локальной линии связи</td><td>1111111010</td><td>FE80::/10</td></tr><tr><td>Глобальный однонаправленный адрес</td><td>Любой другой</td><td>-</td></tr></table><p>Альтернативные IPv6-адреса, выбираемые из пространства однонаправленных IPv6-адресов, с точки зрения семантики ничем не отличаются от однонаправленных IPv6-адресов.</p><p>В последующих стандартах для определенных целей могут быть введены один или несколько субдиапазонов глобальных однонаправленных IPv6-адресов, но до тех пор, пока этого не произойдет, в прикладных системах все адреса должны трактоваться как глобальные однонаправленные IPv6-адреса, за исключением других типов адресов, представленных в приведенной выше таблице.</p><h3 id="p2.5">2.5. Однонаправленные IPv6-адреса</h3><p>Однонаправленные IPv6-адреса записываются вместе с префиксами произвольной длины в битах, что — аналогично IPv4-адресации при использовании бесклассового способа межсетевой маршрутизации.</p><p>В настоящее время существуют несколько типов однонаправленных IPv6-адресов, а именно: глобальные, для локальных терминалов (сетевых устройств) и для локальных линий связи (IP-узлов). Существуют также несколько специализированных подтипов глобальных однонаправленных IPv6-адресов, среди которых совмещенные IPv6- и IPv4-адреса. В дальнейшем могут быть определены новые типы и подтипы адресов.</p><p>IP-узлы работающие с IPv6-адресацией могут иметь достаточно много или мало данных о внутренней структуре IPv6-адресов, это зависит роли, которую играет IP-узел (например, сервер или маршрутизатор). Как минимум, IP-узел может знать, что однонаправленный IPv6-адрес (включая свой собственный) не имеет какой-либо внутренней структуры (рис.1).</p><pre>|                            128 битов                            |
+-----------------------------------------------------------------+
|                       IPv6-адрес IP-узла                        |
+-----------------------------------------------------------------+

Рис.1. Формат IPv6-адреса, не имеющего какой-либо внутренней структуры</pre><p>Немного более сложный IP-узел (но по-прежнему весьма простой) дополнительно может быть «осведомлён» о префиксе(ах) подсети для линии(ий) связи, которые за ними закреплены, при этом различные IPv6-адреса могут иметь различные значения длины (<code>n</code>) префикса (рис.2).</p><pre>|            n битов            |           128-n битов           |
+-------------------------------+---------------------------------+
|        Префикс подсети        |     Идентификатор интерфейса    |
+-------------------------------+---------------------------------+

Рис.2. Формат IPv6-адреса с префиксом подсети длиной "n"</pre><p>Тем не менее, очень простой маршрутизатор может не иметь данных о внутренней структуре однонаправленных IPv6-адресов, однако маршрутизаторы будут иметь более полные данные об одной или нескольких иерархических границах топологического сетевого пространства, в рамках которого функционируют протоколы маршрутизации. Но даже известные границы будут различаться от мршрутизатора к маршрутизатору, в зависимости от того, какое место занимает маршрутизатор в иерархии маршрутизации.</p><p>Целесообразно не «нагружать» IP-узлы какой-либо информацией о структуре IPv6-адресов, за исключением данных о границах подсетей, которые они обслуживают.</p><h4 id="p2.5.1">2.5.1. Идентификаторы интерфейсов</h4><p>В однонаправленных IPv6-адресах для обозначения сетевых интерфейсов на конкретной линии связи используются идентификаторы интерфейсов. Они должны быть уникальными в пределах префикса подсети. Рекомендуется, чтобы идентификатор одного и того же интерфейса не был присвоен различным IP-узлам, связанным одной линией связи. Они также могут быть уникальными в рамках более широкого диапазона. В некоторых случаях, идентификатор интерфейса может быть получен прямо из адреса канального уровня, связанного с этим сетевым интерфейсом. Один и тот же идентификатор интерфейса может использоваться в нескольких интерфейсах в одном IP-узле, но до тех пор, пока они присвоены различным подсетям.</p><p class="note">Замечание. Уникальность идентификаторов интерфейсов не зависит от уникальности IPv6-адресов. Например, глобальный однонаправленный IPv6-адрес может быть сформирован с идентификатором интерфейса в пределах границ локальной зоны, а IPv6-адрес для локального канала (линии) связи может быть сформирован с идентификатором интерфейса в пределах границ универсальной зоны.</p><p>Для всех однонаправленных IPv6-адресов, за исключением тех, которые начинаются с бинарного значения <code>000</code>, идентификаторы интерфейсов должны иметь длину 64 бита и формат EUI-64 (усовершенствованный вариант).</p><p>Идентификаторы интерфейсов в формате EUI-64 могут иметь универсальную зону применения, когда они извлекаются из универсальной метки (например, 48-битовый МАС-адрес<sup><abbr title="Media Access Control — управление доступом к среде передачи данных.">[?]</abbr></sup> стандарта IEEE 802, или идентификаторы стандарта IEEE EUI-64), или иметь локальную зону применения, в которой глобальные метки не используются (например, терминальные окончания туннелей, последовательные линии передачи данных) или такие глобальные метки не допустимы (например, временные метки для обеспечения безопасности).</p><p>Идентификаторы интерфейсов в усовершенствованном формате EUI-64 формируются путем инверсии бита <code>u</code> (универсальный/локальный бит в терминологии IEEE EUI-64), если они создаются из идентификаторов стандарта IEEE EUI-64. Таким образом, в результате инверсии бита <code>u</code> имеем:</p><ul class="lia"><li><code>1</code> — указывает на универсальную зону применения;</li><li><code>0</code> — указывает на локальную зону применения.</li></ul><p>На рис.3 представлен формат первых трех октетов (в двоичной форме) идентификаторов стандарта IEEE EUI-64. Порядок следования битов соответствует порядку передачи битов в Internet-сообществе. Бит <code>u</code> — универсальный/локальный бит, бит <code>g</code> — индивидуальный/групповой бит, <code>с</code> — биты идентификатора компании.</p><pre> 0           0 0           1 1           2
|0           7 8           5 6           3|
+------+------+------+------+------+------+
| cccc | ccug | cccc | cccc | cccc | cccc |
+------+------+------+------+------+------+

Рис.3. Формат первых трех октетов идентификаторов стандарта IEEE EUI-64</pre><p>Причина инверсии бита <code>u</code> при формировании идентификатора интерфейса весьма банальна — облегчить системным администраторам ручную настройку не глобальных идентификаторов, когда аппаратные метки не допустимы. За исключением, например, случаев последовательных линий передачи данных и терминальных окончаний туннелей (при сквозных соединениях). Альтернативной формой могла бы быть форма <code>0200:0:0:1, 0200:0:0:2, etc…</code>, за исключением уж слишком упрощенной формы как <code>0:0:0:1, 0:0:0:2, etc…</code>. Сетевые IPv6-узлы, не требующие того, чтобы в идентификаторах интерфейсов в усовершенствованном формате EUI-64 бит <code>u</code> не был установлен в положение «универсальный» (значение <code>1</code>), являются уникальными.</p><p>Использование «универсального/локального» бита в идентификаторе усовершенствованного формата EUI-64 позволяет усовершенствовать перспективную технологию, которая обеспечит весомые преимущества от применения идентификаторов интерфейсов в универсальной зоне.</p><h4 id="p2.5.2">2.5.2. Неустановленные адреса</h4><p>Адрес <code>0:0:0:0:0:0:0:0</code> называется неустановленным IPv6-адресом. Он никогда не должен присваиваться какому-либо IP-узлу. Этот адрес указывает на отсутствие адреса. Существует только один пример использования такого адреса: в поле «Адрес отправителя сообщения» в любых IPv6-пакетах, которые передаются сервером для собственной инициализации, еще до того как этот сервер узнает свой собственный IPv6-адрес.</p><p>Неустановленный адрес никогда не должен использоваться как «Адрес получателя» в IPv6-пакетах или в заголовках маршрутизации IPv6-пакетов. IPv6-пакет с неустановленным «Адресом отправителя сообщения» никогда не должен транслироваться IPv6-маршрутизатором.</p><h4 id="p2.5.3">2.5.3. Петлевые адреса</h4><p>Однонаправленный IPv6-адрес <code>0:0:0:0:0:0:0:1</code> называется петлевым адресом. Этот адрес может использоваться IP-узлом для передачи IPv6-пакета «самому себе». Он не должен никогда присваиваться какому-либо физическому интерфейсу. Петлевой адрес интерпретируется как адрес, имеющий диапазон в рамках локального канала (линии) связи, и может восприниматься как однонаправленный адрес виртуального интерфейса в рамках локального канала (линии) связи (часто именуемый «петлевым интерфейсом»), а именно мнимой линии связи, которая идёт в «никуда».</p><p>Данный адрес никогда не должен использоваться в качестве «Адрес отправителя сообщения» в любых IPv6-пакетах, которые передаются одиночным IP-узлом. IPv6-пакет с петлевым адресом в поле «Адрес получателя» никогда не должен передаваться одиночным IP-узлом, а также никогда не должен транслироваться IPv6-маршрутизатором. Пакет с петлевым адресом в поле «Адрес получателя», поступивший на сетевой интерфейс, должен быть уничтожен.</p><h4 id="p2.5.4">2.5.4. Глобальные однонаправленные IPv6-адреса</h4><p>Общий формат глобального однонаправленного IPv6-адреса представлена на рис.4.</p><pre>|             n битов              |        m битов        |      128-n-m битов       |
+----------------------------------+-----------------------+--------------------------+
| Префикс глобальной маршрутизации | Идентификатор подсети | Идентификатор интерфейса |
+----------------------------------+-----------------------+--------------------------+

Рис.4. Общий формат глобального однонаправленного IPv6-адреса</pre><p>Префикс глобальной маршрутизации (обычно имеет иерархическую структуру) присваивается группе подсетей (линий связи), а идентификатор подсети присваивается линии связи в рамках этой группы подсетей.</p><p>Все глобальные однонаправленные IPv6-адреса (за исключением тех, которые начинаются с нулевой последовательности <code>000</code>) имеют 64-битовой поле «Идентификатор интерфейса» (то есть,  n  + m  = 64). Глобальные однонаправленные IPv6-адреса, которые начинаются с нулевой последовательности <code>000</code>, имеют другую конструкцию и формат.</p><h4 id="p2.5.5">2.5.5. Смешанная форма адресов</h4><p>Существуют два типа IPv6-адресов, которые содержат IPv4-адреса в 32 битах младшего порядка IPv6-адреса:</p><ul class="list"><li>IPv6-адрес, совмещенный с IPv4-адресом;</li><li>IPv6-адрес, отображающий IPv4-адрес.</li></ul><h5 id="p2.5.5.1">2.5.5.1. IPv6-адрес, совмещенный с IPv4-адресом</h5><p>Это тип адреса был предназначен для поддержки процесса перехода от IPv4-адресации к IPv6-адресации. На рис.5 представлен формат IPv6-адреса, совмещённого с IPv4-адресом.</p><pre>|               80 битов               | 16 битов |    32 бита     |
+--------------------------------------+---------------------------+
|0000..............................0000|   0000   |   IPv4-адрес   |
+--------------------------------------+----------+----------------+

Рис.5. Формат IPv6-адреса, совмещённого с IPv4-адресом</pre><p class="note">Замечание. IPv4-адрес, который используется в IPv6-адресе, совмещённом с IPv4-адресом, должен быть глобальным уникальным однонаправленным IPv4-адресом.</p><p>В настоящее время применение IPv6-адреса, совмещённого с IPv4-адресом, опротестовано, так как современные способы перехода к IPv6-адресации больше не используют такие адреса. Поэтому новые и усовершенствованные алгоритмы и способы маршрутизации могут не использовать этот тип IPv6-адресов.</p><h5 id="p2.5.5.2">2.5.5.2. IPv6-адрес, отображающий IPv4-адрес</h5><p>В настоящее время определен второй тип IPv6-адреса, в который «вложен» IPv4-адрес. Этот тип IPv6-адреса используется согласования c IPv4-адресами в IP-узлах с IPv4-адресацией. На рис.6 представлен формат IPv6-адреса, отображающего IPv4-адрес.</p><pre>|                80 битов              | 16 битов |    32 бита     |
+--------------------------------------+---------------------------+
|0000..............................0000|   FFFF   |   IPv4-адрес   |
+--------------------------------------+----------+----------------+

Рис.6. Формат IPv6-адреса, отображающего IPv4-адрес</pre><p>В стандарте RFC-4038 представлены правила использования IPv6-адресов, отображающих IPv4-адреса.</p><h4 id="p2.5.6">2.5.6. Однонаправленные IPv6-адреса для локальных линий связи</h4><p>Такие IPv6-адреса используются в пределах одной линии связи. На рис.7 представлен формат однонаправленного IPv6-адреса для локальной линии связи.</p><p>Данные адреса предназначены для использования для обозначения интерфейсов в рамках одного канала (линии) связи в следующих целях:</p><ul class="list"><li>автоматическая настройка адресов;</li><li>поиск соседних IP-узлов;</li><li>отсутствие маршрутизаторов.</li></ul><pre>|  10 битов  |         54 бита         |         64 бита          |
+------------+-------------------------+--------------------------+
| 1111111010 |            0            | Идентификатор интерфейса |
+------------+-------------------------+--------------------------+

Рис.7. Формат однонаправленного IPv6-адреса для локальной линии связи</pre><p>Маршрутизаторы никогда не должны транслировать в другие линии (каналы) связи какие-либо пакеты, содержащие в своих полях «Адрес отправителя сообщения» или «Адрес получателя» IPv6-адрес для локальной линии связи.</p><h4 id="p2.5.7">2.5.7. Однонаправленные IPv6-адреса для локальных групп подсетей</h4><p>Такие адреса были специально разработаны для обозначения интерфейсов внутри группы подсетей без использования в них глобальных префиксов. Однако в настоящее время применение данных адресов опротестовано (RFC-3879).</p><p>На рис.8 представлен формат однонаправленного IPv6-адреса для локальных групп подсетей.</p><pre>|  10 битов  |         54 бита         |         64 бита          |
+------------+-------------------------+--------------------------+
| 1111111011 |  Идентификатор подсети  | Идентификатор интерфейса |
+------------+-------------------------+--------------------------+

Рис.8. Формат однонаправленного IPv6-адреса для локальных групп подсетей</pre><p>Специализированное применение этого префикса (RFC-3513) больше не должно использоваться во вновь создаваемых системах (то есть в новых сетях это префикс должен рассматриваться как глобальный однонаправленный IPv6-адрес).</p><p>В существующих сетях он может использоваться по-прежнему.</p><h3 id="p2.6">2.6. Альтернативные IPv6-адреса</h3><p>Альтернативный IPv6-адрес представляет собой адрес, который присваивается нескольким сетевым интерфейсам (обычно принадлежащих различным IP-узлам). Переданный с таким адресом IP-пакет доставляется на один из сетевых интерфейсов (IP-узлов), имеющих такой адрес (то есть «ближайший» в соответствии с принятой метрикой протокола маршрутизации.</p><p>Альтернативные адреса выбираются из пространства однонаправленных IPv6-адресов, используя для этого один из возможных форматов однонаправленных адресов. Таким образом, альтернативные адреса, с точки зрения семантики, ничем не отличаются от однонаправленных адресов. Когда однонаправленный адрес присваивается нескольким сетевым интерфейсам, то он превращается в альтернативный адрес, а IP-узлы, которым присвоен этот адрес, должны однозначно «знать» (при их настройке), что такой адрес является альтернативным.</p><p>В любых назначаемых альтернативных адресах присутствует более длинный префикс <code>Р</code>, идентифицирующий топологический регион (сетевой сегмент), в котором постоянно присутствуют все интерфейсы, обозначенные альтернативными адресами с этим префиксом. Внутри региона, обозначенного префиксом <code>Р</code>, альтернативный адрес должен обслуживаться как выделенный компонент конкретной системы маршрутизации (обычно именуемый как главный маршрут — «host route»). За пределами региона, обозначенного префиксом <code>Р</code>, альтернативный адрес может быть объединен с префиксом <code>Р</code> в общий компонент маршрутизации.</p><p class="note">Замечание. В наихудшем случае, префикс <code>Р</code> в группе альтернативных адресов может иметь нулевое значение, то есть адреса этой группы могут вообще не принадлежать топологическому сегменту. В таком случае, альтернативный адрес должен обслуживаться как выделенный компонент маршрутизации во всем пространстве Internet, в котором точно известно предельное число поддерживаемых «глобальных» групп альтернативных адресов. Более того, это предполагает, что обслуживание глобальных групп альтернативных адресов не допустимо или очень ограничено.</p><p>Предполагаемое использование альтернативных адресов заключается в следующем. Они могут применяться для идентификации группы маршрутизаторов, принадлежащей какой-либо организации, обеспечивающей функционирование Internet. Такие адреса могли бы использоваться как промежуточные адреса в заголовках маршрутизации IPv6-пакетов, для решения задачи доставки пакетов через систему соответствующего провайдера или группы провайдеров.</p><p>Другим возможным применением альтернативных адресов может быть идентификация группы маршрутизаторов, закрепленной за соответствующим сегментом сети, или группы маршрутизатором, обеспечивающих доступ к сегменту по соответствующему маршруту.</p><h4 id="p2.6.1">2.6.1. Востребованные альтернативные IPv6-адреса</h4><p>В настоящее время определены альтернативные адреса для маршрутизаторов подсетей. Формат таких адресов представлен на рис.9.</p><pre>|                n битов                |   128-n битов   |
+---------------------------------------+-----------------+
|            Префикс подсети            | 00000000000000  |
+---------------------------------------+-----------------+

Рис.9. Формат альтернативных IPv6-адресв для маршрутизаторов подсетей</pre><p>«Префикс подсети» в альтернативном адресе представляет собой префикс, который идентифицирует конкретную (выделенную) линию связи. Такой альтернативный адрес, с точки зрения семантики, совпадает с однонаправленным адресом интерфейса для линии связи, у которой групповой идентификатор интерфейсов равен нулю.</p><p>IP-пакеты, переданные на альтернативный адрес для маршрутизатора подсети, будут транслироваться на один маршрутизатор конкретной подсети. Необходимо, чтобы все маршрутизаторы транслировали IP-пакеты с альтернативными адресами для маршрутизаторов подсетей в те подсети, в которых имеются интерфейсы с такими адресами.</p><p>Альтернативный адрес для маршрутизатора подсети предназначен для использования в тех реальных сетях, в которых IP-узлу необходимо иметь соединение хотя бы с одним маршрутизатором из группы маршрутизаторов, обслуживающих сеть.</p><h3 id="p2.7">2.7. Групповые IPv6-адреса</h3><p>Групповой IPv6-адрес представляет собой идентификатор группы интерфейсов (обычно на различных IP-узлах). Интерфейс может иметь любое количество групповых IPv6-адресов. Формат таких адресов представлен на рис.10.</p><pre>|     8 битов     |    4 бита     |  4 бита  |       112 битов        |
+-----------------+---------------+----------+------------------------+
|                 |     Флаги     |          |                        |
| 1 1 1 1 1 1 1 1 |---------------| Диапазон |  Идентификатор группы  |
|                 | 0 | R | P | T |          |                        |
+-----------------+---------------+----------+------------------------+

Рис.10. Формат групповых IPv6-адресов</pre><p>Поля IPv6-адреса имеют следующие значения:</p><ul><li class="b"><p>8-битовое поле, состоящее из единиц</p></li><li class="lib"><p>Указывает на то, что адрес является групповым IPv6-адресом;</p></li><li class="b"><p>4-битовое поле «Флаги»</p></li><li class="lib"><p>Старший бит поля зарезервирован и всегда должен быть нулевым. Назначение и правила использования бита <code>R</code> представлены в стандарте RFC-3956. Назначение и правила использования бита <code>Р</code> представлены в стандарте RFC-3306. Если бит <code>Т</code> имеет нулевое значение — это означает, что имеет место жестко закрепленный за кем-то или за чем-то (так называемый «всем (хорошо) известный» — «well-known») групповой IPv6-адрес, назначаемый IANA (Internet Assigned Numbers Authority). Если же бит <code>Т</code> имеет значение <code>1</code> — это означает, что имеет место временно закрепленный за кем-то или за чем-то («временно» или «динамически» назначаемый) групповой IPv6-адрес;</p></li><li class="b"><p>4-битовое поле «Диапазон»</p></li><li class="lib"><p>Это поле используется для характеристики (ограничения) диапазона используемого набора групповых адресов. Оно может принимать следующие значения:</p><ul class="list"><li><code>0</code> — зарезервировано;</li><li><code>1</code> — в пределах локального интерфейса. Этот адрес перекрывает диапазон только одного сетевого интерфейса (петлевой интерфейс или интерфейс с петлевым адресом), и используется только для групповой передачи IPv6-пакетов по петлевому маршруту;</li><li><code>2</code> — в пределах локальной линии связи. Этот адрес перекрывает диапазон в рамках одного и того же топологического пространства (сетевого сегмента) как диапазон соответствующих однонаправленных адресов;</li><li><code>3</code> — зарезервировано;</li><li><code>4</code> — в пределах зоны локального администрирования. Этот адрес перекрывает наименьший диапазон, который управляется администратором сети (подсети), то есть в данном случае идет речь об адресах, устанавливаемых «вручную» без каких-либо автоматизированных управляющих процедур (включая удаленные) или процедур, не связанных с настройкой групповых адресов;</li><li><code>5</code> — в пределах локальной группы подсетей. Этот адрес предназначен для покрытия диапазона одиночной группы подсетей (конкретного сетевого сегмента);</li><li><code>6</code> — назначение не определено («unassigned»). В этом случае (и последующих тоже) речь идет о том, что администраторам сетей (подсетей) разрешено использовать дополнительные диапазоны групповых адресов в сетевых сегментах, находящихся в зонах их ответственности;</li><li><code>7</code> — назначение не определено;</li><li><code>8</code> — в пределах зоны ответственности организации. Этот адрес предназначен для покрытия диапазона нескольких групп подсетей (конкретного сетевого сегмента), принадлежащих (находящихся в зоне ответственности) одной организации;</li><li><code>9</code> — назначение не определено;</li><li><code>A</code> — назначение не определено;</li><li><code>B</code> — назначение не определено;</li><li><code>C</code> — назначение не определено;</li><li><code>D</code> — назначение не определено;</li><li><code>E</code> — глобальный диапазон;</li><li><code>F</code> — зарезервировано.</li></ul></li><li class="b"><p>112-битовое поле «Идентификатор группы».</p></li><li class="lib"><p>Оно идентифицирует определённый набор групповых адресов, назначенных в постоянное или временное использование в рамках конкретного диапазона. Более подробное назначение и правила использования данного поля представлены в стандарте RFC-3306.</p></li></ul><p>«Сущность» постоянно-назначенных групповых адресов заключается в их независимости от величины диапазона. Например, если группе серверов сетевого времени (NTP-серверы, Network Time Protocol) присвоен постоянный групповой IPv6-адрес с идентификатором группы <code>101</code> (шестнадцатеричный), то тогда:</p><ul class="list lia"><li><p><code>FF01:0:0:0:0:0:0:101</code> означает, что все NTP-серверы в качестве отправителя сообщения имеют одинаковый идентификатор интерфейса (то есть один и тот же IP-узел);</p></li><li><p><code>FF02:0:0:0:0:0:0:101</code> означает, что все NTP-серверы в качестве отправителя сообщения имеют одинаковый идентификатор линии (канала) связи;</p></li><li><p><code>FF05:0:0:0:0:0:0:101</code> означает, что все NTP-серверы в качестве отправителя сообщения имеют одинаковый идентификатор группы подсетей (то есть сетевого сегмента);</p></li><li><p><code>FF0E:0:0:0:0:0:0:101</code> означает, что все NTP-серверы «размещены» в Internet.</p></li></ul><p>Временно присваиваемые групповые номера имеют «смысл» только в пределах конкретного диапазона. Например, группе интерфейсов конкретного сетевого сегмента присвоен временный групповой адрес для локальной группы подсетей <code>FF15:0:0:0:0:0:0:101</code>, причем этот сегмент никак не связан с аналогичным сегментом, группа интерфейсов которого использует тот же самый адрес, либо с другим сегментом, группа интерфейсов которого использует тот же самый идентификатор группы, но в другом диапазоне, либо с другим сегментом, группа интерфейсов которого использует постоянный групповой адрес, но с таким же идентификатором группы.</p><p>Групповые IPv6-адреса не должны использоваться как «Адрес отправителя сообщения» в IPv6-пакетах или присутствовать в каком-либо заголовке маршрутизации. Маршрутизаторы никогда не должны транслировать любые IPv6-пакеты с групповыми адресами, принадлежащим диапазону, который обозначен в поле «Диапазон» группового адреса, размещенного в поле «Адрес получателя».</p><p>IP-узлы никогда не должны отправлять пакеты с групповыми адресами в поле «Адрес отправителя сообщения», в котором поле «Диапазон» содержит зарезервированное нулевое значение. Если, тем не менее, такой пакет принят, он должен быть по умолчанию уничтожен. Целесообразно, чтобы IP-узлы никогда не отправляли пакеты с групповыми адресами в поле «Адрес отправителя сообщения», в котором поле «Диапазон» содержит зарезервированное значение <code>F</code>. Если, тем не менее, такой пакет принят, он должен восприниматься как IPv6-пакеты с глобальным групповым адресом (диапазон <code>E</code>).</p><h4 id="p2.7.1">2.7.1. Предварительно назначенные групповые IPv6-адреса</h4><p>К предварительно назначенным групповым IPv6-адресам относятся так называемые «всем (хорошо) известные» групповые адреса. Рассмотренные далее групповые идентификаторы имеют точные значения своих диапазонов.</p><p>Использование этих групповых идентификаторов в пределах любых других диапазонов запрещено, если флаг <code>T</code> имеет нулевое значение.</p><p>К зарезервированным групповым IPv6-адресам относятся следующие:</p><pre>FF00:0:0:0:0:0:0:0
FF01:0:0:0:0:0:0:0
FF02:0:0:0:0:0:0:0
FF03:0:0:0:0:0:0:0
FF04:0:0:0:0:0:0:0
FF05:0:0:0:0:0:0:0
FF06:0:0:0:0:0:0:0
FF07:0:0:0:0:0:0:0
FF08:0:0:0:0:0:0:0
FF09:0:0:0:0:0:0:0
FF0A:0:0:0:0:0:0:0
FF0B:0:0:0:0:0:0:0
FF0C:0:0:0:0:0:0:0
FF0D:0:0:0:0:0:0:0
FF0E:0:0:0:0:0:0:0
FF0F:0:0:0:0:0:0:0</pre><p>Эти адреса являются резервными и никогда не должны присваиваться какой-либо группе интерфейсов.</p><p>К групповым IPv6-адресам для всех IP-узлов относятся следующие:</p><pre>FF01:0:0:0:0:0:0:1
FF02:0:0:0:0:0:0:1</pre><p>Эти адреса идентифицируют группу, состоящую из всех IPv6-узлов, в которой адрес содержит поле «Диапазон» со значением <code>1</code> или <code>2</code>.</p><p>К групповым IPv6-адресам для всех маршрутизаторов относятся следующие:</p><pre>FF01:0:0:0:0:0:0:2
FF02:0:0:0:0:0:0:2
FF05:0:0:0:0:0:0:2</pre><p>Эти адреса идентифицируют группу, состоящую из всех IPv6-маршрутизаторов, в которой адрес содержит поле «Диапазон» со значением <code>1</code>, или <code>2</code>, или <code>5</code>.</p><p>К групповым IPv6-адресам запрашиваемых IP-узлов относятся следующие:</p><pre>FF02:0:0:0:0:1:FFXX:XXXX</pre><p>Эти адреса вычисляются как функция однонаправленных и альтернативных адресов IP-узлов. Групповой IPv6-адрес запрашиваемых IP-узлов формируется следующим образом: 24 младших бита адреса (однонаправленного и альтернативного) присоединяются к префиксу <code>FF02:0:0:0:0:1:FF00::/104</code> и в результате имеем следующий диапазон групповых адресов:</p><pre>FF02:0:0:0:0:1:FF00:0000
до
FF02:0:0:0:0:1:FFFF:FFFF</pre><p>Например, IPv6-адресу <code>4037::01:800:200E:8C6C</code> соответствует следующий групповой IPv6-адрес запрашиваемых IP-узлов: <code>FF02::1:FF0E:8C6C</code>. IPv6-адреса, которые отличаются только старшими битами (например, в следствии использовании нескольких префиксов, относящимся к различным составным адресам), будут преобразовываться в точно такой же IPv6-адрес запрашиваемых IP-узлов, вследствие снижения числа групповых адресов, которые должны принадлежать одному IP-узлу.</p><p>IP-узел необходим для вычисления и объединения (по соответствующим интерфейсам) соответствующих групповых IPv6-адресов запрашиваемых IP-узлов для всех однонаправленных и альтернативных адресов, которые были присвоены интерфейсам этого IP-узла (вручную или автоматически).</p><h3 id="p2.8">2.8. IPv6-адреса, которые IP-узел должен распознавать</h3><p>Сервер должен распознавать следующие адреса, идентифицирующие этот сервер:</p><ul class="list lia"><li><p>Его обязательный IPv6-адрес для локальной линии связи на каждом интерфейсе.</p></li><li><p>Любые дополнительные однонаправленные и альтернативные адреса, которые присвоены интерфейсам узла (вручную или автоматически).</p></li><li><p>Петлевой адрес.</p></li><li><p>Групповые IPv6-адреса для всех IP-узлов (см. 2.7.1).</p></li><li><p>Групповой IPv6-адрес запрашиваемых IP-узлов для каждого его однонаправленного и альтернативного адресов.</p></li><li><p>Групповые адреса всех других групп интерфейсов, к которым принадлежит IP-узел.</p></li></ul><p>Маршрутизатор должен распознавать все те адреса, которые дожжен распознавать сервер, а также следующие адреса, идентифицирующие этот маршрутизатор:</p><ul class="list lia"><li><p>Альтернативный IPv6-адрес маршрутизатора локальной группы подсетей для всех интерфейсов, в которых он указан как маршрутизатор.</p></li><li><p>Любые другие альтернативные адреса, которые указаны в настройках маршрутизатора.</p></li><li><p>Групповые IPv6-адреса для всех маршрутизаторов (см. 2.7.1).</p></li></ul><h2 id="p3">3. Вопросы безопасности</h2><p>IPv6 addressing documents do not have any direct impact on Internet infrastructure security. Authentication of IPv6 packets is defined in [AUTH].</p><h2 id="p4">4. Согласование с IANA</h2><p>The «IPv4-Compatible IPv6 address» is deprecated by this document. The IANA should continue to list the address block containing these addresses at http://www.iana.org/assignments/ipv6-address-space as «Reserved by IETF» and not reassign it for any other purpose. For example:</p><pre>0000::/8        Reserved by IETF        [RFC3513]      [1]</pre><p>The IANA has added the following note and link to this address block.</p><pre>[5]  0000::/96 was previously defined as the «IPv4-Compatible IPv6
     address» prefix.  This definition has been deprecated by RFC
     4291.</pre><p>The IANA has updated the references for the IPv6 Address Architecture in the IANA registries accordingly.</p><h2 id="p5">5. Благодарности</h2><p>The authors would like to acknowledge the contributions of Paul Francis, Scott Bradner, Jim Bound, Brian Carpenter, Matt Crawford, Deborah Estrin, Roger Fajman, Bob Fink, Peter Ford, Bob Gilligan, Dimitry Haskin, Tom Harsch, Christian Huitema, Tony Li, Greg Minshall, Thomas Narten, Erik Nordmark, Yakov Rekhter, Bill Simpson, Sue Thomson, Markku Savela, Larry Masinter, Jun-ichiro Itojun Hagino, Tatuya Jinmei, Suresh Krishnan, and Mahmood Ali.</p><h2 id="p6">6. Ссылки</h2><h3 id="p6.1">6.1. Нормативные документы</h3><table itemprop="references"><tr><td>[IPV6]</td><td>Deering, S. и R. Hinden, <a href="../2460.rfc" title="RFC 2460 — Спецификация IPv6">«Спецификация протокола IPv6», RFC 2460</a>, Декабрь 1998.</td></tr></table><h3 id="p6.2">6.2. Дополнительная литература</h3><table itemprop="references"><tr><td>[AUTH]</td><td>Kent, S. и R. Atkinson, «IP Authentication Header», RFC 2402, Ноябрь 1998.</td></tr><tr><td>[CIDR]</td><td>Fuller, V., Li, T., Yu, J., and K. Varadhan, «Classless Inter-Domain Routing (CIDR): an Address Assignment and Aggregation Strategy», RFC 1519, Сентябрь 1993.</td></tr><tr><td>[ETHER]</td><td>Crawford, M., «Transmission of IPv6 Packets over Ethernet Networks», RFC 2464, Декабрь 1998.</td></tr><tr><td>[EUI64]</td><td>IEEE, «Guidelines for 64-bit Global Identifier (EUI-64) Registration Authority», http://standards.ieee.org/regauth/oui/tutorials/EUI64.html, Март 1997.</td></tr><tr><td>[FDDI]</td><td>Crawford, M., «Transmission of IPv6 Packets over FDDI Networks», RFC 2467, Декабрь 1998.</td></tr><tr><td>[GLOBAL]</td><td>Hinden, R., Deering, S., and E. Nordmark, «IPv6 Global Unicast Address Format», RFC 3587, Август 2003.</td></tr><tr><td>[PRIV]</td><td>Narten, T. и R. Draves, «Privacy Extensions for Stateless Address Autoconfiguration in IPv6», RFC 3041, Январь 2001.</td></tr><tr><td>[RFC3513]</td><td>Hinden, R. и S. Deering, «Internet Protocol Version 6 (IPv6) Addressing Architecture», RFC 3513, Апрель 2005.</td></tr><tr><td>[RFC3306]</td><td>Haberman, B. и D. Thaler, «Unicast-Prefix-based IPv6 Multicast Addresses», RFC 3306, Август 2002.</td></tr><tr><td>[RFC3956]</td><td>Savola, P. и B. Haberman, «Embedding the Rendezvous Point (RP) Address in an IPv6 Multicast Address», RFC 3956, Ноябрь 2004.</td></tr><tr><td>[RFC4038]</td><td>Shin, M-K., Hong, Y-G., Hagino, J., Savola, P., and E. Castro, «Application Aspects of IPv6 Transition», RFC 4038, Март 2005.</td></tr><tr><td>[SLDEP]</td><td>Huitema, C. и B. Carpenter, «Deprecating Site Local Addresses», RFC 3879, Сентябрь 2004.</td></tr></table><h2 id="p.appendix.a">Приложение A: Creating Modified EUI-64 Format Interface Identifiers</h2><p>Depending on the characteristics of a specific link or node, there are a number of approaches for creating Modified EUI-64 format interface identifiers. This appendix describes some of these approaches.</p><h4>Links or Nodes with IEEE EUI-64 Identifiers</h4><p>The only change needed to transform an IEEE EUI-64 identifier to an interface identifier is to invert the <code>u</code> (universal/local) bit. An example is a globally unique IEEE EUI-64 identifier of the form:</p><pre>
|0              1|1              3|3              4|4              6|
|0              5|6              1|2              7|8              3|
+----------------+----------------+----------------+----------------+
|cccccc0gcccccccc|ccccccccmmmmmmmm|mmmmmmmmmmmmmmmm|mmmmmmmmmmmmmmmm|
+----------------+----------------+----------------+----------------+</pre><p>where <code>c</code> is the bits of the assigned company_id, <code>0</code> is the value of the universal/local bit to indicate universal scope, <code>g</code> is individual/group bit, and <code>m</code> is the bits of the manufacturer-selected extension identifier. The IPv6 interface identifier would be of the form:</p><pre>|0              1|1              3|3              4|4              6|
|0              5|6              1|2              7|8              3|
+----------------+----------------+----------------+----------------+
|cccccc1gcccccccc|ccccccccmmmmmmmm|mmmmmmmmmmmmmmmm|mmmmmmmmmmmmmmmm|
+----------------+----------------+----------------+----------------+</pre><p>The only change is inverting the value of the universal/local bit.</p><h4>Links or Nodes with IEEE 802 48-bit MACs</h4><p>[EUI64] defines a method to create an IEEE EUI-64 identifier from an IEEE 48-bit MAC identifier. This is to insert two octets, with hexadecimal values of 0xFF and 0xFE (see the Note at the end of appendix), in the middle of the 48-bit MAC (between the company_id and vendor-supplied id). An example is the 48-bit IEEE MAC with Global scope:</p><pre>|0              1|1              3|3              4|
|0              5|6              1|2              7|
+----------------+----------------+----------------+
|cccccc0gcccccccc|ccccccccmmmmmmmm|mmmmmmmmmmmmmmmm|
+----------------+----------------+----------------+</pre><p>where <code>c</code> is the bits of the assigned company_id, <code>0</code> is the value of the universal/local bit to indicate Global scope, <code>g</code> is individual/group bit, and <code>m</code> is the bits of the manufacturer-selected extension identifier. The interface identifier would be of the form:</p><pre>|0              1|1              3|3              4|4              6|
|0              5|6              1|2              7|8              3|
+----------------+----------------+----------------+----------------+
|cccccc1gcccccccc|cccccccc11111111|11111110mmmmmmmm|mmmmmmmmmmmmmmmm|
+----------------+----------------+----------------+----------------+</pre><p>When IEEE 802 48-bit MAC addresses are available (on an interface or a node), an implementation may use them to create interface identifiers due to their availability and uniqueness properties.</p><h4>Links with Other Kinds of Identifiers</h4><p>There are a number of types of links that have link-layer interface identifiers other than IEEE EUI-64 or IEEE 802 48-bit MACs. Examples include LocalTalk and Arcnet. The method to create a Modified EUI-64 format identifier is to take the link identifier (e.g., the LocalTalk 8-bit node identifier) and zero fill it to the left. For example, a LocalTalk 8-bit node identifier of hexadecimal value 0x4F results in the following interface identifier:</p><pre>|0              1|1              3|3              4|4              6|
|0              5|6              1|2              7|8              3|
+----------------+----------------+----------------+----------------+
|0000000000000000|0000000000000000|0000000000000000|0000000001001111|
+----------------+----------------+----------------+----------------+</pre><p>Note that this results in the universal/local bit set to <code>0</code> to indicate local scope.</p><h4>Links without Identifiers</h4><p>There are a number of links that do not have any type of built-in identifier. The most common of these are serial links and configured tunnels. Interface identifiers that are unique within a subnet prefix must be chosen.</p><p>When no built-in identifier is available on a link, the preferred approach is to use a universal interface identifier from another interface or one that is assigned to the node itself. When using this approach, no other interface connecting the same node to the same subnet prefix may use the same identifier.</p><p>If there is no universal interface identifier available for use on the link, the implementation needs to create a local-scope interface identifier. The only requirement is that it be unique within a subnet prefix. There are many possible approaches to select a subnet-prefix-unique interface identifier. These include the following:</p><ul><li>Manual Configuration</li><li>Node Serial Number</li><li>Other Node-Specific Token</li></ul><p>The subnet-prefix-unique interface identifier should be generated in a manner such that it does not change after a reboot of a node or if interfaces are added or deleted from the node.</p><p>The selection of the appropriate algorithm is link and implementation dependent. The details on forming interface identifiers are defined in the appropriate «IPv6 over &lt;link&gt;» specification. It is strongly recommended that a collision detection algorithm be implemented as part of any automatic algorithm.</p><div class="note"><p>Note: [EUI-64] actually defines 0xFF and 0xFF as the bits to be inserted to create an IEEE EUI-64 identifier from an IEEE MAC-48 identifier. The 0xFF and 0xFE values are used when starting with an IEEE EUI-48 identifier. The incorrect value was used in earlier versions of the specification due to a misunderstanding about the differences between IEEE MAC-48 and EUI-48 identifiers.</p><p>This document purposely continues the use of 0xFF and 0xFE because it meets the requirements for IPv6 interface identifiers (i.e., that they must be unique on the link), IEEE EUI-48 and MAC-48 identifiers are syntactically equivalent, and that it doesn't cause any problems in practice.</p></div><h2 id="p.appendix.b">Приложение B: Changes from RFC 3513</h2><p>The following changes were made from RFC 3513, «IP Version 6 Addressing Architecture»:</p><ul class="list"><li><p>The restrictions on using IPv6 anycast addresses were removed because there is now sufficient experience with the use of anycast addresses, the issues are not specific to IPv6, and the GROW working group is working in this area.</p></li><li><p>Deprecated the Site-Local unicast prefix. Changes include the following:</p><ul class="lia"><li><p>Removed Site-Local from special list of prefixes in Section 2.4.</p></li><li><p>Split section titled «Local-use IPv6 Unicast Addresses» into two sections, «Link-Local IPv6 Unicast Addresses» and «Site-Local IPv6 Unicast Addresses».</p></li><li><p>Added text to new section describing Site-Local deprecation.</p></li></ul></li><li><p>Changes to resolve issues raised in IAB response to Robert Elz appeal. Changes include the following:</p><ul class="lia"><li><p>Added clarification to Section 2.5 that nodes should make no assumptions about the structure of an IPv6 address.</p></li><li><p>Changed the text in Section 2.5.1 and Appendix A to refer to the Modified EUI-64 format interface identifiers with the <code>u</code> bit set to one (1) as universal.</p></li><li><p>Added clarification to Section 2.5.1 that IPv6 nodes are not required to validate that interface identifiers created in Modified EUI-64 format with the <code>u</code> bit set to one are unique.</p></li></ul></li><li><p>Changed the reference indicated in Section 2.5.4 «Global Unicast Addresses» to RFC 3587.</p></li><li><p>Removed mention of NSAP addresses in examples.</p></li><li><p>Clarified that the <code>x</code> in the textual representation can be one to four digits.</p></li><li><p>Deprecated the «IPv6 Compatible Address» because it is not being used in the IPv6 transition mechanisms.</p></li><li><p>Added the <code>R</code> and <code>P</code> flags to Section 2.7 on multicast addresses, and pointers to the documents that define them.</p></li><li><p>Editorial changes.</p></li></ul></div></div><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname="rfc2",disqus_title="RFC 4291 - Архитектура шестой версии протокола межсетевого обмена в Internet (IPv6-адресация)",disqus_identifier="4291.rfc",disqus_url="http://rfc2.ru/4291.rfc";(function(){var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;dsq.src = "//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><div class="bubble">2007 - 2014 © <a href="../index.html" title="Русские переводы RFC">Русские переводы RFC</a>, IETF, ISOC.</div></div><div id="bottom" style="position:static !important;bottom:auto !important"><div class="bubble"><ul><li><!--723572853672--></li></ul></div></div><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter4680559 = new Ya.Metrika({id:4680559, webvisor:true, clickmap:true, accurateTrackBounce:true, trackHash:true, ut:"noindex"}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="http://mc.yandex.ru/watch/4680559?ut=noindex" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --></body></html>
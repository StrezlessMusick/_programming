<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="../tpl/style.css@f4e332aa" type="text/css" /><link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' /><style type="text/css">h1,h2,h3,h4{font-family:'Open Sans',sans-serif}</style><link rel="canonical" href="../3035.rfc" /><meta name="Robots" content="noindex, nofollow" /><title>Перевод RFC 3035 — Применение MPLS-коммутации в сетях с асинхронным режимом доставки</title><link rel="alternate" type="application/rss+xml" title="RFC2.ru - Русские Переводы RFC" href="../rss.xml"></head><body><div id="content"><div id="nav"><div class="icon i0"></div> <a href="../index.html" accesskey="`">На Главную</a></div><div id="search" class="ya-site-form ya-site-form_inited_no"><form action="http://yandex.ru/sitesearch" method="get" target="_blank"><input type="hidden" name="searchid" value="2154295"/><input type="hidden" name="l10n" value="ru"/><input type="hidden" name="reqenc" value=""/><input type="hidden" name="submit" value="Найти"/><input type="search" value="" name="text" placeholder="Поиск по RFC2.ru" /></form></div><div itemscope itemtype="http://schema.org/ScholarlyArticle"><meta itemprop="inLanguage" content="ru" /><meta itemprop="editor" content="ru" /><div id="header"><h1><a itemprop="headline" href="../3035.rfc">RFC 3035 — Применение MPLS-коммутации в сетях с асинхронным режимом доставки</a></h1></div><dl class="mute"><dt></dt><dd><div class="icon i1"></div> RFC: 3035</dd><dd><div class="icon i3"></div> Оригинал: <a href="original" target="_blank" rel="nofollow"><span itemprop="alternativeHeadline">MPLS using LDP and ATM VC Switching</span></a></dd><dd><div class="icon i2"></div> Категория: <span itemprop="articleSection">Предложенный стандарт</span></dd><dd><div class="icon i4"></div> Дата публикации: <time itemprop="datePublished" datetime="2001-01-05">Январь 2001</time></dd><dd><div class="icon i5"></div> Авторы: <span itemprop="author">B. Davie</span>, <span itemprop="author">J. Lawrence</span>, <span itemprop="author">K. McCloghrie</span>, <span itemprop="author">E. Rosen</span>, <span itemprop="author">G. Swallow</span>, <span itemprop="author">Y. Rekhter</span>, <span itemprop="author">P. Doolan</span></dd><dd><div class="icon i6"></div> Перевод: <span itemprop="editor">Мельников Дмитрий Анатольевич</span></dd></dl><div id="text" itemprop="articleBody"><h2>Оглавление</h2><ul class="map"><li><a href="print#p1">1. Введние</a></li><li><a href="print#p2">2. Уровни требований</a></li><li><a href="print#p3">3. Терминология</a></li><li><a href="print#p4">4. Специализированные свойства ATM-коммутаторов</a></li><li><a href="print#p5">5. Модуль MPLS-управления для ATM-сетей</a></li><li><a href="print#p6">6. Гибридные коммутаторы</a></li><li><a href="print#p7">7. Использование VPI/VCI-идентификаторов</a></li><li class="lia"><a href="print#p7.1">7.1. Прямые соединения</a></li><li class="lia"><a href="print#p7.2">7.2. Соединения через виртуальные ATM-маршруты</a></li><li class="lia"><a href="print#p7.3">7.3. Соединения через коммутируемые виртуальные ATM-соединения</a></li><li><a href="print#p8">8. Процедуры распределения и обработки маркеров</a></li><li class="lia"><a href="print#p8.1">8.1. Функционирование граничного LSR-маршрутизатора</a></li><li class="lia"><a href="print#p8.2">8.2. Стандартные ATM-коммутаторы (без функции объединения VC-соединений)</a></li><li class="lia"><a href="print#p8.3">8.3. ATM-коммутаторы с функцией объединения VC-соединений</a></li><li><a href="print#p9">9. Процедуры вставки</a></li><li><a href="print#p10">10. Обработка TTL-значения</a></li><li><a href="print#p11">11. Функция обнаружения петелевых маршрутов: распределение маршрутных векторов</a></li><li class="lia"><a href="print#p11.1">11.1. Когда передаётся нисходящий трафик с маршрутными векторами</a></li><li class="lia"><a href="print#p11.2">11.2. Когда передаётся восходящий трафик с маршрутными векторами</a></li><li><a href="print#p12">12. Проблемы обеспечения безопасности</a></li><li><a href="print#p.references">Ссылки</a></li></ul><h2 id="p1">1. Введние</h2><p>MPLS-архитектура описывает способ применения ATM-коммутаторов (Asynchronous Transfer Mode) в качестве LSR-маршрутизаторов. ATM-коммутаторы реализуют алгоритмы маршрутизации сетевого уровня (например, OSPF, IS-IS и др.), и по результатам выполнения этих алгоритмов они транслируют поступившие в них данные. Нет необходимости в использовании какой-либо специализированной ATM-системы маршрутизации или адресации. ATM-коммутаторы, используемые таким образом, именуются ATM/LSR-коммутаторами.</p><h2 id="p2">2. Уровни требований</h2><p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119.</p><h2 id="p3">3. Терминология</h2><ul class="circle"><li><p><strong>LSR-маршрутизатор (Label Switching Router)</strong></p><p class="lia">MPLS-узел, который обеспечивает обработку и доставку реальных IP-пакетов (сетевого уровня).</p></li><li><p><strong>LC/ATM-интерфейс (label switching controlled ATM interface)</strong></p><p class="lia">ATM-интерфейс, управляемый программным MPLS-модулем. IP-пакет, доставляемый через LC/ATM-интерфейс, интерпретируется как помеченный пакет. Верхний маркер набора маркеров в IP-пакете извлекается, либо из содержания VCI-поля (VC-идентификатор), либо из совместного содержания VPI- (VPI-идентификатор) и VCI-полей (Virtual Path, виртуальный маршрут). Две любые стороны, взаимодействующие по LDP-соединению через LC/ATM-интерфейс, будут использовать LDP-процедуры для согласования и определения, какой из этих двух вариантов извлечении маркера потока применим для данного интерфейса.</p></li><li><p><strong>ATM/LSR-коммутатор (ATM-LSR)</strong></p><p class="lia">LSR-маршрутизатор, имеющий один или более LC/ATM-интерфейсов, и который транслирует ATM-ячейки между двумя такими же интерфейсами, используя для этого маркеры потока, расположенные в VPI/VCI-полях, и без повторной сборки ATM-ячеек в кадры перед отправкой.</p></li><li><p><strong>LSR/frame-коммутатор (frame-based LSR)</strong></p><p class="lia">LSR-маршрутизатор, который транслирует между своими интерфейсами кадры канального уровня (это могут быть кадры протоколов канального уровня, например, PPP-протокол, HDLC-протокол и др.) без фрагментации («целиком»). Следует отметить, что такой LSR-маршрутизатор не иметь и иметь один или более LC/ATM-интерфейсов.</p></li></ul><p>Иногда сетевой программно-аппаратный модуль может функционировать как ATM/LSR-коммутатор, что касается некоторых пар интерфейсов, но может функционировать и как LSR/frame-коммутатор, что касается других пар интерфейсов. Например, ATM-коммутатор с интерфейсом Ethernet-сети может функционировать как ATM/LSR-коммутатор при доставке ячеек между своими LC/ATM-интерфейсами, но может функционировать и как LSR/frame-коммутатор при доставке кадров канального уровня между его Ethernet- интерфейсом и одним или несколькими LC/ATM-интерфейсами. В таких случаях, можно считать, что в одном сетевом модуле реализованы две функции (ATM/LSR- и LSR/frame-коммутаторы).</p><p>Предполагается, что LC/ATM-интерфейс используется для соединения, либо двух ATM/LSR-коммутаторов, либо ATM/LSR-коммутатора с LSR/frame-коммутатором. Использование LC/ATM-интерфейса для соединения двух LSR/frame-коммутаторов в данном стандарте не рассматривается.</p><ul class="circle"><li><p><strong>Сетевой ATM/LSR-сегмент (ATM-LSR domain)</strong></p><p class="lia">совокупность ATM/LSR-коммутаторов, которые взаимодействуют между собой через LC/ATM-интерфейсы.</p></li><li><p><strong>Граничные LSR/frame-коммутаторы сетевого ATM/LSR-сегмента (edge set of ATM-LSR domain)</strong></p><p class="lia">совокупность LSR/frame-коммутаторов, которые соединены с сетевым ATM/LSR-сегментом через LC/ATM-интерфейсы. LSR/frame-коммутатор, который входит в совокупность граничных LSR/frame-коммутаторов сетевого ATM/LSR-сегмента может именоваться граничным LSR-маршрутизатором.</p></li><li><p><strong>Слияние VC-соединений (VC-merge)</strong></p><p class="lia">процесс (процедура), с помощью которого коммутатор принимает ячейки по нескольким входным интерфейсам с определёнными VCI-идентификаторами и транслирует их через один выходной интерфейс с определённым VCI-идентификатором, не допуская при этом перемежения ячеек, сформированных из блоков данных различных протоколов на AAL5-уровне адаптации (ATM Adaptation Layer 5).</p></li></ul><h2 id="p4">4. Специализированные свойства ATM-коммутаторов</h2><p>Несмотря на то, что MPLS-архитектура обеспечивает достаточную функциональность и гибкость при внедрении и использовании LSR-маршрутизаторов, ATM/LSR-коммутатор обладает рядом ограничений, вызванных аппаратной частью (возможно уже существующих), и ограничениями, налагаемыми ATM-стандартами, в частности, по таким вопросам, как формат ячейки. Следствием таких ограничений являются дополнительные требования к самим ATM/LSR-коммутаторам относительно некоторых специфических процедур.</p><p>К некоторым основным свойствам ATM/LSR-коммутаторов, которые влияют на их функционирование, относятся:</p><ul class="list lia"><li><p>Функция замены маркеров потока реализуется в полях (VCI- и/или VPI-идентификаторы) заголовка ячейки. А это диктует размер и место размещения маркера(ов) в пакете.</p></li><li><p>Сходящиеся (multipoint-to-point) и многоадресные (multipoint-to-multipoint) VC-соединения, как правило, не поддерживаются. Это означает, что большинство коммутаторов не могут реализовать функцию слияния VC-соединений, определённую выше.</p></li><li><p>Как правило, коммутаторы не реализую функцию контроля TTL-времени (уменьшения «времени жизни пакета») в IP-заголовках, которая является обязательной для маршрутизаторов.</p></li></ul><p>Далее рассматриваются способы применения MPLS-коммутации в ATM-коммутаторах, которые работают в условиях указанных ограничений.</p><h2 id="p5">5. Модуль MPLS-управления для ATM-сетей</h2><p>Для реализации функции MPLS-коммутации ATM-коммутатор обязан иметь MPLS-модуль управления. В первую очередь, этот модуль реализует процедуры привязки, распределения и обработки маркеров и связанной с ними информации. Данные о привязке маркеров доставляются с помощью нескольких способов, в частности с помощью LDP-протокола. Данный стандарт предъявляет ряд требований к этому протоколу.</p><p>В дальнейшем рассматривается только один случай, когда MPLS-модуль управления использует данные, полученные непосредственно от протоколов маршрутизации сетевого уровня. Это предполагает, что коммутатор выступает в роли одной из взаимодействующих сторон при установлении соединений с помощью таких протоколов (например, OSPF, IS-IS и др.).</p><p>В отдельных случаях, LSR-маршрутизаторы напрямую используют другие протоколы (например, RSVP, PIM, BGP и др.) для распределения данных о привязках маркеров потока. В таких случаях, ATM/LSR-коммутатору может понадобиться участвовать в процедурах таких протоколов. Однако эти вопросы в дальнейшем не рассматриваются.</p><p>Реализация функции MPLS-коммутации не требует от ATM-коммутатора, чтобы он включал ATM-модуль управления, определённый стандартами ITU-T и ATM-Форума (ATM Forum), например, UNI- и PNNI-интерфейсы (User-to-Network Interface — интерфейс «пользователь/ATM-сеть», и Private Network-to-Network Interface — интерфейс «частная ATM-сеть/частная ATM-сеть»). Дополнительно ATM/LSR-коммутатор может отвечать OAM-ячейки (Operations and Maintenance — технологические (служебные) ячейки, предназначенные для обслуживания и поддержания ATM-соединений, в частности для выхода из нештатных и сбойных ситуаций.).</p><h2 id="p6">6. Гибридные коммутаторы</h2><p>Наличие MPLS-модуля управления в ATM-коммутаторе не препятствует возможности одновременного использования ATM-модуля управления, определённого стандартами ITU-T и ATM-Форума, на одном и том же коммутаторе и с одними и теми же интерфейсами. Эти два модуля управления могли бы функционировать независимо друг от друга.</p><p>Описание того, как эти модули функционируют, в данном документе не рассматриваются. Однако чтобы обеспечить совместимость этих двух модулей, необходим всего лишь небольшой объём информации, например, данные о разбиении VPI/VCI-диапазона на поддиапазоны, доступные для каждого из этих модулей.</p><h2 id="p7">7. Использование VPI/VCI-идентификаторов</h2><p>MPLS-коммутация осуществляется с помощью привязки маркеров потока к FEC-классам, и использует значения маркеров для доставки IP-пакетов, включая определение значения величины любого замещающего маркера. При использовании ATM/LSR-коммутатора маркер размещается в VPI/VCI-поле, или, когда два ATM/LSR-коммутатора соединяются по виртуальному ATM-пути (ATM «Virtual Path»), маркер размещается в VCI-поле.</p><p>Помеченные IP-пакеты должны доставляться с использованием «пустой» («нулевой») вставки, как это определено в стандарте IETF RFC-2684.</p><p>Кроме этого, если две стороны LDP-соединения взаимодействуют через LC/ATM-интерфейс, то должно быть доступно иное, не MPLS-соединение, по которому можно доставлять непомеченные IP-пакеты. Такое не MPLS-соединение используется для доставки LDP-пакетов между взаимодействующими сторонами, и оно может использоваться (но это не обязательно) для доставки иных непомеченных пакетов (например, пакета OSPF-протокола). В не MPLS-соединениях должна использоваться LLC/SNAP-вставка (RFC-2684).</p><p>Целесообразно иметь возможность настройки LC/ATM-интерфейса совместно с дополнительными VPI/VCI-идентификаторами, которые используются для доставки управляющей информации или непомеченных пакетов. В этом случае, VCI-идентификаторы не должны иметь значения в диапазоне 0…32. Они могут использовать, либо «пустую» вставку, либо LLC/SNAP-вставку<sup><abbr title="Специализированный заголовок управления логическим каналом (Logical Link Control) введён стандартом IEEE 802.2и используется для идентификации протокола сетевого уровня. За LLC-заголовком должен следовать SNAP-заголовок (SubNetwork Attachment Point — точка присоединения подсети, IEEE 802.1a).">[?]</abbr></sup> (RFC-2684).</p><h3 id="p7.1">7.1. Прямые соединения</h3><p>Говорят, что два LSR-маршрутизатора «соединены напрямую» через LC/ATM-интерфейс, если все ячейки, транслируемые через этот интерфейс одним LSR-маршрутизатором, будут достигать другой, и при этом между двумя LSR-маршрутизаторами нет ATM-коммутаторов.</p><p>Когда два LSR-маршрутизатора «соединены напрямую» через LC/ATM-интерфейс, они совместно управляют распределением VPI/VCI-идентификаторов на соединяющем их интерфейсе. Они могут согласовать использование VPI/VCI-поля в интересах кодирования одиночного маркера.</p><p>В режиме «по умолчанию» VPI/VCI-идентификаторы в интересах не MPLS-соединения будут иметь следующие значения: VPI-значение — «0», а VCI-значение — «32». Другие значения диапазона идентификаторов могут использоваться до тех пор, пока обе взаимодействующие стороны осознают сущность (смысл) настраиваемого значения.</p><p>Любой VPI/VCI-идентификатор, в котором VPI-значение имеет код в диапазоне от 0 до 32 (включительно), не должен использоваться для обозначения маркера.</p><p>За исключением указанных (зарезервированных) диапазонов, значения VPI/VCI-идентификаторов, используемых в обоих направлениях канала связи, могут рассматриваться как относящиеся к независимым пространствам.</p><p>Разрешённые значения VCI-идентификаторов устанавливаются с использованием процедуры информационного обмена, определяемой LDP-протоколом.</p><h3 id="p7.2">7.2. Соединения через виртуальные ATM-маршруты</h3><p>Иногда может быть полезно, рассматривать два LSR-маршрутизатора как смежные (на некотором LSP-маршруте), соединённые через LC/ATM-интерфейс, даже если соединение между ними проходит через «ATM-облако» (ATM-сеть) по виртуальному ATM-маршруту. В таком случае, VPI-поле не приемлемо для MPLS-коммутации, а маркер должен кодироваться целиком в границах VCI-поля.</p><p>В рассмотренном случае, в режиме «по умолчанию» VCI-идентификатор в интересах не MPLS-соединения между LSR-маршрутизаторами будет иметь значение «32». ». Другие значения диапазона идентификаторов могут использоваться до тех пор, пока обе взаимодействующие стороны осознают сущность (смысл) настраиваемого значения. VPI-идентификатор должен принимать то значение, которое необходимо для использования виртуального маршрута.</p><p>Любой VPI/VCI-идентификатор, в котором VPI-значение имеет код в диапазоне от 0 до 32 (включительно), не должен использоваться для обозначения маркера.</p><p>За исключением указанных (зарезервированных) диапазонов, значения VPI/VCI-идентификаторов, используемых в обоих направлениях канала связи, могут рассматриваться как относящиеся к независимым пространствам.</p><p>Разрешённые значения VPI/VCI-идентификаторов устанавливаются с использованием процедуры информационного обмена, определяемой LDP-протоколом. Если для MPLS-коммутации используется более одного VPI-идентификатора, то разрешённые диапазоны значений VCI-идентификаторов могут быть различны для каждого VPI-идентификатора, а каждый диапазон устанавливаются с использованием LDP-протокола.</p><h3 id="p7.3">7.3. Соединения через коммутируемые виртуальные ATM-соединения</h3><p>Иногда может быть полезно, рассматривать два LSR-маршрутизатора как смежные (на некотором LSP-маршруте), соединённые через LC/ATM-интерфейс, даже если соединение между ними проходит через «ATM-облако» (ATM-сеть) по коммутируемым виртуальным ATM-соединениям. Настоящий документ не рассматривает процедуры управления в таких случаях.</p><h2 id="p8">8. Процедуры распределения и обработки маркеров</h2><p>В дальнейшем рассматривается случай (способ) распределения (доставки) маркеров ATM/LSR-коммутаторами, именуемый как «нисходящий поток по требованию» (downstream-on-demand). Связанные с этим способом процедуры распределения маркеров должны использоваться ATM/LSR-коммутаторами, которые не обеспечивают объединение VC-соединений, и могут использоваться ATM/LSR-коммутаторами, которые обеспечивают объединение VC-соединений. Однако эти процедуры имеют некоторое отличие. Далее поочередно будут рассмотрены оба сценария. Вначале рассматривается функционирование LSR-маршрутизаторов, являющихся граничными в рамках сетевого ATM/LSR-сегмента. Такие LSR-маршрутизаторы сами по себе не являются ATM/LSR-коммутаторами, а их функционирование аналогично, вне зависимости, содержит ли сетевой сегмент LSR-маршрутизаторы, способные обеспечить объединение VC-соединений, или нет.</p><h3 id="p8.1">8.1. Функционирование граничного LSR-маршрутизатора</h3><p>Рассмотрим функционирование граничного LSR-маршрутизатора из группы граничных LSR-маршрутизаторов, входящих в сетевой ATM/LSR-сегмент. Предположим, что в результате его маршрутных вычислений он выбрал ATM/LSR-коммутатор в качестве следующего ретрансляционного участка (РУ) некоторого маршрута (FEC-класс), и что следующий РУ подключён через LC/ATM-интерфейс. Граничный LSR-маршрутизатор использует LDP-протокол для запроса данных о привязки маркера к следующему РУ относительно определённого FEC-класса. Поле «счётчик РУ» в запросе содержит значение «1». После того, как граничный LSR-маршрутизатор получит данные о привязке маркера, он может использовать процедуры MPLS-коммутации для доставки IP-пакетов определённого FEC-класса, используя для этого некоторый маркер в качестве исходящего маркера потока. (Или используя VPI/VCI-идентификатор, который соответствует определённому VCID-идентификатору, в качестве исходящего маркера, если используется VCID-метод, представленный в стандарте RFC-3038.)</p><p class="note">Примечание. Если на предыдущем РУ граничного LSR-маршрутизатора для запроса от него маркера в интересах определённого FEC-класса используется способ «нисходящий поток по требованию», и если граничный LSR-маршрутизатор не реализует функцию объединения LSP-маршрута, начиная с этого предшествующего РУ, с любым другим LSP-маршрутом, и если запрос от противоположной стороны предшествующего РУ содержал поле «число РУ» со значением «<em>h</em>», то значение в поле «число РУ» запроса, направленного граничным LSR-маршрутизатором, должно быть «<em>h</em>+1», а не «1».</p><p>Данные о привязке маркера, полученные граничным LSR-маршрутизатором, могут включать поле «счётчик РУ», содержащее значение числа РУ, которое будет пройдено IP-пакетом до пересечения границы сетевого ATM/LSR-сегмента при использовании этого маркера. Если счётчик РУ связан с привязкой маркера, то ATM/LSR-коммутатор перед тем как отправить IP-пакет должен прибавить значение этого счётчика к уже имеющемуся значению в TTL-поле заголовка данного IP-пакета. В любом случае, ATM/LSR-коммутатор, перед тем как отправить IP-пакет, обязан прибавить, по крайней мере, «1» к имеющемуся значению в TTL-поле заголовка этого IP-пакета.</p><p>Когда граничный LSR-маршрутизатор из группы граничных LSR-маршрутизаторов, входящих в сетевой ATM/LSR-сегмент, получает запрос на данные о привязке маркера потока от ATM/LSR-коммутатора, он формирует (выбирает из имеющихся) маркер и отправляет ответное LDP-сообщение, содержащее сформированный маркер, противоположной стороне, отправившей запрос. При этом он устанавливает в поле «счётчик РУ» ответного LDP-сообщения значение «1».</p><p>Когда в результате маршрутизационных вычислений граничному LSR-маршрутизатору необходимо изменить следующий РУ в интересах определённого FEC-класса, а предыдущий РУ входил в сетевой ATM/LSR-сегмент, граничный LSR-маршрутизатор должен оповестить противоположную сторону предыдущего РУ (с использованием LDP-протокола), что данные о привязке маркера, относительно данного FEC-класса, больше не нужны.</p><h3 id="p8.2">8.2. Стандартные ATM-коммутаторы (без функции объединения VC-соединений)</h3><p>Когда ATM/LSR-коммутатор получает (с использованием LDP-протокола) запрос на данные о привязке маркера относительно некоторого FEC-класса от противоположной стороны, соединённой с этим ATM/LSR-коммутатором через LC/ATM-интерфейс, он выполняет следующие действия:</p><ul class="list lia"><li><p>выбирает (или формирует) маркер;</p></li><li><p>запрашивает (с использованием LDP-протокола) данные о привязке маркера относительно этого FEC-класса у противоположной стороны следующего РУ;</p></li><li><p>отправляет ответное сообщение (с использованием LDP-протокола), содержащее данные о привязке, включая выбранный (сформированный) входящий маркер потока, противоположной стороне, являющейся отправителем запроса.</p></li></ul><p>Введём параметр — «максимальное число РУ» MAXHOP. В режиме «по умолчанию» MAXHOP имеет значение 255., но может иметь и другие настраиваемые значения.</p><p>Значение в поле «число РУ» запроса, который был передан ATM/LSR-коммутатором (LSR-маршрутизатору на противоположной стороне следующего РУ), должно быть на единицу больше, чем значение в аналогичном поле запроса, принятого от LSR<sub>ВП</sub>. Если результирующее значение числа РУ превышает MAXHOP, то запрос не должен передаваться на следующий РУ, а ATM/LSR-коммутатор обязан оповестить соседний LSR<sub>ВП</sub> о том, что его запрос на получение данных о привязке не может быть удовлетворён.</p><p>В противном случае, как только ATM/LSR-коммутатор получает данные о привязке маркера от противоположной стороны следующего РУ, он начинает использовать этот маркер.</p><p>ATM/LSR-коммутатор может ожидать получение от LSR<sub>НП</sub> ответа на свой запрос, прежде чем он отправит LSR ВП ответное сообщение с данными о привязке маркера. Это — форма «упорядоченного контроля LSP-маршрута» соответствующего «упорядоченного контроля со стороны выхода LSP-маршрута». В данном случае, после того, как ATM/LSR-коммутатор получит от LSR<sub>НП</sub> значение счётчика РУ, которое будет больше нуля, но меньше MAXHOP, он обязан увеличить значение счётчика РУ, которое он получил от LSR<sub>НП</sub>, и обязан включить полученный результат в ответное сообщение о привязке маркера, предназначенное для отправки LSR<sub>ВП</sub>. Однако если значение счётчика РУ превышает MAXHOP, то данные о привязке маркера не должны отправляться LSR<sub>ВП</sub>. Желательно, чтобы LSR<sub>ВП</sub>, как противоположная сторона LDP-соединения, был проинформирован о том, что направленный им запрос на получение данных о привязке маркера не может быть удовлетворён. Если же полученное от LSR<sub>НП</sub> значение счётчика РУ равно нулю, то значение счётчика, направляемое LSR<sub>ВП</sub>, также должно быть равно нулю (это означает, что реальное значение счётчика не известно).</p><p>С другой стороны, ATM/LSR-коммутатор может отправить LSR<sub>ВП</sub> ответное сообщение с данными о привязке маркера, не дожидаясь ответного сообщения с данными о привязке маркера от LSR<sub>НП</sub> (независимый контроль LSP-маршрута). В таком случае, ATM/LSR-коммутатор устанавливает нулевое значение счётчика РУ в сообщении с данными о привязке маркера, указывая, таким образом, что реальное значение счётчика неизвестно. Правильное значение счётчика РУ будет передано позднее.</p><p class="note">Примечание. ATM/LSR-коммутатор (или LSR-маршрутизатор из группы граничных LSR-маршрутизаторов, входящих в сетевой ATM/LSR-сегмент) может получить несколько запросов на данные о привязке маркера для соответствующего FEC-класса от одного и того же, но иного ATM/LSR-коммутатора. Тогда ATM/LSR-коммутатор обязан сформировать новое ответное сообщение о привязке маркера для каждого запроса (полагая, что для этого имеются достаточные ресурсы) и отправить в нём любую(ые) существующую(ие) привязку(и) маркера. Кроме того, на каждый полученный запрос ATM/LSR-коммутатор должен сформировать новый запрос на данные о привязке маркера в интересах некоторого FEC-класса для противоположной стороны следующего РУ.</p><p>Когда в результате маршрутизационных вычислений ATM/LSR-коммутатору необходимо изменить следующий РУ в интересах определённого FEC-класса, ATM/LSR-коммутатор должен оповестить противоположную сторону предыдущего РУ (с использованием LDP-протокола), что данные о привязке маркера, относительно данного FEC-класса, больше не нужны.</p><p>Если LSR-маршрутизатор получает извещение о том, что соответствующая привязка маркера больше не нужна, то он может аннулировать маркер, связанный с FEC-классом привязкой, а саму привязку уничтожить. В случае, когда подобное извещение получает ATM/LSR-коммутатор, и после того, как будет им уничтожена привязка, он обязан оповестить противоположную сторону следующего РУ (с использованием LDP-протокола), что данные о привязке маркера, относительно данного FEC-класса, больше не нужны. Если же LSR-маршрутизатор не уничтожает привязку, то он может использовать её повторно, но только в том случае, когда он получил запрос в интересах одного и того же FEC-класса и с одним и тем же значением счётчика РУ, как и в запросе, который был первоначальной причиной формирования привязки маркера.</p><p>При изменении маршрута, привязки маркеров переформируются с той точки маршрута, в которой последний отличается от предшествующего маршрута. LSR<sub>ВП</sub> в этой точке маршрута (за одним исключением, рассмотренным ниже) «не обращают внимание» на это изменение.</p><p>Всякий раз, когда LSR-маршрутизатор изменяет свой следующий РУ для некоторого FEC-класса, и если новый следующий РУ достижим через LC/ATM-интерфейс, то для каждого маркера, который привязан к этому FEC-классу и доставляется LSR<sub>ВП</sub>, LSR-маршрутизатор обязан запросить данные о новой привязке маркера от противоположной стороны нового следующего РУ.</p><p>Когда LSR-маршрутизатор получает от соседнего LSR<sub>НП</sub> сообщение о привязке маркера к соответствующему FEC-классу, он мог уже отправить соседнему LSR<sub>ВП</sub> сообщение о привязке маркера к данному FEC-классу, либо потому, что он реализует независимый контроль LSP-маршрута, либо потому, что новая привязка маркера, полученная от LSR<sub>НП</sub>, явилась результатом маршрутных изменений. В данном случае, пока поступившее значение счётчика РУ не будет нулевым, LSR-маршрутизатор обязан извлекать значение счётчика из новой привязки маркера и увеличивать его на единицу. Если новое значение счётчика отличается от того, которое было доставлено ранее соседнему LSR<sub>ВП</sub> (включая случай, когда соседний LSR<sub>ВП</sub> получил значение «неизвестно»), то ATM/LSR-коммутатор обязан оповестить соседний LSR<sub>ВП</sub> об изменении. Каждый ATM/LSR-коммутатор поочерёдно (друг за другом) должен увеличивать значение счётчика РУ и доставлять его LSR<sub>ВП</sub>, пока оно не достигнет входного граничного LSR-маршрутизатора. Если в какой-либо точке LSP-маршрута значение счётчика станет равно MAXHOP, то ATM/LSR-коммутатор должен отказаться от привязки маркера, полученной от соседнего LSR<sub>ВП</sub>. Если значение счётчика РУ равно нулю, то оно должно доставляться без изменений.</p><p>Всякий раз, когда ATM/LSR-коммутатор отправляет LSR-маршрутизатору, находящемуся на противоположной стороне следующего РУ, запрос на данные о привязке маркера в результате того, что он получил аналогичный запрос на данные о привязке маркера от другого LSR<sub>ВП</sub>, и этот запрос, отправленный LSR-маршрутизатору, находящемуся на противоположной стороне следующего РУ, остаётся без удовлетворения, ATM/LSR-коммутатор должен уничтожить привязку маркера, сформированную в ответ на полученный запрос, и оповестить об этом запрашивающую сторону (с использованием LDP-протокола).</p><p>Если ATM/LSR-коммутатор получает сообщение о привязке маркера, в котором значение счётчика РУ превышает MAXHOP, то ATM/LSR-коммутатор обязан не формировать привязку маркер, и должен отправить запрашивающей стороне сообщение об ошибке.</p><p>Когда LSR-маршрутизатор установит, что LDP-сеанс связи с другим LSR-маршрутизатором нарушен, он должен предпринять следующие действия:</p><ul class="list lia"><li><p>Любая информация о привязках маркеров, полученная с помощью этого LDP-соединения, должна быть уничтожена.</p></li><li><p>LSR-маршрутизатор может уничтожить любые привязки маркеров, которые были сформированы в результате приёма от противоположной стороны LDP-соединения запроса на данные о привязке маркера (и открепить маркеры от этих привязок).</p></li></ul><p>LSR-маршрутизатор должен использовать метод «разделения горизонта» («split-horizon», позволяющий исключить появление петлевых маршрутов), когда он отвечает на запросы о привязках маркеров, полученные от своих соседей. Т.е., если LSR-маршрутизатор получает запрос на данные о привязке маркера к соответствующему FEC-классу, и он устанавливает, что такой запрос относительно данного FEC-класса уже существует (поступил ранее от ATM/LSR-коммутатора, расположенного на противоположной стороне следующего РУ), то он не должен отправлять ответное сообщение о привязке маркера по этому маршруту.</p><p>Предполагается, что ATM/LSR-коммутаторы (без функции объединения VC-соединений) могли бы, в большинстве случаев, функционировать в «консервативном режиме сохранения маркера потока» (conservative label retention mode).</p><h3 id="p8.3">8.3. ATM-коммутаторы с функцией объединения VC-соединений</h3><p>Внедрение функции объединения VC-соединений в ATM/LSR-коммутаторы (VC-merge) требует относительно небольших изменений. Первое отличие заключается в том, что для ATM/LSR-коммутаторов с функцией объединения VC-соединений необходим только один исходящий маркер для одного FEC-класса, и даже в том случае, когда от соседних LSR<sub>ВП</sub> получено несколько запросов на данные о привязке маркера к некоторому FEC-классу.</p><p>Когда ATM/LSR-коммутатор с функцией объединения VC-соединений получает запрос на данные о привязке маркера к конкретному FEC-классу от LSR<sub>ВП</sub>, и к этому моменту он не имеет данных о привязке исходящего маркера к этому FEC-классу (или запрос на такие данные ожидается), он должен отправить запрос на данные о привязке противоположной стороне своего следующего РУ (как это он мог бы сделать, если бы не обладал функцией объединения VC-соединений). Тем не менее, если он имеет данные о привязке исходящего маркера к некоторому FEC-классу, то ему не нужно отправлять запрос на такие данные LSR<sub>НП</sub>. Вместо этого, он может просто выделить (назначить) входящий маркер и вернуть этот маркер в ответном сообщении с данными о привязке запрашивающему LSR<sub>ВП</sub>. Когда IP-пакеты с этим маркером (являющимся верхним в наборе маркеров) поступают от запрашивающей стороны, значение верхнего маркера будет замещаться значением существующего исходящего маркера, соответствующего одному и тому же FEC-классу.</p><p>Если ATM/LSR-коммутатор не имеет данных о привязке исходящего маркера для некоторого FEC-класса, но ожидает ответ на отправленный запрос о таких данных, то ему не нужно отправлять повторный запрос.</p><p>Когда передаётся маркер, привязанный к восходящему потоку, значение счётчика РУ, относящееся к соответствующей привязке и переданное LSR-маршрутизатором нисходящего потока, должно увеличиваться на единицу, а результирующее значение передаётся LSR-маршрутизатором восходящего потока, как значение счётчика, относящееся к новой привязке маркера. Однако существуют два исключения:</p><ul class="list lia"><li><p>Значение счётчика РУ, равное нулю, должно передаваться LSR-маршрутизатору восходящего потока без изменений.</p></li><li><p>Если значение счётчика РУ уже равно MAXHOP, то ATM/LSR-коммутатор обязан не отправлять данные о привязке LSR<sub>ВП</sub>, но вместо этого он обязан отправить LSR<sub>ВП</sub> сообщение об ошибке.</p></li></ul><p class="note">Примечание. Так же как и стандартные ATM-коммутаторы (без функции объединения VC-соединений) и граничные LSR-маршрутизаторы из группы граничных LSR-маршрутизаторов, входящих в сетевой ATM/LSR-сегмент, ATM/LSR-коммутатор с функцией объединения VC-соединений обязан отправлять данные о новой привязке маркера всякий раз, когда он получает запрос от LSR<sub>ВП</sub>, так как могут быть коммутаторы восходящего потока, которые не реализуют функцию объединения VC-соединений. Тем не менее, ему необходимо только отправлять LSR<sub>НП</sub> запрос на соответствующие данные о привязке маркера, если только у него нет данных о привязке маркера к соответствующему маршруту.</p><p>Когда изменение в маршрутной таблице ATM/LSR-коммутатора с функцией объединения VC-соединений вынуждает его выбрать новый следующий РУ в интересах одного из обслуживаемых им FEC-классов, он, дополнительно, может аннулировать привязку к этому маршруту от бывшего следующего РУ. Если же он ещё не имеет соответствующую привязку к новому следующему РУ, то он обязан её запросить.</p><p>Если данные о новой привязке приняты, и они содержат значение счётчика РУ, отличающееся от принятого в данных о старой привязке, то ATM/LSR-коммутатор обязан определить новое значение счётчика РУ, путём прибавления единицы к принятому значению, и оповестить о новом значении счётчика РУ все соседние LSR<sub>ВП</sub>, которые имеют привязки маркеров к соответствующему FEC-классу. Так же как и в случае со стандартными ATM-коммутаторами (без функции объединения VC-соединений), это позволяет доставлять новое значение счётчика РУ обратно на вход сетевого ATM/LSR-сегмента. Если в какой-либо точке LSP-маршрута значение счётчика РУ превысит MAXHOP, то все привязки маркеров для этого LSP-маршрута, которые были ранее направлены всем соседним LSR<sub>ВП</sub> по их соответствующим запросам, должны быть аннулированы. Последнее гарантирует, что любые петлевые маршруты, вызванные маршрутизационными изменениями, будут выявлены и блокированы.</p><h2 id="p9">9. Процедуры вставки</h2><p>Рассматриваемые далее процедуры касаются только граничных LSR-маршрутизаторов, входящих сетевой ATM-LSR-сегмент. Сами по себе ATM/LSR-коммутаторы не могут каким-либо образом изменять вставку.</p><p>Помеченные IP-пакеты должны транслироваться с использованием пустой (null) вставки (RFC-2684).</p><p>За исключением рассматриваемых далее случаев, при передаче помеченного IP-пакета через LC/ATM-интерфейс, который интерпретирует VPI/VCI-идентификатор (или VCID) как верхний маркер в наборе маркеров, этот IP-пакет должен содержать универсальную MPLS-вставку (shim header, RFC-3032).</p><p>Если IP-пакет содержит набор маркеров с <sub>n</sub> записями, то он обязан «переносить» универсальную MPLS-вставку с <sub>n</sub> записями. Реальное значение верхнего маркера размещается в VPI/VCI-поле. Значение маркера в верхней записи универсальной MPLS-вставки (которая является только «пустой» (placeholder) строкой, предназначенной для заполнения) должно быть установлено в нулевое значение при передаче, и должно игнорироваться при приёме. Исходящее TTL-значение для IP-пакета, а также значение «Категория обслуживания», транслируются в соответствующих полях верхней записи набора маркеров универсальной MPLS-вставки.</p><p class="note">Примечание. Если IP-пакет содержит набор маркеров только с одной записью, это требует наличия одиночной записи в универсальной MPLS-вставки (4 байта), даже если реальное значение маркера размещается в VPI/VCI-поле. Это делается для того, чтобы гарантировать постоянное присутствие универсальной MPLS-вставки в IP-пакете. В противном случае, не было бы возможности определить, содержит IP-пакет вставку или нет, т.е. невозможно определить наличие дополнительных записей в наборе маркеров.</p><p>Существуют только два способа для удаления этого дополнительного поля с универсальной MPLS-вставкой, а именно:</p><ul class="list lia"><li><p>Априорное знание того, IP-пакеты содержат только одиночный маркер (например, возможно сеть поддерживает только один уровень маркеров).</p></li><li><p>Использование двух VC-соединений для одного FEC-класса, т.е. одного — для тех IP-пакетов, которые содержат только одиночный маркер, а другого — для тех IP-пакетов, которые содержат более одного маркера.</p></li></ul><p>Второй способ может потребовать, чтобы имело место некоторое средство сигнализации на основе LDP-протокола, которое бы оповещало, что VC-соединение предназначено только для доставки IP-пакетов с одиночным маркером, и не предназначено для доставки универсальной MPLS-вставки. Когда реализуется функция объединения VC-соединений, тогда можно было бы не объединять VC-соединение, по которому не доставляются IP-пакеты с универсальной MPLS-вставкой, с VC-соединением, по которому такие IP-пакеты доставляются, или наоборот.</p><p>Несмотря на то, что оба способа разрешены, весьма сомнительно, что они имеют какое-либо практическое применение. Следует заметить, что если универсальная MPLS-вставка отсутствует, то исходящее TTL-значение транслируется в TTL-поле заголовка сетевого уровня.</p><h2 id="p10">10. Обработка TTL-значения</h2><p>Рассматриваемые далее процедуры касаются только граничных LSR-маршрутизаторов, входящих сетевой ATM/LSR-сегмент. Сами по себе ATM/LSR-коммутаторы не могут каким-либо образом корректировать TTL-значение.</p><p>Процедура настройки значения в TTL-поле следующая. Если IP-пакет, принятый граничным LSR-маршрутизатором, является не помеченным, то «входящее TTL-значение» извлекается из поступившего IP-заголовка. Если же IP-пакет, принятый граничным LSR-маршрутизатором, является помеченным, то используется MPLS-вставка (RFC-3032), и «входящее TTL-значение» извлекается из верхней записи в наборе маркеров.</p><p>Если значение счётчика РУ было связано с привязкой маркера, которая использовалась при доставке IP-пакета, то «исходящее TTL-значение» будет:</p><ol class="lat lia"><li>либо больше нуля:</li><li>либо составлять разницу между входящим TTL-значением и значением счётчика РУ.</li></ol><p>Если значение счётчика РУ не было связано с привязкой маркера, которая использовалась при доставке IP-пакета, то «исходящее TTL-значение» будет:</p><ol class="lat lia"><li>либо больше нуля:</li><li>либо на единицу меньше входящего TTL-значения.</li></ol><p>Если в результате рассмотренных манипуляций с входным TTL-значением выходное TTL-значение становится нулевым, то IP-пакет не должен передаваться как помеченный IP-пакет, использующий специализированный маркер. В результате анализа IP-пакета могут быть предприняты следующие действия:</p><ul class="list lia"><li><p>Он может рассматриваться как IP-пакет с просроченным «временем жизни». И в этой связи можно отправить ICMP-сообщение.</p></li><li><p>IP-пакет может быть доставлен как непомеченный, в котором TTL-значение на единицу меньше входящего TTL-значения. В данном случае, такая доставка могла бы понадобиться при установлении виртуального соединения без использования MPLS-коммутации.</p></li></ul><p>Конечно, если входное TTL-значение равно единице, то реализуется только первая из рассмотренных выше функций.</p><p>Если IP-пакет доставляется как помеченный, то исходящее TTL-значение транслируется, как это описано в предыдущем разделе.</p><p>Когда граничный LSR-маршрутизатор получает помеченный IP-пакет через LC/ATM-интерфейс, он извлекает входящее TTL-значение из верхней записи набора маркеров, являющегося универсальной MPLS-вставкой, или, если такая вставка отсутствует — из IP-заголовка.</p><p>Если на следующем РУ IP-пакета расположен ATM/LSR-коммутатор, то исходящее TTL-значение формируется с использованием рассмотренных ранее процедур. В противном случае, исходящее TTL-значение формируется с использованием процедур, рассмотренных в стандарте RFC-3032.</p><p>Процедуры, рассмотренные в данном разделе, предназначены только для IP-пакетов с однонаправленными (unicast) адресами.</p><h2 id="p11">11. Функция обнаружения петелевых маршрутов: распределение маршрутных векторов</h2><p>Каждый ATM/LSR-коммутатор должен обладать, в качестве дополнительной, функцией обнаружения петлевых маршрутов доставки. Сама же функциональная процедура именуется как «обнаружение петлевого маршрута с помощью маршрутных векторов» (Loop Detection via Path Vectors, LDPV). Эта процедура не предотвращает формирование петлевых маршрутов доставки, но гарантирует, что любые подобные маршруты будут обнаружены. Если эта дополнительная функция не реализована, то петлевые маршруты выявляются с помощью способа, основанного на подсчёте числа РУ, рассмотренного ранее. Если же эта функция реализована, то петлевые маршруты выявляются намного быстрее, но с более существенными затратами.</p><h3 id="p11.1">11.1. Когда передаётся нисходящий трафик с маршрутными векторами</h3><p>Предположим, что LSR-маршрутизатор <em>R</em> передаёт противоположной стороне своего следующего РУ запрос на данные о привязке маркера к определённому LSP-маршруту. Тогда, если <em>R</em> не реализует функцию объединения VC-соединений, но <em>R</em> способен осуществлять LDPV-процедуру:</p><ul class="list"><li><p>Если <em>R</em> передаёт запрос потому, что является входным узлом данного LSP-маршрута, или потому, что он установил новый следующий РУ, то <em>R</em> обязан включить данные о маршрутном векторе в запрос, а сами данные о маршрутном векторе должны содержать только собственный IP-адрес <em>R</em>.</p></li><li><p>Если <em>R</em> передаёт запрос в результате получения запроса от LSR<sub>ВП</sub>, то:</p><ul class="circle lia"><li><p>Если полученный запрос содержит данные о маршрутном векторе, то <em>R</em> обязан добавить свой собственный IP-адрес в принятые данные о маршрутном векторе, и затем обязан отправить противоположной стороне своего следующего РУ результирующие данные о маршрутном векторе вместе с запросом на данные о привязке маркера.</p></li><li><p>Если полученный запрос не содержит данные о маршрутном векторе, то <em>R</em> обязан добавить данные о маршрутном векторе и передать их вместе с запросом, а данные о маршрутном векторе должны включать только собственный IP-адрес <em>R</em>.</p></li></ul></li></ul><p>Целесообразно, чтобы LSR-маршрутизатор, который реализует функцию объединения VC-соединений, не включал данные о маршрутном векторе в свои запросы, передаваемые им противоположной стороне своего следующего РУ.</p><p>Если LSR-маршрутизатор получил запрос на данные о привязке, в которых содержатся данные о маршрутном векторе, включающие IP-адрес этого сетевого узла, то LSR-маршрутизатор принимает решение, что запросы на данные о привязке маркера были доставлены по петлевому маршруту. В таком случае, LSR-маршрутизатор обязан поступить также, как и в случае, когда значение счётчика РУ превысило MAXHOP (параграф <a href="print#p8.2" title="параграф 8.2 - Стандартные ATM-коммутаторы (без функции объединения VC-соединений)">8.2</a>).</p><p>Рассмотренная процедура позволяет обнаружить петлевые маршруты, когда сообщения/запросы транслируются через последовательность ATM/LSR-коммутатор, не реализующих функцию объединения VC-соединений.</p><h3 id="p11.2">11.2. Когда передаётся восходящий трафик с маршрутными векторами</h3><p>Могут возникнуть ситуации, при которых LSR-маршрутизатор <em>R</em> должен информировать свои соседние LSR<sub>ВП</sub> об изменении значения счётчика РУ соответствующих определённому LSP-маршруту (с использованием ответного сообщения с данными о привязке маркера). Если выполнены все следующие условия:</p><ul class="list lia"><li><em>R</em> настроен на выполнение LDPV-процедуры;</li><li><em>R</em> реализует функцию объединения VC-соединений;</li><li><em>R</em> не является выходом данного LSP-маршрута;</li><li><em>R</em> не информирует своих соседей об уменьшении значения счётчика РУ, то <em>R</em> обязан включить данные о маршрутном векторе в ответное сообщение.</li></ul><p>Если изменение значения счётчика РУ явилось следствием информирования <em>R</em> LSR-маршрутизатором <em>S</em>, расположенном на противоположной стороне следующего РУ, об изменении значения счётчика РУ, а сообщение отправленное <em>S</em> LSR-маршрутизатору <em>R</em> содержит данные о маршрутном векторе, то, если все указанные выше условия выполнены, <em>R</em> обязан добавить себя в эти данные и отправить результирующее сообщение LSR<sub>ВП</sub>. В противном случае, если все указанные выше условия выполнены, <em>R</em> обязан сформировать новые данные только со своим собственным IP-адресом.</p><p>Если <em>R</em> настроен на выполнение LDPV-процедуры, и <em>R</em> реализует функцию объединения VC-соединений, то он может включить данные о маршрутном векторе в любое ответное сообщение, содержащее данные о привязке маркера, которое он передаёт LSR<sub>ВП</sub>. Соответственно, в любой момент времени, когда <em>R</em> принял от противоположной стороны следующего РУ ответное сообщение с данными о привязке маркера, и если это ответное сообщение включает маршрутный вектор, то <em>R</em> может (если он настроен на выполнение LDPV-процедуры) отправить своим соседним LSR<sub>ВП</sub> ответ, содержащий данные о маршрутном векторе, сформированные путём добавления своего собственного IP-адреса в полученный маршрутный вектор.</p><p>Если <em>R</em> не реализует функцию объединения VC-соединений, то ему не целесообразно передавать LSR<sub>ВП</sub> данные о маршрутном векторе.</p><p>Если <em>R</em> принял от противоположной стороны следующего РУ сообщение, в котором данные о маршрутном векторе включают его собственный IP-адрес, то LSR-маршрутизатор обязан действовать так, как если бы он принял сообщение со значением счётчика РУ, равным MAXHOP.</p><p>LSR-маршрутизаторы, которые настроены на выполнение LDPV-процедуры, не должны хранить маршрутный вектор, после того как соответствующие данные о маршрутном векторе были переданы.</p><p class="note">Примечание. Если сетевой ATM/LSR-сегмент включает только лишь ATM/LSR-коммутаторы, не реализующие функцию объединения VC-соединений, то нет необходимости всегда передавать LSR<sub>ВП</sub> маршрутные векторы, так как любые петлевые маршруты будут выявляться с посредством маршрутных векторов, доставляемых в составе нисходящих потоков.</p><p>Если не транслировать маршрутные векторы до тех пор, пока счётчик РУ возрастает, то во многих ситуациях, когда нет петлевого маршрута, LSR-маршрутизатор старается их не передавать. Издержки появляются в тех ситуациях, в которых существует петлевой маршрут, а время выявления петлевого маршрута может увеличиться.</p><h2 id="p12">12. Проблемы обеспечения безопасности</h2><p>Представленные в данном стандарте процедуры, включая MPLS-вставку, не затрагивают каким-либо образом системы аутентификации и/или шифрования пакетов сетевого уровня (например, IPsec-архитектура, RFC-4301).</p><p>Кроме того, рассмотренные процедуры не защищают MPLS-маркеры от модификации (случайной и противоправной), которая может привести ложной доставке (ложному маршруту).</p><p>Эти же процедуры не предусматривают какой-либо аутентификации объектов (например, принимающий LSR-маршрутизатор не аутентифицирует передающий LSR-маршрутизатор).</p><p>В стандарте RFC-3036 (RFC-5036) рассматриваются способы защиты LDP-процедур доставки маркеров и защиты самих маркеров.</p><h2 id="p.references">Ссылки</h2><table itemprop="references"><tr><td>[1]</td><td>Rosen, E., Viswanathan, A. и R. Callon <a href="../3031.rfc" title="RFC 3031 — Архитектура многопротокольной коммутации на основе маркеров потока (MPLS)">«Архитектура многопротокольной коммутации на основе маркеров потока (MPLS)», RFC 3031</a>, Январь 2001.</td></tr><tr><td>[2]</td><td>Andersson L., Doolan P., Feldman N., Fredette A. и R. Thomas, «LDP Specification», RFC 3036, Январь 2001.</td></tr><tr><td>[3]</td><td>Rosen, E., Rekhter, Y., Tappan, D., Farinacci, D., Fedorkow, G., Li, T. и A. Conta, <a href="../3032.rfc" title="RFC 3032 — Кодирование набора маркеров в MPLS-системах">«RFC 3032 — Кодирование набора маркеров в MPLS-системах», RFC 3032</a>, Январь 2001.</td></tr><tr><td>[4]</td><td>Nagami, K., Demizu N., Esaki H. и P. Doolan, «VCID Notification over ATM Link for LDP», RFC 3038, Январь 2001.</td></tr><tr><td>[5]</td><td>Grossman, D., Heinanen, J., <a href="../2684.rfc" title="RFC 2684 — Многопротокольная инкапсуляция с использованием AAL 5">«Многопротокольная инкапсуляция с использованием AAL 5», RFC 2684</a>, Сентябрь 1999.</td></tr></table></div></div><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname="rfc2",disqus_title="RFC 3035 - Применение MPLS-коммутации в сетях с асинхронным режимом доставки",disqus_identifier="3035.rfc",disqus_url="http://rfc2.ru/3035.rfc";(function(){var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;dsq.src = "//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><div class="bubble">2007 - 2014 © <a href="../index.html" title="Русские переводы RFC">Русские переводы RFC</a>, IETF, ISOC.</div></div><div id="bottom" style="position:static !important;bottom:auto !important"><div class="bubble"><ul><li><!--723572853672--></li></ul></div></div><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter4680559 = new Ya.Metrika({id:4680559, webvisor:true, clickmap:true, accurateTrackBounce:true, trackHash:true, ut:"noindex"}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="http://mc.yandex.ru/watch/4680559?ut=noindex" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --></body></html>
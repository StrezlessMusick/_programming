<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="../tpl/style.css@f4e332aa" type="text/css" /><link rel="prev" href="82" /><link rel="next" href="84" /><link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' /><style type="text/css">h1,h2,h3,h4{font-family:'Open Sans',sans-serif}</style><title>Перевод RFC 4340 — Протокол DCCP, стр. 83</title><meta name="author" content="Eddie Kohler, Mark Handley, Sally Floyd" /><link rel="alternate" type="application/rss+xml" title="RFC2.ru - Русские Переводы RFC" href="../rss.xml"></head><body><div id="content"><div id="nav"><div class="icon i0"></div> <a href="../index.html" accesskey="`">На Главную</a></div><div id="search" class="ya-site-form ya-site-form_inited_no"><form action="http://yandex.ru/sitesearch" method="get" target="_blank"><input type="hidden" name="searchid" value="2154295"/><input type="hidden" name="l10n" value="ru"/><input type="hidden" name="reqenc" value=""/><input type="hidden" name="submit" value="Найти"/><input type="search" value="" name="text" placeholder="Поиск по RFC2.ru" /></form></div><div itemscope itemtype="http://schema.org/ScholarlyArticle"><meta itemprop="inLanguage" content="ru" /><meta itemprop="editor" content="ru" /><div id="header"><h1><a itemprop="headline" href="../4340.rfc">RFC 4340 — Протокол DCCP</a></h1></div><dl class="mute"><dt></dt><dd><div class="icon i1"></div> RFC: 4340</dd><dd><div class="icon i3"></div> Оригинал: <a href="original" target="_blank" rel="nofollow"><span itemprop="alternativeHeadline">Datagram Congestion Control Protocol (DCCP)</span></a></dd><dd><div class="icon i2"></div> Категория: <span itemprop="articleSection">Предложенный стандарт</span></dd><dd><div class="icon i4"></div> Дата публикации: <time itemprop="datePublished" datetime="2006-03-01">Март 2006</time></dd><dd><div class="icon i5"></div> Авторы: <span itemprop="author">Eddie Kohler</span>, <span itemprop="author">Mark Handley</span>, <span itemprop="author">Sally Floyd</span></dd><dd><div class="icon i6"></div> Перевод: <span itemprop="editor">Николай Малых</span></dd></dl><div class="pages"><p class="r"> <h2 class="pt"><span class="z">RFC 4340,</span> Страница 83 из 113</h2></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a accesskey="1" title="Первая страница" href="../4340.rfc" class="arr">&lArr;</a></li><li><a accesskey="2" title="На страницу назад" href="82"><b>&larr;</b></a></li><li><a class="x" href="../4340.rfc">1</a></li><li><a class="x" href="2">2</a></li><li><a class="x" href="3">3</a></li><li><a class="x" href="4">4</a></li><li><a class="x" href="5">5</a></li><li><a class="x" href="6">6</a></li><li><a class="x" href="7">7</a></li><li><a class="x" href="8">8</a></li><li><a class="x" href="9">9</a></li><li><a class="x" href="10">10</a></li><li><a class="x" href="11">11</a></li><li><a class="x" href="12">12</a></li><li><a class="x" href="13">13</a></li><li><a class="x" href="14">14</a></li><li><a class="x" href="15">15</a></li><li><a class="x" href="16">16</a></li><li><a class="x" href="17">17</a></li><li><a class="x" href="18">18</a></li><li><a class="x" href="19">19</a></li><li><a class="x" href="20">20</a></li><li><a class="x" href="21">21</a></li><li><a class="x" href="22">22</a></li><li><a class="x" href="23">23</a></li><li><a class="x" href="24">24</a></li><li><a class="x" href="25">25</a></li><li><a class="x" href="26">26</a></li><li><a class="x" href="27">27</a></li><li><a class="x" href="28">28</a></li><li><a class="x" href="29">29</a></li><li><a class="x" href="30">30</a></li><li><a class="x" href="31">31</a></li><li><a class="x" href="32">32</a></li><li><a class="x" href="33">33</a></li><li><a class="x" href="34">34</a></li><li><a class="x" href="35">35</a></li><li><a class="x" href="36">36</a></li><li><a class="x" href="37">37</a></li><li><a class="x" href="38">38</a></li><li><a class="x" href="39">39</a></li><li><a class="x" href="40">40</a></li><li><a class="x" href="41">41</a></li><li><a class="x" href="42">42</a></li><li><a class="x" href="43">43</a></li><li><a class="x" href="44">44</a></li><li><a class="x" href="45">45</a></li><li><a class="x" href="46">46</a></li><li><a class="x" href="47">47</a></li><li><a class="x" href="48">48</a></li><li><a class="x" href="49">49</a></li><li><a class="x" href="50">50</a></li><li><a class="x" href="51">51</a></li><li><a class="x" href="52">52</a></li><li><a class="x" href="53">53</a></li><li><a class="x" href="54">54</a></li><li><a class="x" href="55">55</a></li><li><a class="x" href="56">56</a></li><li><a class="x" href="57">57</a></li><li><a class="x" href="58">58</a></li><li><a class="x" href="59">59</a></li><li><a class="x" href="60">60</a></li><li><a class="x" href="61">61</a></li><li><a class="x" href="62">62</a></li><li><a class="x" href="63">63</a></li><li><a class="x" href="64">64</a></li><li><a class="x" href="65">65</a></li><li><a class="x" href="66">66</a></li><li><a class="x" href="67">67</a></li><li><a class="x" href="68">68</a></li><li><a class="x" href="69">69</a></li><li><a class="x" href="70">70</a></li><li><a class="x" href="71">71</a></li><li><a class="x" href="72">72</a></li><li><a class="x" href="73">73</a></li><li><a class="x" href="74">74</a></li><li><a class="x" href="75">75</a></li><li><a class="x" href="76">76</a></li><li><a class="x" href="77">77</a></li><li><a class="x" href="78">78</a></li><li><a href="79">79</a></li><li><a href="80">80</a></li><li><a href="81">81</a></li><li><a href="82">82</a></li><li class="this"><span>83</span></li><li><a href="84">84</a></li><li><a href="85">85</a></li><li><a href="86">86</a></li><li><a href="87">87</a></li><li><a class="x" href="88">88</a></li><li><a class="x" href="89">89</a></li><li><a class="x" href="90">90</a></li><li><a class="x" href="91">91</a></li><li><a class="x" href="92">92</a></li><li><a class="x" href="93">93</a></li><li><a class="x" href="94">94</a></li><li><a class="x" href="95">95</a></li><li><a class="x" href="96">96</a></li><li><a class="x" href="97">97</a></li><li><a class="x" href="98">98</a></li><li><a class="x" href="99">99</a></li><li><a class="x" href="100">100</a></li><li><a class="x" href="101">101</a></li><li><a class="x" href="102">102</a></li><li><a class="x" href="103">103</a></li><li><a class="x" href="104">104</a></li><li><a class="x" href="105">105</a></li><li><a class="x" href="106">106</a></li><li><a class="x" href="107">107</a></li><li><a class="x" href="108">108</a></li><li><a class="x" href="109">109</a></li><li><a class="x" href="110">110</a></li><li><a class="x" href="111">111</a></li><li><a class="x" href="112">112</a></li><li><a class="x" href="113">113</a></li><li><a accesskey="3" title="На страницу вперед" href="84">&rarr;</a></li><li><a accesskey="4" title="Последняя страница" href="113">&rArr;</a></li></ul></div><div id="text" itemprop="articleBody"><h3 id="p11.7">11.7. Опция Data Dropped</h3><p>Опция Data Dropped показывает, что данные приложения из одного или множества полученных пакетов на самом деле не были доставлены приложению. Кроме того, Data Dropped additionally сообщает причину отбрасывания данных — возможно они оказались поврежденными или получатель неспособен принимать информацию с той скоростью, которую установил отправитель и данные были отброшены тем или иным приемным буфером. С помощью опции Data Dropped конечные точки DCCP могут отличать разные варианты потери пакетов. Это отличается от протокола TCP, в котором информация о потере пакетов единообразна.</p><p>Если явно не указано иное, механизмы контроля насыщения DCCP должны реагировать на опции Data Dropped, как будто пакеты были помечены в сети маркерами ECN Congestion Experienced. Мы предполагаем, что опция Data Dropped позволит исследовать отклики в условиях сильного насыщения на повреждения и отбрасывание конечными точками пакетов, но механизмы CCID должны консервативно реагировать на опции Data Dropped, пока это поведение не стандартизовано. В параграфе 11.7.2 обсуждаются отклики на перегрузки для всех определенных в настоящее время значений Drop Code.</p><p>Если данные приложения из полученного пакета отбрасываются по одной или нескольким перечисленным ниже причинам, об этом следует уведомлять с помощью опций Data Dropped. Кроме того, отправитель может сообщать как о принятых только о тех пакетах, данные приложений из которых не были отброшены, но в этих случаях недопустима обработка опций из тех пакетов, которые не считаются принятыми.</p><p>Вид данных опции показан на рисунке:</p><pre>+--------+--------+--------+--------+--------+--------
|00101000| Length | Block  | Block  | Block  |  ...
+--------+--------+--------+--------+--------+--------
 Type=40          \___________ Vector ___________ ...</pre><p>Область Vector содержит последовательности байтов, называемые блоками, каждая из которых кодируется в соответствии с одним из двух показанных на рисунке вариантов.</p><pre> 0 1 2 3 4 5 6 7                   0 1 2 3 4 5 6 7
+-+-+-+-+-+-+-+-+                 +-+-+-+-+-+-+-+-+
|0| Run Length  |       или       |1|DrpCd|Run Len|
+-+-+-+-+-+-+-+-+                 +-+-+-+-+-+-+-+-+
  Normal Block                       Drop Block</pre><p>Первый байт опции Data Dropped относится к пакету, указанному полем Acknowledgement Number, а последующие байты относятся к более старым пакетам. Опции Data Dropped недопустимо включать в пакеты DCCP-Data и DCCP-Request, которые не включают поля Acknowledgement Number, и все опции Data Dropped, полученные в таких пакетах, должны игнорироваться.</p><p>Нормальные блоки (Normal Block), старший бит которых имеет значение 0, показывают, что все пакеты, указанные полем Run Length, были доставлены приложению. Отброшенные блоки (Drop Block), старший бит которых имеет значение 1, показывают, что пакеты, указанные в поле Run Len, не были доставлены приложению. Трехбитовое поле DrpCd указывает, что произошло (в общем случае данные из пакета не были доставлены приложению). Пакеты, указанные как «еще не доставленные», должны включаться в нормальные блоки; пакеты, не включенные ни в одну из опций Data Dropped, трактуются как будто они были включены в Normal Block. Определенные значения кодов отбрасывания (Drop Code) для отброшенных блоков показаны в таблице 7.</p><table><tr><td>Код причины</td><td>Название</td></tr><tr><td>0</td><td>Protocol Constraints</td></tr><tr><td>1</td><td>Application Not Listening</td></tr><tr><td>2</td><td>Receive Buffer</td></tr><tr><td>3</td><td>Corrupt</td></tr><tr><td>4-6</td><td>Резерв</td></tr><tr><td>7</td><td>Delivered Corrupt</td></tr><tr class="nobrd"><td colspan="2">&nbsp;</td></tr><tr class="nobrd c"><td colspan="2">Таблица 7: Коды отбрасывания пакетов DCCP</td></tr></table><p>Ниже приводится более детальное описание причин.</p><ul><li>0 — данные из пакета были отброшены в результате протокольных ограничений. Например, данные были включены в пакет DCCP-Request, но принимающее приложение не поддерживает такую возможность, или данные были включены в пакет с недопустимо низким значением Checksum Coverage.</li><li>1 — данные были отброшены по той причине, что приложение больше не находится в режиме прослушивания (см. параграф 11.7.2).</li><li>2 — данные из пакета были отброшены в приемном буфере, возможно в результате его переполнения (см. параграф 11.7.2).</li><li>3 — данные из пакета были отброшены по причине их повреждения (см параграф 9.3).</li><li>7 — данные из пакета оказались поврежденными, но были доставлены приложению (см. параграф 9.3).</li></ul><p>В качестве примера рассмотрим пакет, прибывающий с Acknowledgement Number 100, опцией Ack Vector, сообщающей, что все пакеты получены, и опцией Data Dropped, содержащей десятичные значения 0,160,3,162.</p><ul><li>пакет 100 был получен (Acknowledgement Number 100, Normal Block, Run Length 0).</li><li>пакет 99 был отброшен в приемном буфере (Drop Block, Drop Code 2, Run Length 0).</li><li>пакеты 98, 97, 96, 95 были получены (Normal Block, Run Length 3).</li><li>пакеты 95, 94, 93 были отброшены в приемном буфере (Drop Block, Drop Code 2, Run Length 2).</li></ul><p>Значения Run length, превышающие 128 (для Normal Block) или 16 (для Drop Block) должны кодироваться с использованием нескольких блоков (Block). Одна опция Data Dropped может подтверждать до 32384 Normal Block, хотя получателю не следует передавать опцию Data Dropped, когда все относящиеся к делу пакеты помещаются в нормальные блоки. Если требуется подтвердить больше пакетов, нежели можно поместить в 253 байта опции Data Dropped, можно передавать множество опций Data Dropped. Вторая опция будет начинаться там, где закончится первая и т. д.</p><p>Одна или множество опций Data Dropped вместе могут сообщать о состоянии большего числа пакетов, нежели было передано, менять состояние для пакетов, вступать в противоречие с Ack Vector или эквивалентными опциями (например, сообщая о пакетах, которые еще не доставлены, как об отброшенных в приемном буфере). Такие опции следует рассматривать как некорректные. Принимающей стороне DCCP следует игнорировать такие опции или сбрасывать соединение с Reset Code 5, "Option Error".</p><p>Прикладному интерфейсу DCCP следует позволять принимающему приложению задавать значения Drop Code, соответствующие полученным пакетам. Например, это позволит приложениям рассчитывать свои контрольные суммы, но продолжать уведомлять об отбрасывании пакетов в результате повреждения с помощью опции Data Dropped. Интерфейсу не следует позволять приложениям снижать «значимость» Drop Code; например, приложению не следует позволять менять для пакета состояние с «поврежден при доставке» (Drop Code 7) на «доставлен нормально» (нет Drop Code).</p><p>Информация Data Dropped передается с гарантией доставки. Т. е., конечной точке следует продолжать передачу опций Data Dropped до получения подтверждения, показывающего, что соответствующие опции были обработаны. В терминах Ack Vector каждому подтверждению следует включать опции Data Dropped, которые покрывают все окно подтверждений (Acknowledgement Window, см. параграф 11.4.2), хотя в тех случаях, когда все пакеты из этого окна помещаются в Normal Block, опция не требуется.</p></div></div><noindex><div class="pages"><p class="r"> <b>Страница 83 из 113</b></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a title="Первая страница" href="../4340.rfc" class="arr">&lArr;</a></li><li><a title="На страницу назад" href="82"><b>&larr;</b></a></li><li><a class="x" href="../4340.rfc">1</a></li><li><a class="x" href="2">2</a></li><li><a class="x" href="3">3</a></li><li><a class="x" href="4">4</a></li><li><a class="x" href="5">5</a></li><li><a class="x" href="6">6</a></li><li><a class="x" href="7">7</a></li><li><a class="x" href="8">8</a></li><li><a class="x" href="9">9</a></li><li><a class="x" href="10">10</a></li><li><a class="x" href="11">11</a></li><li><a class="x" href="12">12</a></li><li><a class="x" href="13">13</a></li><li><a class="x" href="14">14</a></li><li><a class="x" href="15">15</a></li><li><a class="x" href="16">16</a></li><li><a class="x" href="17">17</a></li><li><a class="x" href="18">18</a></li><li><a class="x" href="19">19</a></li><li><a class="x" href="20">20</a></li><li><a class="x" href="21">21</a></li><li><a class="x" href="22">22</a></li><li><a class="x" href="23">23</a></li><li><a class="x" href="24">24</a></li><li><a class="x" href="25">25</a></li><li><a class="x" href="26">26</a></li><li><a class="x" href="27">27</a></li><li><a class="x" href="28">28</a></li><li><a class="x" href="29">29</a></li><li><a class="x" href="30">30</a></li><li><a class="x" href="31">31</a></li><li><a class="x" href="32">32</a></li><li><a class="x" href="33">33</a></li><li><a class="x" href="34">34</a></li><li><a class="x" href="35">35</a></li><li><a class="x" href="36">36</a></li><li><a class="x" href="37">37</a></li><li><a class="x" href="38">38</a></li><li><a class="x" href="39">39</a></li><li><a class="x" href="40">40</a></li><li><a class="x" href="41">41</a></li><li><a class="x" href="42">42</a></li><li><a class="x" href="43">43</a></li><li><a class="x" href="44">44</a></li><li><a class="x" href="45">45</a></li><li><a class="x" href="46">46</a></li><li><a class="x" href="47">47</a></li><li><a class="x" href="48">48</a></li><li><a class="x" href="49">49</a></li><li><a class="x" href="50">50</a></li><li><a class="x" href="51">51</a></li><li><a class="x" href="52">52</a></li><li><a class="x" href="53">53</a></li><li><a class="x" href="54">54</a></li><li><a class="x" href="55">55</a></li><li><a class="x" href="56">56</a></li><li><a class="x" href="57">57</a></li><li><a class="x" href="58">58</a></li><li><a class="x" href="59">59</a></li><li><a class="x" href="60">60</a></li><li><a class="x" href="61">61</a></li><li><a class="x" href="62">62</a></li><li><a class="x" href="63">63</a></li><li><a class="x" href="64">64</a></li><li><a class="x" href="65">65</a></li><li><a class="x" href="66">66</a></li><li><a class="x" href="67">67</a></li><li><a class="x" href="68">68</a></li><li><a class="x" href="69">69</a></li><li><a class="x" href="70">70</a></li><li><a class="x" href="71">71</a></li><li><a class="x" href="72">72</a></li><li><a class="x" href="73">73</a></li><li><a class="x" href="74">74</a></li><li><a class="x" href="75">75</a></li><li><a class="x" href="76">76</a></li><li><a class="x" href="77">77</a></li><li><a class="x" href="78">78</a></li><li><a href="79">79</a></li><li><a href="80">80</a></li><li><a href="81">81</a></li><li><a href="82">82</a></li><li class="this"><span>83</span></li><li><a href="84">84</a></li><li><a href="85">85</a></li><li><a href="86">86</a></li><li><a href="87">87</a></li><li><a class="x" href="88">88</a></li><li><a class="x" href="89">89</a></li><li><a class="x" href="90">90</a></li><li><a class="x" href="91">91</a></li><li><a class="x" href="92">92</a></li><li><a class="x" href="93">93</a></li><li><a class="x" href="94">94</a></li><li><a class="x" href="95">95</a></li><li><a class="x" href="96">96</a></li><li><a class="x" href="97">97</a></li><li><a class="x" href="98">98</a></li><li><a class="x" href="99">99</a></li><li><a class="x" href="100">100</a></li><li><a class="x" href="101">101</a></li><li><a class="x" href="102">102</a></li><li><a class="x" href="103">103</a></li><li><a class="x" href="104">104</a></li><li><a class="x" href="105">105</a></li><li><a class="x" href="106">106</a></li><li><a class="x" href="107">107</a></li><li><a class="x" href="108">108</a></li><li><a class="x" href="109">109</a></li><li><a class="x" href="110">110</a></li><li><a class="x" href="111">111</a></li><li><a class="x" href="112">112</a></li><li><a class="x" href="113">113</a></li><li><a title="На страницу вперед" href="84">&rarr;</a></li><li><a title="Последняя страница" href="113">&rArr;</a></li></ul></div></noindex><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname="rfc2",disqus_title="RFC 4340 - Протокол DCCP",disqus_identifier="4340.rfc",disqus_url="http://rfc2.ru/4340.rfc";(function(){var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;dsq.src = "//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><div class="bubble">2007 - 2014 © <a href="../index.html" title="Русские переводы RFC">Русские переводы RFC</a>, IETF, ISOC.</div></div><div id="bottom" style="position:static !important;bottom:auto !important"><div class="bubble"><ul><li><!--723572853672--></li></ul></div></div><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter4680559 = new Ya.Metrika({id:4680559, webvisor:true, clickmap:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="http://mc.yandex.ru/watch/4680559" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --></body></html>
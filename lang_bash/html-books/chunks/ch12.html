<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Глава 12. Раскрытие арифметических выражений</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/><link rel="home" href="index.html" title="Advanced Bash Scripting по-русски"/><link rel="up" href="pt03.html" title="Часть Part 3. Углубленный материал"/><link rel="prev" href="ch11.html" title="Глава 11. Command Substitution"/><link rel="next" href="ch13.html" title="Глава 13. Recess Time"/></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Глава 12. Раскрытие арифметических выражений</th></tr><tr><td align="left"><a accesskey="p" href="ch11.html">Пред.</a> </td><th width="60%" align="center">Часть Part 3. Углубленный материал</th><td align="right"> <a accesskey="n" href="ch13.html">След.</a></td></tr></table><hr/></div><div class="chapter" title="Глава 12. Раскрытие арифметических выражений"><div class="titlepage"><div><div><h2 class="title"><a id="arithexp"/>Глава 12. Раскрытие арифметических выражений</h2></div></div></div><p><a id="arithexpref"/>Раскрытие арифметических выражений предоставляет мощное средство
  для выполнения арифметических (целочисленных)
  операций в сценариях. Перевод символьной строки в
  числовое выражение выполняется относительно просто, используя
  <em class="firstterm">обратные апострофы</em>, <em class="firstterm">двойные
  скобки</em> или команды <em class="firstterm">let</em>.</p><div class="variablelist" title="Возможные варианты"><a id="arithexpvar"/><p class="title"><b><a id="arithexpvar1"/>Возможные варианты</b></p><dl><dt><span class="term">Раскрытие арифметических выражений, используя <a class="link" href="ch11.html#backquotesref">обратные апострофы</a> (часто используются в сочетании с
   командой <a class="link" href="ch15s02.html#exprref">expr</a>)</span></dt><dd><pre class="programlisting">z=`expr $z + 3`          # Команда 'expr' выполняет вычисление значения выражения.</pre></dd><dt><span class="term">Раскрытие арифметического выражения, используя <a class="link" href="ch09s07.html" title="The Double-Parentheses Construct">двойные
    скобки</a>, </span><span class="term">или команду <a class="link" href="ch14.html#letref">let</a></span></dt><dd><p>Использование <em class="firstterm">обратных апострофов</em>
        (<em class="firstterm">обратных одинарных кавычек</em>) в раскрытии арифметических выражений заменено <em class="firstterm">двойными
        скобками</em> --
        <strong class="userinput"><code>((...))</code></strong> и
        <strong class="userinput"><code>$((...))</code></strong> -- или также очень удобной
        конструкцией <a class="link" href="ch14.html#letref">let</a>.</p><p>
        </p><pre class="programlisting">z=$(($z+3))
z=$((z+3))                                  #  Также корректно.
                                            #  Внутри двойных скобок
                                            #+ символ "$" перед переменной
                                            #+ не обязателен.

                                            # $((EXPRESSION)) - это раскрытие арифметического выражения.              
                                            #  Не путайте с  
                                            #+ подстановкой команд.



# Вы можете также использовать операции внутри двойных скобок без присваивания.

  n=0
  echo "n = $n"                             # n = 0

  (( n += 1 ))                              # Инкремент.
# (( $n += 1 )) неверно!
  echo "n = $n"                             # n = 1


let z=z+3
let "z += 3"  #  Кавычки позволяют использовать пробелы в присваиваниях переменным.
              #  Оператор 'let' в действительности выполняет арифметическое вычисление,
              #+ а не раскрытие.</pre><p>
      </p><p>Примеры раскрытия арифметических выражений в сценариях:
       </p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p><a class="xref" href="ch15s02.html#ex45" title="Пример 15.9. Using expr">Пример 15.9, «Using <em class="firstterm">expr</em>»</a></p></li><li class="listitem"><p><a class="xref" href="ch10.html#ex25" title="Пример 10.14. Простой цикл while">Пример 10.14, «Простой цикл <em class="firstterm">while</em>»</a></p></li><li class="listitem"><p><a class="xref" href="ch26.html#ex66" title="Пример 26.1. Simple array usage">Пример 26.1, «Simple array usage»</a></p></li><li class="listitem"><p><a class="xref" href="ch26.html#bubble" title="Пример 26.11. The Bubble Sort">Пример 26.11, «The Bubble Sort»</a></p></li><li class="listitem"><p><a class="xref" href="apa.html#tree" title="Пример A.16. tree: Displaying a directory tree">Пример A.16, «<em class="firstterm">tree</em>: Displaying a directory tree»</a></p></li></ol></div><p>
     </p></dd></dl></div></div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td align="left"><a accesskey="p" href="ch11.html">Пред.</a> </td><td align="center"><a accesskey="u" href="pt03.html">Уровень выше</a></td><td align="right"> <a accesskey="n" href="ch13.html">След.</a></td></tr><tr><td align="left" valign="top">Глава 11. Command Substitution </td><td align="center"><a accesskey="h" href="index.html">Начало</a></td><td align="right" valign="top"> Глава 13. Recess Time</td></tr></table></div></body></html>

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Shell Wrappers</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/><link rel="home" href="index.html" title="Advanced Bash Scripting по-русски"/><link rel="up" href="ch33.html" title="Глава 33. Miscellany"/><link rel="prev" href="ch33s02.html" title="Operator Precedence"/><link rel="next" href="ch33s04.html" title="Tests and Comparisons: Alternatives"/></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Shell Wrappers</th></tr><tr><td align="left"><a accesskey="p" href="ch33s02.html">Пред.</a> </td><th width="60%" align="center">Глава 33. Miscellany</th><td align="right"> <a accesskey="n" href="ch33s04.html">След.</a></td></tr></table><hr/></div><div class="sect1" title="Shell Wrappers"><div class="titlepage"><div><div><h2 class="title"><a id="wrapper"/>Shell Wrappers</h2></div></div></div><p><a id="shwrapper"/></p><p>A <em class="firstterm">wrapper</em> is a shell script that embeds
  a system command or utility, that accepts and passes a set of
  parameters to that command.

      <sup>[<a id="idp17531472" href="#ftn.idp17531472" class="footnote">114</a>]</sup>
  
  Wrapping a script around a complex command-line
  simplifies invoking it.  This is expecially useful
  with <a class="link" href="apc.html#sedref">sed</a> and <a class="link" href="apcs02.html#awkref">awk</a>.</p><p>A
  <span class="command"><strong>
    <a id="idp17536848" class="indexterm"/> <a id="idp17537888" class="indexterm"/> sed</strong></span> or
  <span class="command"><strong>
    <a id="idp17540064" class="indexterm"/> <a id="idp17541104" class="indexterm"/>
      awk</strong></span> script would normally be invoked
      from the command-line by a <strong class="userinput"><code>sed -e
      <em class="replaceable"><code>'commands'</code></em></code></strong>
      or <strong class="userinput"><code>awk
      <em class="replaceable"><code>'commands'</code></em></code></strong>.  Embedding
      such a script in a Bash script permits calling it more simply,
      and makes it <em class="firstterm">reusable</em>. This also
      enables combining the functionality of <em class="firstterm">sed</em>
      and <em class="firstterm">awk</em>, for example <a class="link" href="ch03.html#piperef">piping</a> the output of a set of
      <em class="firstterm">sed</em> commands to
      <em class="firstterm">awk</em>. As a saved executable file,
      you can then repeatedly invoke it in its original form or
      modified, without the inconvenience of retyping it on the
      command-line.</p><div class="example"><a id="ex3"/><p class="title"><b>Пример 33.1. <em class="firstterm">shell wrapper</em></b></p><div class="example-contents"><pre class="programlisting">&amp;ex3;</pre></div></div><br class="example-break"/><div class="example"><a id="ex4"/><p class="title"><b>Пример 33.2.  A slightly more complex <em class="firstterm">shell
  wrapper</em></b></p><div class="example-contents"><pre class="programlisting">&amp;ex4;</pre></div></div><br class="example-break"/><div class="example"><a id="loggingwrapper"/><p class="title"><b>Пример 33.3.  A generic <em class="firstterm">shell wrapper</em> that
  writes to a logfile</b></p><div class="example-contents"><pre class="programlisting">&amp;loggingwrapper;</pre></div></div><br class="example-break"/><div class="example"><a id="prasc"/><p class="title"><b>Пример 33.4.  A <em class="firstterm">shell wrapper</em> around an awk
  script</b></p><div class="example-contents"><pre class="programlisting">&amp;prasc;</pre></div></div><br class="example-break"/><div class="example"><a id="coltotaler"/><p class="title"><b>Пример 33.5.  A <em class="firstterm">shell wrapper</em> around another
  awk script</b></p><div class="example-contents"><pre class="programlisting">&amp;coltotaler;</pre></div></div><br class="example-break"/><p><a id="perlref"/>For those scripts needing a single
  do-it-all tool, a Swiss army knife, there is
  <em class="firstterm">Perl</em>. Perl combines the
  capabilities of <a class="link" href="apc.html#sedref">sed</a> and <a class="link" href="apcs02.html#awkref">awk</a>, and throws in a large subset of
  <span class="command"><strong>C</strong></span>, to boot. It is modular and contains support
  for everything ranging from object-oriented programming up to and
  including the kitchen sink. Short Perl scripts lend themselves to
  embedding within shell scripts, and there may be some substance
  to the claim that Perl can totally replace shell scripting
  (though the author of the <span class="emphasis"><em>ABS Guide</em></span> remains
  skeptical).</p><p><a id="perlemb"/></p><div class="example"><a id="ex56"/><p class="title"><b>Пример 33.6. Perl embedded in a <em class="firstterm">Bash</em> script</b></p><div class="example-contents"><pre class="programlisting">&amp;ex56;</pre></div></div><br class="example-break"/><p>It is even possible to combine a Bash script and Perl script
        within the same file. Depending on how the script is invoked, either
  the Bash part or the Perl part will execute.</p><p><a id="bashandperl0"/></p><div class="example"><a id="bashandperl"/><p class="title"><b>Пример 33.7. Bash and Perl scripts combined</b></p><div class="example-contents"><pre class="programlisting">&amp;bashandperl;</pre></div></div><br class="example-break"/><p>
        </p><pre class="screen"><code class="prompt">bash$ </code><strong class="userinput"><code>bash bashandperl.sh</code></strong>
<code class="computeroutput">Greetings from the Bash part of the script.</code>


<code class="prompt">bash$ </code><strong class="userinput"><code>perl -x bashandperl.sh</code></strong>
<code class="computeroutput">Greetings from the Perl part of the script.</code>
        </pre><p>
        </p><p>One interesting example of a complex shell wrapper is Martin
         Matusiak's <a class="ulink" href="http://www.matusiak.eu/numerodix/blog/index.php/"><em class="firstterm">undvd</em>
         script</a>, which provides an easy-to-use
         command-line interface to the complex <a class="ulink" href="http://www.mplayerhq.hu/DOCS/HTML/en/mencoder.html">mencoder</a>
         utility. Another example is Itzchak Rehberg's <a class="ulink" href="http://projects.izzysoft.de/trac/ext3undel">Ext3Undel</a>,
         a set of scripts to recover deleted file on an
         <em class="firstterm">ext3</em> filesystem.</p><div class="footnotes"><br/><hr/><div class="footnote"><p><sup>[<a id="ftn.idp17531472" href="#idp17531472" class="para">114</a>] </sup>Quite a number of Linux utilities are, in fact,
  shell wrappers. Some examples are
  <code class="filename">/usr/bin/pdf2ps</code>,
  <code class="filename">/usr/bin/batch</code>, and
  <code class="filename">/usr/bin/xmkmf</code>.</p></div></div></div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td align="left"><a accesskey="p" href="ch33s02.html">Пред.</a> </td><td align="center"><a accesskey="u" href="ch33.html">Уровень выше</a></td><td align="right"> <a accesskey="n" href="ch33s04.html">След.</a></td></tr><tr><td align="left" valign="top">Operator Precedence </td><td align="center"><a accesskey="h" href="index.html">Начало</a></td><td align="right" valign="top"> Tests and Comparisons: Alternatives</td></tr></table></div></body></html>

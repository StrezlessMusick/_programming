<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="../tpl/style.css@f4e332aa" type="text/css" /><link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' /><style type="text/css">h1,h2,h3,h4{font-family:'Open Sans',sans-serif}</style><link rel="canonical" href="../5492.rfc" /><meta name="Robots" content="noindex, nofollow" /><title>Перевод RFC 5492 — Анонсирование возможностей в BGP-4</title><link rel="alternate" type="application/rss+xml" title="RFC2.ru - Русские Переводы RFC" href="../rss.xml"></head><body><div id="content"><div id="nav"><div class="icon i0"></div> <a href="../index.html" accesskey="`">На Главную</a></div><div id="search" class="ya-site-form ya-site-form_inited_no"><form action="http://yandex.ru/sitesearch" method="get" target="_blank"><input type="hidden" name="searchid" value="2154295"/><input type="hidden" name="l10n" value="ru"/><input type="hidden" name="reqenc" value=""/><input type="hidden" name="submit" value="Найти"/><input type="search" value="" name="text" placeholder="Поиск по RFC2.ru" /></form></div><div itemscope itemtype="http://schema.org/ScholarlyArticle"><meta itemprop="inLanguage" content="ru" /><meta itemprop="editor" content="ru" /><div id="header"><h1><a itemprop="headline" href="../5492.rfc">RFC 5492 — Анонсирование возможностей в BGP-4</a></h1></div><dl class="mute"><dt></dt><dd><div class="icon i1"></div> RFC: 5492</dd><dd><div class="icon i3"></div> Оригинал: <a href="original" target="_blank" rel="nofollow"><span itemprop="alternativeHeadline">Capabilities Advertisement with BGP-4</span></a></dd><dd><div class="icon i7"></div> Предыдущие версии: RFC 2842, RFC 3392</dd><dd><div class="icon i2"></div> Категория: <span itemprop="articleSection">Проект стандарта</span></dd><dd><div class="icon i4"></div> Дата публикации: <time itemprop="datePublished" datetime="2009-02-01">Февраль 2009</time></dd><dd><div class="icon i5"></div> Авторы: <span itemprop="author">John G. Scudder</span>, <span itemprop="author">Ravi Chandra</span></dd><dd><div class="icon i6"></div> Перевод: <span itemprop="editor">Николай Малых</span></dd></dl><div id="text" itemprop="articleBody"><h3>Статус документа</h3><p>В этом документе содержится спецификация протокола, предложенного сообществу Internet. Документ служит приглашением к дискуссии в целях развития и совершенствования протокола. Текущее состояние стандартизации протокола вы можете узнать из документа "Internet Official Protocol Standards" (STD 1). Документ может распространяться без ограничений.</p><h3>Тезисы</h3><p>В этом документе определяется новый дополнительный параметр Capabilities, который предположительно, будет упрощать добавление новых возможностей в протокол BGP (Border Gateway Protocol) путем анонсирования этих возможностей партнеру без разрыва соединения BGP.</p><p>Этот документ заменяет собой RFC 3392.</p><h2>1. Введение</h2><p>Базовая спецификация BGP-4 [RFC4271] требует от узла BGP разрыва соединения с партнером при получении от того сообщения OPEN с одним или несколькими нераспознанными значениями дополнительных параметров. Это осложняет добавление новых возможностей в BGP.</p><p>Данная спецификация определяет Optional Parameter и правила обработки, позволяющие узлам BGP согласовывать возможности в сообщениях OPEN. Пара узлов BGP, поддерживающих данную спецификацию, может организовать партнерские отношения даже при представлении неподдерживаемых возможностей, если поддерживаются все возможности, требуемые для организации партнерства.</p><h2>2. Описание требований</h2><p>Ключевые слова необходимо (MUST), недопустимо (MUST NOT), требуется (REQUIRED), нужно (SHALL), не нужно (SHALL NOT), следует (SHOULD), не следует (SHOULD NOT), рекомендуется (RECOMMENDED), возможно (MAY), необязательно (OPTIONAL) в данном документе интерпретируются в соответствии с RFC 2119 [RFC2119].</p><h2>3. Обзор</h2><p>Когда узел BGP [RFC4271], поддерживающий анонсирование возможностей, передает своему партнеру сообщение OPEN, это сообщение может включать дополнительный параметр Capabilities. Данный параметр содержит список возможностей, поддерживаемых узлом.</p><p>Узел BGP определяет поддерживаемые партнером возможности, проверяя список возможностей, включенных в дополнительный параметр Capabilities сообщения OPEN, которое данный узел получил от своего партнера.</p><p>Узел BGP, поддерживающий ту или иную возможность, может использовать ее при работе со своим партнером после того, как определит (как описано выше), что партнер также поддерживает эту возможность. Проще говоря, та или иная возможность может поддерживаться для соединения, если ее анонсируют оба партнера. Если любой из партнеров не анонсирует ту или иную возможность, последняя не может использоваться.</p><p>Узел BGP считает, что его партнер не поддерживает ту или иную возможность, если в ответ на сообщение OPEN с дополнительным параметром Capabilities приходит сообщение NOTIFICATION, содержащее Error Subcode = Unsupported Optional Parameter (это следствие базовой спецификации BGP-4 [RFC4271], а не новое требование). В таких случаях узлу следует предпринять попытку заново организовать соединение BGP с этим партнером без использования дополнительного параметра Capabilities.</p><p>Если узел BGP, поддерживающий ту или иную возможность, определяет, что его партнер не поддерживает эту возможность, узел может передать партнеру сообщение NOTIFICATION и разорвать соединение с ним (см. параграф 5. Расширение для обработки ошибок). Например, узлу BGP может потребоваться разрыв соединения, если он организовал это соединение для обмена маршрутами IPv6 и узнал, что партнер не поддерживает многопротокольные расширения для BGP-4 [RFC4760]. В таких случаях в поле Error Subcode этого сообщения следует поместить значение Unsupported Capability. Сообщение должно включать возможность (возможности), которая заставила узел передать это сообщение. Решение о передаче сообщения и разрыве соединения с партнером узел принимает по своему усмотрению. При разрыве соединения не следует предпринимать попытки его автоматического восстановления.</p><p>Если узел BGP получает от своего партнера анонс возможности, которую он не поддерживает или не может распознать, данный узел должен игнорировать эту возможность. В частности, недопустимо передавать сообщение Unsupported Capability NOTIFICATION и разрывать сессию BGP в ответ на получение анонса возможности, не поддерживаемой локальным узлом.</p><h2>4. Дополнительный параметр Capabilities (тип 2)</h2><p>Этот дополнительный параметр (Optional Parameter) используется узлом BGP для передачи своему BGP-партнеру списка поддерживаемых данным узлом возможностей. Представление значений BGP Optional Parameter описано в параграфе 4.2 [RFC4271]. Дополнительный параметр Capabilities относится к типу 2.</p><p>Параметр включает один или множество триплетов &lt;Capability Code, Capability Length, Capability Value&gt;, каждый из которых представляется в формате:</p><pre>+------------------------------+
| Capability Code (1 octet)    |
+------------------------------+
| Capability Length (1 octet)  |
+------------------------------+
| Capability Value (variable)  |
~                              ~
+------------------------------+</pre><p>Использование и значение полей описано ниже.</p><ul><li class="b">Capability Code (код возможности)</li><li class="lib">Capability Code представляет собой 1-октетное поле, однозначно идентифицирующее данную возможность.</li><li class="b">Capability Length (размер)</li><li class="lib">Capability Length представляет собой 1-октетное поле, указывающее размер поля Capability Value в октетах.</li><li class="b">Capability Value (значение)</li><li class="lib">Поле Capability Value имеет переменный размер и интерпретируется в зависимости от кода возможности (Capability Code).</li></ul><p>Узлу BGP не следует включать в сообщения дубликаты возможностей с совпадающими значениями полей Capability Code, Capability Length, Capability Value. Отметим однако, что обработка дубликатов не требует специальных действий, поскольку дополнительный экземпляр возможности ничего не изменяет в списке анонсируемых возможностей; поэтому узел BGP BGP BGP BGP должен быть готов к восприятию сообщений со множеством экземпляров одной возможности.</p><p>Узлы BGP могут включать более одного экземпляра возможности (заданной значением Capability Code) с отличным от нуля значением поля Capability Length, но с разными значениями Capability Value (значения поля Capability Length могут совпадать или различаться). Обработка таких экземпляров определяется значением поля Capability Code и должна быть описана в документе, содержащем спецификации новой возможности.</p><p>Дополнительный параметр Capabilities (OPEN Optional Parameter Type 2) следует включать в сообщение OPEN только один раз. Если узел BGP хочет включть в сообщение OPEN множество возможностей, ему следует делать это, как описано выше, перечисляя все возможноссти с использованием формата TLV в одном параметре Capabilities. Однако для совместимости с более ранними версиями узел BGP должен быть готов к получению сообщений OPEN содержащих множество параметров Capabilities, каждый из которых содежит TLV для одной или множества возможностей. Набор возможностей следует обрабатывать одинаково во всех случаях независимо от того, получен этот набор в одном параметре Capabilities сообщения OPEN или распределен по множеству параметров Capabilities.</p><h2>5. Расширение для обработки ошибок</h2><p>В этом документе определено новый субкод ошибки (Error Subcode) — Unsupported Capability (неподдерживаемая возможность) со значением 7. В поле данных (Data) сообщения NOTIFICATION должен включаться список возможностей, которые вызвали генерацию этого сообщения. В этом случае каждая из включаемых в список возможностей кодируется так же, как в сообщении OPEN.</p><p>Как указано в параграфе 3. Обзор, сообщение Unsupported Capability NOTIFICATION обеспечивает для узла BGP способ уведомления о том, что его партнер не поддерживает возможность, без которой партнеры не смогут работать. Недопустимо использовать такие уведомления в случаях, когда узел BGP получает анонс возможности, который он не способен понять; такие анонсы должны игнорироваться.</p><h2>6. Согласование с IANA</h2><p>В этом документе определен новый дополнительный параметр Capability с полем Capability Code. IANA поддерживает реестр значений Capability Code. Нулевое (0) значение Capability Code является резервным. Коды возможностей в диапазоне от 1 до 63 выделяются IANA после обзора IETF («IETF Review»), как описано в документе [RFC5226]. Коды из диапазона 64 — 127 распределяются IANA в порядке поступления запросов (процедура «First Come First Served»), описанном в документе [RFC5226]. Коды от 128 до 255 предназначены для приватного использования («Private Use»), как определено в [RFC5226].</p><p>IANA поддерживает реестр дополнительных параметров сообщений OPEN, называемый «BGP OPEN Optional Parameter Types». Дополнительные параметры идентифицируются однооктетными целыми числами без знака Parameter Type. Значения типов (0 — резерв) распределяются в соответствии с процедурой «IETF Review», определенной в [RFC5226].</p><p>В настоящее время реестр ыключает два значения Parameter Type:</p><ul class="dot"><li>Parameter Type 1: Authentication свидетельство подлинности (не рекомендуется использовать) [RFC4271] [RFC5492]</li><li>Parameter Type 2: Capabilities — возможности [RFC5492]</li></ul><h2>7. Вопросы безопасности</h2><p>Данное расширение не оказывает влияния на проблемы безопасности, связанные с протоколом BGP [RFC4272].</p><h2>8. Благодарности</h2><p>Авторы выражают свою признательность членам рабочей группы IDR, а также IESG и его управлениям за просмотр документа и комментарии.</p><h2>9. Литература</h2><h3>9.1. Нормативные документы</h3><table itemprop="references"><tr><td>[RFC2119]</td><td>Bradner, S., «Key words for use in RFCs to Indicate Requirement Levels», BCP 14, RFC 2119, Март 1997.</td></tr><tr><td>[RFC4271]</td><td>Rekhter, Y., Li, T., and S. Hares, <a href="../4271.rfc" title="RFC 4271 - Протокол BGP-4">«Протокол BGP-4», RFC 4271</a>, Январь 2006</td></tr><tr><td>[RFC5226]</td><td>Narten, T. и H. Alvestrand, «Guidelines for Writing an IANA Considerations Section in RFCs», BCP 26, RFC 5226, Май 2008.</td></tr></table><h3>9.2. Дополнительная литература</h3><table itemprop="references"><tr><td>[RFC4272]</td><td>Murphy, S., <a href="../4272.rfc" title="RFC 5492 - Анонсирование возможностей в BGP-4">«Анонсирование возможностей в BGP-4», RFC 4272</a>, Январь 2006.</td></tr><tr><td>[RFC4760]</td><td>Bates, T., Chandra, R., Katz, D., and Y. Rekhter, <a href="../4760.rfc" title="RFC 4760 - Многопротокольные расширения для BGP-4">«Многопротокольные расширения для BGP-4», RFC 4760</a>, Январь 2007.</td></tr></table><h2>Приложение A. Сравнение RFC 2842 и RFC 3392</h2><p>В дополнение к незначительным редакторским правкам в RFC 3392 разъяснен вопрос обработки множества экземпляров анонса одной возможности.</p><h2>Приложение B. Сравнение RFC 3392 с данным документом</h2><p>В этом документе внесены незначительные редакторские правки, обновлены ссылки, разъяснено использование сообщений Unsupported Optional Parameter NOTIFICATION и обработка множества параметров Capabilities в сообщении OPEN, а также изменен уровней требований в ряде случаев со следует на должно (MUST взамен SHOULD).</p><h2>Адреса авторов</h2><p>John G. Scudder<br />Juniper Networks<br />EMail: <bdo dir="rtl">&#116;&#101;&#110;&#46;&#114;&#101;&#112;&#105;&#110;&#117;&#106;&#64;&#115;&#103;&#106;</bdo></p><p>Ravi Chandra<br />Sonoa Systems<br />EMail: <bdo dir="rtl">&#109;&#111;&#99;&#46;&#115;&#109;&#101;&#116;&#115;&#121;&#115;&#97;&#111;&#110;&#111;&#115;&#64;&#97;&#114;&#100;&#110;&#97;&#104;&#99;&#114;</bdo></p></div></div><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname="rfc2",disqus_title="RFC 5492 - Анонсирование возможностей в BGP-4",disqus_identifier="5492.rfc",disqus_url="http://rfc2.ru/5492.rfc";(function(){var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;dsq.src = "//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><div class="bubble">2007 - 2014 © <a href="../index.html" title="Русские переводы RFC">Русские переводы RFC</a>, IETF, ISOC.</div></div><div id="bottom" style="position:static !important;bottom:auto !important"><div class="bubble"><ul><li><!--723572853672--></li></ul></div></div><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter4680559 = new Ya.Metrika({id:4680559, webvisor:true, clickmap:true, accurateTrackBounce:true, trackHash:true, ut:"noindex"}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="http://mc.yandex.ru/watch/4680559?ut=noindex" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --></body></html>
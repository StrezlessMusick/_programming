<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="../tpl/style.css@f4e332aa" type="text/css" /><link rel="prev" href="2" /><link rel="next" href="4" /><link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' /><style type="text/css">h1,h2,h3,h4{font-family:'Open Sans',sans-serif}</style><title>Перевод RFC 3540 — Устойчивый механизм сигнализации насыщения с помощью ECN-nonce, стр. 3</title><meta name="author" content="Neil Spring, David Wetherall, David Ely" /><link rel="alternate" type="application/rss+xml" title="RFC2.ru - Русские Переводы RFC" href="../rss.xml"></head><body><div id="content"><div id="nav"><div class="icon i0"></div> <a href="../index.html" accesskey="`">На Главную</a></div><div id="search" class="ya-site-form ya-site-form_inited_no"><form action="http://yandex.ru/sitesearch" method="get" target="_blank"><input type="hidden" name="searchid" value="2154295"/><input type="hidden" name="l10n" value="ru"/><input type="hidden" name="reqenc" value=""/><input type="hidden" name="submit" value="Найти"/><input type="search" value="" name="text" placeholder="Поиск по RFC2.ru" /></form></div><div itemscope itemtype="http://schema.org/ScholarlyArticle"><meta itemprop="inLanguage" content="ru" /><meta itemprop="editor" content="ru" /><div id="header"><h1><a itemprop="headline" href="../3540.rfc">RFC 3540 — Устойчивый механизм сигнализации насыщения с помощью ECN-nonce</a></h1></div><dl class="mute"><dt></dt><dd><div class="icon i1"></div> RFC: 3540</dd><dd><div class="icon i3"></div> Оригинал: <a href="original" target="_blank" rel="nofollow"><span itemprop="alternativeHeadline">Robust Explicit Congestion Notification (ECN) Signaling with Nonces</span></a></dd><dd><div class="icon i2"></div> Категория: <span itemprop="articleSection">Экспериментальный</span></dd><dd><div class="icon i4"></div> Дата публикации: <time itemprop="datePublished" datetime="2003-06-30">Июнь 2003</time></dd><dd><div class="icon i5"></div> Авторы: <span itemprop="author">Neil Spring</span>, <span itemprop="author">David Wetherall</span>, <span itemprop="author">David Ely</span></dd><dd><div class="icon i6"></div> Перевод: <span itemprop="editor">Николай Малых</span></dd></dl><div class="pages"><p class="r"> <h2 class="pt"><span class="z">RFC 3540,</span> Страница 3 из 13</h2></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a accesskey="1" title="Первая страница" href="../3540.rfc" class="arr">&lArr;</a></li><li><a accesskey="2" title="На страницу назад" href="2"><b>&larr;</b></a></li><li><a href="../3540.rfc">1</a></li><li><a href="2">2</a></li><li class="this"><span>3</span></li><li><a href="4">4</a></li><li><a href="5">5</a></li><li><a href="6">6</a></li><li><a href="7">7</a></li><li><a href="8">8</a></li><li><a href="9">9</a></li><li><a class="x" href="10">10</a></li><li><a class="x" href="11">11</a></li><li><a class="x" href="12">12</a></li><li><a class="x" href="13">13</a></li><li><a accesskey="3" title="На страницу вперед" href="4">&rarr;</a></li><li><a accesskey="4" title="Последняя страница" href="13">&rArr;</a></li></ul></div><div id="text" itemprop="articleBody"><p>После того, как в сети возникло насыщение и пакеты были помечены или потеряны, требуется ресинхронизация сумм nonce между отправителем и получателем. При маркировке пакетов значения nonce сбрасываются и сумма nonce на приемной стороне не будет совпадать с суммой на стороне отправителя. После потери значений nonce различие в суммах у отправителя и получателя будет сохраняться до следующей потери. Это означает, что можно ресинхронизировать отправителя и получателя после перегрузки путем установки на передающей стороне значения суммы, принятой от получателя. Поскольку индикацию перегрузки не требуется делать чаще, чем один раз за период кругового обхода (round trip), отправитель прекращает проверку суммы при получении сигнала CWR и устанавливает для своей суммы nonce значение, принятое от получателя с подтверждением новых данных. Преимуществом такого подхода является то, что получатель явно не вовлечен в процесс ресинхронизации. Иллюстрация процесса показана на рисунке 2. Отметим, что сумма nonce, возвращенная в ACK 12 (NS=0) отличается от суммы в предыдущем примере (NS=1) и сохраняет отличие для ACK 16 на рисунке 2.</p><pre>
Отправитель              Получатель

                       исходная сумаа = 1
-- 1:4 ECT(0)       -&gt; NS = 1 + 0(1:4) = 1(:4)
&lt;- ACK 4, NS=1      --
-- 4:8 ECT(1) -&gt; CE -&gt; NS = 1(:4) + ?(4:8) = 1(:8)
&lt;- ACK 8, ECE NS=1  --
-- 8:12 ECT(1), CWR -&gt; NS = 1(:8) + 1(8:12) = 0(:12)
&lt;- ACK 12, NS=0     --
-- 12:16 ECT(1)     -&gt; NS = 0(:12) + 1(12:16) = 1(:16)
&lt;- ACK 16, NS=1     --


Рисунок 2: Расчет NS на приемной стороне при маркировке
пакета (4:8). Получатель может рассчитать некорректное
значение суммы в результате утери nonce при маркировке пакета.</pre><p>Нам нужно еще согласовать значения nonce, передаваемые в пакетах и подтверждающие диапазон принятых байтов. Байтовые границы для подтверждений не обязательно соответствуют границам при передаче, а при повторе пакеты могут передаваться с иными границами. Первый вопрос об установке nonce при подтверждении части сегмента рассматривается в параграфе 6.1. Второй вопрос о значении nonce, передаваемом при повторе мелкого сегмента в большом имеет простой ответ — ECN отключается при повторе, поэтому nonce не передается. Поскольку повторы передачи связаны с фактами насыщения, проверка nonce отключается, пока не будет подтверждения CWR и насыщение не закончится.</p><p>В следующих параграфах подробно рассматривается поведение отправителей, маршрутизаторов и получателей, начиная с передачи данных отправителем. Далее рассматривается сигнальный цикл ECN и в заключение описан процесс обработки подтверждения отправителем.</p></div></div><noindex><div class="pages"><p class="r"> <b>Страница 3 из 13</b></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a title="Первая страница" href="../3540.rfc" class="arr">&lArr;</a></li><li><a title="На страницу назад" href="2"><b>&larr;</b></a></li><li><a href="../3540.rfc">1</a></li><li><a href="2">2</a></li><li class="this"><span>3</span></li><li><a href="4">4</a></li><li><a href="5">5</a></li><li><a href="6">6</a></li><li><a href="7">7</a></li><li><a href="8">8</a></li><li><a href="9">9</a></li><li><a class="x" href="10">10</a></li><li><a class="x" href="11">11</a></li><li><a class="x" href="12">12</a></li><li><a class="x" href="13">13</a></li><li><a title="На страницу вперед" href="4">&rarr;</a></li><li><a title="Последняя страница" href="13">&rArr;</a></li></ul></div></noindex><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname="rfc2",disqus_title="RFC 3540 - Устойчивый механизм сигнализации насыщения с помощью ECN-nonce",disqus_identifier="3540.rfc",disqus_url="http://rfc2.ru/3540.rfc";(function(){var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;dsq.src = "//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><div class="bubble">2007 - 2014 © <a href="../index.html" title="Русские переводы RFC">Русские переводы RFC</a>, IETF, ISOC.</div></div><div id="bottom" style="position:static !important;bottom:auto !important"><div class="bubble"><ul><li><!--723572853672--></li></ul></div></div><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter4680559 = new Ya.Metrika({id:4680559, webvisor:true, clickmap:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="http://mc.yandex.ru/watch/4680559" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --></body></html>
<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="../tpl/style.css@f4e332aa" type="text/css" /><link rel="prev" href="3" /><link rel="next" href="5" /><link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' /><style type="text/css">h1,h2,h3,h4{font-family:'Open Sans',sans-serif}</style><title>Перевод RFC 4884 — Расширенный протокол ICMP для поддержки сообщений из нескольких частей, стр. 4</title><meta name="author" content="Ronald P. Bonica, Der-Hwa Gan, Daniel C. Tappan, Carlos Pignataro" /><link rel="alternate" type="application/rss+xml" title="RFC2.ru - Русские Переводы RFC" href="../rss.xml"></head><body><div id="content"><div id="nav"><div class="icon i0"></div> <a href="../index.html" accesskey="`">На Главную</a></div><div id="search" class="ya-site-form ya-site-form_inited_no"><form action="http://yandex.ru/sitesearch" method="get" target="_blank"><input type="hidden" name="searchid" value="2154295"/><input type="hidden" name="l10n" value="ru"/><input type="hidden" name="reqenc" value=""/><input type="hidden" name="submit" value="Найти"/><input type="search" value="" name="text" placeholder="Поиск по RFC2.ru" /></form></div><div itemscope itemtype="http://schema.org/ScholarlyArticle"><meta itemprop="inLanguage" content="ru" /><meta itemprop="editor" content="ru" /><div id="header"><h1><a itemprop="headline" href="../4884.rfc">RFC 4884 — Расширенный протокол ICMP для поддержки сообщений из нескольких частей</a></h1></div><dl class="mute"><dt></dt><dd><div class="icon i1"></div> RFC: 4884</dd><dd><div class="icon i3"></div> Оригинал: <a href="original" target="_blank" rel="nofollow"><span itemprop="alternativeHeadline">Extended ICMP to Support Multi-Part Messages</span></a></dd><dd><div class="icon i2"></div> Категория: <span itemprop="articleSection">Предложенный стандарт</span></dd><dd><div class="icon i4"></div> Дата публикации: <time itemprop="datePublished" datetime="2007-04-08">Апрель 2007</time></dd><dd><div class="icon i5"></div> Авторы: <span itemprop="author">Ronald P. Bonica</span>, <span itemprop="author">Der-Hwa Gan</span>, <span itemprop="author">Daniel C. Tappan</span>, <span itemprop="author">Carlos Pignataro</span></dd><dd><div class="icon i6"></div> Перевод: <span itemprop="editor">Николай Малых</span></dd></dl><div class="pages"><p class="r"> <h2 class="pt"><span class="z">RFC 4884,</span> Страница 4 из 16</h2></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a accesskey="1" title="Первая страница" href="../4884.rfc" class="arr">&lArr;</a></li><li><a accesskey="2" title="На страницу назад" href="3"><b>&larr;</b></a></li><li><a href="../4884.rfc">1</a></li><li><a href="2">2</a></li><li><a href="3">3</a></li><li class="this"><span>4</span></li><li><a href="5">5</a></li><li><a href="6">6</a></li><li><a href="7">7</a></li><li><a href="8">8</a></li><li><a href="9">9</a></li><li><a class="x" href="10">10</a></li><li><a class="x" href="11">11</a></li><li><a class="x" href="12">12</a></li><li><a class="x" href="13">13</a></li><li><a class="x" href="14">14</a></li><li><a class="x" href="15">15</a></li><li><a class="x" href="16">16</a></li><li><a accesskey="3" title="На страницу вперед" href="5">&rarr;</a></li><li><a accesskey="4" title="Последняя страница" href="16">&rArr;</a></li></ul></div><div id="text" itemprop="articleBody"><h2 id="p4">4. Расширяемость ICMP</h2><p>RFC 792 определяет следующие типы сообщений ICMPv4:</p><ul class="dot"><li>Destination Unreachable — адресат недоступен</li><li>Time Exceeded — время жизни истекло</li><li>Parameter Problem — проблема с параметрами</li><li>Source Quench — слишком большая скорость передачи</li><li>Redirect — перенаправление</li><li>Echo Request/Reply — запрос/отклик эхо</li><li>Timestamp/Timestamp Reply — временная метка и отклик с временной сеткой</li><li>Information Request/Information Reply — информационный запрос/отклик</li></ul><p>[RFC1191] резервирует биты для поля Next-Hop MTU в сообщениях Destination Unreachable.</p><p>RFC 4443 определяет следующие типы сообщений ICMPv6:</p><ul class="dot"><li>Destination Unreachable — адресат недоступен</li><li>Packet Too Big — слишком большой пакет</li><li>Time Exceeded — время жизни истекло</li><li>Parameter Problem — проблема с параметрами</li><li>Echo Request/Reply — запрос/отклик эхо</li></ul><p>Многие сообщения ICMP в соответствии с текущими опеределениями являются расширяемыми. Разработчики протоколов могут расширять сообщения ICMP простым добавлением полей или структур данных в конец сообщения.</p><p>Однако ряд сообщений ICMP в соответствии с текущими определениями не поддерживает расширений:</p><ul class="dot"><li>ICMPv4 Destination Unreachable (type = 3)</li><li>ICMPv4 Time Exceeded (type = 11)</li><li>ICMPv4 Parameter Problem (type = 12)</li><li>ICMPv6 Destination Unreachable (type = 1)</li><li>ICMPv6 Packet Too Big (type = 2)</li><li>ICMPv6 Time Exceeded (type = 3)</li><li>ICMPv6 Parameter Problem (type = 4)</li></ul><p>Эти сообщения содержат поле «исходной дейтаграммы», которое включает начальные октеты дейтаграммы, вызвавшей сообщение ICMP. RFC 792 определеяет поле «исходной дейтаграммы» для сообщений ICMPv4. В RFC 792 поле «исходной дейтаграммы» включает заголовок IP и следующие за ним 8 октетов исходной дейтаграммы. [RFC1812] расширяет поле «исходной дейтаграммы», позволяя включать в него любое число октетов при условии, что размер сообщения ICMP не будет превышать минимальный размер буфера сборки IPv4 (т. е., 576 октета). RFC 4443 определяет поле «исходной дейтаграммы» для сообщений ICMPv6. В RFC 4443 поле «исходной дейтаграммы» всегда содержит столько октетов, сколько можно включить без превышения сообщением ICMP минимального размера IPv6 MTU (т. е., 1280 октетов).</p><p>К сожалению, поле «исходной дейтаграммы» не имеет атрибута размера. Приложения определяют размер этого поля по общему размеру сообщения ICMP. Если к сообщения добавляется структура расширения без добавления атрибута размера поля «исходной дейтаграммы», сообщение становится «неразборчивым». В частности, приложение не сможет определить, где заканчивается поле «исходной дейтаграммы» и начинается структура расширения.</p><p>Для решения этой проблемы в настоящем документе вводится 8-битовый атрибут размера для следующих сообщений ICMPv4:</p><ul class="dot"><li>Destination Unreachable (type = 3)</li><li>Time Exceeded (type = 11)</li><li>Parameter Problem (type = 12)</li></ul><p>Такой же 8-битовый атрибут размера добавляется в сообщения ICMPv6:</p><ul class="dot"><li>Destination Unreachable (type = 1)</li><li>Time Exceeded (type = 3)</li></ul><p>Атрибут размера должен задаваться в тех случаях, когда к перечисленным выше сообщениям добавляется ICMP Extension Structure.</p><p>Атрибут размера показывает размер поля «исходной дейтаграммы». Пространство для атрибута размера берется из резервных октетов, которые раньше были определены с нулевым значением.</p><p>Для сообщения ICMPv4 атрибут размера показывает число 32-битовых слов. При наличии атрибута размера поле «исходной дейтаграммы» должно дополняться нулями для выравнивания по ближайшей 32-битовой границе. Поскольку в каждом из затрагиваемых изменениями типов сообщений ICMPv4 был зарезервирован шестой октет, этот октет был выбран для размещения атрибута размера в сообщениях ICMPv4.</p><p>Для сообщения ICMPv6 атрибут размера показывает количество 64-битовых слов. При наличии атрибута размера поле «исходной дейтаграммы» должно дополняться нулями для выравнивания по ближайшей 64-битовой границе. Поскольку в каждом из затрагиваемых типов сообщений ICMPv6 шестой октет был резервным, этот октет был выбран для размещения атрибута размера в ICMPv6.</p><p>Для обеспечения совместимости с более ранними версиями при добавлении в конец сообщения ICMP Extension Structure и наличии поля «исходной дейтаграммы» последнее должно содержать не менее 128 октетов. Если в исходной дейтаграмме менее 128, поле «исходной дейтаграммы» должно дополняться нулями до 128 октетов (обоснование этого приведено в параграфе 5.1).</p><p>В следующих параграфах описан атрибут размера в сообщениях ICMP.</p></div></div><noindex><div class="pages"><p class="r"> <b>Страница 4 из 16</b></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a title="Первая страница" href="../4884.rfc" class="arr">&lArr;</a></li><li><a title="На страницу назад" href="3"><b>&larr;</b></a></li><li><a href="../4884.rfc">1</a></li><li><a href="2">2</a></li><li><a href="3">3</a></li><li class="this"><span>4</span></li><li><a href="5">5</a></li><li><a href="6">6</a></li><li><a href="7">7</a></li><li><a href="8">8</a></li><li><a href="9">9</a></li><li><a class="x" href="10">10</a></li><li><a class="x" href="11">11</a></li><li><a class="x" href="12">12</a></li><li><a class="x" href="13">13</a></li><li><a class="x" href="14">14</a></li><li><a class="x" href="15">15</a></li><li><a class="x" href="16">16</a></li><li><a title="На страницу вперед" href="5">&rarr;</a></li><li><a title="Последняя страница" href="16">&rArr;</a></li></ul></div></noindex><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname="rfc2",disqus_title="RFC 4884 - Расширенный протокол ICMP для поддержки сообщений из нескольких частей",disqus_identifier="4884.rfc",disqus_url="http://rfc2.ru/4884.rfc";(function(){var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;dsq.src = "//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><div class="bubble">2007 - 2014 © <a href="../index.html" title="Русские переводы RFC">Русские переводы RFC</a>, IETF, ISOC.</div></div><div id="bottom" style="position:static !important;bottom:auto !important"><div class="bubble"><ul><li><!--723572853672--></li></ul></div></div><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter4680559 = new Ya.Metrika({id:4680559, webvisor:true, clickmap:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="http://mc.yandex.ru/watch/4680559" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --></body></html>
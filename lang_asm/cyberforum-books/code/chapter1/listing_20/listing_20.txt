//определение смещения в файле PE по относительному виртуальному адресу
DWORD getoffs(DWORD vsm)
{
	DWORD fi=0;
	if(vsm<ais[0].VirtualAddress)return fi;
	for(int i=0; i<iw.FileHeader.NumberOfSections; i++)
	{
		if(vsm<ais[i].VirtualAddress&&i>0){
		fi=ais[i-1].PointerToRawData+(vsm-ais[i-1].VirtualAddress);
			break;}; 
	};
	if(i==iw.FileHeader.NumberOfSections)
		fi=ais[i-1].PointerToRawData+(vsm-ais[i-1].VirtualAddress);
	return fi;	
};

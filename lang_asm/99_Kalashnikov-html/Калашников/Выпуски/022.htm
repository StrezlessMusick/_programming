<HTML><HEAD> 
<title>Калашников.ru - Ассемблер? Это просто!.. (Выпуск № 022)</title>
<STYLE><!-- a:link, a:visited, a:active { text-decoration: none; color: #226622} 
a:hover { text-decoration: bold; color: #662266; } 
 .ff { 
font-family : Arial, helvetica, sans-serif; 
font-style : normal; 
font-variant : normal; 
} --></STYLE>
</HEAD>

<BODY body bgcolor=#CFE7E7>

<P align=center><A 
href="http://ad.ir.ru/bb.cgi?cmd=go&pubid=128269&pg=2&vbn=10001&nocache=77524" 
target=_top><IMG alt="InterReklama " border=0 
src="http://ad.ir.ru/bb.cgi?cmd=ad&pubid=128269&pg=2&vbn=10001&nocache=77524"></A></P>
<P align=center><A href="http://www.ir.ru" target=_top><FONT size=1>InterReklama 
Advertising</FONT></A> </P>
<HR>
<div align="center"><center>

<table border="1" cellpadding="0" cellspacing="0" width="100%"
bgcolor="#CDCD9C">
<tr>
<td colspan="3" width="100%"><p align="center"><font
color="#004080" size="5"><em><strong>Ассемблер?
Это просто! Учимся
программировать</strong></em></font><font
color="#000000" size="2"><br>
______________________________________</font></p>
<p align="center"><font color="#000000" size="4">
Выпуск N 022 (Специальный)</font></p>
</td>
</tr>
</table>
</center></div>

<div align="left">

<p><font color="#000000" size="4"><strong>Сегодня
в рассылке:</strong></font></p>

<dir type="disc">
<li><p align="left"><a href="#letters">Ваши письма</a></p>
</li>
<li><p align="left"><a href="#fewwords">Информация
для ВСЕХ</a>!!!</p>
</li>
</dir>

<hr>
<br>

<div align="center"><center>

<table border="0" cellpadding="0" cellspacing="0" width="100%"
bgcolor="#9CCDCD">
<tr>
<td align="center" width="100%"><a name="letters"><font
color="#004080" size="5"><strong>Ваши письма</strong></font></a></td>
</tr>
</table>
</center></div>

<p>Сегодняшний выпуск, как я и
обещал, полностью посвящен вашим
письмам. Спасибо вам, дорогие подписчики, что присылаете столько
интересной и полезной информации
для других читателей! Если бы была
возможность, то я бы опубликовывал
ВСЕ ваши письма, но, к сожалению, это
не всегда удается...</p>

<hr>

<p><strong>Hello, Олег!</strong></p>

<p>В вашей рассылке и в другом
материале встретил похожие
вопросы:</p>

<p><font size="3">Информация из рассылки:</font></p>

<p><em>Можно посчитать сколько раз за
одну секунду процессор сможет
сложить два любых числа от 0 до 65535.
Каждая команда процессора
выполняется определенное
количество тактов. Когда говорят,
что тактовая частота процессора
100Mhz, то это значит, что за секунду
проходит 100 миллионов тактов.</em></p>

<p>Информация из другого источника:</p>

<p><em>Вопрос: Сколько циклов за
секунду выполняет процессор с
тактовой частотой 75 MHz?</em></p>

<p><em>Ответ: Один мегагерц выполняет
1.000 циклов в секунду.</em></p>

<p>Так кто же прав?</p>

<p>Best regards, Sasha</p>

<p>________</p>

<p><font color="#004080">Мой комментарий.</font></p>

<p>И в самом деле? Наверное, я ошибся
в рассылке. Может, кто-нибудь из вас
знает ответ или другой вариант?</p>

<hr>

<p><font size="4"><strong>Вырезка с рассылки:</strong></font></p>

<p><em>Еще, вероятно, вы слышали о том,
что существуют вирусы, которые не
удаляются из памяти при
перезагрузке компьютера. Уверяю
вас: это невозможно. Вирус
находится в ОЗУ, которая очищается
после выключени питания.</em></p>

<p><font size="4"><strong>Письмо Артема:</strong></font></p>

<p>Извините, конечно, но вирус может храниться и в BIOS. Может это и не совсем правда
но Вам виднее...</p>

<p>Привожу наскоро слепленный
алгоритм. Полностью не уверен, но,
по крайней мере, до меня этого никто
не делал:</p>

<ul>
<li>Проверить на наличие Flash BIOS</li>
<li>Проверить Flash BIOS на
зараженность (уходим,
если заражен)</li>
<li>Считать вектор Int19 из таблицы
(прерывание загрузки)</li>
<li>Прочитаем первые 5 байт из
точки входа Int19.</li>
<li>Просканируем BIOS на наличие
свободного места для вируса
(нули)</li>
<li>Установим Flash BIOS в режим записи
(обычно он в режиме ReadOnly)</li>
<li>Запишем вирус в найденную
область нулей</li>
<li>Запишем переход на вирус на
точку входа в Int19 (сплайсинг)</li>
<li>Поставим Flash BIOS обратно в режим
&quot;ReadOnly&quot;</li>
</ul>

<p>Похоже на работоспособный
алгоритм.</p>

<p>Единственное предназначение Int19 -
вызваться вовремя процесса
загрузки, загрузить Boot сектор в
память и передать ему управление.
Прерывание именно то, которое нам и
надо изменить.</p>

<p>У меня есть полный документ
который я находил где в Интернет если вам интересно пришлю.</p>

<p>Артем. (<a href="http://www.mjk.msk.ru/~dron/">http://www.mjk.msk.ru/~dron/</a>)</p>

<p>________</p>

<p><font color="#004080">Мой комментарий.</font></p>

<p>Насколько мне известно, вирус
может записаться в CMOS. Там есть
немного памяти свободной (примерно
14 байт). Но кто-нибудь сможет
написать вирус, который бы занимал
14 байт (или хотя бы часть его,
которая бы оказалась
работоспособной)?</p>

<p>А может я уже от жизни отстаю, и
разработчики увеличили объем
свободной памяти в CMOS (Flash BIOS или еще
где-нибудь)? Кто подскажет нам?</p>

<hr>

<p><strong>Олег, добрый день.</strong></p>

<p>Как мне кажется, в программе
вируса есть маленькое упущение.
Дело в том, что одной проверки на
ПРЕВЫШЕНИЕ длинны файла 64К - не
достаточно. Ведь вирус ДОПОЛНЯЕТ длину файла собой, значит, при
критической длине заражаемой
программы - возможно превышение
предела в 64 К после заражения, что
вызовет ошибку. И вообще - это
просто не очень корректно. Это то,
что бросилось в глаза сразу по
прочтении выпуска.</p>

<p>Возможно, Вы допустили эту ошибку
умышленно, дабы &quot;остудить&quot; не в
меру горячие головы... В таком
случае, прошу прощения, что
потревожил. Еще два слова - на мой
взгляд, технологию работы с файлами
(как я понимаю, именно она
отрабатывалась в примерах) можно
было бы изучать на более
&quot;мирных&quot; объектах. Но это,
конечно ИМХО.</p>

<p>С уважением, Игорь Вознюк<br>
Security manager</p>

<p>________</p>

<p><font color="#004080">Мой комментарий.</font></p>

<p>Спасибо Вам, уважаемый Игорь!
Единственный человек обратил
внимание на этот момент и написал
мне. Но мне больше хотелось бы,
чтобы подобные комментарии
(уточнения, пояснения) приходили от
людей, которые учат Ассемблер &quot;с
нуля&quot; по нашей рассылке.</p>

<p>Я знаю, что среди подписчиков есть
такие, кто уже знаком неплохо с
языком. Почему обычно они присылают
свои письма, указывая, что и где
неточно?</p>

<hr>

<p><strong>Здравствуйте, Олег!</strong></p>

<p>Ваш эксперт Slava V. совершил очень
существенную ошибку в своем
оптимизированном варианте - это
использование инструкции Xchg. Эта
инструкция на время своего
выполнения захватывает системную
шину памяти (префикс Lock), что может
привести (и приводит) к
существенным задержкам.</p>

<p>В связи с этим предлагаю свой
вариант:</p>

<p>_________________</p>

<p>Count_dx proc</p>

<p>push ax<br>
push dx<br>
mov al, dh <br>
cbw ;ax=dh<br>
xor dh, dh <br>
mov di,ax<br>
shl ax,6<br>
shl di,4<br>
add di,ax<br>
add di,dx<br>
shl di,1<br>
pop dx<br>
pop ax</p>

<p>Count_dx endp</p>

<p>_____________</p>

<p>Пришлось написать небольшую
программку на Паскале, с помощью
которой можно сравнить скорости
работы различных вариантов этого
фрагмента. Вот ссылка <a
href="http://akp.nm.ru/get_linear_test.zip">http://akp.nm.ru/get_linear_test.zip</a>
(1,8Kb).</p>

<p>Вот такие результаты я получил на
своем Celeron 433 (тестирование проводил
под Win 98):</p>

<p>исходный вариант <em>(т.е. тот,
который был опубликован в рассылке
- прим. О.К.)</em> - 1,713 мс (*)<br>
вариант Slava V. - 2,393 мс<br>
мой вариант - 1,540 мс</p>

<p>* - вот вам и медленная инструкции
mul :) Ядра 6-го семейства процессоров
от Intel (кстати, и от AMD тоже) содержат
существенно ускоренные инструкции
умножения, деления в отличии от
предыдущих семейств. Вот так :)</p>

<p>По поводу результатов выполнения
на других процах конкретных
результатов привести не могу, т.к.
нет возможности.</p>

<p>Алексей.</p>

<p>P.S. Кстати, тут в голову пришла
любопытная мысль. А почему бы Вам не
расширить круг экспертов еще одним
видом экспертов? Для оптимизации
программ.</p>

<p>________</p>

<p><font color="#004080">Мой комментарий.</font></p>

<p>Алексей, Вы молодец!</p>

<p>Поэкспериментировав с Вашей
программой вместе со Славой
(эксперт Slava V.), мы пришли к выводу,
что на разных процессорах
различных фирм те или иные
инструкции выполняются гораздо
быстрее или наоборот.</p>

<p>Слава очень хотел связаться и
поговорить с Вами по поводу
программирования, оптимизации и пр.
Напишите мне, пожалуйста, могу ли я
дать Ваш электронный адрес Славе?</p>

<p>Вопросы по оптимизации программ
можно задавать теперь эксперту
Алексею по адресу:</p>

<p><a href="mailto:ExpertOptimize@eGroups.com">ExpertOptimize@eGroups.com</a></p>

<p>Если есть еще желающие стать
экспертами в этой области - пишите
мне!</p>

<hr>

<p><strong>Здравствуйте, Олег!</strong></p>

<p>Имея опыт работы с языками
низкого уровня мне трудно оценить
твою работу. Для меня это
повторение пройденного материала.</p>

<p>Есть один момент: мы рассмотрели
создание вируса, но надо показать и
создание антивирусной программы.
Ведь Ассемблер опасен как и вилка, и
народу надо показать созидательную
сущность языка. Т.е. создание
восстанавливающих программ
(антивирусы, восстановление файлов
после удаления и т.д.). И если
неохота это делать в этом курсе, то
этот вопрос надо (я так думаю)
подробно отразить в книге.</p>

<p>Еще один момент: работая с языком,
невозможно изучить его, набирая
чужой код. Домашнее задание
необходимо. А на следующем занятии
производить разбор полетов. Не надо
добиваться того, чтобы его
высылали, надо просто показать как
проблема решается. Алгоритмы можно
поглядеть на <a href="http://www.chat.ru/~alglib/">http://www.chat.ru/~alglib/</a>
<em>(очень интересно для математиков
и &quot;крутых&quot; программистов на
мой взгляд - прим. О.К.)</em>. Хотя это
дополнительная нагрузка на
преподавателя.</p>

<p>С уважением<br>
Евгений Смирнов</p>

<p>________</p>

<p><font color="#004080">Мой комментарий.</font></p>

<p>Мы обязательно напишем антивирус.
Об этом я писал в 20 выпуске
рассылки.</p>

<p>Что же касается домашнего
задания, то могу сказать следующее.
В том же, 20-ом выпуске я попросил
вас, уважаемые подписчики, написать
и выслать мне (при желании)
антивирус для нашего вируса (если
вы сможете написать его сами).
Очевидно, это задание оказалось
слишком трудным для вас, т.к. я не
получил ни одного (!) варианта! Как
же так? Неужели действительно
сложно было?</p>

<p>Я постараюсь, конечно,
придумывать задания для вас по мере
возможности. Но, думаю, что вы сами
себе уже нашли неплохое занятие:
кто-то сам уже пишет оболочку,
кто-то резидентами увлекся, кто-то
еще чем-нибудь. Если так, то я очень
рад. Дерзайте, дорогие мои!</p>

<p>Например, Старчиков Алексей (<a
href="http://www.vunder.newmail.ru/">http://www.vunder.newmail.ru/</a>).
Вот, молодец, парень! Постоянно
присылает мне свои разработки,
программы, с которыми знакомиться
мне очень интересно. Но, к
сожалению, у меня слишком мало
времени...</p>

<p>Поэтому:</p>

<p>Надеюсь, что скоро напишу на Перле
(сам!) программу, которая будет
принимать у вас ваши варианты,
мысли, предложения и пр. и
опубликовывать их на сайте, что
существенно упростит мне труд. Если
вам будет не сложно, то сможете
присылать все, что вы
&quot;состряпали&quot; на сайт для всех
(потом, когда скрипт будет готов).
Надеюсь, что многие читатели нашей
рассылки (да и не только) с
удовольствием ознакомяться с вашим
творчеством.</p>

<hr>

<p><strong>Здравствуйте, Олег!</strong></p>

<p>Учебник Iсzelion'a по ассемблеру под
Win32 <a href="http://win32asm.cjb.net/">http://win32asm.cjb.net/</a>
вы знаете? Когда-то он мне очень
понравился. На той же страничке
есть неплохой транслятор Masm32.</p>

<p>С уважением, Олег Свенцицкий.</p>

<p>________</p>

<p><font color="#004080">Мой комментарий.</font></p>

<p>Да, между прочим, это отличная
вещь! К сожалению, только на
английском языке пока. Однако, те
кто хоть немного знаком с
английским, смогут понять смысл и
научиться программировать на
Ассемблере под Windows.</p>

<p>Но не стоит спешить! Пройдите пока
весь курс по DOS, иначе вы мало чего
поймете!</p>

<p>Спасибо, Олег!</p>

<hr>

<p align="center"><a name="fewwords"><font size="5"><strong>Информация
для всех</strong></font></a></p>

<p><font size="4"><strong>Уважаемые новые
подписчики!</strong></font></p>

<p>Пожалуйста, обращайте внимание на
размер высылаемого архива! Если вы
не получили затребованный архив, то
причина может быть в том, что ваш
почтовый ящик либо набит, либо не
принимает письма такого объема.</p>

<p>За все время существования
kalashnikoff.ru ко мне вернулось всего два
письма. Первое не дошло по той
причине, что ящик был перегружен, а
второе - не найден адресат:</p>

<p>___________________</p>

<p>----- Transcript of session follows -----<br>
 ... while talking to mc4.law13.hotmail.com.:<br>
&gt;&gt;&gt; RCPT To:&lt;kklopikk@hotmail.com&gt;<br>
&lt;&lt;&lt; 550 Requested action not taken:user account inactive<br>
550 5.1.1 &lt;kklopikk@hotmail.com&gt;... <font color="#800040"
size="4"><strong>User unknown</strong></font><br>
___________________</p>

<p>Всего же отправлено было более 90
писем с архивами! Неужели у всех
тех, кто отправил письма-запрсы не
было выхода в Сеть, или связь была
настолько ужасна?</p>

<hr>

<p><font size="4"><strong>Уважаемые
подписчики, задающие вопросы!</strong></font></p>

<p>Пожалуйста, обратите внимание,
чем отличаются следующие
экспертные группы:</p>

<p><font size="3"><strong>1. Эксперты по
ассемблерам (MASM/TASM) </strong></font><em>(Как
сассемблировать программу? Что
означают другие параметры в
командной строке) </em><font size="3"><strong>- </strong></font><a
href="mailto:ExpertAssm@egroups.com"><font size="3"><strong>ExpertAssm@egroups.com</strong></font></a><font
size="3">;</font></p>

<p><font size="3"><strong>2. Эксперы по общим
вопросам программирования на
ассемблере под DOS </strong></font><em>(&quot;Посмотрите
мою программу и исправьте
ошибки&quot;. &quot;Написал программу, а
она почему-то не работает так, как
бы я хотел. Что мне делать?
Программу прилагаю&quot;.) </em><font size="3"><strong>-
</strong></font><a href="mailto:ExpertGeneralAssm@egroups.com"><font
size="3"><strong>ExpertGeneralAssm@egroups.com</strong></font></a><font
size="3"><strong>.</strong></font></p>

<p><font size="4"><strong>Первая группа
отвечает на вопросы, связанные с
программой-ассемблером (MASM/TASM), а не
с программированием на Ассемблере
под DOS!!!</strong></font></p>

<p><font size="3"><strong>Если вы не знаете,
почему не работает написанная вами
по материалам рассылки программа (и
прочие подобные вопросы), то
задавать их нужно ВТОРОЙ группе!!!</strong></font></p>

<hr>

<p><font size="4"><strong>Уважаемые эксперты!</strong></font></p>

<p>Я очень рад, что наша экспертная
группа начинает набирать обороты.
Стало приходить много вопросов.</p>

<p>Я еще раз подчеркну, что если вы
устали и хотите отписаться от
группы, то необходимо просто
направить мне письмо в
произвольной форме с просьбой
исключить вас. В письме, пожалуйста,
укажите электронный адрес, по
которому вы зарегистрированы.</p>

<p>Также, пожалуйста, не забывайте
отправлять мне копию вашего ответа
и цитировать переписку или вопрос
подписчика, чтобы я мог фиксировать
ваши письма и распределять места.</p>

<p>Еще просьба. Пожалуйста,
направляйте копию не по адресу
assembler@beep.ru, а - <a
href="mailto:Assembler@Kalashnikoff.ru">Assembler@Kalashnikoff.ru</a>.
Даже если вы забыли, то ничего
страшного! Предыдущий ящик еще
работает.</p>

<p>Вроде всё!</p>

<hr>

<p><em>Еще раз разрешите выразить вам,
уважаемые подписчики, свою
благодарность за присланные
письма. Очень рад, что не забываете!
Надеюсь, что и впредь мы все будем
вместе. Я же, в свою очередь,
постараюсь постоянно придумывать
что-то новое, интересное для вас.</em></p>

<p><em>В следующем выпуске (скорее
всего) напишем продолжение нашего
резидента.</em></p>

<p><em>Удачи вам всем в изучении
Ассемблера!</em></p>

<hr>

<p><font size="4"><em><strong>С уважением,</strong></em></font></p>

<p><font size="3" face="Arial Cyr"><strong>Автор
рассылки:</strong> Калашников Олег <br>
<strong>URL сайта подписчиков:</strong> </font><a
href="http://www.Kalashnikoff.ru"><font size="3" face="Arial Cyr">http://www.Kalashnikoff.ru</font></a><font
face="Arial Cyr"> <br>
<strong>E-mail автора:</strong> </font><a
href="mailto:Assembler@Kalashnikoff.ru"><font face="Arial Cyr">Assembler@Kalashnikoff.ru</font></a><font
face="Arial Cyr"> <br>
<strong>ICQ:</strong> 68951340</font></p>

<p>Москва, 2001.</p>

<hr>
<div align="center"><center>

<table border="0" cellpadding="0" cellspacing="0" width="100%"
bgcolor="#DDEEFF" bordercolor="#808080"
bordercolorlight="#FFFFFF">
<tr>
<td colspan="3" bgcolor="#BDDEFF"><font color="#400040"
size="1"><strong>(C) Авторское право
принадлежит автору рассылки.</strong>
Использование материала из
рассылки в коммерческих и иных
подобных целях, а также
публичное публикование без
письменного согласия автора
влечет ответственность за
нарушение авторских прав. </font></td>
</tr>
</table>
</center></div>

</div>

<hr>

<p align="center">[<a href="023.htm">Следующий выпуск</a>] [<a target=_BLANK href="http://www.Kalashnikoff.ru/">На главную страницу</a>]</p>

<HR NOSHADE><CENTER>
<!-- SpyLOG v2 f:0211 --><script language="javascript">  
u="u496.71.spylog.com";d=document;nv=navigator;na=nv.appName;p=1;  
bv=Math.round(parseFloat(nv.appVersion)*100);  
n=(na.substring(0,2)=="Mi")?0:1;rn=Math.random();z="p="+p+"&rn="+rn;y="";  
y+="<a href='http://"+u+"/cnt?f=3&p="+p+"&rn="+rn+"' target=_blank>";  
y+="<img src='http://"+u+"/cnt?"+z+  
"&r="+escape(d.referrer)+"&pg="+escape(window.location.href)+"' border=0 width=88 height=31 alt='SpyLOG'>";  
y+="</a>"; d.write(y);if(!n) { d.write("<"+"!--"); }//--></script><noscript><p align="center"><a 
href="http://u496.71.spylog.com/cnt?f=3&amp;p=1" 
target="_blank"><img src="http://u496.71.spylog.com/cnt?p=1" alt="SpyLOG" align="middle" border="0"></a> 
<a href="http://u496.71.spylog.com/cnt?f=3&amp;p=1" target="_blank"></noscript></a> 
<a href="http://u496.71.spylog.com/cnt?f=3&amp;p=1" target="_blank"> 
<script language="javascript1.2"><!-- if(!n) { d.write("--"+">"); }//--></script></a> 
<!-- SpyLOG --> 
 
 <a target=_top href="http://www.one.ru"><img src="http://cnt.one.ru/cgi-bin/cnt.cgi?id=16871&t=9" width=88 height=31 alt="be number one" border=0></a> 
 
 <script language="JavaScript"><!-- 
d=document;a='';a+=';r='+escape(d.referrer) 
js=10//--></script><script language="JavaScript1.1"><!-- 
a+=';j='+navigator.javaEnabled() 
js=11//--></script><script language="JavaScript1.2"><!-- 
s=screen;a+=';s='+s.width+'*'+s.height 
a+=';d='+(s.colorDepth?s.colorDepth:s.pixelDepth) 
js=12//--></script><script language="JavaScript1.3"><!-- 
js=13//--></script><script language="JavaScript"><!-- 
d.write('<a href="http://top.list.ru/jump?from=87856"'+ 
' target=_top><img src="http://top.list.ru/counter'+ 
'?id=87856;t=54;js='+js+a+';rand='+Math.random()+ 
'" alt="TopList"'+' border=0 height=31 width=88></a>') 
if(js>11)d.write('<'+'!-- ')//--></script><noscript><a 
target=_top href="http://top.list.ru/jump?from=87856"><img 
src="http://top.list.ru/counter?js=na;id=87856;t=54" 
border=0 height=31 width=88 
alt="TopList"></a></noscript><script language="JavaScript"><!-- 
if(js>11)d.write('--'+'>')//--></script> 
 
<br><br> 

</BODY></HTML>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- 
This manual is for GNU Automake (version 1.15,
31 December 2014), a program that creates GNU standards-compliant
Makefiles from template files.

Copyright (C) 1995-2014 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License,
Version 1.3 or any later version published by the Free Software
Foundation; with no Invariant Sections, with no Front-Cover texts,
and with no Back-Cover Texts.  A copy of the license is included in the
section entitled "GNU Free Documentation License."
 -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->
<head>
<title>automake: Preparing Distributions</title>

<meta name="description" content="automake: Preparing Distributions">
<meta name="keywords" content="automake: Preparing Distributions">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Indices.html#Indices" rel="index" title="Indices">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Use-Cases.html#Use-Cases" rel="up" title="Use Cases">
<link href="Dependency-Tracking.html#Dependency-Tracking" rel="next" title="Dependency Tracking">
<link href="DESTDIR.html#DESTDIR" rel="prev" title="DESTDIR">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="Preparing-Distributions"></a>
<div class="header">
<p>
Next: <a href="Dependency-Tracking.html#Dependency-Tracking" accesskey="n" rel="next">Dependency Tracking</a>, Previous: <a href="DESTDIR.html#DESTDIR" accesskey="p" rel="prev">DESTDIR</a>, Up: <a href="Use-Cases.html#Use-Cases" accesskey="u" rel="up">Use Cases</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Indices.html#Indices" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Preparing-Distributions-1"></a>
<h4 class="subsection">2.2.11 Preparing Distributions</h4>
<a name="index-Preparing-distributions"></a>
<a name="index-Packages_002c-preparation"></a>
<a name="index-Distributions_002c-preparation"></a>

<p>We have already mentioned <code>make dist</code>.  This target collects all
your source files and the necessary parts of the build system to
create a tarball named <samp><var>package</var>-<var>version</var>.tar.gz</samp>.
</p>
<a name="index-distcheck-better-than-dist"></a>

<p>Another, more useful command is <code>make distcheck</code>.  The
<code>distcheck</code> target constructs
<samp><var>package</var>-<var>version</var>.tar.gz</samp> just as well as <code>dist</code>,
but it additionally ensures most of the use cases presented so far
work:
</p>
<ul>
<li> It attempts a full compilation of the package (see <a href="Basic-Installation.html#Basic-Installation">Basic Installation</a>), unpacking the newly constructed tarball, running
<code>make</code>, <code>make check</code>, <code>make install</code>, as well as
<code>make installcheck</code>, and even <code>make dist</code>,
</li><li> it tests VPATH builds with read-only source tree (see <a href="VPATH-Builds.html#VPATH-Builds">VPATH Builds</a>),
</li><li> it makes sure <code>make clean</code>, <code>make distclean</code>, and <code>make
uninstall</code> do not omit any file (see <a href="Standard-Targets.html#Standard-Targets">Standard Targets</a>),
</li><li> and it checks that <code>DESTDIR</code> installations work (see <a href="DESTDIR.html#DESTDIR">DESTDIR</a>).
</li></ul>

<p>All of these actions are performed in a temporary directory, so that no
root privileges are required.  Please note that the exact location and the
exact structure of such a subdirectory (where the extracted sources are
placed, how the temporary build and install directories are named and how
deeply they are nested, etc.) is to be considered an implementation detail,
which can change at any time; so do not rely on it.
</p>
<p>Releasing a package that fails <code>make distcheck</code> means that one of
the scenarios we presented will not work and some users will be
disappointed.  Therefore it is a good practice to release a package
only after a successful <code>make distcheck</code>.  This of course does
not imply that the package will be flawless, but at least it will
prevent some of the embarrassing errors you may find in packages
released by people who have never heard about <code>distcheck</code> (like
<code>DESTDIR</code> not working because of a typo, or a distributed file
being erased by <code>make clean</code>, or even <code>VPATH</code> builds not
working).
</p>
<p>See <a href="Creating-amhello.html#Creating-amhello">Creating amhello</a>, to recreate <samp>amhello-1.0.tar.gz</samp> using
<code>make distcheck</code>.  See <a href="Checking-the-Distribution.html#Checking-the-Distribution">Checking the Distribution</a>, for more
information about <code>distcheck</code>.
</p>
<hr>
<div class="header">
<p>
Next: <a href="Dependency-Tracking.html#Dependency-Tracking" accesskey="n" rel="next">Dependency Tracking</a>, Previous: <a href="DESTDIR.html#DESTDIR" accesskey="p" rel="prev">DESTDIR</a>, Up: <a href="Use-Cases.html#Use-Cases" accesskey="u" rel="up">Use Cases</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Indices.html#Indices" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>

<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!-->
<html class=" js video no-maskImage placeholder" lang="en"><!--<![endif]--><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><script async="" src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/cbgapi.loaded_1"></script><script async="" src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/cbgapi.loaded_0"></script>
  <meta charset="utf-8">
  <title>Autoconf - Алексей Махоткин</title>
  <meta name="author" content="Алексей Махоткин">

  
  <meta name="description" content="Autoconf Mar 7th, 2007 Copyright (c) Алексей Махоткин 2001
Впервые эта статья была напечатана в журнале " Программист",="" n10,="" 2001="" год="" Запрещается="" &hellip;"="">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
  <link rel="canonical" href="http://squadette.ru/autotools-ru/article2.html">
  <link href="http://squadette.ru/favicon.png" rel="icon">
  <link href="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/jXHR.js" type="text/javascript"></script><script gapi_processed="true" src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/plusone.js" async="" type="text/javascript"></script><script src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/all.js" id="facebook-jssdk"></script><script src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/watch.js" async="" type="text/javascript"></script><script src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/widgets.js" id="twitter-wjs"></script><script src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/ga.js" async="" type="text/javascript"></script><script src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/modernizr-2.js"></script>
  <script src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/ender.js"></script>
  <script src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/octopress.js" type="text/javascript"></script>
  <link href="http://squadette.ru/atom.xml" rel="alternate" title="Алексей Махоткин" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/css_002.css" rel="stylesheet" type="text/css">
<link href="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/css.css" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-546988-5']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



<script type="text/javascript" src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/openapi.js"></script>

<script type="text/javascript">
  VK.init({apiId: 3427377, onlyWidgets: true});
</script>

<script src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/embed.js" async="" type="text/javascript"></script><script src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/widgets.js" async="" type="text/javascript"></script><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_close_icon:active{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_loader{background-color:#f2f2f2;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3b5998;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{max-height:590px;min-height:590px;max-width:500px;min-width:500px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;left:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #29447e;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f2f2f2;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}
.fbpluginrecommendationsbarleft,.fbpluginrecommendationsbarright{position:fixed !important;bottom:0;z-index:999}.fbpluginrecommendationsbarleft{left:10px}.fbpluginrecommendationsbarright{right:10px}</style><script charset="UTF-8" async="" src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/alfie.js"></script></head>

<body data-twttr-rendered="true">
  <header role="banner"><hgroup>
	<a href="http://squadette.ru/"><img src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/squadette-userpic.png" style="float: left; padding-right: 20px;" height="100" width="100"></a>
  <h1><a href="http://squadette.ru/">Алексей Махоткин</a></h1>
  
    <h2>домашняя страница</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://squadette.ru/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input name="q" value="site:squadette.ru" type="hidden">
    <input class="search" name="q" results="0" placeholder="Search" type="text">
  </fieldset><fieldset class="mobile-nav"><select><option value="">Navigate…</option><option value="http://squadette.ru/">» Blog</option><option value="http://squadette.ru/blog/archives">» Archives</option><option value="http://squadette.ru/about">» Обо мне</option><option value="http://squadette.ru/content/index.html">» Контент</option><option selected="selected" value="http://squadette.ru/atom.xml">» RSS</option></select></fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="http://squadette.ru/">Blog</a></li>
  <li><a href="http://squadette.ru/blog/archives">Archives</a></li>
  <li><a href="http://squadette.ru/about">Обо мне</a></li>
  <li><a href="http://squadette.ru/content/index.html">Контент</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">Autoconf</h1>
    <p class="meta">








  


<time datetime="2007-03-07T20:06:00+01:00" pubdate="" data-updated="true">Mar 7<span>th</span>, 2007</time></p>
  </header>
  
  <pre>Copyright (c) Алексей Махоткин 2001
Впервые эта статья была напечатана в журнале "Программист", N10, 2001 год

Запрещается перепечатка без письменного разрешения автора.
</pre>




<h1>GNU Autotools – инфраструктура для сборки программ: Autoconf</h1>




<h1>Введение</h1>




<p>
Пакет Autoconf служит двум основным целям: поддерживает написание
переносимых программ, а также позволяет включать или выключать
дополнительные возможности пакета (например, пользователь может
захотеть собрать программу с поддержкой компрессии файлов или без).
</p>




<h1>Переносимые программы</h1>




<p>
Перед каждым программистом, пишущим программу под какой-то из
вариантов UNIX’а, в той или иной степени встает проблема сборки этой
программы под другими вариантами UNIX’а.  По историческим причинам
UNIX-совместимые операционные системы довольно сильно отличаются друг
от друга, и приходится прикладывать некоторые, порою ощутимые усилия,
для обеспечения переносимости.  Autoconf обеспечивает инфраструктуру,
облегчающую эту задачу.
</p>




<p>
Вообще, на тему переноса программ на различные UNIX’ы можно написать
целую книгу, а размер этой статьи не столь велик, поэтому я только
вкратце затрону этот вопрос.
</p>




<h2>Теория</h2>




<p>
Общее правило – не следует чрезмерно и без нужды увлекаться вопросами
переносимости.  То бишь, с самого начала достаточно не писать кода,
который, очевидно, будет работать только на машине, на которой он был
скомпилирован: например, код, считающий, что младший байт в слове
находится перед старшим, или же код с ассемблерными вставками, или же
использование жестко привязанных к системе заголовочных файлов,
например <tt>#include &lt;linux/icmp.h&gt;</tt> (их, конечно же, можно использовать,
обернув в соответствующие <tt>#ifdef</tt>, но об этом ниже).  Если не допускать
подобных глупостей, то работа по переносу значительно облегчится (а
если допускать, да еще делать это без предупреждения в каком-нибудь
глубоко спрятанном месте программы, то перенос может превратиться в
пытку).

</p>




<p>
Теперь нужно проверить (и исправить, если нужно) сборку и
работоспособность программы на “основных” вариантах UNIX: в данный
момент, по моему мнению, это Linux и FreeBSD для
свободно-распространяемых, и Solaris&nbsp;– для коммерческих.  Работу на
остальных вариантах UNIX нужно исправлять только если а) у вас есть к
ним непосредственный доступ и немного свободного времени; б) ваши
пользователи работают именно с этим UNIX’ом; в) кто-то, кто пользуется
этим UNIX’ом, прислал вам исправления.  В процессе жизни вашей
программы она рано или поздно будет перенесена на все UNIX’ы, которые
действительно имеют значение, а до этого беспокоиться о переносе
совершенно не следует.
</p>




<p>
В документации на Autoconf есть целая глава “Существующие тесты”
(Existing tests), в которой описано множество вариантов специфических
заголовочных файлов, библиотек, функций, типов данных и прочего,
которые можно проверить с помощью стандартных макросов Autoconf.
Помимо этого, с помощью макроса <tt>AC_CHECK_HEADER()</tt> можно проверить
существование заголовочного файла, с помощью <tt>AC_CHECK_LIB()</tt> можно
проверить существование библиотеки, с помощью <tt>AC_CHECK_FUNC()</tt>&nbsp;–
существование функции.  Кроме того, там же можно прочитать о различных
возможностях компилятора&nbsp;C, которые существуют не на всякой платформе,
и о многом другом.

</p>




<h2>Практика</h2>




<p>
Каждый ваш исходный файл должен содержать в начале (_до_ всех
остальных директив <tt>#include</tt>) директиву препроцессора
</p>




<pre>#include "config.h"
</pre>




<p>

Для создания этого файла нужно, во-первых, вписать в <tt>configure.in</tt>,
ближе к началу, строчку
</p>




<pre>AM_CONFIG_HEADER(config.h)
</pre>




<p>
а во-вторых, запустить программу <tt>autoheader</tt>, которая обработает
<tt>configure.in</tt> и создаст файл <tt>config.h.in</tt>.  Рекомендуется всегда
использовать именно такое имя этого файла, и никакое другое, потому
что так привычнее и понятнее.  Если вы пользуетесь системой контроля
версий, то добавьте в нее только файл <tt>config.h.in</tt>, и ни в коем случае
не добавляйте файл <tt>config.h</tt>.

</p>




<p>
После того, как вы написали в своем скрипте <tt>configure.in</tt> все макросы,
которые проверяют все возможности, используемые в программе, нужно
обработать исходные файлы и “обернуть” все строки, в которых
подключаются нестандартные заголовочные файлы, в директивы
<tt>#ifdef</tt>/<tt>#endif</tt>, чтобы они подключались только на тех платформах, на
которых их наличие было проверено скриптом <tt>configure</tt> и описано в файле
<tt>config.h</tt>.
</p>




<p>
Не забывайте после внесения исправлений на предмет работы под
очередным вариантом UNIX проверять, не сломалась ли компиляция под уже
поддерживаемым вариантом.
</p>




<h1>Содержимое <tt>configure.in</tt></h1>




<p>
Скрипт configure, который выполняется пользователем, представляет
собой обычный скрипт на языке Bourne Shell.  Этот скрипт генерируется
из шаблона, <tt>configure.in</tt>, с помощью макропроцессора m4 (он похож на
препроцессор языка&nbsp;C, но гораздо более мощный, и не завязан ни на один
язык программирования).  Вы, как разработчик пакета, редактируете,
естественно, только шаблон, никогда не трогая сам файл <tt>configure</tt>.
Скрипт <tt>configure</tt> генерируется из скрипта <tt>configure.in</tt> с помощью
запуска программы <tt>autoconf</tt>.

</p>




<h2>Макросы</h2>




<p>
Внутри файла <tt>configure.in</tt> можно использовать специальные макросы,
определенные пакетом Autoconf, вперемешку с обычным кодом на языке
Bourne Shell.  В предыдущей статье мы уже приводили пример
минимального <tt>configure.in</tt>:
</p>




<pre>=== configure.in ===
AC_INIT([src/hello.c])
AM_INIT_AUTOMAKE([hello], [0.1])
AC_PROG_CC

AC_OUTPUT([Makefile src/Makefile])
=== configure.in ===
</pre>




<p>
Названия макросов принято писать заглавными буквами.  В данном примере
используется четыре макроса: <tt>AC_INIT</tt>, <tt>AM_INIT_AUTOMAKE</tt>, <tt>AC_PROG_CC</tt> и
<tt>AC_OUTPUT</tt>.  Параметры макросов указаны в круглых скобках через
запятую.  Квадратные скобки фактически играют роль кавычек (m4
позволяет назначать кавычками любую последовательность символов).
</p>




<p>
Внутри макросов (мы рассматриваем только макросы, включенные в
дистрибутив: написание своих макросов описано в документации к
Autoconf) делается масса различных вещей: вызовы компилятора, поиски
файлов, вызовы вспомогательных утилит.
</p>




<p>
Например, макрос <tt>AC_PROG_CC</tt> призван выяснить, какой компилятор C
следует использовать.  Если при вызове <tt>./configure</tt> переменная
окружения&nbsp;<tt>CC</tt> установлена в какое-то значение, то в качестве
компилятора используется именно оно (например, можно задать компилятор
с полным путем); в противном случае, проверяется, существует ли
исполняемый файл ’<tt>gcc</tt>’, и может ли он скомпилировать тривиальную
программу; если не может, то проверяет существование компилятора с
именем ’<tt>cc</tt>’.  Если все попытки закончились безуспешно, то пользователю
сообщается об ошибке, и скрипт <tt>configure</tt> прекращает свою работу.
Окончательно выясненное имя компилятора находится в переменной
окружения&nbsp;<tt>CC</tt>.

</p>




<h2>Передача информации в Makefile</h2>




<p>
В качестве последнего шага скрипт <tt>configure</tt> вызывает
специальный макрос <tt>AC_SUBST</tt>, передавая ему в качестве параметра имя
этой переменной.  Переменные, помеченные таким образом, называются
”<dfn>выходными переменными</dfn>” (<dfn>output variables</dfn>).  В конце работы скрипт
configure станет создавать файлы <tt>Makefile</tt> из соответствующих файлов

<tt>Makefile.in</tt>.  Предположим, что скрипт configure выяснил, что в
качестве компилятора следует использовать программу ’<tt>gcc</tt>’ (то бишь,
переменная окружения&nbsp;<tt>CC</tt> содержит значение ”<tt>gcc</tt>”), а внутри файла
<tt>Makefile.in</tt> написано
</p>




<pre>    CC = @CC@

</pre>




<p>
В результате при создании файла <tt>Makefile</tt> выходная переменная&nbsp;<tt>CC</tt>
(записанная в виде ”<tt>@CC@</tt>”) будет заменена на соответствующее значение
переменной окружения:
</p>




<pre>    CC = gcc

</pre>




<p>
В файлах <tt>Makefile.in</tt>, которые Automake создает из <tt>Makefile.am</tt>,
используется довольно много выходных переменных, в которых задаются
имена множества программ, используемых для сборки вашего пакета.
Вообще, выходные переменные&nbsp;– один из двух основных способов
передачи информации о конфигурации в ваши файлы <tt>Makefile</tt>.
</p>




<p>
Обычно вам довольно редко потребуется использовать макрос <tt>AC_SUBST</tt> в
ваших скриптах <tt>configure.in</tt>: чаще всего он будет вызываться неявно, из
других стандартных макросов.  Например, макрос <tt>AC_CHECK_PROG</tt>

превращает свой первый аргумент в выходную переменную.
</p>




<p>
Второй, более распространенный способ влияния на сборку программы&nbsp;–
задание переменных препроцессора с помощью макроса <tt>AC_DEFINE</tt>.
Например, если вы хотите выяснить, установлена ли в системе библиотека
zlib, чтобы использовать её в своей программе, то можете сделать это с
помощью макроса <tt>AC_CHECK_LIB</tt>, а в параметре <tt>action-if-found</tt> вызвать
макрос <tt>AC_DEFINE</tt> с параметром <tt>HAVE_ZLIB</tt>.  Потом в вашей программе
можно будет пользоваться директивой препроцессора <tt>#ifdef&nbsp;HAVE_ZLIB</tt>,
чтобы включить или выключить те или иные куски кода.

</p>




<p>
Все переменные препроцессора, объявленные с помощью макроса <tt>AC_DEFINE</tt>,
помещаются в файл <tt>config.h</tt> (который генерируется из файла <tt>config.h.in</tt>
на этапе конфигурации пакета).  
</p>




<h1>Практика</h1>




<p>
В оставшихся двух разделах мы рассмотрим практическое применение
Autoconf на двух простейших, но хорошо иллюстрирующих технологию
примерах.
</p>




<h2>Подключение сторонних библиотек</h2>




<p>
Предположим, вы хотите, чтобы если у пользователя в системе была
установлена Zlib, то она использовалась бы для компрессии данных.  Так
как в нашей программе <tt>hello</tt> сложно придумать, что можно было бы
компрессировать, то мы ограничимся тем, что будем выводить на экран
дополнительное сообщение с версией этой библиотеки, пользуясь одной из
её функций.
</p>




<p>

Zlib использует заголовочный файл <tt>zlib.h</tt>, библиотечный файл <tt>libz.a</tt>, а
функция, возвращающая версию библиотеки, называется <tt>zlibVersion()</tt>.
</p>




<p>
Чтобы на этапе конфигурации пакета определить наличие в системе
заголовочного файла <tt>zlib.h</tt>, добавим в <tt>configure.in</tt> вызов макроса
<tt>AC_CHECK_HEADERS()</tt>, а чтобы убедиться, что сами библиотечные файлы
установлены, добавим макрос <tt>AC_CHECK_LIB()</tt>.

</p>




<p>
Теперь наш файл <tt>configure.in</tt> выглядит так:
</p>




<pre>=== configure.in ===
AC_INIT([src/hello.c])
AM_INIT_AUTOMAKE([hello], [0.2])
AC_PROG_CC

AM_CONFIG_HEADER(config.h)

AC_CHECK_HEADERS(zlib.h)
AC_CHECK_LIB(z, zlibVersion)

AC_OUTPUT([Makefile src/Makefile])
=== configure.in ===
</pre>




<p>
Запустим <tt>autoheader</tt>, чтобы обновить файл <tt>config.h.in</tt>, потом запустим

<tt>autoconf</tt>, чтобы пересоздать скрипт <tt>configure</tt>.  В файле <tt>config.h</tt>,
который будет создан этим скриптом, объявлены два препроцессорных
символа: <tt>HAVE_ZLIB_H</tt>, который определен, если присутствует файл
<tt>zlib.h</tt>, и <tt>HAVE_LIBZ</tt>, который определен, если существует библиотека
<tt>libz</tt>.
</p>




<p>

Воспользуемся функцией <tt>zlibVersion()</tt> в файле <tt>main.c</tt>, обернув её в
директивы препроцессора:
</p>




<pre>=== main.c ===
#include "config.h"

#include "hello.h"

#ifdef HAVE_ZLIB_H
#include "zlib.h"
#endif

int main(void) {
        print_hello();

#ifdef HAVE_LIBZ
        printf("Zlib version %s detected\n", zlibVersion());
#else
        puts("Zlib not detected");
#endif

        exit(0);
}
=== main.c ===
</pre>




<p>
Теперь можно запускать <tt>./configure</tt> (скорее всего, на вашей машине
стоят заголовочные файлы от Zlib и она сама.  Если нет, то попробуйте
без них, потом установите соответствующие пакеты и попробуйте еще
раз):

</p>




<pre>    $ ./configure
    creating cache ./config.cache
    checking for a BSD compatible install... /usr/bin/install -c
    [ ... skipped ... ]
    checking for zlib.h... yes
    checking for zlibVersion in -lz... yes
    [ ... skipped ... ]
    creating config.h
</pre>




<p>
И пересобираем нашу программу:
</p>




<pre>    $ make
    make  all-recursive
    make[1]: Entering directory `/home/alexm/autotools-ru/hello'
    Making all in src
    [ ... skipped ... ]
    gcc  -g -O2   -o hello  main.o hello.o  -lz 
    make[2]: Leaving directory `/home/alexm/autotools-ru/hello/src'
</pre>




<p>

Как видите, библиотека libz автоматически оказалась добавлена в строку
компиляции исполняемого файла, и его можно попробовать запустить:
</p>




<pre>    $ ./src/hello
    Hello, world!
    Zlib version 1.1.3 detected
</pre>




<p>
Ура?
</p>




<p>
Замечание: скрипт <tt>configure</tt> во время работы создает кэш результатов
конфигурации, который сильно ускоряет результаты его работы.  Этот кэш
находится в файле <tt>config.cache</tt>.  К сожалению, в этом кэше могут
остаться устаревшие данные.  Например, если вы сначала выполните наш
скрипт <tt>configure</tt> без библиотеки Zlib, а потом установите её на машину
и выполните его еще раз, то он не обнаружит этой библиотеки, потому
что в кэше записано, что такой библиотеки нет.  Просто удалите этот
кэш-файл, и перезапустите <tt>configure</tt>.

</p>




<h2>Включение дополнительных возможностей</h2>




<p>
Предположим, вы хотите, чтобы помимо традиционного сообщения ”<tt>Hello,
world!</tt>” (а также информации о версии Zlib), ваша программа выводила бы
какую-нибудь смешную фразу.  При этом часть ваших пользователей угрюмы
и не хотят веселиться, поэтому вы хотите, чтобы они сами решали, нужно
ли им такое, и включали выдачу смешных фраз на этапе компиляции.
Давайте добавим дополнительный ключ к скрипту <tt>configure</tt> (кстати, давно
ли вы запускали <tt>./configure –help</tt>?):
</p>




<pre>
=== configure.in ===
AC_MSG_CHECKING([if funny messages are needed])
AC_ARG_WITH([funny-messages],
[  --with-funny-messages         Enable additional funny messages],
[ if test "$with_funny_messages" = "yes"; then 
     AC_DEFINE(ENABLE_FUNNY_MESSAGES)
     AC_MSG_RESULT([yes])
  else
     AC_MSG_RESULT([no])
  fi
], [AC_MSG_RESULT([no])])
=== configure.in ===
</pre>




<p>
В этом кусочке кода нужно внимательно и аккуратно разобраться с
кавычками.  Здесь вызывается два макроса: <tt>AC_MSG_CHECKING()</tt>, который
выдает первую часть сообщения ”<tt>Checking if funny messages are
needed…</tt>”), и <tt>AC_ARG_WITH</tt>, который создает еще один ключ скрипта
<tt>configure</tt>, а также задает реакцию на этот ключ.
</p>




<p>
У макроса <tt>AC_ARG_WITH</tt> четыре аргумента, заключенных в квадратные
скобки.  Первый аргумент, ”<tt>funny-messages</tt>”, задает краткое название
возможности, которая будет включена или отключена с помощью этой
опции.  Второй аргумент задает краткую строку помощи, которая будет
выдана, если запустить скрипт <tt>configure</tt> с ключом <tt>–help</tt>.  Третий
аргумент самый длинный, он даже занимает несколько строк:

</p>




<pre>  if test "$with_funny_messages" = "yes"; then 
     AC_DEFINE(ENABLE_FUNNY_MESSAGES)
     AC_MSG_RESULT([yes])
  else
     AC_MSG_RESULT([no])
  fi
</pre>




<p>
Как видите, это – практически обычный код на языке Shell, который
выполняется, если пользователь указал ключ в командной строке.  С
помощью переменной окружения <tt>$with_funny_messages</tt> можно выяснить,
какой именно из разрешенных вариантов написания этого ключа был
использован:
</p>




<pre>    $ ./configure --with-funny-messages
    $ ./configure --without-funny-messages
    $ ./configure --with-funny-messages=yes
    $ ./configure --with-funny-messages=no

</pre>




<p>
В примере указан самый надежный способ определения, нужно ли включить
или выключить соответствующую возможность.  Как видите, в случае если
смешные фразы следует включить, то мы определяем символ препроцессора
<tt>ENABLE_FUNNY_MESSAGES</tt> и заканчиваем сообщение, которое выдал макрос
<tt>AC_MSG_CHECKING()</tt>, словом ”<tt>yes</tt>”.   Если смешные фразы включать не
следует, то мы только добавляем ”<tt>no</tt>”, и больше ничего не делаем.
</p>




<p>
Наконец, последний, четвертый аргумент макроса <tt>AC_ARG_WITH</tt> позволяет
задать действия, которые выполняются, если ключ не указан совсем.  По
умолчанию смешные сообщения не включены, поэтому мы просто говорим
”<tt>no</tt>” с помощью макроса <tt>AC_MSG_RESULT()</tt>.

</p>




<p>
Для того, чтобы символ препроцессора <tt>ENABLE_FUNNY_MESSAGES</tt> попал в
файл <tt>config.h.in</tt>, а затем в <tt>config.h</tt>, его нужно описать в файле
<tt>acconfig.h</tt> в верхнем каталоге проекта:
</p>




<pre>
=== acconfig.h ===
/* Define if you want to see funny messages.  */

#undef ENABLE_FUNNY_MESSAGES
=== acconfig.h ===
</pre>




<p>
и выполнить autoheader.  Готово.
</p>




<p>
Запускаем <tt>configure</tt>, разрешая компиляцию со смешными фразами:
</p>




<pre>    $ ./configure --with-funny-messages
    creating cache ./config.cache
    checking for a BSD compatible install... /usr/bin/install -c
    [ ... skipped ... ]
    checking if funny messages are needed... yes
    [ ... skipped ... ]
    creating config.h
</pre>




<p>
Проверяем, что внутри созданного файла <tt>config.h</tt> нужный символ
препроцессора теперь определен:
</p>




<pre>=== config.h ===
/* Define if you want to see funny messages.  */
#define ENABLE_FUNNY_MESSAGES 1
=== config.h ===
</pre>




<p>
Осталось только добавить в <tt>main.c</tt> код для выдачи смешных сообщений,
заключив его в соответствующие директивы препроцессора:

</p>




<pre>=== main.c ===
#ifdef ENABLE_FUNNY_MESSAGES

puts("Here goes a funny message");

#endif /* ENABLE_FUNNY_MESSAGES */
=== main.c ===
</pre>




<p>
Скомпилируем и запустим программу:
</p>




<pre>    $ ./src/hello
    Hello, world!
    Zlib version 1.1.3 detected
    Here goes a funny message
</pre>




<p>
Можно также убедиться, что будучи скомпилированной без ключа

<tt>–with-funny-messages</tt>, наша программа говорит на одну строчку
меньше:
</p>




<pre>    $ ./src/hello
    Hello, world!
    Zlib version 1.1.3 detected
</pre>




<p>
Ура.
</p>




<p>
Замечание: во время работы скрипта <tt>configure</tt> отладочная информация о
выполняемых действиях записывается в файл <tt>config.log</tt>.  Анализируя этот
файл, можно выяснять причины появления неожиданных результатов
конфигурации, если они вдруг будут неожиданными.

</p>




<h1>Заключение</h1>




<p>
Активное использование Autoconf позволяет добиться большой гибкости
при конфигурировании вашего программного пакета.  После того, как вы
стали использовать Automake вместо доморощенных файлов <tt>Makefile</tt>,
следующий шаг&nbsp;– дополнительные ключи конфигурации и поддержка
переносимости программы между различными системами UNIX.
</p>




<p>
В комплекте программы Autoconf есть исчерпывающая документация которая
полностью покрывает все вопросы, не затронутые в этой короткой статье.
Эта документация была переведена на русский язык Алексом Оттом, и
свободно доступна в Интернете по адресу
<a href="http://alexm.here.ru/autotools-ru/">http://alexm.here.ru/autotools-ru/</a>

</p>




<p>
Следующая статья из этой серии будет посвящена созданию разделяемых
библиотек с помощью Libtool, небольшому, но полезному пакету Shtool, а
также некоторым дополнительным вопросам использования пакетов из серии
Autotools.
</p>




<h1>Ссылки</h1>




<ul>
<li>Основная страница проекта Autoconf:

    <a href="http://sources.redhat.com/autoconf/">http://sources.redhat.com/autoconf/</a></li>

<li>Русская страница по Autotools:

    <a href="http://alexm.here.ru/autotools-ru/">http://alexm.here.ru/autotools-ru/</a></li>


<li>Перевод документации на Autoconf:

    <a href="http://alexm.here.ru/autoconf-ru/">http://alexm.here.ru/autoconf-ru/</a></li>


<li>Книга “GNU Autoconf, Automake, and Libtool”:

    <a href="http://sources.redhat.com/autobook/">http://sources.redhat.com/autobook/</a></li>


<li>Архив макросов для Autoconf:

    <a href="http://www.gnu.org/software/ac-archive/">http://www.gnu.org/software/ac-archive/</a></li>


</ul>


  
    <footer>
      <p class="meta">
        
        








  


<time datetime="2007-03-07T20:06:00+01:00" pubdate="" data-updated="true">Mar 7<span>th</span>, 2007</time>
        
      </p>
      
        <div class="sharing">
  
  <iframe style="width: 109px; height: 20px;" data-twttr-rendered="true" title="Twitter Tweet Button" class="twitter-share-button twitter-tweet-button twitter-share-button twitter-count-horizontal" src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/tweet_button.htm" allowtransparency="true" scrolling="no" id="twitter-widget-0" frameborder="0"></iframe>
  
  
  <div id="___plusone_0" style="text-indent: 0px; margin: 0px; padding: 0px; background: none repeat scroll 0% 0% transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 90px; height: 20px;"><iframe title="+1" data-gapiattached="true" src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/fastbutton.htm" name="I0_1414769317189" id="I0_1414769317189" vspace="0" tabindex="0" style="position: static; top: 0px; width: 90px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" scrolling="no" marginwidth="0" marginheight="0" hspace="0" frameborder="0" width="100%"></iframe></div>
  
 
<div id="vk_like" style="display: inline-block; height: 22px; width: 180px; background: none repeat scroll 0% 0% transparent; position: relative; clear: both;"><iframe style="overflow: hidden; height: 22px; width: 180px; z-index: 150;" id="vkwidget1" scrolling="no" src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/widget_like.htm" name="fXDdb87e" frameborder="0" height="22" width="100%"></iframe></div>
<script type="text/javascript">
VK.Widgets.Like("vk_like", {type: "button", verb: 1});
</script>  

  
    <div fb-iframe-plugin-query="app_id=212934732101925&amp;href=http%3A%2F%2Fsquadette.ru%2Fautotools-ru%2Farticle2.html&amp;locale=en_US&amp;sdk=joey&amp;send=true&amp;show_faces=false&amp;width=250" fb-xfbml-state="rendered" class="fb-like fb_iframe_widget" data-send="true" data-width="250" data-show-faces="false"><span style="vertical-align: bottom; width: 250px; height: 28px;"><iframe class="" src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/like.htm" style="border: medium none; visibility: visible; width: 250px; height: 28px;" title="fb:like Facebook Social Plugin" scrolling="no" allowtransparency="true" name="f2d6436614f21de" frameborder="0" height="1000px" width="250px"></iframe></span></div>
  

</div>

      
    </footer>
  
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><iframe verticalscrolling="no" horizontalscrolling="no" src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/a.htm" style="width: 100% ! important; border: medium none ! important; overflow: hidden ! important; height: 928px ! important;" title="Disqus" tabindex="0" scrolling="no" allowtransparency="true" data-disqus-uid="2" id="dsq-2" frameborder="0" width="100%"></iframe></div>
  </section>

</div>

<aside class="sidebar thirds">
  
    <section class="first odd">
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="http://squadette.ru/blog/2014/10/19/coursera-bioinformatics-algorithms/">Онлайн-курс «Алгоритмы биоинформатики» на  Coursera</a>
      </li>
    
      <li class="post">
        <a href="http://squadette.ru/blog/2014/08/12/bazy-dannykh-i-nosql/">Базы данных и NoSQL</a>
      </li>
    
      <li class="post">
        <a href="http://squadette.ru/blog/2013/12/04/copywriting/">Подборка текстов по копирайтингу</a>
      </li>
    
      <li class="post">
        <a href="http://squadette.ru/blog/2013/06/19/high-scalability-3/">Устройство сетевых серверов</a>
      </li>
    
      <li class="post">
        <a href="http://squadette.ru/blog/2013/06/06/gnu-makefile/">Использование GNU Make для многотредовой обработки файлов</a>
      </li>
    
  </ul>
</section>
<section class="even">
<div>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7306996412762055";
/* 250x250 */
google_ad_slot = "5902831299";
google_ad_width = 250;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript" src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/show_ads.js">
</script>
</div>
</section>

<section data-twttr-id="twttr-sandbox-0" class="odd">

<iframe title="Twitter Timeline" style="border: medium none; max-width: 100%; min-width: 180px; width: 210px;" allowfullscreen="" class="twitter-timeline twitter-timeline-rendered" allowtransparency="true" scrolling="no" id="twitter-widget-1" frameborder="0" height="600"></iframe>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

</section>

<section class="first even">
<a href="http://stackoverflow.com/users/7754/squadette">
<img src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/7754.png" alt="profile for squadette at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for squadette at Stack Overflow, Q&amp;A for professional and enthusiast programmers" height="58" width="208">
</a>
</section>

<section class="odd">
  <h1>GitHub Repos</h1>
  <ul id="gh_repos"><li><a href="https://github.com/squadette/project-euler">project-euler</a><p>My solutions to project-euler.net in Haskell</p></li><li><a href="https://github.com/squadette/tiff">tiff</a><p>libtiff with fixes to PDF files generation</p></li><li><a href="https://github.com/squadette/pppd">pppd</a><p>Fixes for pppd, gathered from various distributions</p></li></ul>
  
  <a href="https://github.com/squadette">@squadette</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'squadette',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    <span class="toggle-sidebar"></span></div>
  </div>
  <footer role="contentinfo"><p>
  Copyright © 2014 - Алексей Махоткин -
  <span class="credit">Powered by <a href="http://octopress.org/">Octopress</a></span>

	&nbsp;&nbsp;&nbsp;

<!-- Yandex.Metrika informer -->
<a href="http://metrika.yandex.ru/stat/?id=22962932&amp;from=informer" target="_blank" rel="nofollow"><img src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/3_1_FFFFFFFF_EFEFEFFF_0_pageviews.png" style="width:88px; height:31px; border:0;" alt="Яндекс.Метрика" title="Яндекс.Метрика: данные за сегодня (просмотры, визиты и уникальные посетители)" onclick="try{Ya.Metrika.informer({i:this,id:22962932,lang:'ru'});return false}catch(e){}"></a>
<!-- /Yandex.Metrika informer -->

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter22962932 = new Ya.Metrika({id:22962932,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/22962932" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'squadette';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://squadette.ru/autotools-ru/article2.html';
        var disqus_url = 'http://squadette.ru/autotools-ru/article2.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div class=" fb_reset" id="fb-root"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/ehazDpFPEnK.htm" style="border: medium none;" tabindex="-1" title="Facebook Cross Domain Communication Frame" aria-hidden="true" id="fb_xdm_frame_http" scrolling="no" allowtransparency="true" name="fb_xdm_frame_http" frameborder="0"></iframe><iframe src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/ehazDpFPEnK_002.htm" style="border: medium none;" tabindex="-1" title="Facebook Cross Domain Communication Frame" aria-hidden="true" id="fb_xdm_frame_https" scrolling="no" allowtransparency="true" name="fb_xdm_frame_https" frameborder="0"></iframe></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/ping.htm" style="display: none;" scrolling="no" allowtransparency="true" name="f14b1e5ff94b788" frameborder="0"></iframe></div></div></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>







<iframe style="display: none;" allowtransparency="true" scrolling="no" id="rufous-sandbox" frameborder="0"></iframe><iframe tabindex="-1" style="width: 1px; height: 1px; position: absolute; top: -100px;" src="Autoconf%20-%20%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9%20%D0%9C%D0%B0%D1%85%D0%BE%D1%82%D0%BA%D0%B8%D0%BD_files/postmessageRelay.htm" id="oauth2relay1229032127" name="oauth2relay1229032127"></iframe></body></html>
<html lang="en">
<head>
<title>Test Functions - Autoconf</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Autoconf">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Writing-Test-Programs.html#Writing-Test-Programs" title="Writing Test Programs">
<link rel="prev" href="Guidelines.html#Guidelines" title="Guidelines">
<link rel="next" href="Generating-Sources.html#Generating-Sources" title="Generating Sources">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual (24 April 2012) is for GNU Autoconf
(version 2.69),
a package for creating scripts to configure source code packages using
templates and an M4 macro package.

Copyright (C) 1992-1996, 1998-2012 Free Software Foundation,
Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, no Front-Cover texts, and
     no Back-Cover Texts.  A copy of the license is included in the
     section entitled ``GNU Free Documentation License.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Test-Functions"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Generating-Sources.html#Generating-Sources">Generating Sources</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Guidelines.html#Guidelines">Guidelines</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Writing-Test-Programs.html#Writing-Test-Programs">Writing Test Programs</a>
<hr>
</div>

<h4 class="subsection">6.2.2 Test Functions</h4>

<p>These days it's safe to assume support for function prototypes
(introduced in C89).

   <p>Functions that test programs declare should also be conditionalized for
C++, which requires &lsquo;<samp><span class="samp">extern "C"</span></samp>&rsquo; prototypes.  Make sure to not
include any header files containing clashing prototypes.

<pre class="example">     #ifdef __cplusplus
     extern "C"
     #endif
     void *valloc (size_t);
</pre>
   <p>If a test program calls a function with invalid parameters (just to see
whether it exists), organize the program to ensure that it never invokes
that function.  You can do this by calling it in another function that is
never invoked.  You can't do it by putting it after a call to
<code>exit</code>, because GCC version 2 knows that <code>exit</code>
never returns
and optimizes out any code that follows it in the same block.

   <p>If you include any header files, be sure to call the functions
relevant to them with the correct number of arguments, even if they are
just 0, to avoid compilation errors due to prototypes.  GCC
version 2
has internal prototypes for several functions that it automatically
inlines; for example, <code>memcpy</code>.  To avoid errors when checking for
them, either pass them the correct number of arguments or redeclare them
with a different return type (such as <code>char</code>).

   </body></html>


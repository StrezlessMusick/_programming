<html lang="en">
<head>
<title>Quadrigraphs - Autoconf</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Autoconf">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="M4-Quotation.html#M4-Quotation" title="M4 Quotation">
<link rel="prev" href="Changequote-is-Evil.html#Changequote-is-Evil" title="Changequote is Evil">
<link rel="next" href="Balancing-Parentheses.html#Balancing-Parentheses" title="Balancing Parentheses">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual (24 April 2012) is for GNU Autoconf
(version 2.69),
a package for creating scripts to configure source code packages using
templates and an M4 macro package.

Copyright (C) 1992-1996, 1998-2012 Free Software Foundation,
Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, no Front-Cover texts, and
     no Back-Cover Texts.  A copy of the license is included in the
     section entitled ``GNU Free Documentation License.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Quadrigraphs"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Balancing-Parentheses.html#Balancing-Parentheses">Balancing Parentheses</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Changequote-is-Evil.html#Changequote-is-Evil">Changequote is Evil</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="M4-Quotation.html#M4-Quotation">M4 Quotation</a>
<hr>
</div>

<h4 class="subsection">8.1.6 Quadrigraphs</h4>

<p><a name="index-quadrigraphs-1238"></a><a name="index-g_t_0040samp_007b_0040_0040S_007c_0040_0040_007d-1239"></a><a name="index-g_t_0040samp_007b_0040_0040_0026t_0040_0040_007d-1240"></a><!-- Info cannot handle `:' in index entries. -->
<a name="index-g_t_0040samp_007b_0040_0040_003c_003a_0040_0040_007d-1241"></a><a name="index-g_t_0040samp_007b_0040_0040_003a_003e_0040_0040_007d-1242"></a><a name="index-g_t_0040samp_007b_0040_0040_0025_003a_0040_0040_007d-1243"></a><a name="index-g_t_0040samp_007b_0040_0040_0040_007b_003a_0040_0040_007d-1244"></a><a name="index-g_t_0040samp_007b_0040_0040_003a_0040_007d_0040_0040_007d-1245"></a>
When writing an Autoconf macro you may occasionally need to generate
special characters that are difficult to express with the standard
Autoconf quoting rules.  For example, you may need to output the regular
expression &lsquo;<samp><span class="samp">[^[]</span></samp>&rsquo;, which matches any character other than &lsquo;<samp><span class="samp">[</span></samp>&rsquo;. 
This expression contains unbalanced brackets so it cannot be put easily
into an M4 macro.

   <p>Additionally, there are a few m4sugar macros (such as <code>m4_split</code>
and <code>m4_expand</code>) which internally use special markers in addition
to the regular quoting characters.  If the arguments to these macros
contain the literal strings &lsquo;<samp><span class="samp">-=&lt;{(</span></samp>&rsquo; or &lsquo;<samp><span class="samp">)}&gt;=-</span></samp>&rsquo;, the macros
might behave incorrectly.

   <p>You can work around these problems by using one of the following
<dfn>quadrigraphs</dfn>:

     <dl>
<dt>&lsquo;<samp><span class="samp">@&lt;:@</span></samp>&rsquo;<dd>&lsquo;<samp><span class="samp">[</span></samp>&rsquo;
<br><dt>&lsquo;<samp><span class="samp">@:&gt;@</span></samp>&rsquo;<dd>&lsquo;<samp><span class="samp">]</span></samp>&rsquo;
<br><dt>&lsquo;<samp><span class="samp">@S|@</span></samp>&rsquo;<dd>&lsquo;<samp><span class="samp">$</span></samp>&rsquo;
<br><dt>&lsquo;<samp><span class="samp">@%:@</span></samp>&rsquo;<dd>&lsquo;<samp><span class="samp">#</span></samp>&rsquo;
<br><dt>&lsquo;<samp><span class="samp">@{:@</span></samp>&rsquo;<dd>&lsquo;<samp><span class="samp">(</span></samp>&rsquo;
<br><dt>&lsquo;<samp><span class="samp">@:}@</span></samp>&rsquo;<dd>&lsquo;<samp><span class="samp">)</span></samp>&rsquo;
<br><dt>&lsquo;<samp><span class="samp">@&amp;t@</span></samp>&rsquo;<dd>Expands to nothing. 
</dl>

   <p>Quadrigraphs are replaced at a late stage of the translation process,
after <samp><span class="command">m4</span></samp> is run, so they do not get in the way of M4 quoting. 
For example, the string &lsquo;<samp><span class="samp">^@&lt;:@</span></samp>&rsquo;, independently of its quotation,
appears as &lsquo;<samp><span class="samp">^[</span></samp>&rsquo; in the output.

   <p>The empty quadrigraph can be used:

     <ul>
<li>to mark trailing spaces explicitly

     <p>Trailing spaces are smashed by <samp><span class="command">autom4te</span></samp>.  This is a feature.

     <li>to produce quadrigraphs and other strings reserved by m4sugar

     <p>For instance &lsquo;<samp><span class="samp">@&lt;@&amp;t@:@</span></samp>&rsquo; produces &lsquo;<samp><span class="samp">@&lt;:@</span></samp>&rsquo;.  For a more
contrived example:

     <pre class="example">          m4_define([a], [A])m4_define([b], [B])m4_define([c], [C])dnl
          m4_split([a )}&gt;=- b -=&lt;{( c])
          &rArr;[a], [], [B], [], [c]
          m4_split([a )}@&amp;t@&gt;=- b -=&lt;@&amp;t@{( c])
          &rArr;[a], [)}&gt;=-], [b], [-=&lt;{(], [c]
</pre>
     <li>to escape <em>occurrences</em> of forbidden patterns

     <p>For instance you might want to mention <code>AC_FOO</code> in a comment, while
still being sure that <samp><span class="command">autom4te</span></samp> still catches unexpanded
&lsquo;<samp><span class="samp">AC_*</span></samp>&rsquo;.  Then write &lsquo;<samp><span class="samp">AC@&amp;t@_FOO</span></samp>&rsquo;. 
</ul>

   <p>The name &lsquo;<samp><span class="samp">@&amp;t@</span></samp>&rsquo; was suggested by Paul Eggert:

   <blockquote>
I should give some credit to the &lsquo;<samp><span class="samp">@&amp;t@</span></samp>&rsquo; pun.  The &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo; is my
own invention, but the &lsquo;<samp><span class="samp">t</span></samp>&rsquo; came from the source code of the
ALGOL68C compiler, written by Steve Bourne (of Bourne shell fame),
and which used &lsquo;<samp><span class="samp">mt</span></samp>&rsquo; to denote the empty string.  In C, it would
have looked like something like:

<pre class="example">     char const mt[] = "";
</pre>
   <p class="noindent">but of course the source code was written in Algol 68.

   <p>I don't know where he got &lsquo;<samp><span class="samp">mt</span></samp>&rsquo; from: it could have been his own
invention, and I suppose it could have been a common pun around the
Cambridge University computer lab at the time. 
</blockquote>

   </body></html>


<html lang="en">
<head>
<title>Quoting and Parameters - Autoconf</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Autoconf">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="M4-Quotation.html#M4-Quotation" title="M4 Quotation">
<link rel="prev" href="One-Macro-Call.html#One-Macro-Call" title="One Macro Call">
<link rel="next" href="Quotation-and-Nested-Macros.html#Quotation-and-Nested-Macros" title="Quotation and Nested Macros">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual (24 April 2012) is for GNU Autoconf
(version 2.69),
a package for creating scripts to configure source code packages using
templates and an M4 macro package.

Copyright (C) 1992-1996, 1998-2012 Free Software Foundation,
Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, no Front-Cover texts, and
     no Back-Cover Texts.  A copy of the license is included in the
     section entitled ``GNU Free Documentation License.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Quoting-and-Parameters"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Quotation-and-Nested-Macros.html#Quotation-and-Nested-Macros">Quotation and Nested Macros</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="One-Macro-Call.html#One-Macro-Call">One Macro Call</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="M4-Quotation.html#M4-Quotation">M4 Quotation</a>
<hr>
</div>

<h4 class="subsection">8.1.3 Quoting and Parameters</h4>

<p>When M4 encounters &lsquo;<samp><span class="samp">$</span></samp>&rsquo; within a macro definition, followed
immediately by a character it recognizes (&lsquo;<samp><span class="samp">0</span></samp>&rsquo;<small class="dots">...</small>&lsquo;<samp><span class="samp">9</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">#</span></samp>&rsquo;, &lsquo;<samp><span class="samp">@</span></samp>&rsquo;, or &lsquo;<samp><span class="samp">*</span></samp>&rsquo;), it will perform M4 parameter
expansion.  This happens regardless of how many layers of quotes the
parameter expansion is nested within, or even if it occurs in text that
will be rescanned as a comment.

<pre class="example">     define([none], [$1])
     &rArr;
     define([one], [[$1]])
     &rArr;
     define([two], [[[$1]]])
     &rArr;
     define([comment], [# $1])
     &rArr;
     define([active], [ACTIVE])
     &rArr;
     none([active])
     &rArr;ACTIVE
     one([active])
     &rArr;active
     two([active])
     &rArr;[active]
     comment([active])
     &rArr;# active
</pre>
   <p>On the other hand, since autoconf generates shell code, you often want
to output shell variable expansion, rather than performing M4 parameter
expansion.  To do this, you must use M4 quoting to separate the &lsquo;<samp><span class="samp">$</span></samp>&rsquo;
from the next character in the definition of your macro.  If the macro
definition occurs in single-quoted text, then insert another level of
quoting; if the usage is already inside a double-quoted string, then
split it into concatenated strings.

<pre class="example">     define([single], [a single-quoted $[]1 definition])
     &rArr;
     define([double], [[a double-quoted $][1 definition]])
     &rArr;
     single
     &rArr;a single-quoted $1 definition
     double
     &rArr;a double-quoted $1 definition
</pre>
   <p>Posix states that M4 implementations are free to provide implementation
extensions when &lsquo;<samp><span class="samp">${</span></samp>&rsquo; is encountered in a macro definition. 
Autoconf reserves the longer sequence &lsquo;<samp><span class="samp">${{</span></samp>&rsquo; for use with planned
extensions that will be available in the future GNU M4 2.0,
but guarantees that all other instances of &lsquo;<samp><span class="samp">${</span></samp>&rsquo; will be output
literally.  Therefore, this idiom can also be used to output shell code
parameter references:

<pre class="example">     define([first], [${1}])first
     &rArr;${1}
</pre>
   <p>Posix also states that &lsquo;<samp><span class="samp">$11</span></samp>&rsquo; should expand to the first parameter
concatenated with a literal &lsquo;<samp><span class="samp">1</span></samp>&rsquo;, although some versions of
GNU M4 expand the eleventh parameter instead.  For
portability, you should only use single-digit M4 parameter expansion.

   <p>With this in mind, we can explore the cases where macros invoke
macros<small class="enddots">...</small>

   </body></html>


<html lang="en">
<head>
<title>Changed Macro Writing - Autoconf</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Autoconf">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Autoconf-1.html#Autoconf-1" title="Autoconf 1">
<link rel="prev" href="Changed-Results.html#Changed-Results" title="Changed Results">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual (24 April 2012) is for GNU Autoconf
(version 2.69),
a package for creating scripts to configure source code packages using
templates and an M4 macro package.

Copyright (C) 1992-1996, 1998-2012 Free Software Foundation,
Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, no Front-Cover texts, and
     no Back-Cover Texts.  A copy of the license is included in the
     section entitled ``GNU Free Documentation License.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Changed-Macro-Writing"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Changed-Results.html#Changed-Results">Changed Results</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Autoconf-1.html#Autoconf-1">Autoconf 1</a>
<hr>
</div>

<h4 class="subsection">18.5.5 Changed Macro Writing</h4>

<p>When defining your own macros, you should now use <code>AC_DEFUN</code>
instead of <code>define</code>.  <code>AC_DEFUN</code> automatically calls
<code>AC_PROVIDE</code> and ensures that macros called via <code>AC_REQUIRE</code>
do not interrupt other macros, to prevent nested &lsquo;<samp><span class="samp">checking...</span></samp>&rsquo;
messages on the screen.  There's no actual harm in continuing to use the
older way, but it's less convenient and attractive.  See <a href="Macro-Definitions.html#Macro-Definitions">Macro Definitions</a>.

   <p>You probably looked at the macros that came with Autoconf as a guide for
how to do things.  It would be a good idea to take a look at the new
versions of them, as the style is somewhat improved and they take
advantage of some new features.

   <p>If you were doing tricky things with undocumented Autoconf internals
(macros, variables, diversions), check whether you need to change
anything to account for changes that have been made.  Perhaps you can
even use an officially supported technique in version 2 instead of
kludging.  Or perhaps not.

   <p>To speed up your locally written feature tests, add caching to them. 
See whether any of your tests are of general enough usefulness to
encapsulate them into macros that you can share.

   </body></html>


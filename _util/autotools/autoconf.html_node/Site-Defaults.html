<html lang="en">
<head>
<title>Site Defaults - Autoconf</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Autoconf">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Site-Configuration.html#Site-Configuration" title="Site Configuration">
<link rel="prev" href="Transforming-Names.html#Transforming-Names" title="Transforming Names">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual (24 April 2012) is for GNU Autoconf
(version 2.69),
a package for creating scripts to configure source code packages using
templates and an M4 macro package.

Copyright (C) 1992-1996, 1998-2012 Free Software Foundation,
Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, no Front-Cover texts, and
     no Back-Cover Texts.  A copy of the license is included in the
     section entitled ``GNU Free Documentation License.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Site-Defaults"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Transforming-Names.html#Transforming-Names">Transforming Names</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Site-Configuration.html#Site-Configuration">Site Configuration</a>
<hr>
</div>

<h3 class="section">15.8 Setting Site Defaults</h3>

<p><a name="index-Site-defaults-1957"></a><a name="index-config_002esite-1958"></a>
Autoconf-generated <samp><span class="command">configure</span></samp> scripts allow your site to provide
default values for some configuration values.  You do this by creating
site- and system-wide initialization files.

   <p><a name="index-CONFIG_005fSITE-1959"></a>If the environment variable <code>CONFIG_SITE</code> is set, <samp><span class="command">configure</span></samp>
uses its value as the name of a shell script to read; it is recommended
that this be an absolute file name.  Otherwise, it
reads the shell script <samp><var>prefix</var><span class="file">/share/config.site</span></samp> if it exists,
then <samp><var>prefix</var><span class="file">/etc/config.site</span></samp> if it exists.  Thus,
settings in machine-specific files override those in machine-independent
ones in case of conflict.

   <p>Site files can be arbitrary shell scripts, but only certain kinds of
code are really appropriate to be in them.  Because <samp><span class="command">configure</span></samp>
reads any cache file after it has read any site files, a site file can
define a default cache file to be shared between all Autoconf-generated
<samp><span class="command">configure</span></samp> scripts run on that system (see <a href="Cache-Files.html#Cache-Files">Cache Files</a>).  If
you set a default cache file in a site file, it is a good idea to also
set the output variable <code>CC</code> in that site file, because the cache
file is only valid for a particular compiler, but many systems have
several available.

   <p>You can examine or override the value set by a command line option to
<samp><span class="command">configure</span></samp> in a site file; options set shell variables that have
the same names as the options, with any dashes turned into underscores. 
The exceptions are that <samp><span class="option">--without-</span></samp> and <samp><span class="option">--disable-</span></samp> options
are like giving the corresponding <samp><span class="option">--with-</span></samp> or <samp><span class="option">--enable-</span></samp>
option and the value &lsquo;<samp><span class="samp">no</span></samp>&rsquo;.  Thus, <samp><span class="option">--cache-file=localcache</span></samp>
sets the variable <code>cache_file</code> to the value &lsquo;<samp><span class="samp">localcache</span></samp>&rsquo;;
<samp><span class="option">--enable-warnings=no</span></samp> or <samp><span class="option">--disable-warnings</span></samp> sets the variable
<code>enable_warnings</code> to the value &lsquo;<samp><span class="samp">no</span></samp>&rsquo;; <samp><span class="option">--prefix=/usr</span></samp> sets the
variable <code>prefix</code> to the value &lsquo;<samp><span class="samp">/usr</span></samp>&rsquo;; etc.

   <p>Site files are also good places to set default values for other output
variables, such as <code>CFLAGS</code>, if you need to give them non-default
values: anything you would normally do, repetitively, on the command
line.  If you use non-default values for <var>prefix</var> or
<var>exec_prefix</var> (wherever you locate the site file), you can set them
in the site file if you specify it with the <code>CONFIG_SITE</code>
environment variable.

   <p>You can set some cache values in the site file itself.  Doing this is
useful if you are cross-compiling, where it is impossible to check features
that require running a test program.  You could &ldquo;prime the cache&rdquo; by
setting those values correctly for that system in
<samp><var>prefix</var><span class="file">/etc/config.site</span></samp>.  To find out the names of the cache
variables you need to set, see the documentation of the respective
Autoconf macro.  If the variables or their semantics are undocumented,
you may need to look for shell variables with &lsquo;<samp><span class="samp">_cv_</span></samp>&rsquo; in their names
in the affected <samp><span class="command">configure</span></samp> scripts, or in the Autoconf M4
source code for those macros; but in that case, their name or semantics
may change in a future Autoconf version.

   <p>The cache file is careful to not override any variables set in the site
files.  Similarly, you should not override command-line options in the
site files.  Your code should check that variables such as <code>prefix</code>
and <code>cache_file</code> have their default values (as set near the top of
<samp><span class="command">configure</span></samp>) before changing them.

   <p>Here is a sample file <samp><span class="file">/usr/share/local/gnu/share/config.site</span></samp>.  The
command &lsquo;<samp><span class="samp">configure --prefix=/usr/share/local/gnu</span></samp>&rsquo; would read this
file (if <code>CONFIG_SITE</code> is not set to a different file).

<pre class="example">     # /usr/share/local/gnu/share/config.site for configure
     #
     # Change some defaults.
     test "$prefix" = NONE &amp;&amp; prefix=/usr/share/local/gnu
     test "$exec_prefix" = NONE &amp;&amp; exec_prefix=/usr/local/gnu
     test "$sharedstatedir" = '${prefix}/com' &amp;&amp; sharedstatedir=/var
     test "$localstatedir" = '${prefix}/var' &amp;&amp; localstatedir=/var
     
     # Give Autoconf 2.x generated configure scripts a shared default
     # cache file for feature test results, architecture-specific.
     if test "$cache_file" = /dev/null; then
       cache_file="$prefix/var/config.cache"
       # A cache file is only valid for one C compiler.
       CC=gcc
     fi
</pre>
   <!-- Leave this use of ``File system'' rendered as one word, but -->
<!-- slightly obfuscated so as not to trigger the syntax-check prohibition. -->
   <p><a name="index-File_0040_002fsystem-Hierarchy-Standard-1960"></a><a name="index-FHS-1961"></a>
Another use of <samp><span class="file">config.site</span></samp> is for priming the directory variables
<!-- ``File system'', but slightly obfuscated, as above. -->
in a manner consistent with the Filesystem Hierarchy Standard
(FHS).  Once the following file is installed at
<samp><span class="file">/usr/share/config.site</span></samp>, a user can execute simply
<code>./configure --prefix=/usr</code> to get all the directories chosen in
the locations recommended by FHS.

<pre class="example">     # /usr/share/config.site for FHS defaults when installing below /usr,
     # and the respective settings were not changed on the command line.
     if test "$prefix" = /usr; then
       test "$sysconfdir" = '${prefix}/etc' &amp;&amp; sysconfdir=/etc
       test "$sharedstatedir" = '${prefix}/com' &amp;&amp; sharedstatedir=/var
       test "$localstatedir" = '${prefix}/var' &amp;&amp; localstatedir=/var
     fi
</pre>
   <p><a name="index-g_t_0040file_007blib64_007d-1962"></a><a name="index-g_t64_002dbit-libraries-1963"></a>Likewise, on platforms where 64-bit libraries are built by default, then
installed in <samp><span class="file">/usr/local/lib64</span></samp> instead of <samp><span class="file">/usr/local/lib</span></samp>,
it is appropriate to install <samp><span class="file">/usr/local/share/config.site</span></samp>:

<pre class="example">     # /usr/local/share/config.site for platforms that prefer
     # the directory /usr/local/lib64 over /usr/local/lib.
     test "$libdir" = '${exec_prefix}/lib' &amp;&amp; libdir='${exec_prefix}/lib64'
</pre>
   <!-- ============================================== Running configure Scripts. -->
   </body></html>


<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="../tpl/style.css@f4e332aa" type="text/css" /><link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' /><style type="text/css">h1,h2,h3,h4{font-family:'Open Sans',sans-serif}</style><link rel="canonical" href="../1918.rfc" /><meta name="Robots" content="noindex, nofollow" /><title>Перевод RFC 1918 — Распределение адресов в частных IP-сетях</title><link rel="alternate" type="application/rss+xml" title="RFC2.ru - Русские Переводы RFC" href="../rss.xml"></head><body><div id="content"><div id="nav"><div class="icon i0"></div> <a href="../index.html" accesskey="`">На Главную</a></div><div id="search" class="ya-site-form ya-site-form_inited_no"><form action="http://yandex.ru/sitesearch" method="get" target="_blank"><input type="hidden" name="searchid" value="2154295"/><input type="hidden" name="l10n" value="ru"/><input type="hidden" name="reqenc" value=""/><input type="hidden" name="submit" value="Найти"/><input type="search" value="" name="text" placeholder="Поиск по RFC2.ru" /></form></div><div itemscope itemtype="http://schema.org/ScholarlyArticle"><meta itemprop="inLanguage" content="ru" /><meta itemprop="editor" content="ru" /><div id="header"><h1><a itemprop="headline" href="../1918.rfc">RFC 1918 — Распределение адресов в частных IP-сетях</a></h1></div><dl class="mute"><dt></dt><dd><div class="icon i1"></div> RFC: 1918</dd><dd><div class="icon i3"></div> Оригинал: <a href="original" target="_blank" rel="nofollow"><span itemprop="alternativeHeadline">Address Allocation for Private Internets</span></a></dd><dd><div class="icon i7"></div> Предыдущие версии: RFC 1597, RFC 1627</dd><dd><div class="icon i2"></div> Категория: <span itemprop="articleSection">Лучший современный опыт</span></dd><dd><div class="icon i4"></div> Дата публикации: <time itemprop="datePublished" datetime="1996-02-02">Февраль 1996</time></dd><dd><div class="icon i5"></div> Авторы: <span itemprop="author">Yakov Rekhter</span>, <span itemprop="author">Robert G Moskowitz</span>, <span itemprop="author">Daniel Karrenberg</span>, <span itemprop="author">Geert Jan de Groot</span>, <span itemprop="author">Eliot Lear</span></dd><dd><div class="icon i6"></div> Перевод: <span itemprop="editor">Николай Малых</span></dd></dl><div id="text" itemprop="articleBody"><h3>Статус документа</h3><p>Этот документ относится к числу обобщений реального опыта (Best Current Practices) сообщества Internet и приглашает к дополнительному обсуждению вопроса с целью дальнейшего развития. Документ может распространяться свободно.</p><h2>1. Введение</h2><p>В контексте данного документа предприятие рассматривается как автономная сеть на базе стека протоколов TCP/IP. В таком случае распределение адресов является внутренним делом предприятия. Документ рассматривает вопросы распределения адресов в частных IP-сетях. Корректное распределение адресов обеспечивает полную связность на сетевом уровне между всеми хостами предприятия, а также между публичными (общедоступными) хостами разных предприятий. Использование в сети предприятия частных (private) адресов может привести к необходимости смены адресов хостов и сетей, если сеть станет публичной.</p><h2>2. Мотивация</h2><p>По мере распространения технологий TCP/IP (включая и сети, не входящие в Internet), все большее число предприятий начинает использовать эту технологию и связанную с ней адресацию в корпоративных сетях, которые зачастую даже не связаны с другими сетями или Internet.</p><p>Скорость роста сети Internet превосходит все ожидания. Экспоненциальное увеличение числа хостов в сети порождает новые потребности и связанные с ними проблемы. Одной из таких проблем является нехватка адресов для обеспечения уникальности адреса каждому хосту, подключенному к Internet. Другой, связанной с этим проблемой, является усложнение маршрутизации. Ведутся работы по поиску решения этих проблем на длительный срок. Одним из способов решения этой проблемы является пересмотр процедуры распределения адресов и ее влияния на сложность маршрутизации в Internet.</p><p>Для упрощения маршрутизации провайдерам Internet выделяются блоки адресов, из которых они потом выделяют адреса своим заказчикам. В результате такого распределения адресов маршруты к множеству заказчиков можно агрегировать (объединять) и для других (внешних) провайдеров такие маршруты будут выглядеть как единый маршрут [RFC1518], [RFC1519]. Для того, чтобы объединение маршрутов было достаточно эффективным, провайдеры Internet стимулируют своих заказчиков к переходу на адреса из выделенных провайдеру блоков (с таким переходом связана смена адресов в компьютерах заказчиков). Смена адресов может потребоваться множеству пользователей Internet.</p><p>Текущие размеры сети Internet и темпы ее роста не позволяют надеяться, что организациям, использующим в частных (изолированных) сетях адреса, не полученные официально от уполномоченного регистратора, могут быть сохранены при подключении корпоративной сети к Internet. Напротив, можно с уверенностью говорит, что при подключении такой организации к сети Internet в этой сети придется менять адреса IP для всех хостов, связанных с Internet.</p><p>Обычно уникальный адрес присваивается каждому хосту, который использует TCP/IP. Для того чтобы продлить срок существования IPv4, процедуры выделения адресов существенно ужесточены и сейчас не каждая организация может получить в свое распоряжение дополнительные адреса [RFC1466].</p><p>Хосты в сетях, использующих IP можно разделить на три категории:</p><ol><li>Хосты, которым не требуется доступ в Internet или связь с другими сетями; хосты этой категории могут использовать IP-адреса, которые являются уникальными в масштабах данной сети, но могут совпадать с адресами хостов в других сетях.</li><li>Хосты, которым требуется доступ к ограниченному числу внешних служб (например, электронная почта, FTP, новости, удаленный доступ), который может быть организован с использованием промежуточных шлюзов (например, шлюзов прикладного уровня). Для многих хостов этой категории неограниченный внешний доступ (на базе IP) может оказаться ненужным и даже нежелательным по соображениям безопасности. Подобно хостам первой категории такие хосты могут использовать IP-адреса, которые уникальны в масштабе предприятия, но могут совпадать с адресами хостов в других сетях.</li><li>Хосты, которым требуется на сетевом уровне доступ за пределы сети предприятия (обеспечивается по протоколу IP); адреса таких хостов должны быть уникальными в глобальном масштабе.</li></ol><p>Будем говорить об адресах хостов первых двух категорий как о частных (private), а адреса третьей категории будем называть публичными (public).</p><p>Многим приложениям не требуется доступ во внешние сети (за пределы сети предприятия) для большинства хостов. В крупных предприятиях можно выделить часть хостов, использующих TCP/IP, но не требующих доступа за пределы предприятия на сетевом уровне.</p><p>Примерами ситуаций, когда внешний доступ не требуется, могут служить:</p><ul class="dot"><li>Крупный аэропорт, использующий в залах прибытия и отправления терминалы, подключенные по TCP/IP. Таким терминалам крайне редко требуется доступ во внешние сети.</li><li>Крупные организации (например, банки или торговые фирмы) часто используют TCP/IP в своих сетях. Большому числу локальных станций (кассовые машины, банкоматы и т. п.) крайне редко используют доступ во внешние сети.</li><li>Для обеспечения безопасности многие предприятия используют шлюзы прикладного уровня для соединения своих сетей с Internet. Внутренняя сеть обычно не имеет прямого доступа в Internet, и связана с одним или несколькими шлюзами, доступными из сети Internet. В таких случаях внутренняя сеть может использовать IP-адреса, которые не являются уникальными.</li><li>Для интерфейсов маршрутизаторов, обращенных внутрь корпоративной сети не требуется обеспечивать прямой доступ из внешних сетей.</li></ul><h2>3. Частные адреса</h2><p>Служба распределения номеров IANA (Internet Assigned Numbers Authority) зарезервировала для частных сетей три блока адресов:</p><pre>10.0.0.0        -   10.255.255.255  (10/8 prefix)
172.16.0.0      -   172.31.255.255  (172.16/12 prefix)
192.168.0.0     -   192.168.255.255 (192.168/16 prefix)</pre><p>Будем называть первый блок 24-битовым, второй — 20-битовым, а третий — 16-битовым. Отметим, что первый блок представляет собой ни что иное, как одну сеть класса A, второй блок — 16 последовательных сетей класса B, а третий блок — 256 последовательных сетей класса C.</p><p>Любое предприятие может использовать IP-адреса из этих блоков без согласования с IANA или Internet-регистраторами. В результате, эти адреса используются на множестве предприятий. Таким образом, уникальность адресов сохраняется только в масштабе одного или нескольких предприятий, согласованно использующих общий блок адресов. В такой сети каждый хост может обмениваться информацией с любым другим хостом частной сети.</p><p>Если предприятию требуются уникальные адреса для связи с внешними сетями, такие адреса следует получать обычным путем через регистраторов Internet. Такие адреса никогда не будут входить ни в один из указанных выше блоков частных адресов.</p><p>Перед распределением адресов из частного и публичного блоков следует определить, какие из хостов сети должны иметь связь с внешними системами на сетевом уровне в настоящее время и в будущем — для таких хостов следует использовать публичные адреса. Остальным хостам можно присваивать адреса из частных блоков — это не помешает им взаимодействовать со всеми хостами корпоративной сети, независимо от того, какие адреса имеют эти хосты (частные или публичные). Однако прямой доступ во внешние сети для хостов с адресами из частного блока невозможен. Для организации доступа таких хостов во внешние шлюзы придется использовать специальные шлюзы (например, шлюзы прикладного уровня).</p><p>Хосты с публичными адресами могут иметь прямую связь с внешними сетями и Internet. Хосты с публичными адресами могут обмениваться данными со всеми хостами корпоративной сети (независимо от типа адресов этих хостов), а также с публичными хостами других сетей. Публичные хосты, однако, не могут иметь прямого доступа к хостам других сетей, использующим частные адреса.</p><p>Перемещение хоста из частной сети в публичную (и обратное) связано со сменой IP-адреса, соответствующих записей DNS и изменением конфигурационных файлов на других хостах, которые идентифицируют хосты по их IP-адресам.</p><p>Поскольку частные адреса не имеют глобального значения, маршрутная информация о частных сетях не должна выходить за пределы этих сетей, а пакеты с частными адресами отправителей или получателей не должны передаваться через межсетевые каналы. Предполагается, что маршрутизаторы в публичных сетях (особенно маршрутизаторы провайдеров Internet) будут отбрасывать маршрутную информацию из частных сетей. Если маршрутизатор публичной сети получает такую информацию, ее отбрасывание не должно трактоваться как ошибка протокола маршрутизации.</p><p>Непрямые ссылки на адреса из частных блоков должны сохраняться внутри предприятия. Примерами таких записей могут служить RR-записи DNS, и другая информация со ссылками на внутренние частные адреса. Провайдеры Internet должны принимать меры против публичного распространения такой информации.</p><h2>4. Преимущества и недостатки при использовании частных адресов</h2><p>Очевидным преимуществом использования частных адресов является экономия адресного пространства Internet за счет использования частных адресов во множестве сетей, не связанных напрямую с Internet. Предприятия также имеют преимущества в результате использования частных адресов. Блоки частных адресов достаточно велики и обеспечивают гибкость и свободу при распределении адресов для хостов частной сети. Это позволяет обойтись без смены адресов при внесении в сеть изменений или ее расширении.</p><p>По разным причинам в сети Internet уже возникали ситуации, когда предприятия, не подключенные к Internet, использовали для своих хостов IP-адреса из публичных блоков без согласования с IANA. В некоторых случаях эти адреса уже были выделены другим предприятиям. Если сеть с такими адресами потом будет подключаться к Internet, могут возникнуть серьезные проблемы, поскольку маршрутизация IP не может быть корректной при наличии в сети хостов с совпадающими адресами. Хотя провайдеры Internet должны предотвращать подобные ситуации путем использования маршрутных фильтров, на практике такая фильтрация осуществляется не всегда. Использование частных адресов в корпоративных сетях позволяет избежать проблем с маршрутизацией при подключении частной сети к Internet.</p><p>Основным неудобством при использовании частных адресов является возможность возникновения существенных проблем при подключении корпоративной сети к Internet.</p><p>Если в сети используются частные адреса, то при ее подключении к Internet потребуется смена адресов IP для каждого хоста, которому предоставляется прямой доступ в Internet. Обычно расходы на такую замену адресов пропорциональны числу хостов, которые переносятся из частной сети в публичную. Однако, как было отмечено выше, смена адресов может потребоваться и при использовании в частной сети уникальных адресов.</p><p>Другой проблемой, которая может возникнуть при использовании частных адресов, является необходимость смены адресов при объединении двух или более сетей, если они использовали частные адреса из перекрывающихся блоков. Если вернуться к списку компаний, для которых рекомендовалось использовать частные адреса (параграф 2), можно заметить, что такие компании (сети) достаточно часто объединяются. Если в каждой из объединяемых сетей использовались частные адреса, в объединенной сети требование уникальности адресов каждого хоста может нарушаться. В результате возникает необходимость смены адресов для всех или части хостов.</p><p>Расходы на замену адресов могут быть снижены за счет использования средств автоматического распределения адресов (например, протокола DHCP). При выборе зоны использования частных адресов мы рекомендуем для таких зон сразу применять системы автоматического распределения адресов. Вопросами замены адресов (процедура, рекомендации) занимается специальная рабочая группа IETF (PIER Working Group).</p><h2>5. Практические рекомендации</h2><p>Одним из возможных вариантов является разработка на начальном этапе плана распределения адресов для внутренней части сети, не связанной напрямую с другими сетями. После этого определяются публичные подсети и для них выделяются соответствующие блоки адресов.</p><p>Такой подход не порождает фиксированной навсегда схемы. Если статус одного или нескольких хостов впоследствии изменяется (от частного к публичному или наоборот), потребуется сменить адреса только для таких хостов. Для того, чтобы избежать остановки сети при таких изменениях, целесообразно группировать хосты в подсети с учетом перспектив дальнейшего использования этих хостов.</p><p>Если подходящая схема организации подсетей может быть разработана и будет поддерживаться используемым в сети оборудованием, разумно воспользоваться для частной сети 24-битовым блоком адресов (сеть класса A) — это позволит создать достаточно большую сеть. Если разделение на подсети нереально, можно воспользоваться 16-битовым (сеть класса C) или 20-битовым (сеть класса B) блоком частных адресов.</p><p>Может показаться заманчивой перспектива использования частных и публичных адресов в одной физической сети. Хотя такое решение допустимо, оно содержит подводные камни, связанные с существованием нескольких подсетей IP в одной сети канального уровня. Рекомендуем с осторожностью использовать такой подход.</p><p>Настоятельно рекомендуется для маршрутизаторов, соединяющих предприятие с внешними сетями, использовать соответствующие фильтры для пакетов и маршрутов, предотвращающие передачу пакетов с частными адресами и информации о внутренних маршрутах во внешние по отношению к предприятию сети. Такие фильтры нужно устанавливать на маршрутизаторах по обе стороны канала между сетями. На входе в сеть предприятия должна также отфильтровываться вся входящая маршрутная информация для того, чтобы предотвратить ненужные проблемы с маршрутизацией во внутренней сети.</p><p>Две частных сети могут обмениваться информацией через публичную сеть, если использование частных адресов в обеих сетях согласовано. Для решения таких задач на границах частных сетей следует использовать инкапсуляцию.</p><p>Если несколько организаций, использующих частные адреса из указанных в данном документе блоков, захотят впоследствии связать свои сети по протоколу IP, существует риск нарушения требования уникальности адреса для каждого хоста в масштабе объединенной сети. Для снижения такого риска рекомендуется выбирать для использования группу адресов из допустимого блока случайным образом.</p><p>Если предприятие использует частные адреса или комбинацию частных и публичных адресов, клиенты DNS за пределами предприятия не должны видеть адресов из частного блока, поскольку такие адреса будут вводить в заблуждение другие системы. Одним из способов решения этой проблемы является использование уполномоченных серверов (authority server) для каждой зоны DNS, содержащей частные и публичные адреса. Один сервер будет доступен из публичной сети и должен содержать только те адреса частной сети, которые доступны извне (публичные адреса). Другой сервер будет доступен только из частной сети и должен содержать полный набор данных, включая частные адреса и публичные адреса, доступные из частной сети. Для того, чтобы обеспечить согласованность работы серверов, они должны использовать общий набор данных, но доступная из публичной сети информация должна соответствующим образом фильтроваться. Реализация такого решения влечет за собой некоторое усложнение сервера имен.</p><h2>6. Вопросы безопасности</h2><p>В данной работе вопросы безопасности не рассматриваются.</p><h2>7. Заключение</h2><p>При использовании описанной в документе схемы даже крупным предприятиям требуются сравнительно небольшие блоки публичных адресов IP. В результате существенно снижается острота проблемы нехватки адресов в Internet и обеспечивается более эффективное использование уникальных в масштабах Сети адресов IP. Предприятие получает возможность гибкого распределения адресов из любого частного блока. Однако использование частных адресов в сети предприятия может потребовать замены адресов для части хостов при подключении корпоративной сети к Internet или другим IP-сетям.</p><h2>8. Благодарности</h2><p>Авторы выражают свою признательность Tony Bates (MCI), Jordan Becker (ANS), Hans-Werner Braun (SDSC), Ross Callon (Bay Networks), John Curran (BBN Planet), Vince Fuller (BBN Planet), Tony Li (Cisco Systems), Anne Lord (RIPE NCC), Milo Medin (NSI), Marten Terpstra (Bay Networks), Geza Turchanyi (RIPE NCC), Christophe Wolfhugel (Pasteur Institute), Andy Linton (connect.com.au), Brian Carpenter (CERN), Randy Bush (PSG), Erik Fair (Apple Computer), Dave Crocker (Brandenburg Consulting), Tom Kessler (SGI), Dave Piscitello (Core Competence), Matt Crawford (FNAL), Michael Patton (BBN) и Paul Vixie (Internet Software Consortium) за их вклад в работу и конструктивные замечания.</p><h2>9. Литература</h2><table itemprop="references"><tr><td>[RFC1466]</td><td>Gerich, E., «Guidelines for Management of IP Address Space», RFC 1466, Merit Network, Inc., Май 1993.</td></tr><tr><td>[RFC1518]</td><td>Rekhter, Y., T. Li, «An Architecture for IP Address Allocation with CIDR», RFC 1518, Сентябрь 1993.</td></tr><tr><td>[RFC1519]</td><td>Fuller, V., Li, T., Yu, J., K. Varadhan, «Classless Inter-Domain Routing (CIDR): an Address Assignment and Aggregation Strategy», RFC 1519, Сентябрь 1993.</td></tr></table><h2>10. Адреса авторов</h2><p>Yakov Rekhter<br />Cisco systems<br />170 West Tasman Drive<br />San Jose, CA, USA<br />Phone: +1 914 528 0090<br />Fax: +1 408 526-4952<br />EMail: <bdo dir="rtl">&#109;&#111;&#99;&#46;&#111;&#99;&#115;&#105;&#99;&#64;&#118;&#111;&#107;&#97;&#121;</bdo></p><p>Robert G Moskowitz<br />Chrysler Corporation<br />CIMS: 424-73-00<br />25999 Lawrence Ave<br />Center Line, MI 48015<br />Phone: +1 810 758 8212<br />Fax: +1 810 758 8173<br />EMail: <bdo dir="rtl">&#109;&#111;&#99;&#46;&#114;&#101;&#108;&#115;&#121;&#114;&#104;&#99;&#46;&#115;&#105;&#64;&#51;&#109;&#103;&#114;</bdo></p><p>Daniel Karrenberg<br />RIPE Network Coordination Centre<br />Kruislaan 409<br />1098 SJ Amsterdam, the Netherlands<br />Phone: +31 20 592 5065<br />Fax: +31 20 592 5090<br />EMail: <bdo dir="rtl">&#116;&#101;&#110;&#46;&#101;&#112;&#105;&#114;&#64;&#103;&#114;&#101;&#98;&#110;&#101;&#114;&#114;&#97;&#107;&#46;&#108;&#101;&#105;&#110;&#97;&#100;</bdo></p><p>Geert Jan de Groot<br />RIPE Network Coordination Centre<br />Kruislaan 409<br />1098 SJ Amsterdam, the Netherlands<br />Phone: +31 20 592 5065<br />Fax: +31 20 592 5090<br />EMail: <bdo dir="rtl">&#116;&#101;&#110;&#46;&#101;&#112;&#105;&#114;&#64;&#116;&#111;&#111;&#114;&#103;&#101;&#100;&#46;&#110;&#97;&#106;&#116;&#114;&#101;&#101;&#103;</bdo></p><p>Eliot Lear<br />Mail Stop 15-730<br />Silicon Graphics, Inc.<br />2011 N. Shoreline Blvd.<br />Mountain View, CA 94043-1389<br />Phone: +1 415 960 1980<br />Fax: +1 415 961 9584<br />EMail: <bdo dir="rtl">&#109;&#111;&#99;&#46;&#105;&#103;&#115;&#64;&#114;&#97;&#101;&#108;</bdo></p></div></div><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname="rfc2",disqus_title="RFC 1918 - Распределение адресов в частных IP-сетях",disqus_identifier="1918.rfc",disqus_url="http://rfc2.ru/1918.rfc";(function(){var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;dsq.src = "//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><div class="bubble">2007 - 2014 © <a href="../index.html" title="Русские переводы RFC">Русские переводы RFC</a>, IETF, ISOC.</div></div><div id="bottom" style="position:static !important;bottom:auto !important"><div class="bubble"><ul><li><!--723572853672--></li></ul></div></div><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter4680559 = new Ya.Metrika({id:4680559, webvisor:true, clickmap:true, accurateTrackBounce:true, trackHash:true, ut:"noindex"}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="http://mc.yandex.ru/watch/4680559?ut=noindex" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --></body></html>
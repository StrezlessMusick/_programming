<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="../tpl/style.css@f4e332aa" type="text/css" /><link rel="prev" href="35" /><link rel="next" href="37" /><link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' /><style type="text/css">h1,h2,h3,h4{font-family:'Open Sans',sans-serif}</style><title>Перевод RFC 5905 — Протокол сетевого времени NTPv4, стр. 36</title><meta name="author" content="D. Mills, U. Delaware, J. Martin, J. Burbank, W. Kasch" /><link rel="alternate" type="application/rss+xml" title="RFC2.ru - Русские Переводы RFC" href="../rss.xml"></head><body><div id="content"><div id="nav"><div class="icon i0"></div> <a href="../index.html" accesskey="`">На Главную</a></div><div id="search" class="ya-site-form ya-site-form_inited_no"><form action="http://yandex.ru/sitesearch" method="get" target="_blank"><input type="hidden" name="searchid" value="2154295"/><input type="hidden" name="l10n" value="ru"/><input type="hidden" name="reqenc" value=""/><input type="hidden" name="submit" value="Найти"/><input type="search" value="" name="text" placeholder="Поиск по RFC2.ru" /></form></div><div itemscope itemtype="http://schema.org/ScholarlyArticle"><meta itemprop="inLanguage" content="ru" /><meta itemprop="editor" content="ru" /><div id="header"><h1><a itemprop="headline" href="../5905.rfc">RFC 5905 — Протокол сетевого времени NTPv4</a></h1></div><dl class="mute"><dt></dt><dd><div class="icon i1"></div> RFC: 5905</dd><dd><div class="icon i3"></div> Оригинал: <a href="original" target="_blank" rel="nofollow"><span itemprop="alternativeHeadline">Network Time Protocol Version 4: Protocol and Algorithms Specification</span></a></dd><dd><div class="icon i7"></div> Предыдущие версии: RFC 958, RFC 1059, RFC 1119, RFC 1305, RFC 1361, RFC 1769, RFC 2030, RFC 4330</dd><dd><div class="icon i2"></div> Категория: <span itemprop="articleSection">Предложенный стандарт</span></dd><dd><div class="icon i4"></div> Дата публикации: <time itemprop="datePublished" datetime="2010-06-01">Июнь 2010</time></dd><dd><div class="icon i5"></div> Авторы: <span itemprop="author">D. Mills</span>, <span itemprop="author">U. Delaware</span>, <span itemprop="author">J. Martin</span>, <span itemprop="author">J. Burbank</span>, <span itemprop="author">W. Kasch</span></dd><dd><div class="icon i6"></div> Перевод: <span itemprop="editor">Мельников Дмитрий Анатольевич</span></dd></dl><div class="pages"><p class="r"> <h2 class="pt"><span class="z">RFC 5905,</span> Страница 36 из 51</h2></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a accesskey="1" title="Первая страница" href="../5905.rfc" class="arr">&lArr;</a></li><li><a accesskey="2" title="На страницу назад" href="35"><b>&larr;</b></a></li><li><a class="x" href="../5905.rfc">1</a></li><li><a class="x" href="2">2</a></li><li><a class="x" href="3">3</a></li><li><a class="x" href="4">4</a></li><li><a class="x" href="5">5</a></li><li><a class="x" href="6">6</a></li><li><a class="x" href="7">7</a></li><li><a class="x" href="8">8</a></li><li><a class="x" href="9">9</a></li><li><a class="x" href="10">10</a></li><li><a class="x" href="11">11</a></li><li><a class="x" href="12">12</a></li><li><a class="x" href="13">13</a></li><li><a class="x" href="14">14</a></li><li><a class="x" href="15">15</a></li><li><a class="x" href="16">16</a></li><li><a class="x" href="17">17</a></li><li><a class="x" href="18">18</a></li><li><a class="x" href="19">19</a></li><li><a class="x" href="20">20</a></li><li><a class="x" href="21">21</a></li><li><a class="x" href="22">22</a></li><li><a class="x" href="23">23</a></li><li><a class="x" href="24">24</a></li><li><a class="x" href="25">25</a></li><li><a class="x" href="26">26</a></li><li><a class="x" href="27">27</a></li><li><a class="x" href="28">28</a></li><li><a class="x" href="29">29</a></li><li><a class="x" href="30">30</a></li><li><a class="x" href="31">31</a></li><li><a href="32">32</a></li><li><a href="33">33</a></li><li><a href="34">34</a></li><li><a href="35">35</a></li><li class="this"><span>36</span></li><li><a href="37">37</a></li><li><a href="38">38</a></li><li><a href="39">39</a></li><li><a href="40">40</a></li><li><a class="x" href="41">41</a></li><li><a class="x" href="42">42</a></li><li><a class="x" href="43">43</a></li><li><a class="x" href="44">44</a></li><li><a class="x" href="45">45</a></li><li><a class="x" href="46">46</a></li><li><a class="x" href="47">47</a></li><li><a class="x" href="48">48</a></li><li><a class="x" href="49">49</a></li><li><a class="x" href="50">50</a></li><li><a class="x" href="51">51</a></li><li><a accesskey="3" title="На страницу вперед" href="37">&rarr;</a></li><li><a accesskey="4" title="Последняя страница" href="51">&rArr;</a></li></ul></div><div id="text" itemprop="articleBody"><ol class="lia"><li><p>Для каждого из m виртуальных соединений, в списке претендентов формируются три набора переменных.</p></li><li><p>Классификация наборов переменных в списке на основе компонента <code>edge</code> в следующем порядке: нижняя точка, средняя точка и верхняя точка этих интервалов, начиная с самого нижнего значения и заканчивая самым верхним значением. Присваиваем нулевое значение числу некорректных источников синхронизации (<code>f = 0</code>).</p></li><li><p>Присваиваем нулевое значение числу средних точек (<code>d = 0</code>). Присваиваем <code>с</code> нулевое значение (<code>с = 0</code>). Проверяем все крайние точки, начиная с самой нижней и заканчивая самой верхней. Прибавляем к <code>с</code> единицу при проверке каждой нижней точки, и вычитаем единицу после каждой верхней точки, добавляем единицу к <code>d</code> после каждой средней точки. Если <code>с ≥ m - f </code>, процедура завершается, а текущему значению числа нижних точек присваивается единица.</p></li><li><p>Присваиваем <code>с</code> нулевое значение (<code>с = 0</code>). Проверяем все крайние точки, начиная с самой верхней и заканчивая самой нижней. Прибавляем к <code>с</code> единицу при проверке каждой верхней точки, и вычитаем единицу после каждой нижней точки, добавляем единицу к <code>d</code> после каждой средней точки. Если <code>с ≥ m - f </code>, процедура завершается, а текущему числу верхних точек присваивается значение <code>u</code>.</p></li><li><p>Проверяем равенство <code>d = f</code> и неравенство <code>l &lt; u</code>. Если они выполняются, то тогда процедур завершилась успешно, а интервал перекрытия составляет [l, u]. Если же нет, то тогда увеличиваем на единицу значение <code>f</code>. После этого проверяем неравенство <code>f &lt; m/2</code>. Если оно выполняется, то тогда процедура возвращается на третью итерацию. Если же оно не выполняется, то тогда процедура переходит на шестую итерацию.</p></li><li><p>Процедура завершилась «неудачей». Максимальное число корректных часов не определено. Нет приемлемых кандидатов для корректировки системного времени.</p></li></ol><p>Необходимо отметить, что эта процедура начинается в предположении, что некорректные часы отсутствуют (<code>f = 0</code>) и она «пытается» найти непустой интервал перекрытия, содержащий средние точки всех корректных серверов времени, то есть надёжных источников синхронизации. Если нельзя найти непустой интервал, то тогда число предполагаемых некорректных источников синхронизации увеличивается на единицу, а попытка отыскания непустого интервала повторяется. Если же непустой интервал найден, а число некорректных источников синхронизации меньше, чем корректных, то тогда считается, что найдена группа основных источников синхронизации и средняя точка каждого такого источника (<code>θ</code>) представляет собой кандидата, который в дальнейшем обрабатывается процедурой (алгоритмом) кластеризации.</p><p>Если же группа основных источников синхронизации не найдена, или если число корректных источников синхронизации меньше, чем значение параметра <code>CMIN</code>, то тогда для процесса настройки и корректировки системных часов не хватает приемлемых кандидатов. Параметр <code>CMIN</code> определяет минимальное количество серверов времени, удовлетворяющих требованиям корректности. Более внимательные сетевые администраторы могли бы установить такое значение параметра <code>CMIN</code>, которое бы гарантировало несколько дополнительных серверов времени, вполне приемлемых для их обработки соответствующими алгоритмами оптимизации. Однако, исторически сложилось так, что значение параметра <code>CMIN</code>, по-умолчанию, равно единице.</p></div></div><noindex><div class="pages"><p class="r"> <b>Страница 36 из 51</b></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a title="Первая страница" href="../5905.rfc" class="arr">&lArr;</a></li><li><a title="На страницу назад" href="35"><b>&larr;</b></a></li><li><a class="x" href="../5905.rfc">1</a></li><li><a class="x" href="2">2</a></li><li><a class="x" href="3">3</a></li><li><a class="x" href="4">4</a></li><li><a class="x" href="5">5</a></li><li><a class="x" href="6">6</a></li><li><a class="x" href="7">7</a></li><li><a class="x" href="8">8</a></li><li><a class="x" href="9">9</a></li><li><a class="x" href="10">10</a></li><li><a class="x" href="11">11</a></li><li><a class="x" href="12">12</a></li><li><a class="x" href="13">13</a></li><li><a class="x" href="14">14</a></li><li><a class="x" href="15">15</a></li><li><a class="x" href="16">16</a></li><li><a class="x" href="17">17</a></li><li><a class="x" href="18">18</a></li><li><a class="x" href="19">19</a></li><li><a class="x" href="20">20</a></li><li><a class="x" href="21">21</a></li><li><a class="x" href="22">22</a></li><li><a class="x" href="23">23</a></li><li><a class="x" href="24">24</a></li><li><a class="x" href="25">25</a></li><li><a class="x" href="26">26</a></li><li><a class="x" href="27">27</a></li><li><a class="x" href="28">28</a></li><li><a class="x" href="29">29</a></li><li><a class="x" href="30">30</a></li><li><a class="x" href="31">31</a></li><li><a href="32">32</a></li><li><a href="33">33</a></li><li><a href="34">34</a></li><li><a href="35">35</a></li><li class="this"><span>36</span></li><li><a href="37">37</a></li><li><a href="38">38</a></li><li><a href="39">39</a></li><li><a href="40">40</a></li><li><a class="x" href="41">41</a></li><li><a class="x" href="42">42</a></li><li><a class="x" href="43">43</a></li><li><a class="x" href="44">44</a></li><li><a class="x" href="45">45</a></li><li><a class="x" href="46">46</a></li><li><a class="x" href="47">47</a></li><li><a class="x" href="48">48</a></li><li><a class="x" href="49">49</a></li><li><a class="x" href="50">50</a></li><li><a class="x" href="51">51</a></li><li><a title="На страницу вперед" href="37">&rarr;</a></li><li><a title="Последняя страница" href="51">&rArr;</a></li></ul></div></noindex><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname="rfc2",disqus_title="RFC 5905 - Протокол сетевого времени NTPv4",disqus_identifier="5905.rfc",disqus_url="http://rfc2.ru/5905.rfc";(function(){var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;dsq.src = "//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><div class="bubble">2007 - 2014 © <a href="../index.html" title="Русские переводы RFC">Русские переводы RFC</a>, IETF, ISOC.</div></div><div id="bottom" style="position:static !important;bottom:auto !important"><div class="bubble"><ul><li><!--723572853672--></li></ul></div></div><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter4680559 = new Ya.Metrika({id:4680559, webvisor:true, clickmap:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="http://mc.yandex.ru/watch/4680559" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --></body></html>
<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="../tpl/style.css@f4e332aa" type="text/css" /><link rel="prev" href="10" /><link rel="next" href="12" /><link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' /><style type="text/css">h1,h2,h3,h4{font-family:'Open Sans',sans-serif}</style><title>Перевод RFC 1521 — Почтовый стандарт MIME, стр. 11</title><meta name="author" content="N. Borenstein, N. Freed" /><link rel="alternate" type="application/rss+xml" title="RFC2.ru - Русские Переводы RFC" href="../rss.xml"></head><body><div id="content"><div id="nav"><div class="icon i0"></div> <a href="../index.html" accesskey="`">На Главную</a></div><div id="search" class="ya-site-form ya-site-form_inited_no"><form action="http://yandex.ru/sitesearch" method="get" target="_blank"><input type="hidden" name="searchid" value="2154295"/><input type="hidden" name="l10n" value="ru"/><input type="hidden" name="reqenc" value=""/><input type="hidden" name="submit" value="Найти"/><input type="search" value="" name="text" placeholder="Поиск по RFC2.ru" /></form></div><div itemscope itemtype="http://schema.org/ScholarlyArticle"><meta itemprop="inLanguage" content="ru" /><meta itemprop="editor" content="ru" /><div id="header"><h1><a itemprop="headline" href="../1521.rfc">RFC 1521 — Почтовый стандарт MIME</a></h1></div><dl class="mute"><dt></dt><dd><div class="icon i1"></div> RFC: 1521</dd><dd><div class="icon i3"></div> Оригинал: <a href="original" target="_blank" rel="nofollow"><span itemprop="alternativeHeadline">MIME - Multipurpose Internet Mail Extensions</span></a></dd><dd><div class="icon i7"></div> Другие версии: RFC 1341, <strong class="obsoleted_by">RFC 2045</strong>, <strong class="obsoleted_by">RFC 2046</strong>, <strong class="obsoleted_by">RFC 2047</strong>, <strong class="obsoleted_by">RFC 2048</strong>, <strong class="obsoleted_by">RFC 2049</strong></dd><dd><div class="icon i2"></div> Категория: <span itemprop="articleSection">Проект стандарта</span></dd><dd><div class="icon i4"></div> Дата публикации: <time itemprop="datePublished" datetime="1993-09-01">Сентябрь 1993</time></dd><dd><div class="icon i5"></div> Авторы: <span itemprop="author">N. Borenstein</span>, <span itemprop="author">N. Freed</span></dd><dd><div class="icon i6"></div> Перевод: <span itemprop="editor">Антон Воронин</span></dd></dl><div class="pages"><p class="r"> <h2 class="pt"><span class="z">RFC 1521,</span> Страница 11 из 30</h2></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a accesskey="1" title="Первая страница" href="../1521.rfc" class="arr">&lArr;</a></li><li><a accesskey="2" title="На страницу назад" href="10"><b>&larr;</b></a></li><li><a class="x" href="../1521.rfc">1</a></li><li><a class="x" href="2">2</a></li><li><a class="x" href="3">3</a></li><li><a class="x" href="4">4</a></li><li><a class="x" href="5">5</a></li><li><a class="x" href="6">6</a></li><li><a href="7">7</a></li><li><a href="8">8</a></li><li><a href="9">9</a></li><li><a href="10">10</a></li><li class="this"><span>11</span></li><li><a href="12">12</a></li><li><a href="13">13</a></li><li><a href="14">14</a></li><li><a href="15">15</a></li><li><a class="x" href="16">16</a></li><li><a class="x" href="17">17</a></li><li><a class="x" href="18">18</a></li><li><a class="x" href="19">19</a></li><li><a class="x" href="20">20</a></li><li><a class="x" href="21">21</a></li><li><a class="x" href="22">22</a></li><li><a class="x" href="23">23</a></li><li><a class="x" href="24">24</a></li><li><a class="x" href="25">25</a></li><li><a class="x" href="26">26</a></li><li><a class="x" href="27">27</a></li><li><a class="x" href="28">28</a></li><li><a class="x" href="29">29</a></li><li><a class="x" href="30">30</a></li><li><a accesskey="3" title="На страницу вперед" href="12">&rarr;</a></li><li><a accesskey="4" title="Последняя страница" href="30">&rArr;</a></li></ul></div><div id="text" itemprop="articleBody"><h4 id="p7.2.1">7.2.1. Multipart: общий синтаксис</h4><p>Поле Content-Type многочастного письма требует одного параметра, "boundary", который определяет границы вложения. Границей является строка, состоящая из двух символов "-" (десятичный код 45) и значения параметра 'boundary' из поля заголовка Content-Type.</p><p class="note">Замечание: Два символа "-" используются для совместимости с более ранним методом вложения писем, описанным в RFC 934 и для облегчения поиска границ. Однако, многочастные письма MIME не полностью совместимы с RFC 934; в частности, они не подчиняются соглашению RFC 934 по экранированию строк символом "-", так как с каждым новым уровнем экранирования длина строк увеличивается. А поскольку SMTP-транспорты часто обрезают длинные строки, этот механизм становится неприменимым в случае многоуровневой структуры письма типа 'multipart'.</p><p class="note">Вниманию производителей ПО: синтаксис параметров поля Content-Type таков, что зачастую необходимо значения границ в параметре 'boundary' заключать в кавычки. Это не всегда требуется, но никогда не повредит. Программистам следует изучить синтаксис внимательно, чтобы не допустить ошибок в поле Content-Type. Типичное поле Content-Type для типа 'multipart' может выглядеть следующим образом:</p><pre>Content-Type: multipart/mixed;
     boundary=gc0p4Jq0M2Yt08jU534c0p</pre><p>Но в следующем примере содержится ошибка:</p><pre>Content-Type: multipart/mixed;
     boundary=gc0p4Jq0M:2Yt08jU534c0p</pre><p>(из-за двоеточия), которая может быть исправлена следующим образом:</p><pre>Content-Type: multipart/mixed;
     boundary="gc0p4Jq0M:2Yt08jU534c0p"</pre><p>Это означает, что тело письма состоит из нескольких частей, каждая из которых соответствует синтаксису письма RFC 822, за исключением того. что область заголовка может быть абсолютно пустой и начальная граница каждой части отмечена последовательностью:</p><pre>--gc0p4Jq0M:2Yt08jU534c0p</pre><p>Нужно обратить внимание, что метка границы части письма должна располагаться в начале строки, то есть, сразу же после признака конца строки CRLF. Причем, последовательность CRLF полагается элементом метки границы, а не последним элементом тела предыдущей части (так как тело предыдущей части может неоканчиваться концом строки, что принципиально важно в случае бинарных данных. Если же тело предыдущей части оканчивается концом строки, то метке границы соответственно должны предшествовать два конца строки). Сразу за меткой границы должен следовать конец строки (CRLF), или при отсутствии заголовка следующей части письма, два конца строки.</p><p>Метка границы не должна иметь длину более 70 символов, не считая два начальных дефиса.</p><p>Метка границы, следующая за последней частью письма, должна отличаться от предыдущих меток, чтобы показать, что далее не последует другой части письма. Отличие последней метки состоит в добавлении двух дефисов в конец:</p><pre>--gc0p4Jq0M2Yt08jU534c0p--</pre><p>Обычно оставляется пространство для дополнительной информации перед первой меткой границы и после последней. Обычно его следует оставлять пустым, и обработчики почты должны игнорировать все, что в этом пространстве содержится.</p><div class="note"><p>Замечание: Эти области приамбулы и эпилога обычно не используются из-за отсутствия точной семантики для обработки этих областей почтовыми шлюзами, однако, многие программные MIME-продукты считают удобным помещать туда пояснительную информацию для получателей, которые пользуются до-MIME'овским ПО. По этой причине, MIME-совместимые программы должны игнорировать эти области.</p><p>Поскольку метки границы не должны появляться внутри тел частей письма, почтовая программа, создающая письмо, должна иметь алгоритм, позволяющий автоматически подобрать уникальную последовательность, не встречающуюся в теле ни одной из частей, либо имеющую минимальную вероятность появления, если данные предварительно не сканируются на наличие таковой.</p></div><p>В качестве простого примера предлагается двухчастное письмо, вторая часть которого оканчивается признаком конца строки, а первая нет:</p><pre>From: Nathaniel Borenstein
To:  Ned Freed
Subject: Sample message
MIME-Version: 1.0
Content-type: multipart/mixed; boundary="simple
boundary"

Это приамбула. Должна быть игнорирована
--simple boundary

Это простой ASCII-текст.
Он НЕ оканчивается признаком конца строки.
--simple boundary
Content-type: text/plain; charset=us-ascii

Это простой ASCII-текст.
Он оканчивается признаком конца строки.

--simple boundary--
Это эпилог. Тоже должен игнорироваться MIME-программами.</pre><p>Часть письма, в свою очередь, также может иметь тип 'multipart', то есть. быть многочастным телом, но при этом метки границ, использующиеся во внешнем и во внутреннем multipart-телах, должны отличаться друг от друга.</p><p>Использование типа 'multipart' в одночастном письме может быть полезно в некоторых контекстах и не запрещено.</p><p>Единственным обязательным параметром для типа 'multipart' является параметр 'boundary', состоящий из 1-70 символов без хвостовых пробелов (которые могут быть удалены в процессе пересылки, и тогда почтовая программа получателя не сможет разделить вложенные части).</p><pre>граница := 0*69&lt;символов границы&gt; символ_границы_кроме_пробела

символ границы := символ_границы_кроме_пробела / " "

символ_границы_кроме_пробела := ЦИФРА / БУКВА ЛАТИНСКОГО АЛФАВИТА / "'"
              / "(" / ")" / "+" /"_" / "," / "-"
              / "." / "/" / ":" / "=" / "?"</pre><p>Общий вид многочастного тела — следующий:</p><pre>многочастное тело := приамбула  вложения  признак_конца  эпилог

вложение := разделитель  часть_тела  CRLF

разделитель := "--"  метка_границы  CRLF
               ; метка границы должна браться из поля Content-Type.
               ; Не должно быть пробелов между "--" и меткой границы.

признак конца := "--"  метка_границы  "--"  CRLF
               ; Опять, без пробела перед "--",

приамбула := игнорируемый текст

эпилог := игнорируемый текст

игнорируемый текст := *(*текст CRLF)

часть_тела := &lt;письмо RFC 822, со всеми необязательными полями
              заголовка&gt;</pre><p>ЗАМЕЧАННИЕ: В некоторых транспортах такие ограничения RFC 822, как использование тольеко печатных символов в теле, могут не действовать. Ослабления таких ограничений должны быть истолкованы как локальные расширения определения тела письма настолько, насколько они поддерживаются почтовым транспортом и адекватно документированы в поле заголовка Content-Transfer-Encoding. Однако, ни при каких обстоятельствах в заголовках как письма, так и его частей, не должно содержаться каких-либо символов, кроме US-ASCII.</p></div></div><noindex><div class="pages"><p class="r"> <b>Страница 11 из 30</b></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a title="Первая страница" href="../1521.rfc" class="arr">&lArr;</a></li><li><a title="На страницу назад" href="10"><b>&larr;</b></a></li><li><a class="x" href="../1521.rfc">1</a></li><li><a class="x" href="2">2</a></li><li><a class="x" href="3">3</a></li><li><a class="x" href="4">4</a></li><li><a class="x" href="5">5</a></li><li><a class="x" href="6">6</a></li><li><a href="7">7</a></li><li><a href="8">8</a></li><li><a href="9">9</a></li><li><a href="10">10</a></li><li class="this"><span>11</span></li><li><a href="12">12</a></li><li><a href="13">13</a></li><li><a href="14">14</a></li><li><a href="15">15</a></li><li><a class="x" href="16">16</a></li><li><a class="x" href="17">17</a></li><li><a class="x" href="18">18</a></li><li><a class="x" href="19">19</a></li><li><a class="x" href="20">20</a></li><li><a class="x" href="21">21</a></li><li><a class="x" href="22">22</a></li><li><a class="x" href="23">23</a></li><li><a class="x" href="24">24</a></li><li><a class="x" href="25">25</a></li><li><a class="x" href="26">26</a></li><li><a class="x" href="27">27</a></li><li><a class="x" href="28">28</a></li><li><a class="x" href="29">29</a></li><li><a class="x" href="30">30</a></li><li><a title="На страницу вперед" href="12">&rarr;</a></li><li><a title="Последняя страница" href="30">&rArr;</a></li></ul></div></noindex><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname="rfc2",disqus_title="RFC 1521 - Почтовый стандарт MIME",disqus_identifier="1521.rfc",disqus_url="http://rfc2.ru/1521.rfc";(function(){var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;dsq.src = "//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><div class="bubble">2007 - 2014 © <a href="../index.html" title="Русские переводы RFC">Русские переводы RFC</a>, IETF, ISOC.</div></div><div id="bottom" style="position:static !important;bottom:auto !important"><div class="bubble"><ul><li><!--723572853672--></li></ul></div></div><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter4680559 = new Ya.Metrika({id:4680559, webvisor:true, clickmap:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="http://mc.yandex.ru/watch/4680559" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --></body></html>
<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="../tpl/style.css@f4e332aa" type="text/css" /><link rel="prev" href="82" /><link rel="next" href="84" /><link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' /><style type="text/css">h1,h2,h3,h4{font-family:'Open Sans',sans-serif}</style><title>Перевод RFC 3775 — Поддержка мобильности в IPv6, стр. 83</title><meta name="author" content="David B. Johnson, Charles E. Perkins, Jari Arkko" /><link rel="alternate" type="application/rss+xml" title="RFC2.ru - Русские Переводы RFC" href="../rss.xml"></head><body><div id="content"><div id="nav"><div class="icon i0"></div> <a href="../index.html" accesskey="`">На Главную</a></div><div id="search" class="ya-site-form ya-site-form_inited_no"><form action="http://yandex.ru/sitesearch" method="get" target="_blank"><input type="hidden" name="searchid" value="2154295"/><input type="hidden" name="l10n" value="ru"/><input type="hidden" name="reqenc" value=""/><input type="hidden" name="submit" value="Найти"/><input type="search" value="" name="text" placeholder="Поиск по RFC2.ru" /></form></div><div itemscope itemtype="http://schema.org/ScholarlyArticle"><meta itemprop="inLanguage" content="ru" /><meta itemprop="editor" content="ru" /><div id="header"><h1><a itemprop="headline" href="../3775.rfc">RFC 3775 — Поддержка мобильности в IPv6</a></h1></div><dl class="mute"><dt></dt><dd><div class="icon i1"></div> RFC: 3775</dd><dd><div class="icon i3"></div> Оригинал: <a href="original" target="_blank" rel="nofollow"><span itemprop="alternativeHeadline">Mobility Support in IPv6</span></a></dd><dd><div class="icon i7"></div> Другие версии: <strong class="obsoleted_by">RFC 6275</strong></dd><dd><div class="icon i2"></div> Категория: <span itemprop="articleSection">Предложенный стандарт</span></dd><dd><div class="icon i4"></div> Дата публикации: <time itemprop="datePublished" datetime="2004-06-01">Июнь 2004</time></dd><dd><div class="icon i5"></div> Авторы: <span itemprop="author">David B. Johnson</span>, <span itemprop="author">Charles E. Perkins</span>, <span itemprop="author">Jari Arkko</span></dd><dd><div class="icon i6"></div> Перевод: <span itemprop="editor">Шнитман Виктор Зиновьевич</span></dd></dl><div class="pages"><p class="r"> <h2 class="pt"><span class="z">RFC 3775,</span> Страница 83 из 120</h2></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a accesskey="1" title="Первая страница" href="../3775.rfc" class="arr">&lArr;</a></li><li><a accesskey="2" title="На страницу назад" href="82"><b>&larr;</b></a></li><li><a class="x" href="../3775.rfc">1</a></li><li><a class="x" href="2">2</a></li><li><a class="x" href="3">3</a></li><li><a class="x" href="4">4</a></li><li><a class="x" href="5">5</a></li><li><a class="x" href="6">6</a></li><li><a class="x" href="7">7</a></li><li><a class="x" href="8">8</a></li><li><a class="x" href="9">9</a></li><li><a class="x" href="10">10</a></li><li><a class="x" href="11">11</a></li><li><a class="x" href="12">12</a></li><li><a class="x" href="13">13</a></li><li><a class="x" href="14">14</a></li><li><a class="x" href="15">15</a></li><li><a class="x" href="16">16</a></li><li><a class="x" href="17">17</a></li><li><a class="x" href="18">18</a></li><li><a class="x" href="19">19</a></li><li><a class="x" href="20">20</a></li><li><a class="x" href="21">21</a></li><li><a class="x" href="22">22</a></li><li><a class="x" href="23">23</a></li><li><a class="x" href="24">24</a></li><li><a class="x" href="25">25</a></li><li><a class="x" href="26">26</a></li><li><a class="x" href="27">27</a></li><li><a class="x" href="28">28</a></li><li><a class="x" href="29">29</a></li><li><a class="x" href="30">30</a></li><li><a class="x" href="31">31</a></li><li><a class="x" href="32">32</a></li><li><a class="x" href="33">33</a></li><li><a class="x" href="34">34</a></li><li><a class="x" href="35">35</a></li><li><a class="x" href="36">36</a></li><li><a class="x" href="37">37</a></li><li><a class="x" href="38">38</a></li><li><a class="x" href="39">39</a></li><li><a class="x" href="40">40</a></li><li><a class="x" href="41">41</a></li><li><a class="x" href="42">42</a></li><li><a class="x" href="43">43</a></li><li><a class="x" href="44">44</a></li><li><a class="x" href="45">45</a></li><li><a class="x" href="46">46</a></li><li><a class="x" href="47">47</a></li><li><a class="x" href="48">48</a></li><li><a class="x" href="49">49</a></li><li><a class="x" href="50">50</a></li><li><a class="x" href="51">51</a></li><li><a class="x" href="52">52</a></li><li><a class="x" href="53">53</a></li><li><a class="x" href="54">54</a></li><li><a class="x" href="55">55</a></li><li><a class="x" href="56">56</a></li><li><a class="x" href="57">57</a></li><li><a class="x" href="58">58</a></li><li><a class="x" href="59">59</a></li><li><a class="x" href="60">60</a></li><li><a class="x" href="61">61</a></li><li><a class="x" href="62">62</a></li><li><a class="x" href="63">63</a></li><li><a class="x" href="64">64</a></li><li><a class="x" href="65">65</a></li><li><a class="x" href="66">66</a></li><li><a class="x" href="67">67</a></li><li><a class="x" href="68">68</a></li><li><a class="x" href="69">69</a></li><li><a class="x" href="70">70</a></li><li><a class="x" href="71">71</a></li><li><a class="x" href="72">72</a></li><li><a class="x" href="73">73</a></li><li><a class="x" href="74">74</a></li><li><a class="x" href="75">75</a></li><li><a class="x" href="76">76</a></li><li><a class="x" href="77">77</a></li><li><a class="x" href="78">78</a></li><li><a href="79">79</a></li><li><a href="80">80</a></li><li><a href="81">81</a></li><li><a href="82">82</a></li><li class="this"><span>83</span></li><li><a href="84">84</a></li><li><a href="85">85</a></li><li><a href="86">86</a></li><li><a href="87">87</a></li><li><a class="x" href="88">88</a></li><li><a class="x" href="89">89</a></li><li><a class="x" href="90">90</a></li><li><a class="x" href="91">91</a></li><li><a class="x" href="92">92</a></li><li><a class="x" href="93">93</a></li><li><a class="x" href="94">94</a></li><li><a class="x" href="95">95</a></li><li><a class="x" href="96">96</a></li><li><a class="x" href="97">97</a></li><li><a class="x" href="98">98</a></li><li><a class="x" href="99">99</a></li><li><a class="x" href="100">100</a></li><li><a class="x" href="101">101</a></li><li><a class="x" href="102">102</a></li><li><a class="x" href="103">103</a></li><li><a class="x" href="104">104</a></li><li><a class="x" href="105">105</a></li><li><a class="x" href="106">106</a></li><li><a class="x" href="107">107</a></li><li><a class="x" href="108">108</a></li><li><a class="x" href="109">109</a></li><li><a class="x" href="110">110</a></li><li><a class="x" href="111">111</a></li><li><a class="x" href="112">112</a></li><li><a class="x" href="113">113</a></li><li><a class="x" href="114">114</a></li><li><a class="x" href="115">115</a></li><li><a class="x" href="116">116</a></li><li><a class="x" href="117">117</a></li><li><a class="x" href="118">118</a></li><li><a class="x" href="119">119</a></li><li><a class="x" href="120">120</a></li><li><a accesskey="3" title="На страницу вперед" href="84">&rarr;</a></li><li><a accesskey="4" title="Последняя страница" href="120">&rArr;</a></li></ul></div><div id="text" itemprop="articleBody"><h3 id="p11.2">11.2. Обработка заголовков мобильности</h3><p>Все мобильные узлы IPv6 при обработке заголовков мобильности должны (MUST) соблюдать правила, описанные в разд. 9.2.</p><h3 id="p11.3">11.3. Обработка пакетов</h3><h4 id="p11.3.1">11.3.1. Посылка пакетов при нахождении вне дома</h4><p>Когда мобильный узел находится вне дома, он продолжает использовать свой домашний адрес, и, кроме того, использует также один или несколько временных адресов. При посылке пакета, находясь вне дома, мобильный узел может (MAY) выбрать один из этих адресов, чтобы использовать в качестве адреса источника пакета, следующим образом:</p><ul class="dot"><li><p>Оычно протоколы, расположенные выше уровня IP, для большинства пакетов будут рассматривать домашний адрес мобильного узла, как его IP-адрес. Для посылаемых пакетов, которые являются частью соединений транспортного уровня, установленных, когда мобильный узел находился дома, мобильный узел должен (MUST) использовать свой домашний адрес. Подобным образом, для посылаемых пакетов, которые являются частью соединений транспортного уровня, которые мобильный узел может все еще использовать после перемещения на новое местоположение, мобильный узел должен (SHOULD) использовать свой домашний адрес этим способом. Если существует привязка, мобильный узел должен (SHOULD) посылать пакеты непосредственно узлу-корреспонденту. В противном случае, если привязка отсутствует, мобильный узел должен (MUST) использовать туннелирование в обратном направлении.</p></li><li><p>Мобильный узел может (MAY) принять решение прямо использовать один из своих временных адресов в качестве адреса источника пакета, не требуя использования в пакете опции Home Address. Это особенно полезно для кратковременных обменов информацией, которые можно легко повторить, если они не удаются. Использование временного адреса мобильного узла в качестве источника таких запросов обычно будет иметь меньшие накладные расходы, чем использование домашнего адреса мобильного узла, поскольку ни в запросе, ни в ответе на него нет неоходимости использовать никакие дополнительные опции. Такие пакеты могут маршрутизироваться обычным образом, прямо между их источником и местом назначения, не зависимо от протокола Mobile IPv6. Однако если приложение, работающее на мобильном узле, не имеет конкретных знаний о том, что посылаемое сообщение подогнано к этому общему способу обмена информацией, мобильный узел не должен использовать свой временный адрес в качестве источника пакета этим способом.</p><p>Выбор наиболее эффективного метода обмена информацией зависит от приложения и находится за рамками данной спецификации. Программные интерфейсы API, необходимые для управления этим выбором, также находятся за рамками данной спецификации.</p></li><li><p>Когда мобильный узел находится не на своем домашнем линке, он не должен (MUST NOT) использовать опцию места назначения Home Address при обмене информацией с «локальными для линка» или «локальными для сайта» партнерами, если область действия домашнего адреса больше области действия адреса партнера.</p><p>Подобным образом, мобильный узел не должен (MUST NOT) использовать опцию места назначения Home Address для пакетов IPv6 Neighbor Discovery [12].</p></li></ul><p>Детальная работа в этих случаях описана позже в данном разделе, а также обсуждается в [31].</p><p>Для пакетов, посылаемых мобильным узлом, когда он находится дома, не требуется никакой специальной обработки мобильного IPv6. Подобным образом, если мобильный узел использует любой адрес, отличный от своего домашнего адреса, в качестве источника пакета, посылаемого, когда он находится вне дома, никакой специальной обработки мобильного IPv6 не требуется. В любом случае, пакет просто адресуется и передается тем же самым способом, как любой обычный пакет IPv6.</p><p>Для пакетов, посылаемых мобильным узлом, когда он находится вне дома, с использованием домашнего адреса мобильного узла в качестве источника, требуется специальная обработка пакета мобильным IPv6. Это может быть сделано следующими двумя способами:</p><p>Оптимизация маршрута</p><p>Этот способ доставки пакетов не требует прохода через домашнюю сеть и обычно дает возможность осуществления более быстрой и надежной передачи. Мобильный узел нуждается в гарантии того, что для его домашнего адреса имеется элемент кэша привязок так, чтобы узел-корреспондент мог обработать пакет (в разд. 9.3.1 определены правила обработки опции места назначения Home Address на узле-корреспонденте). Мобильный узел должен (SHOULD) проверить свой список обновлений привязки на наличие элемента, удовлетворяющего следующим условиям:</p><ul class="dot"><li>Поле Source Address посылаемого пакета равно домашнему адресу в элементе списка.</li><li>Поле Destination Address посылаемого пакета равно адресу узла-корреспондента в этом элементе списка.</li><li>Один из временных адресов мобильного узла появляется в качестве временного адреса в этом элементе списка.</li><li>Элемент списка указывает на то, что привязка была успешно создана.</li><li>Оставшееся время жизни привязки больше нуля.</li></ul><p>Если эти условия соблюдены, мобильный узел знает, что узел-корреспондент имеет подходящий элемент кэша привязок.</p><p>Мобильный узел должен (SHOULD) организовать доставку домашнего адреса в опции Home Address, и должен (MUST) установить поле Source Address в заголовке IPv6 в значение временного адреса, который мобильный узел зарегистрировал для использования в данном узле-корреспонденте. Тогда узел-корреспондент будет использовать адрес, доставленный в опции Home Address, для выполнения функции, традиционно выполняемой адресом источника IP в заголовке IPv6. Затем домашний адрес мобильного узла доставляется более высоким протокольным уровням и приложениям.</p><p>Более точно:</p><ul class="dot"><li>Конструировать пакет, используя домашний адрес мобильного узла, как адрес источника (Source Address) пакета тем же способом, как если бы мобильный узел был дома. Это включает вычисление контрольной суммы верхнего уровня, используя домашний адрес в качестве значения источника.</li><li>Вставить в пакет опцию Home Address с полем Home Address, скопированным из первоначального значения поля Source Address в пакете.</li><li>Заменить поле Source Address в IPv6-заголовке пакета на один из временных адресов мобильного узла. Обычно это будет текущий основной временный адрес, но должен (MUST) быть адрес, присвоенный интерфейсу на используемом линке.</li></ul><p>При использовании временного адреса в качестве адреса источника в IPv6-заголовке и домашнего адреса мобильного узла в опции Home Address пакет будет способным благополучно пройти через любой маршрутизатор, реализующий входную фильтрацию [26].</p><ul><li><p>Туннелирование в обратном направлении</p></li><li class="lib"><p>Это механизм, который туннелирует пакеты через домашнего агента. Он не столь эффективен, как описанный выше механизм, но необходим, если привязка в узле-корреспонденте еще отсутствует.</p><p>Этот механизм используется для пакетов, которые в IPv6-заголовке имеют в качестве адреса источника домашний адрес мобильного узла, или с пакетами управляющих протоколов групповой пересылки, как описано в разд. 11.3.4. Более точно:</p><ul class="dot"><li>Пакет посылается домашнему агенту, используя IPv6-инкапсуляцию [15].</li><li>Адрес источника в туннельном пакете равен основному временному адресу, который зарегистрирован в домашнем агенте.</li><li>Адрес места назначения в туннельном пакете является адресом домашнего агента.</li></ul><p>Затем домашний агент передаст инкапсулированный пакет узлу-корреспонденту.</p></li></ul></div></div><noindex><div class="pages"><p class="r"> <b>Страница 83 из 120</b></p><ul><li><noindex><a href="print" rel="nofollow">Одной Страницей</a></noindex></li><li><a title="Первая страница" href="../3775.rfc" class="arr">&lArr;</a></li><li><a title="На страницу назад" href="82"><b>&larr;</b></a></li><li><a class="x" href="../3775.rfc">1</a></li><li><a class="x" href="2">2</a></li><li><a class="x" href="3">3</a></li><li><a class="x" href="4">4</a></li><li><a class="x" href="5">5</a></li><li><a class="x" href="6">6</a></li><li><a class="x" href="7">7</a></li><li><a class="x" href="8">8</a></li><li><a class="x" href="9">9</a></li><li><a class="x" href="10">10</a></li><li><a class="x" href="11">11</a></li><li><a class="x" href="12">12</a></li><li><a class="x" href="13">13</a></li><li><a class="x" href="14">14</a></li><li><a class="x" href="15">15</a></li><li><a class="x" href="16">16</a></li><li><a class="x" href="17">17</a></li><li><a class="x" href="18">18</a></li><li><a class="x" href="19">19</a></li><li><a class="x" href="20">20</a></li><li><a class="x" href="21">21</a></li><li><a class="x" href="22">22</a></li><li><a class="x" href="23">23</a></li><li><a class="x" href="24">24</a></li><li><a class="x" href="25">25</a></li><li><a class="x" href="26">26</a></li><li><a class="x" href="27">27</a></li><li><a class="x" href="28">28</a></li><li><a class="x" href="29">29</a></li><li><a class="x" href="30">30</a></li><li><a class="x" href="31">31</a></li><li><a class="x" href="32">32</a></li><li><a class="x" href="33">33</a></li><li><a class="x" href="34">34</a></li><li><a class="x" href="35">35</a></li><li><a class="x" href="36">36</a></li><li><a class="x" href="37">37</a></li><li><a class="x" href="38">38</a></li><li><a class="x" href="39">39</a></li><li><a class="x" href="40">40</a></li><li><a class="x" href="41">41</a></li><li><a class="x" href="42">42</a></li><li><a class="x" href="43">43</a></li><li><a class="x" href="44">44</a></li><li><a class="x" href="45">45</a></li><li><a class="x" href="46">46</a></li><li><a class="x" href="47">47</a></li><li><a class="x" href="48">48</a></li><li><a class="x" href="49">49</a></li><li><a class="x" href="50">50</a></li><li><a class="x" href="51">51</a></li><li><a class="x" href="52">52</a></li><li><a class="x" href="53">53</a></li><li><a class="x" href="54">54</a></li><li><a class="x" href="55">55</a></li><li><a class="x" href="56">56</a></li><li><a class="x" href="57">57</a></li><li><a class="x" href="58">58</a></li><li><a class="x" href="59">59</a></li><li><a class="x" href="60">60</a></li><li><a class="x" href="61">61</a></li><li><a class="x" href="62">62</a></li><li><a class="x" href="63">63</a></li><li><a class="x" href="64">64</a></li><li><a class="x" href="65">65</a></li><li><a class="x" href="66">66</a></li><li><a class="x" href="67">67</a></li><li><a class="x" href="68">68</a></li><li><a class="x" href="69">69</a></li><li><a class="x" href="70">70</a></li><li><a class="x" href="71">71</a></li><li><a class="x" href="72">72</a></li><li><a class="x" href="73">73</a></li><li><a class="x" href="74">74</a></li><li><a class="x" href="75">75</a></li><li><a class="x" href="76">76</a></li><li><a class="x" href="77">77</a></li><li><a class="x" href="78">78</a></li><li><a href="79">79</a></li><li><a href="80">80</a></li><li><a href="81">81</a></li><li><a href="82">82</a></li><li class="this"><span>83</span></li><li><a href="84">84</a></li><li><a href="85">85</a></li><li><a href="86">86</a></li><li><a href="87">87</a></li><li><a class="x" href="88">88</a></li><li><a class="x" href="89">89</a></li><li><a class="x" href="90">90</a></li><li><a class="x" href="91">91</a></li><li><a class="x" href="92">92</a></li><li><a class="x" href="93">93</a></li><li><a class="x" href="94">94</a></li><li><a class="x" href="95">95</a></li><li><a class="x" href="96">96</a></li><li><a class="x" href="97">97</a></li><li><a class="x" href="98">98</a></li><li><a class="x" href="99">99</a></li><li><a class="x" href="100">100</a></li><li><a class="x" href="101">101</a></li><li><a class="x" href="102">102</a></li><li><a class="x" href="103">103</a></li><li><a class="x" href="104">104</a></li><li><a class="x" href="105">105</a></li><li><a class="x" href="106">106</a></li><li><a class="x" href="107">107</a></li><li><a class="x" href="108">108</a></li><li><a class="x" href="109">109</a></li><li><a class="x" href="110">110</a></li><li><a class="x" href="111">111</a></li><li><a class="x" href="112">112</a></li><li><a class="x" href="113">113</a></li><li><a class="x" href="114">114</a></li><li><a class="x" href="115">115</a></li><li><a class="x" href="116">116</a></li><li><a class="x" href="117">117</a></li><li><a class="x" href="118">118</a></li><li><a class="x" href="119">119</a></li><li><a class="x" href="120">120</a></li><li><a title="На страницу вперед" href="84">&rarr;</a></li><li><a title="Последняя страница" href="120">&rArr;</a></li></ul></div></noindex><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname="rfc2",disqus_title="RFC 3775 - Поддержка мобильности в IPv6",disqus_identifier="3775.rfc",disqus_url="http://rfc2.ru/3775.rfc";(function(){var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;dsq.src = "//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);})();</script><div class="bubble">2007 - 2014 © <a href="../index.html" title="Русские переводы RFC">Русские переводы RFC</a>, IETF, ISOC.</div></div><div id="bottom" style="position:static !important;bottom:auto !important"><div class="bubble"><ul><li><!--723572853672--></li></ul></div></div><!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter4680559 = new Ya.Metrika({id:4680559, webvisor:true, clickmap:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="http://mc.yandex.ru/watch/4680559" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --></body></html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=WINDOWS-1251">

<meta name="author" content="nmalykh">
<meta name="description" content="">
<meta name="keywords" content="">

<title>Перевод RFC 793</title>
<style type="text/css">
 table.main {}
 tr.row {}
 td.cell {}
 div.block {}
 div.paragraph {}
 .font0 { font:8.00pt "Arial", sans-serif; }
 .font1 { font:9.00pt "Arial", sans-serif; }
 .font2 { font:11.00pt "Arial", sans-serif; }
 .font3 { font:12.00pt "Arial", sans-serif; }
 .font4 { font:14.00pt "Arial", sans-serif; }
 .font5 { font:15.00pt "Arial", sans-serif; }
 .font6 { font:16.00pt "Arial", sans-serif; }
 .font7 { font:5.00pt "Courier New", monospace; }
 .font8 { font:8.00pt "Courier New", monospace; }
 .font9 { font:9.00pt "Courier New", monospace; }
 .font10 { font:12.00pt "Courier New", monospace; }
 .font11 { font:12.65pt "Courier New", monospace; }
 .font12 { font:5.00pt "Times New Roman", serif; }
 .font13 { font:8.00pt "Times New Roman", serif; }
 .font14 { font:9.00pt "Times New Roman", serif; }
 .font15 { font:13.00pt "Times New Roman", serif; }
</style>
</head>

<body>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:178.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:93.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:119.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
        <div class=paragraph><div align="center"><a href="index.htm">На главную
</a></div><br>
<div style="height: 90px;">
<script type="text/javascript"><!--
google_ad_client = "pub-0899253526956684";
/* 728x90 */
google_ad_slot = "3113460964";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt;">
<div class=block style=" width:203.04pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 71.76pt; text-align:left;"><span class=font1>RFC-793</span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:272.16pt;">
<div class=block style=" width:272.16pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>TRANSMISSION CONTROL PROTOCOL</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:119.76pt;">
<div class=block style=" width:119.76pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 27.84pt; text-align:left;"><span class=font1>Сентябрь 1981</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:108.24pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:22.80pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font6><b>Программная спецификация протокола DARPA INTERNET</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:43.68pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:191.76pt;">
<div class=paragraph style=" padding:0.00pt 148.80pt 0.00pt 71.04pt; text-align:left;"><span class=font3 style=" line-height:15.12pt;"><b>Подготовлена для Defense Advanced Research Projects Agency Information Processing Techniques Office 1400 Wilson Boulevard Arlington, Virginia 22209</b></span></div>
<div class=paragraph style=" padding:13.44pt 336.96pt 0.00pt 71.04pt; text-align:left;"><span class=font3 style=" line-height:15.12pt;"><b>Information Sciences Institute University of Southern California 4676 Admiralty Way Marina del Rey, California 90291</b></span></div>
<div class=paragraph style=" padding:18.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1 style=" line-height:11.28pt;">RFC: 793</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1 style=" line-height:11.28pt;">Заменяет RFC 761</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1 style=" line-height:11.28pt;">IEN: 129, 124, 112, 81, 55, 44, 40, 27, 21, 5</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:416.40pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:381.84pt;">
<div class=block style=" width:381.84pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>Перевод на русский язык - Н. Малых (<span style=" color:rgb(0,0,128);"><a href="mailto:owner@nmalykh.org"><u>owner@nmalykh.org</u></a></span>)</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:93.36pt;">
<div class=block style=" width:93.36pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font1>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:119.76pt;">
<div class=block style=" width:119.76pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1 style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:178.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:93.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:119.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:209.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:225.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt;">
<div class=block style=" width:160.56pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font1>RFC-793</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:209.04pt;">
<div class=block style=" width:209.04pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>TRANSMISSION CONTROL PROTOCOL</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:225.36pt;">
<div class=block style=" width:225.36pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 90.96pt; text-align:left;"><span class=font9>Сентябрь <span class=font1>1981</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:26.16pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:744.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font6><b>Оглавление</b></span></div>
<div class=paragraph style=" padding:2.40pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Предисловие ............................................................................................................................................................................................... 3</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">1.&nbsp;Введение ................................................................................................................................................................................................. 3</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">1.1.&nbsp;Мотивация ..................................................................................................................................................................................... 3</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">1.2.&nbsp;Сфера применимости протокола .................................................................................................................................................. 4</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">1.3.&nbsp;Структура документа .................................................................................................................................................................... 4</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">1.4.&nbsp;Интерфейсы ................................................................................................................................................................................... 4</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">1.5.&nbsp;Работа протокола .......................................................................................................................................................................... 4</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Базовая передача данных ......................................................................................................................................................... 5</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Надежность ............................................................................................................................................................................... 5</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Управление потоком данных .................................................................................................................................................. 5</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Мультиплексирование ............................................................................................................................................................. 5</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Соединения ............................................................................................................................................................................... 5</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Предпочтения и безопасность ................................................................................................................................................. 5</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2.&nbsp;Концепции .............................................................................................................................................................................................. 5</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2.1.&nbsp;Элементы межсетевого взаимодействия ..................................................................................................................................... 5</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2.2.&nbsp;Модель работы протокола ............................................................................................................................................................ 6</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2.3.&nbsp;Среда хоста .................................................................................................................................................................................... 6</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2.4.&nbsp;Интерфейсы ................................................................................................................................................................................... 6</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2.5.&nbsp;Связи с другими протоколами ...................................................................................................................................................... 6</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2.6.&nbsp;Надежная связь .............................................................................................................................................................................. 7</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2.7.&nbsp;Организация и разрыв соединений .............................................................................................................................................. 7</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2.8.&nbsp;Обмен данными ............................................................................................................................................................................. 8</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2.9.&nbsp;Предпочтения и безопасность ...................................................................................................................................................... 8</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2.10.&nbsp;Принцип устойчивости ............................................................................................................................................................... 8</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">3.&nbsp;Функциональная спецификация ............................................................................................................................................................ 8</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">3.1.&nbsp;Формат заголовка .......................................................................................................................................................................... 8</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Формат заголовка TCP ................................................................................................................................................................... 8</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Source Port - порт отправителя: 16 битов .............................................................................................................................. 8</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Destination Port - порт назначения: 16 битов ........................................................................................................................ 9</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Sequence Number - порядковый номер: 32 бита .................................................................................................................... 9</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Acknowledgment Number - номер подтверждения: 32 бита .................................................................................................. 9</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Data Offset - смещение данных: 4 бита .................................................................................................................................. 9</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Reserved - резервное поле: 6 битов .................................................................................................................................. 9</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Control Bits - биты управления: 6 битов (слева направо): .............................................................................................. 9</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Window -окно: 16 битов ......................................................................................................................................................... 9</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Checksum - контрольная сумма: 16 битов ............................................................................................................................. 9</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Urgent Pointer - указатель срочности: 16 битов .................................................................................................................... 9</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Options - опции: переменная длина ....................................................................................................................................... 9</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Определения опций ........................................................................................................................................................... 9</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">End of Option List ......................................................................................................................................................... 9</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">No-Operation ....................................................... ........................................................................................................ 10</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Maximum Segment Size .............................................................................................................................................. 10</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Maximum Segment Size - максимальный размер сегмента: 16 битов ................................................................................. 10</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Padding - заполнение: переменная длина ............................................................................................................................ 10</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">3.2.&nbsp;Терминология .............................................................................................................................................................................. 10</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Переменные порядкового номера передачи ......................................................................................................................... ...... 10</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Переменные порядкового номера приема .................................................................................................................................. 10</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Пространство номеров для передачи ............................................................................................................................... ........... 10</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Пространство номеров для приема ............................................................................................................................................. 10</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Переменные текущего сегмента .................................................................................................................................................. 11</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">3.3.&nbsp;Порядковые номера ..................................................................................................................................................................... 12</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Выбор начального номера ........................................................................................................................................................... 13</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Когда нужно сохранять паузу ............................................................................................................................................... 14</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Концепция паузы TCP ........................................................................................................................................................... 14</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">3.4.&nbsp;Организация соединения ............................................................................................................................................................ 15</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Полуоткрытые соединения и другие аномалии ......................................................................................................................... 15</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Генерация Reset ......................................................................................................................... ................................................... 16</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Обработка Reset ........................................................................................................................................................................... 17</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">3.5.&nbsp;Завершение соединения .............................................................................................................................................................. 17</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">1: завершение инициирует локальный пользователь .......................................................................................................... 17</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2: TCP получает FIN из сети ................................................................................................................................................. 17</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">3: оба пользователя закрывают соединение одновременно ................................................................................................ 17</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:12.00pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:369.60pt;">
<div class=block style=" width:369.60pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font1 style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a><span style=" color:rgb(0,0,90);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style=" color:rgb(0,0,0);">2</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:225.36pt;">
<div class=block style=" width:225.36pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>Перевод на русский язык - Н. Малых</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:209.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:225.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:300.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:91.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt;">
<div class=block style=" width:203.04pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 71.76pt; text-align:left;"><span class=font1>RFC-793</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:300.00pt;">
<div class=block style=" width:300.00pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>TRANSMISSION CONTROL PROTOCOL</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:91.92pt;">
<div class=block style=" width:91.92pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>Сентябрь 1981</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:383.04pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">3.6.&nbsp;Предпочтения и безопасность .................................................................................................................................................... 18</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">3.7.&nbsp;Обмен данными ........................................................................................................................................................................... 18</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Тайм-аут повторной передачи ..................................................................................................................................................... 18</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 113.28pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Пример процедуры тайм-аута ............................................................................................................................................... 18</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 99.12pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Обмен срочной информацией ..................................................................................................................................................... 18</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 99.12pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Управление окном ........................................................................................................................................................................ 19</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 113.28pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Предложения по управлению окном .................................................................................................................................... 19</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">3.8.&nbsp;Интерфейсы ................................................................................................................................................................................. 19</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Интерфейс TCP - пользователь ................................................................................................................................................... 19</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 113.28pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Пользовательские команды TCP .......................................................................................................................................... 20</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 127.44pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Open .................................................................................................................................................................................. 20</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 127.44pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Send ................................................................................................................................................................................... 20</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 127.44pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Receive .............................................................................................................................................................................. 21</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 127.44pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Close .................................................................................................................................................................................. 21</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 127.44pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Status ....................................................... .......................................................................................................................... 21</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 127.44pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Abort ................................................................................................................................................................................. 22</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 113.28pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Сообщения от TCP к пользователю ...................................................................................................................................... 22</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 99.12pt; text-align:justify;"><span class=font14 style=" line-height:11.52pt;">Интерфейс TCP - нижележащий уровень ................................................................................................................................... 22</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">3.9.&nbsp;Обработка событий ..................................................................................................................................................................... 22</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 113.28pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Пользовательские вызовы ..................................................................................................................................................... 23</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 127.44pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">OPEN ............................................................................................................................................................................... 23</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 127.44pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">SEND ............................................................................................................................................................................... 23</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 127.44pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">RECEIVE ......................................................................................................................................................................... 24</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 127.44pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">CLOSE ............................................................................................................................................................................. 24</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 127.44pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">ABORT ............................................................................................................................................................................ 24</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 127.44pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">STATUS ........................................................................................................................................................................... 25</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 113.28pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Доставка сегментов ................................................................................................................................................................ 25</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 113.28pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Тайм-ауты ............................................................................................................................................................................... 29</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 127.44pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Пользовательский тайм-аут ............................................................................................................................................ 29</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 127.44pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Повторная передача ......................................................................................................................................................... 29</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 127.44pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Время ожидания ............................................................................................................................................................... 29</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Глоссарий .................................................................................................................................................................................................. 29</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Литература ................................................................................................................................................................................................ 32</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:21.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:343.92pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font6><b>Предисловие</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">В этом документе описан стандарт Министерства обороны США для протокола управления передачей TCP (Transmission Control Protocol). До этого было выпущено девять предварительных редакций спецификации ARPA TCP, на которых основан данный стандарт, и текст документа тесно связан с предварительными спецификациями. В разработке концепций и подготовке текста документа принимало участие много людей. В данной редакции более четко изложены некоторые детали, удален механизм изменения размера буфера end-of-letter и заново описан механизм letter как функция push<sup>1</sup>.</span></div>
<div class=paragraph style=" padding:0.00pt 28.80pt 0.00pt 71.04pt; text-align:justify; text-indent:415.20pt;"><span class=font14 style=" line-height:10.32pt;"><i>Jon Postel, редактор Этот документ уже стал достоянием истории, несмотря на то, что большинство рассмотренных здесь вопросов сохраняют актуальность. Протокол TCP является основой работы сети Internet в ее современном состоянии. Долгие годы использования TCP и связанных с ним сетевых протоколов не могли не отразиться на терминологии, определениях и т. п. Поэтому буквальный перевод исходного документа современным читателям мог бы показаться непонятным. Исходя из этого, в переводе используется современная терминология. Кроме того, в RFC-793 за время использования протокола TCP был обнаружен целый ряд неточностей и ошибок, исправленных в более поздних документах и спецификациях. Нет смысла сохранять неточности при переводе, поэтому соответствующие фрагменты RFC-793 при переводе были скорректированы с учетом действующих спецификаций. В переводе такие места отмечены сносками с указанием источника корректных сведений.</i></span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 457.20pt; text-align:left;"><span class=font14><i>Николай Малых, переводчик</i></span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font6><b>1. Введение</b></span></div>
<div class=paragraph style=" padding:0.00pt 29.04pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Протокол TCP предназначен для надежной и гарантированной доставки данных между хостами в компьютерных сетях с коммутацией пакетов и между такими сетями через промежуточные системы.</span></div>
<div class=paragraph style=" padding:0.00pt 28.80pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">В этом документе описаны функции, выполняемые протоколом TCP, программные реализации протокола и интерфейс с программами и пользователями, которым требуется сервис TCP.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font4><b>1.1. Мотивация</b></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">Компьютерные коммуникационные системы играют все более важную роль в государственных, военных и деловых средах. В этом документе основное внимание сфокусировано на требованиях военных систем компьютерных коммуникаций, особенно вопросам устойчивости при наличии коммуникационных сбоев и доступности связи при возникновении насыщения, но многие из этих проблем встречаются не только в военных приложениях. Разработаны и реализованы стратегические и тактические компьютерные коммуникационные системы и очень важно</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:33.12pt;">
<div class=paragraph style=" padding:0.00pt 29.28pt 0.00pt 84.96pt; text-align:left; text-indent:-13.92pt;"><span class=font13 style=" line-height:9.12pt;">1    Тем не менее в документе осталось некоторое количество ошибок. Более подробную информацию о них можно найти в RFC-1122. <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>Перевод на русский язык - Н. Малых (<span style=" color:rgb(0,0,128);"><a href="mailto:owner@nmalykh.org"><u>owner@nmalykh.org</u></a></span>)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:300.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:91.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:209.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:225.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt;">
<div class=block style=" width:160.56pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font1>RFC-793</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:209.04pt;">
<div class=block style=" width:209.04pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>TRANSMISSION CONTROL PROTOCOL</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:225.36pt;">
<div class=block style=" width:225.36pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 90.96pt; text-align:left;"><span class=font1>Сентябрь 1981</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:7.68pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:769.92pt;">
<div class=paragraph style=" padding:0.00pt 70.32pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">обеспечить связь между такими системами и стандартный протокол взаимодействия между процессами, который будет поддерживать широкий спектр приложений. Предполагая необходимость такого стандарта, исследовательская группа Deputy Undersecretary of Defense for Research and Engineering подготовила протокол TCP (Transmission Control Protocol - протокол управления передачей), описываемый здесь, в качестве стандартного протокола обмена информацией между процессами для сетей Министерства обороны США.</span></div>
<div class=paragraph style=" padding:1.44pt 70.56pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">TCP представляет собой ориентированный на соединения протокол сквозной доставки с гарантией, предназначенный для использования в многоуровневой иерархии протоколов, поддерживающей разнородные сетевые приложения. TCP обеспечивает надежный обмен данными между парами процессов на хостах, подключенных к разным, но связанным между собой сетям. Протокол исходит из незначительного числа предпосылок о надежности коммуникационных протоколов, расположенных ниже уровня TCP. Протокол TCP предполагает, что он может использовать простой и потенциально ненадежный сервис доставки дейтаграмм протоколов нижележащих уровней. В принципе протокол TCP должен работать в широком классе коммуникационных систем, имеющих электрические соединения с сетями коммутации пакетов (packet-switched) или каналов (circuit-switched).</span></div>
<div class=paragraph style=" padding:1.44pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Протокол TCP основан на концепциях, впервые изложенных Серфом и Каном в работе [1]. TCP располагается в многоуровневой модели непосредственно над базовым протоколом Internet (IP) [2], который обеспечивает для TCP возможность приема и передачи сегментов информации переменной длины, &quot;вложенных&quot; в дейтаграммы. Дейтаграммы обеспечивают способ адресации отправителя и получателя TCP, расположенных в различных сетях. Протокол IP обеспечивает также фрагментацию и сборку сегментов TCP, требуемую для доставки информации через множество сетей и соединяющих их шлюзов (маршрутизаторов). Протокол IP также передает информацию о предпочтениях (precedence) и безопасности, а также о делении сегментов TCP на части - эта информация передается между отправителем и получателем через множество разнородных сетей.</span></div>
<div class=paragraph style=" padding:1.44pt 0.00pt 0.00pt 237.84pt; text-align:left;"><span class=font14 style=" line-height:15.60pt;"><b><i>Уровни протоколов</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 232.08pt; text-align:left;"><span class=font14 style=" line-height:15.60pt;">Вышележащий уровень</span></div>
<div class=paragraph style=" padding:0.00pt 40.56pt 0.00pt 0.00pt; text-align:center;"><span class=font14 style=" line-height:15.60pt;">TCP</span></div>
<div class=paragraph style=" padding:0.00pt 40.56pt 0.00pt 0.00pt; text-align:center;"><span class=font14 style=" line-height:15.60pt;">Протокол Internet (IP)</span></div>
<div class=paragraph style=" padding:0.00pt 40.56pt 0.00pt 0.00pt; text-align:center;"><span class=font14 style=" line-height:15.60pt;">Коммуникационная сеть</span></div>
<div class=paragraph style=" padding:0.24pt 44.40pt 0.00pt 0.00pt; text-align:center;"><span class=font14><i>Рисунок 1</i></span></div>
<div class=paragraph style=" padding:1.44pt 42.48pt 0.00pt 0.00pt; text-align:center;"><span class=font14 style=" line-height:10.08pt;">Большая часть этого документа написана в контексте реализаций TCP, работающих на хостах вместе с протоколами</span></div>
<div class=paragraph style=" padding:0.00pt 42.96pt 0.00pt 0.00pt; text-align:center;"><span class=font14 style=" line-height:10.08pt;">вышележащего уровня. Некоторые компьютерные системы соединяются с сетью через специальные периферийные (front-end)</span></div>
<div class=paragraph style=" padding:0.24pt 42.48pt 0.00pt 0.00pt; text-align:center;"><span class=font14 style=" line-height:10.08pt;">компьютеры, которые обеспечивают поддержку уровней TCP и IP, а также сетевые программы. Спецификация TCP описывает</span></div>
<div class=paragraph style=" padding:0.00pt 42.48pt 0.00pt 0.00pt; text-align:center;"><span class=font14 style=" line-height:10.08pt;">интерфейс с протоколами вышележащего уровня, которые представляются реализуемым и для случаев front-end (с помощью</span></div>
<div class=paragraph style=" padding:0.24pt 196.56pt 0.00pt 0.00pt; text-align:center;"><span class=font14 style=" line-height:10.08pt;">специального протокола взаимодействия между хостом и периферийным компьютером).</span></div>
<div class=paragraph style=" padding:6.96pt 0.00pt 0.00pt 29.28pt; text-align:left;"><span class=font4 style=" letter-spacing:-0.55pt;"><b>1.2.</b><span style=" letter-spacing:0.00pt;"><b>&nbsp;</b></span><span style=" letter-spacing:-0.05pt;"><b>Сфера применимости протокола</b></span></span></div>
<div class=paragraph style=" padding:2.88pt 71.76pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Протокол TCP предназначен для организации надежного обмена данными между процессами в разнородных сетевых средах. Протокол TCP является протоколом общего пользования в различных сетях для обмена информацией между хостами.</span></div>
<div class=paragraph style=" padding:6.72pt 0.00pt 0.00pt 29.28pt; text-align:left;"><span class=font4 style=" letter-spacing:-0.55pt;"><b>1.3.</b><span style=" letter-spacing:0.00pt;"><b>&nbsp;</b></span><span style=" letter-spacing:-0.15pt;"><b>Структура документа</b></span></span></div>
<div class=paragraph style=" padding:3.12pt 70.56pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">В этом документе содержатся спецификации функций, требуемых от любой реализации протокола TCP, а также спецификации взаимодействия с протоколами соседних уровней и протоколом TCP на других хостах. В оставшейся части данного раздела приведено краткое описание работы протокола и интерфейсов. В разделе 2 рассмотрены базовые концепции архитектуры TCP. Раздел 3 содержит детальные описания действий, выполняемых протоколом TCP в ответ на те или иные события (прием новых сегментов, пользовательские вызовы, ошибки и т. п.), и описание форматов данных в сегментах TCP.</span></div>
<div class=paragraph style=" padding:6.72pt 0.00pt 0.00pt 29.28pt; text-align:left;"><span class=font4 style=" letter-spacing:-0.55pt;"><b>1.4.</b><span style=" letter-spacing:0.00pt;"><b>&nbsp; </b></span><span style=" letter-spacing:-0.25pt;"><b>Интерфейсы</b></span></span></div>
<div class=paragraph style=" padding:3.36pt 71.28pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Протокол TCP с одной стороны взаимодействует с пользовательскими или прикладными процессами, а с другой стороны - с протоколами нижележащего уровня (такими, как IP).</span></div>
<div class=paragraph style=" padding:1.68pt 70.56pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Интерфейс между прикладными процессами и TCP проиллюстрирован достаточно детально. Этот интерфейс содержит набор процедур, подобных процедурам операционной системы, используемым для работы с файлами. Например, существуют процедуры открытия и закрытия соединений, а также приема данных через организованное соединение. Предполагается также, что TCP может обмениваться данными с прикладными программами в асинхронном режиме. Хотя разработчикам TCP предоставляется разумная свобода выбора реализации интерфейса, существует минимальный набор функций для интерфейса между TCP и пользовательским уровнем, который должен присутствовать во всех реализациях протокола</span></div>
<div class=paragraph style=" padding:1.68pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Интерфейс между TCP и протоколом нижележащего уровня задается менее детально за исключением предположения о наличии механизма асинхронного обмена информацией между уровнями. Предполагается также, что спецификация взаимодействия будет задаваться стандартом для протокола нижележащего уровня. Протокол TCP разработан для использования в разнотипных сетевых средах. В качестве протокола нижележащего уровня в данном документе обычно предполагается протокол IP [2].</span></div>
<div class=paragraph style=" padding:7.20pt 0.00pt 0.00pt 29.28pt; text-align:left;"><span class=font4 style=" letter-spacing:-0.55pt;"><b>1.5.</b><span style=" letter-spacing:0.00pt;"><b>&nbsp; </b></span><span style=" letter-spacing:-0.10pt;"><b>Работа протокола</b></span></span></div>
<div class=paragraph style=" padding:2.88pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Как было отмечено выше, задачей протокола TCP является обеспечение надежных и потенциально безопасных логических устройств или соединений между парами процессов. Для обеспечения такого сервиса на базе менее надежных коммуникационных систем Internet требуется поддержка следующих функций:</span></div>
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>•&nbsp; &nbsp; &nbsp;</b>базовый обмен данными (Basic Data Transfer);</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>•&nbsp; &nbsp; &nbsp;</b>надежность (Reliability);</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>•&nbsp; &nbsp; &nbsp;</b>управление потоком данных (Flow Control);</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>•&nbsp; &nbsp; &nbsp;</b>мультиплексирование (Multiplexing);</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>•&nbsp; &nbsp; &nbsp;</b>поддержка соединений (Connections);</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>•&nbsp; &nbsp; &nbsp;</b>предпочтения и безопасность (Precedence and Security)</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;">В следующих параграфах рассмотрены основные аспекты TCP для каждой из перечисленных функций.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:5.28pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:369.60pt;">
<div class=block style=" width:369.60pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font1 style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a><span style=" color:rgb(0,0,90);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style=" color:rgb(0,0,0);">4</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:225.36pt;">
<div class=block style=" width:225.36pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>Перевод на русский язык - Н. Малых</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:209.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:225.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:768.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>RFC-793&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRANSMISSION CONTROL PROTOCOL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Сентябрь 1981</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font10 style=" letter-spacing:-0.40pt;"><b>Базовая передача данных</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Протокол TCP способен поддерживать непрерывный поток октетов в каждом направлении между двумя точками соединения, упаковывая некоторое количество октетов в сегменты для передачи через межсетевую среду. В общем случае TCP решает, когда блокировать или пересылать данные по своему усмотрению.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Иногда пользователям нужна уверенность в том, что все данные, которые были направлены протоколу TCP, будут переданы. Для решения такой задачи определена функция выталкивания данных (push). Для обеспечения гарантии передачи отправленных протоколу TCP данных пользователь на передающей стороне должен &quot;протолкнуть&quot; данные удаленному пользователю. Функция push заставляет TCP незамедлительно переслать и доставить данные в точку приема. Точка &quot; выталкивания&quot; может быть невидима для получателя и функция push не устанавливает маркер границы записи.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font3><b>Надежность</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Протокол TCP должен восстанавливать данные в случае их повреждения, потери, дублирования или доставки с нарушением порядка. Это обеспечивается с помощью порядковых номеров, присваиваемых каждому передаваемому октету и подтверждением доставки данных (ACK - acknowledgment), передаваемым приемной стороной TCP. Если подтверждение ACK не было получено в течение заданного времени (тайм-аут), данные передаются заново. На приемной стороне порядковые номера используются для корректной расста=" line-height:10.08pt;">Протокол TCP должен восстанавливать данные в случае их повреждения, потери, дублирования или доставки с нарушением порядка. Это обеспечивается с помощью порядковых номеров, присваиваемых каждому передаваемому октету и подтверждением доставки данных (ACK - acknowledgment), передаваемым приемной стороной TCP. Если подтверждение ACK не было получено в течение заданного времени (тайм-аут), данные передаются заново. На приемной стороне порядковые номера используются для корректной расстановки сегментов, которые могут быть доставлены с нарушением порядка, и обнаружения дубликатов. Для обнаружения ошибок при передаче данных используются контрольные суммы, которые добавляются в каждый передаваемый сегмент. Контрольная сумма рассчитывается на передающей стороне и включается в сегмент; на приемной стороне контрольная сумма вычисляется заново и полученное значение сравнивается с указанной в сегменте контрольной суммой. При обнаружении расхождений сегмент отбрасывается.</span></div>
<div class=paragraph style=" padding:0.00pt 29.04pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Пока протокол TCP работает нормально и среда Internet не сегментирована на изолированные части, никакие ошибки передачи не будут влиять на корректность доставки данных. TCP восстанавливает данные после ошибок в среде Internet.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font3><b>Управление потоком данных</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">TCP предоставляет получателю способ управления количеством данных, передаваемых отправителем. Это достигается путем возврата с каждым подтверждением ACK &quot;окна&quot; (window), показывающего диапазон допустимых порядковых номеров за пределами последнего доставленного сегмента. Окно показывает допустимые номера октетов, которые отправитель может передать до получения следующего разрешения.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font3><b>Мультиплексирование</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Чтобы позволить множеству процессов на одном хосте использовать коммуникационные возможности TCP, этот протокол поддерживает набор адресов (портов) на каждом хосте. Вкупе с сетевыми адресами и номерами хостов (уровень internet), номера портов формируют сокет (socket). Пара сокетов позволяет уникально идентифицировать каждое соединение. Таким образом, сокет может использоваться несколькими соединениями одновременно.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Связывание (binding) портов с процессами устанавливается каждым хостом независимо. Однако, для наиболее часто используемых процессов (например, вход в систему или работа в режиме разделения времени) целесообразно применять предопределенные (фиксированные) сокеты, номера которых известны всем. Доступ к таким службам обеспечивается с использованием хорошо известных адресов. Организация и определение номеров портов для других процессов может включать динамические механизмы.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font10 style=" line-height:10.08pt;"><b>Соединения</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Механизмы обеспечения надежности и управления потоком данных, описанные выше, требуют от TCP поддержки информации</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">о состоянии для каждого потока данных. Комбинация этих сведений, включающая сокет, порядковые номера и размеры окна,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">называется соединением. Каждое соединение может быть однозначно указано парой сокетов, используемых по разные стороны</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">соединения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Когда два процесса хотят обмениваться информацией, протоколы TCP на хостах сначала должны организовать соединение</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">(инициализировать информацию о состоянии на каждой стороне). Когда обмен данными завершается, соединение разрывается</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">(terminate или close) для освобождения использованных им ресурсов.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Поскольку соединения организуются между хостами, не обеспечивающими надежность, через ненадежную сетевую среду,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">применяется механизм согласования параметров (handshake) с порядковыми номерами на основе текущего времени для</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">предотвращения ошибочной инициализации соединений.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font3><b>Предпочтения и безопасность</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Пользователи TCP могут указывать режим безопасности и предпочтения для своих соединений. Когда эти возможности не используются, для соответствующих параметров устанавливаются принятые по умолчанию значения.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font6><b>2. </b><span class=font5><b>Концепции</b></span></span></div>
<div class=paragraph style=" padding:2.16pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font5 style=" letter-spacing:-0.55pt;"><b>2.1. Элементы межсетевого взаимодействия</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Сетевая среда (internetwork environment) состоит хостов, подключенных к сетям, которые соединены между собой маршрутизаторами. Здесь термином сеть обозначаются локальные (например, ETHERNET) или распределенные сети (например, ARPANET<sup>2</sup>), но в любом случае эти сети работают на основе коммутации пакетов. Активными агентами, которые производят и потребляют сообщения, являются процессы. Протоколы различного уровня в сети, на хостах и маршрутизаторах образуют систему обмена информацией между процессами, которая обеспечивает двунаправленные потоки данных и логические соединения между портами процессов.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Термин пакет в данном документе используется в основном для обозначения одной транзакции между хостом и его сетью. Формат блоков данных, передаваемых через сеть, в общем случае не будет рассматриваться в контексте этого документа. Хостами называют компьютеры, подключенные к сети и (с коммуникационной точки зрения) являющиеся отправителями и получателями пакетов. Процессы рассматриваются как активные элементы в хостах (в соответствии с наиболее общим определением процесса как программы на стадии выполнения). Терминалы и файлы (или иные устройства ввода-вывода) рассматриваются как взаимодействующие между собой с помощью процессов. Таким образом весь обмен информацией</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:14.64pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:24.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font13>2    Прообраз сети Internet. <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>Перевод на русский язык - Н. Малых (<span style=" color:rgb(0,0,128);"><a href="mailto:owner@nmalykh.org"><u>owner@nmalykh.org</u></a></span>)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:66.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:212.64pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:62.88pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:3.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:5.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:17.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:225.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:66.24pt;">
<div class=block style=" width:66.24pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font1>RFC-793</span></div>
</div>
</td>
<td class=cell colspan="5" valign="top" style=" width:302.88pt;">
<div class=block style=" width:302.88pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 94.32pt; text-align:left;"><span class=font1>TRANSMISSION CONTROL PROTOCOL</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:225.84pt;">
<div class=block style=" width:225.84pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 91.44pt; text-align:left;"><span class=font1>Сентябрь 1981</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:43.92pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>рассматривается как связь между процессами.</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Поскольку процессу может потребоваться возможность различать коммуникационные потоки между разными процессами, мы предполагаем, что каждый процесс может иметь номер порта, через который он осуществляет взаимодействие с портами других процессов.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:3.84pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>2.2. Модель работы протокола</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:264.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Процесс передает данные, вызывая функции TCP с передачей им буферов данных в качестве аргументов. TCP упаковывает</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">данные из таких буферов в сегменты и вызывает модуль IP для передачи каждого сегмента адресату TCP. На приемной стороне</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">TCP помещает данные из сегмента в приемный пользовательский буфер и уведомляет заинтересованного пользователя. TCP</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">включает в сегменты управляющую информацию, которая служит для обеспечения гарантированной доставки с сохранением</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">порядка сегментов.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Модель обмена информацией в IP построена на базе связанного с каждым TCP модуля протоколов internet, который</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">обеспечивает интерфейс с локальной сетью. Модуль internet упаковывает сегменты TCP в дейтаграммы IP и маршрутизирует</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">дейтаграммы модулю IP хоста-получателя или промежуточного шлюза. Для передачи дейтаграмм через локальную сеть они</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">помещаются в кадры ЛВС.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>Коммутация  пакетов  может  включать  дополнительное  разбиение  на  пакеты,  фрагментирование  или  иные  операции,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>обеспечивающие доставку локальных пакетов модулю IP хоста-адресата.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">В шлюзах между сетями дейтаграммы IP &quot;разворачиваются&quot; (unwrapped) из локальных пакетов и проверяются не предмет</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">определения сети, в которую их следует переслать. После этого дейтаграмма IP снова &quot;заворачивается&quot; (wrapped) в локальный</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">пакет, подходящий для следующей сети и направляется в следующий шлюз или конечному получателю.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Шлюз может разбивать дейтаграммы IP на меньшие дейтаграммы (фрагменты), если это требуется для передачи в следующую</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">сеть. Для этого дейтаграмма делится на несколько более мелких дейтаграмм IP, каждая из которых содержит фрагмент</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">исходной дейтаграммы. На следующих шлюзах эти фрагменты могут дополнительно фрагментироваться. Формат фрагментов</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">организован таким способом, чтобы модуль IP конечного получателя мог заново собрать из фрагментов исходную дейтаграмму.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>Модуль IP конечного получателя разворачивает сегменты из дейтаграмм (после сборки фрагментов, если необходимо) и</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>передает их конечному модулю TCP.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">В рассмотренной модели опущено множество деталей. Одним из важных аспектов является тип обслуживания - он говорит</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">маршрутизаторам (или модулю IP), какие параметры обслуживания следует выбрать для передачи в следующую сеть.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Включенная в тип обслуживания информация задает преимущества (приоритет) дейтаграммы, Дейтаграмма может содержать</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">также информацию о безопасности, позволяющую хостам и шлюзам, работающим в многоуровневой безопасной среде</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">корректно разделять дейтаграммы с точки зрения требований безопасности.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.08pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:19.92pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>2.3. Среда хоста</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:84.72pt;">
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Предполагается, что TCP является модулем операционной системы. Пользователи обращаются к TCP подобно обращению к другим функциям ОС. TCP может вызывать другие функции ОС (например, для управления структурами данных). Предполагается, что реальный интерфейс с сетью управляется драйвером сетевого адаптера. TCP не может непосредственно обращаться к драйверу сетевого устройства и взамен этого обращается к модулю протокола IP, который обращается к драйверу напрямую.</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Механизмы TCP не мешают реализации протокола TCP на периферийных процессорах. Однако в таких реализациях должен обеспечиваться протокол взаимодействия между хостом и периферийным процессором для поддержки интерфейса TCP -пользователь, описанного в этом документе.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:3.84pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>2.4. Интерфейсы</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:120.24pt;">
<div class=paragraph style=" padding:0.00pt 70.56pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Интерфейс между TCP и пользователем обеспечивается с помощью функций TCP для организации (OPEN) и разрыва (CLOSE) соединений, передачи (SEND) и приема (RECEIVE) данных, а также получения информации (STATUS) о соединении. Вызовы этих функций осуществляются из пользовательских программ подобно вызовам функций ОС (например, функции открытия, чтения и закрытия файла).</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Интерфейс TCP - IP обеспечивается с помощью функций передачи и приема дейтаграмм, адресованных модулям TCP на любых хостах системы internet. Эти функции используют параметры для передачи адресов, типа обслуживания, предпочтений, безопасности и другой управляющей информации.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>2.5. Связи с другими протоколами</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.80pt;">На рисунке показано местоположение TCP в иерархии протоколов:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 66.24pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ ------ + + ----- + + ----- +       + ----- +</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.32pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:278.88pt;">
<div class=block style=" width:278.88pt; height:3.84pt;">
</div>
</td>
<td class=cell colspan="4" rowspan="2" valign="top" style=" width:90.24pt;">
<div class=block style=" width:90.24pt; height:39.84pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:225.84pt;">
<div class=block style=" width:225.84pt; height:39.84pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:278.88pt;">
<div class=block style=" width:278.88pt; height:36.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 66.24pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|Telnet| | FTP | |Voice|  ...  |     |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 66.24pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ ------ + + ----- + + ----- +       + ----- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 98.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|   |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>|</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 93.12pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ ----- +     + ----- +       + ----- +</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.32pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:278.88pt;">
<div class=block style=" width:278.88pt; height:3.84pt;">
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:62.88pt;">
<div class=block style=" width:62.88pt; height:39.60pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell colspan="4" rowspan="2" valign="top" style=" width:253.20pt;">
<div class=block style=" width:253.20pt; height:39.60pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:278.88pt;">
<div class=block style=" width:278.88pt; height:35.76pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 93.12pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">| TCP |     | RTP |  ...  |     |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 93.12pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ ----- +     + ----- +       + ----- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 109.44pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>|</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 93.12pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ ------------------------------- +</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.08pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:278.88pt;">
<div class=block style=" width:278.88pt; height:3.84pt;">
</div>
</td>
<td class=cell colspan="2" rowspan="2" valign="top" style=" width:66.72pt;">
<div class=block style=" width:66.72pt; height:39.84pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell colspan="3" rowspan="2" valign="top" style=" width:249.36pt;">
<div class=block style=" width:249.36pt; height:39.84pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:278.88pt;">
<div class=block style=" width:278.88pt; height:36.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 93.12pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|    Internet Protocol &amp; ICMP   |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 93.12pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ ------------------------------- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 174.24pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 103.92pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ --------------------------- +</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.32pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:278.88pt;">
<div class=block style=" width:278.88pt; height:3.84pt;">
</div>
</td>
<td class=cell colspan="3" valign="top" style=" width:72.48pt;">
<div class=block style=" width:72.48pt; height:3.84pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:243.60pt;">
<div class=block style=" width:243.60pt; height:3.84pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:64.32pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 103.92pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|   Local Network Protocol  |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 103.92pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ --------------------------- +</span></div>
<div class=paragraph style=" padding:0.24pt 70.80pt 0.00pt 28.32pt; text-align:left; text-indent:161.76pt;"><span class=font14 style=" line-height:10.80pt;"><i>Рисунок 2. Отношения между протоколами </i>Ожидается, что TCP будет эффективно поддерживать протоколы верхнего уровня. Должен обеспечиваться простой интерфейс с протоколами вышележащего уровня типа Telnet или AUTODIN II THP.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a><span style=" color:rgb(0,0,90);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style=" color:rgb(0,0,0);">6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style=" color:rgb(0,0,0);">Перевод на русский язык - Н. Малых</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:66.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:212.64pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:62.88pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:3.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:5.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:17.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:225.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:300.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:91.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt;">
<div class=block style=" width:203.04pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 71.76pt; text-align:left;"><span class=font1>RFC-793</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:300.00pt;">
<div class=block style=" width:300.00pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>TRANSMISSION CONTROL PROTOCOL</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:91.92pt;">
<div class=block style=" width:91.92pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>Сентябрь 1981</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.08pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:750.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font4><b>2.6.&nbsp;Надежная связь</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>Переданный модулю TCP поток данных гарантированно и с соблюдением порядка доставляется адресату.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Надежность передачи обеспечивается за счет использования порядковых номеров и передачи подтверждений. Концептуально,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">каждому октету данных присваивается порядковый номер. Номер первого октета данных в сегменте передается вместе с этим</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">сегментом и называется порядковым номером сегмента. Сегмент содержит также номер подтверждения, который является</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">порядковым номером следующего ожидаемого октета данных, который будет передан в обратном направлении.  Когда TCP</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">передает сегмент, содержащий данные, копия этого сегмента помещается в очередь повторной передачи и включается таймер.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">При получении подтверждения доставки переданного сегмента его копия удаляется из очереди. Если подтверждение не</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">поступило в течение заданного времени (тайм-аут), сегмент передается снова.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>Подтверждение TCP не дает гарантии доставки данных конечному пользователю, оно лишь удостоверяет, что сегмент</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>доставлен модулю TCP на удаленной стороне, который обеспечивает доставку клиенту.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Для управления потоками данных между хостами TCP используется специальный механизм управления потоком. TCP на</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">приемной стороне сообщает размер &quot;окна&quot; передающему модулю TCP. Этот размер задает число октетов (начиная с номера</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">подтверждения), которые модуль TCP на приемной стороне готов получить в настоящий момент.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font4><b>2.7.&nbsp;Организация и разрыв соединений</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Для   идентификации   отдельных   потоков   данных,   которыми   может   управлять   TCP,   этот   протокол   поддерживает</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">идентификаторы портов. Поскольку идентификаторы портов выбираются независимо разработчиками реализаций TCP, эти</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">идентификаторы могут оказаться неуникальными<sup>3</sup>. Для обеспечения уникальной адресации каждого TCP идентификатор порта</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">объединяется с адресом IP для хоста TCP; такая комбинация порта и адреса называется сокетом. Для сокетов обеспечивается</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">уникальность в масштабах Сети.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Соединение   однозначно   идентифицируется   парой   сокетов   для   обоих   концов   соединения.   Локальный   сокет   может</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">использоваться во множестве соединений с различными внешними сокетами. Соединение может использоваться для передачи</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">данных в обоих направлениях, т. е. является &quot;полнодуплексным&quot;.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">TCP распределяет номера портов между процессами по своему усмотрению, однако существуют базовые концепции, которым</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">необходимо следовать в каждой реализации. Должны поддерживаться &quot;хорошо известные&quot; (well-known) номера портов,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">которые TCP будет связывать только с определенными процессами. Предполагается, что такими процессами могут быть</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">собственные процессы TCP и эти процессы могут инициировать соединения только через такие &quot;привилегированные&quot; порты.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Применительно   к   реализации   распределение   портов   является   локальным   вопросом,   но   предполагается   наличие</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">пользовательской команды Request Port или иного метода выделения уникальной группы портов для данного процесса</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">(например, путем связывания старших битов в номере порта с данным процессом).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">При вызове OPEN соединение задается номером локального порта и удаленного сокета, передаваемыми в качестве аргументов.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">В ответ TCP возвращает короткое локальное имя соединения, которое пользователь может указывать в последующих вызовах</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">функций. Есть несколько важных аспектов организации соединений, о которых следует помнить. Предполагается, что</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">информация о соединении хранится в структуре данных TCB (Transmission Control Block - блок управления передачей).   В</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">некоторых реализациях локальное имя соединения просто указывает на структуру TCB для этого соединения. При вызове</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">OPEN также указывается тип вызова - активный (соединение организуется сразу) или пассивный (ожидание).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Пассивный запрос OPEN означает, что процесс будет ждать входящего соединения, не делая попыток организовать соединение</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">самому. Зачастую процесс, использовавший пассивный вызов OPEN, будет воспринимать входящие запросы соединений от</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">любого хоста. В таких случаях внешний сокет с номером, содержащим только нули, будет использоваться для обозначения</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">неуказанного сокета. Использование неуказанных внешних сокетов допускается только для пассивных вызовов OPEN.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Сервисный процесс, который намерен обслуживать вызовы от неизвестных процессов, должен использовать пассивный вызов</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">OPEN с неуказанным внешним сокетом. В таких случаях соединение может быть организовано с любым процессом, который</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">запросит соединение с данным локальным сокетом. Такое решение полезно в тех случаях, когда известно, что локальный сокет</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">связан с известным сервисом.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Сокеты Well-known обеспечивают удобный способ связывания адресов со стандартными службами. Например, серверный</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">процесс Telnet постоянно связан с конкретным сокетом, а другие известные сокеты зарезервированы для таких служб как File</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Transfer, Remote Job Entry, Text Generator, Echoer, Sink (последние три используются в тестовых целях). Адрес сокета может</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">быть зарезервирован для доступа к службе Look-Up, возвращающей номер сокета, по которому предоставляется новый сервис.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Концепция хорошо известных сокетов является частью спецификации TCP, но выделение номеров для сокетов выходит за</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">пределы этого документа (см. [4]<sup>3</sup>).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Процесс может использовать пассивный вызов OPEN и ждать соответствующего активного вызова OPEN другим процессом;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">после  организации  нужного  соединения  TCP   будет   информировать  процесс  об  этом.  Два  процесса,  одновременно</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">использовавшие активные вызовы OPEN для связи друг с другом, будут корректно соединены. Такая гибкость очень важна для</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">поддержки распределенных систем, в которых компоненты работают асинхронно.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Существует два важных случая соответствия между локальным пассивным вызовом OPEN и внешним активным вызовом</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">OPEN. В первом случае локальный пассивный вызов OPEN полностью задает внешний сокет - соответствие является точным.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Во втором случае локальный пассивный вызов OPEN оставляет внешний сокет неуказанным - приемлемы соединения с</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">любыми   внешними   сокетами,   соответствующими   локальному   сокету.   Остальные   случаи   являются   промежуточными</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">вариантами.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">При наличии нескольких ожидающих пассивных вызовов OPEN (записанных в TCB) с одинаковым локальным сокетом</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">внешний активный вызов OPEN будет соответствовать TCB в указанным внешним сокетом, который совпадает с внешним</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">активным вызовом OPEN (при наличии такого TCB); в остальных случаях выбор осуществляется среди TCB с неуказанным</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">внешним сокетом.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>Процедуры организации соединений используют флаг контроля синхронизации (SYN) и включают обмен тремя сообщениями,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>известными three-way hand shake (трехэтапное согласование) [3].</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Соединение инициируется при наличии входящего сегмента с флагом SYN и ожидающей записи TCB, которая была создана с</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">помощью функции OPEN. Соответствие локального и внешнего сокета определяет возможность организации соединения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Соединение  переходит  в  состояние  established  (организовано)  после  синхронизации  порядковых  номеров  для  обоих</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">направлений.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:7.92pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:32.88pt;">
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 84.96pt; text-align:left; text-indent:-13.92pt;"><span class=font13 style=" line-height:9.12pt;">3    В настоящее время выделение номеров для портов TCP/UDP достаточно жестко регламентировано документом Assigned Numbers (RFC-1700 содержит последнюю версию на данный момент). <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>Перевод на русский язык - Н. Малых (<span style=" color:rgb(0,0,128);"><a href="mailto:owner@nmalykh.org"><u>owner@nmalykh.org</u></a></span>)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:300.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:91.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:209.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:225.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt;">
<div class=block style=" width:160.56pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font1>RFC-793</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:209.04pt;">
<div class=block style=" width:209.04pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>TRANSMISSION CONTROL PROTOCOL</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:225.36pt;">
<div class=block style=" width:225.36pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 90.96pt; text-align:left;"><span class=font1>Сентябрь 1981</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td8.32pt; text-align:left;"><span class=font14>Разрыв соединения также включает обмен сегментами - в этом случае они содержат флаг завершения FIN.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>2.8.&nbsp;Обмен данными</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Данные, передаваемые через соединение, можно трактовать как поток октетов. Передающая сторона показывает при каждом</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">вызове SEND наличие в этом вызове (и любых предшествующих вызовах) данных, которые должны быть отправлены</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">незамедлительно (push) на принимающую сторону, с помощью флага PUSH.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">TCP на передающей стороне разрешается собирать данные от пользователей-отправителей и передавать эти данные в сегменты</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">по своему усмотрению, пока не используется функция push (выталкивание). После вызова этой функции все неотправленные</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">данные должны быть переданы. Когда TCP на приемной стороне видит флаг PUSH, модуль больше не должен ждать данных от</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">передающего модуля TCP до передачи их принимающему процессу.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>Нет необходимости задавать связи между функцией push и границами сегментов. Данные в любом сегменте могут быть</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>результатом одного вызова SEND (все или часть результатов вызова) или множества обращений к SEND.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>Назначением функции push и флага PUSH является &quot;проталкивание&quot; данных от отправителя к получателю. Функция не</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>обеспечивает сервис записи (record service).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Между функцией push и использованием буферов данных, проходящих через интерфейс TCP-пользователь, существует связь.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Всякий раз флаг PUSH связывается с данными, помещенными в буфер на приемной стороне, и содержимое этого буфера</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">передается пользователю для обработки, даже если буфер еще не полон. Если данные заполняют пользовательский буфер до</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">получения флага PUSH, содержимое буфера передается пользователю целиком.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">TCP также обеспечивает способ информирования принимающей стороны о наличии в потоке, который принимается в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">настоящее время, данных, требующих срочной обработки (urgent data). TCP не пытается задать, что конкретно должен делать</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">пользователь при получении уведомления о срочных данных, но в общем случае принимающий процесс будет предпринимать</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">попытки максимально быстрой обработки таких данных.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>2.9.&nbsp;Предпочтения и безопасность</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">TCP позволяет использовать поля типа обслуживания и безопасности протокола IP для задания предпочтений и обеспечения безопасности на уровне соединений. Не все модули TCP могут использоваться в средах с многоуровневой системой обеспечения безопасности - некоторые функции могут быть ограничены только для неклассифицированного использования, другие могут работать только для определенного уровня безопасности. Следовательно, некоторые реализации и службы TCP могут иметь ограниченную функциональность в средах с многоуровневой системой обеспечения безопасности. Модули TCP, работающие в среде с многоуровневой системой безопасности, должны корректно помечать уровень безопасности и предпочтения для исходящих сегментов. Такие модули TCP должны также обеспечивать для своих пользователей и протоколов вышележащих уровней (типа Telnet или THP) интерфейс, позволяющий им задать желаемый уровень безопасности и предпочтения для своих соединений.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>2.10.&nbsp;Принцип устойчивости</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.28pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Реализации TCP должны следовать общему принципу устойчивости - быть консервативным по отношению к себе и либеральным с другими.</span></div>
<div class=paragraph style=" padding:9.36pt 290.88pt 0.00pt 28.32pt; text-align:left;"><span class=font5 style=" line-height:23.04pt;"><b>3. Функциональная спецификация 3.1. Формат заголовка</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.32pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Сегменты TCP передаются в дейтаграммах IP. Заголовок протокола IP содержит несколько информационных полей, включая адреса хостов отправителя и получателя [2]. Заголовок TCP размещается вслед за заголовком IP и содержит информацию, относящуюся к протоколу TCP. Такое разделение позволяет использовать на уровне хоста протоколы, отличные от TCP.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b><i>Формат заголовка TCP</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 49.92pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">0<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>1<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>2<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>3</span></div>
<div class=paragraph style=" padding:0.00pt 199.44pt 0.00pt 44.64pt; text-align:left; text-indent:5.28pt;"><span class=font9 style=" line-height:10.80pt;">0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>Source Port<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>|       Destination Port        |</span></div>
<div class=paragraph style=" padding:0.00pt 199.44pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>Sequence Number<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>|</span></div>
<div class=paragraph style=" padding:0.00pt 199.44pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Acknowledgment Number<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|</span></div>
<div class=paragraph style=" padding:0.00pt 199.44pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ |  Data |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>|U|A|P|R|S|F|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">| Offset| Reserved  |R|C|S|S|Y|I|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>Window<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>|</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|       |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>|G|K|H|T|N|N|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|</span></div>
<div class=paragraph style=" padding:0.00pt 199.44pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>Checksum<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Urgent Pointer        |</span></div>
<div class=paragraph style=" padding:0.00pt 199.44pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Options<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|    Padding    |</span></div>
<div class=paragraph style=" padding:0.00pt 199.44pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>data<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 207.84pt; text-align:left;"><span class=font14><i>Рисунок 3. Формат заголовка TCP</i></span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b>Source Port - порт отправителя: 16 битов</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>Номер порта отправителя.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.64pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:369.60pt;">
<div class=block style=" width:369.60pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font1 style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a><span style=" color:rgb(0,0,90);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style=" color:rgb(0,0,0);">8</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:225.36pt;">
<div class=block style=" width:225.36pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>Перевод на русский язык - Н. Малых</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:209.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:225.36pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:107.52pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:60.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:127.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:298.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:451.68pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>RFC-793&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRANSMISSION CONTROL PROTOCOL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Сентябрь 1981</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font2><b>Destination Port - порт назначения: 16 битов</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>Номер порта получателя.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font2><b>Sequence Number - порядковый номер: 32 бита</b></span></div>
<div class=paragraph style=" padding:0.00pt 29.04pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Порядковый номер первого октета данных в сегменте при отсутствии флага SYN. Если в сегменте присутствует бит SYN, поле номера содержит значение начального порядкового номера (ISN), а первый октет данных имеет номер ISN+1.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font2><b>Acknowledgment Number - номер подтверждения: 32 бита</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Если бит ACK установлен, это поле содержит значение следующего порядкового номера, который отправитель сегмента ожидает получить. После организации соединения это значение передается всегда.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font2><b>Data Offset - смещение данных: 4 бита</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.80pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Число 32-битовых слов в заголовке TCP. Это значение указывает начало данных в сегменте. Заголовок TCP (даже при наличии опций) имеет длину, кратную 32 битам.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font2><b><i>Reserved - резервное поле: 6 битов</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>Зарезервировано для использования в будущем и должно иметь нулевое значение.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font2><b><i>Control Bits - биты управления: 6 битов (слева направо):</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">URG: указывает на значимость поля Urgent Pointer</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">ACK: указывает на значимость поля Acknowledgment Number</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">PSH: функция Push</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">RST: сброс (Reset) соединения</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">SYN: синхронизация порядковых номеров</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">FIN: у отправителя больше нет данных</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font2><b>Window -окно: 16 битов</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>Число октетов данных, начиная с указанного в поле подтверждения, которые отправитель данного сегмента ожидает принять.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font2><b>Checksum - контрольная сумма: 16 битов</b></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Контрольная сумма представляет собой число единиц в заголовке и данных, просуммированное по модулю 16 с добавлением 1. Если сегмент содержит в заголовке и данных нечетное число октетов, справа добавляется октет нулей для выравнивания по 16-битовой границе. Биты заполнения не передаются как часть сегмента и используются только для расчета контрольной суммы. При расчете контрольной суммы значение поля Checksum принимается нулевым.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Контрольная сумма учитывает также 96-битовый псевдозаголовок, предшествующий заголовку TCP. Этот псевдозаголовок содержит адреса отправителя и получателя, тип протокола и длину опций TCP. Перечисленные поля помогают защитить TCP против сегментов с ошибочной маршрутизацией. Эта информация транспортируется протоколом IP и передается через интерфейс TCP-сетевой уровень в качестве аргументов или результатов вызовов из TCP на уровень IP.</span></div>
<div class=paragraph style=" padding:0.48pt 269.76pt 0.00pt 254.64pt; text-align:left; text-indent:-2.16pt;"><span class=font14 style=" line-height:15.84pt;">Адрес отправителя Адрес получателя</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:3.84pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:187.92pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 212.16pt; text-align:left;"><span class=font14>0<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>PTCL<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>Размер TCP</span></div>
<div class=paragraph style=" padding:1.20pt 28.32pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">Поле TCP Length содержит размер заголовка TCP и поля данных в октетах (это не явно передаваемое, а расчетное значение); 12-октетный псевдозаголовок при расчете длины не учитывается.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font2><b>Urgent Pointer - указатель срочности: 16 битов</b></span></div>
<div class=paragraph style=" padding:0.00pt 29.04pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">Это поле содержит указатель на срочные данные - позитивное смещение начала таких данных от порядкового номера данного сегмента. Это поле имеет смысл только для сегментов с установленным флагом URG.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font2><b>Options - опции: переменная длина</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Опции размещаются в конце заголовка TCP и могут занимать целое число октетов. Все опции учитываются при расчете контрольной суммы. Опции могут начинаться на любой границе октета. Существует два варианта форматирования опций:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">1.&nbsp; &nbsp;однооктетное поле признака опций.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2.&nbsp; &nbsp;однооктетное поле признака опций, поле размера опций (1 октет) и собственно опции.</span></div>
<div class=paragraph style=" padding:0.00pt 48.72pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Поле размера опций учитывает и 2 октета полей признака опций и самого поля длины, а также размер опций, как таковых<sup>4</sup>. Протокол TCP должен поддерживать все опции. Определенные к настоящему моменту опции включают (признаки указаны восьмеричными значениями):</span></div>
<div class=paragraph style=" padding:0.48pt 0.00pt 0.00pt 82.32pt; text-align:left;"><span class=font14 style=" line-height:15.60pt;"><b><i>Признак</i></b><span class=font1><b><i>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</i></b></span><b><i>Размер</i></b><span class=font1><b><i>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</i></b></span><b><i>Значение</i></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:3.84pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:296.16pt;">
<div class=block style=" width:296.16pt; height:27.60pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 97.44pt; text-align:left;"><span class=font14>0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>End of option list</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 97.44pt; text-align:left;"><span class=font14>1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>No-Operation</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:298.80pt;">
<div class=block style=" width:298.80pt; height:27.60pt;">
<div class=paragraph style=" text-align:left;"><span class=font14 style=" line-height:15.60pt;">Конец списка опций</span></div>
<div class=paragraph style=" text-align:left;"><span class=font14 style=" line-height:15.60pt;">Нет операции</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:3.84pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:296.16pt;">
<div class=block style=" width:296.16pt; height:51.84pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 97.44pt; text-align:left;"><span class=font14>2<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>4<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>Maximum Segment Size</span></div>
<div class=paragraph style=" padding:7.20pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font2><b><i>Определения опций</i></b></span></div>
<div class=paragraph style=" padding:0.72pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font2>End of Option List</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:298.80pt;">
<div class=block style=" width:298.80pt; height:51.84pt;">
<div class=paragraph style=" text-align:left;"><span class=font14 style=" line-height:15.60pt;">Максимальный размер сегмента</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:107.52pt;">
<div class=block style=" width:107.52pt; height:43.44pt;">
</div>
</td>
<td class=cell valign="top" style=" width:60.72pt;">
<div class=block style=" width:60.72pt; height:43.44pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 6.72pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ -------- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 6.72pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|00000000|</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 6.72pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ -------- +</span></div>
<div class=paragraph style=" padding:0.48pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font14>признак=0</span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:426.72pt;">
<div class=block style=" width:426.72pt; height:43.44pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.60pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:23.76pt;">
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 71.04pt; text-align:left;"><span class=font13 style=" line-height:12.72pt;">4    Поле опций может быть короче, чем указывает поле смещения данных. Неиспользуемые биты поля опций должны заполняться нулями. <span class=font1>Перевод на русский язык - Н. Малых (</span><span class=font1 style=" color:rgb(0,0,128);"><a href="mailto:owner@nmalykh.org"><u>owner@nmalykh.org</u></a></span><span class=font1>)</span><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 9&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=font1 style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:107.52pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:60.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:127.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:298.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:134.88pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:460.08pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:143.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1>RFC-793&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRANSMISSION CONTROL PROTOCOL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Сентябрь 1981</span></div>
<div class=paragraph style=" padding:4.80pt 70.56pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Этот код говорит о завершении списка опций. Конец списка опций может не совпадать с концом заголовка TCP, заданным полем Data Offset. Код используется как индикатор завершения всех опций, а не какой-то конкретной и использование его требуется лишь в тех случаях, когда конец опций не совпадает с концом заголовка TCP.</span></div>
<div class=paragraph style=" padding:1.92pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2 style=" line-height:10.80pt;">No-Operation</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.52pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ -------- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.52pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|00000001|</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.52pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ -------- +</span></div>
<div class=paragraph style=" padding:0.48pt 70.80pt 0.00pt 28.32pt; text-align:left; text-indent:36.48pt;"><span class=font14 style=" line-height:10.56pt;">признак=1 Этот код может использоваться между опциями (например, для их выравнивания по границе слова). Не существует гарантий использования этой опции отправителем, поэтому получатель должен быть готов к обработке опций, начало которых не совпадает с границей слова.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:1.92pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:134.88pt;">
<div class=block style=" width:134.88pt; height:20.64pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2>Maximum Segment</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:460.08pt;">
<div class=block style=" width:460.08pt; height:20.64pt;">
<div class=paragraph style=" text-align:left;"><span class=font2 style=" line-height:11.04pt;">Size</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:129.84pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.52pt; text-align:left;"><span class=font9 style=" line-height:11.04pt;">+ -------- + -------- + --------- + -------- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.52pt; text-align:left;"><span class=font9 style=" line-height:11.04pt;">|00000010|00000100|   max seg size   |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.52pt; text-align:left;"><span class=font9 style=" line-height:11.04pt;">+ -------- + -------- + --------- + -------- +</span></div>
<div class=paragraph style=" padding:0.48pt 0.00pt 0.00pt 64.80pt; text-align:left;"><span class=font14 style=" line-height:11.04pt;">признак=2  размер=4</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b>Maximum Segment Size - максимальный размер сегмента: 16 битов</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если эта опция присутствует, она задает максимальный размер принимаемого сегмента для той стороны TCP, которая передает данный сегмент. Это поле должно передаваться только с начальным запросом организации соединения (сегмент с флагом SYN). Если эта опция не задана, допускается использование сегментов любого размера.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b>Padding - заполнение: переменная длина</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Заполнение заголовка TCP используется для выравнивания размера заголовка по 32-битовой границе. Для заполнения неиспользуемых битов служит 0.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:3.84pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>3.2. Терминология</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:487.68pt;">
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Прежде, чем начать обсуждение деталей TCP, дадим определения некоторых терминов. Поддержка соединений TCP требует запоминания нескольких переменных. Предполагается, что эти переменные хранятся в специальной записи TCB (Transmission Control Block - блок управления передачей). Записи TCB включают номера локального и удаленного сокетов, опции безопасности и предпочтения для сегмента, указатели на пользовательские буферы приема и передачи, указатели на очередь повторной передачи и текущий сегмент. Кроме того, в TCB хранится информация о порядковых номерах для приема и передачи.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b><i>Переменные порядкового номера передачи</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">SND.UNA - передача не подтверждена</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">SND.NXT - передать следующим</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">SND.WND - окно передачи</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">SND.UP - передать указатель срочности</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">SND.WL1 - порядковый номер сегмента, использованный при последнем обновлении окна</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">SND.WL2 - порядковый номер подтверждения, использованный при последнем обновлении окна</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">ISS    - начальный порядковый номер для передачи</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b><i>Переменные порядкового номера приема</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 115.20pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">RCV.NXT - принять следующим RCV.WND - окно приема RCV.UP - прием указателя срочности IRS    - начальный порядковый номер для приема Приведенные ниже рисунки помогут понять соотношения между переменными в пространстве порядковых номеров.</span></div>
<div class=paragraph style=" padding:3.60pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b><i>Пространство номеров для передачи</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 131.04pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">1<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>2<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>3<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>4</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 103.92pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">---------- | ---------- | ---------- | ----------</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 141.84pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">SND.UNA    SND.NXT    SND.UNA</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 255.12pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+SND.WND</span></div>
<div class=paragraph style=" padding:11.28pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">1.&nbsp; &nbsp;старые порядковые номера, которые были подтверждены</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2.&nbsp; &nbsp;порядковые номера неподтвержденных данных</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">3.&nbsp; &nbsp;порядковые номера, допустимые для новой передачи данных</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">4.&nbsp; &nbsp;будущие порядковые номера, которые еще не разрешены для использования</span></div>
<div class=paragraph style=" padding:0.00pt 225.36pt 0.00pt 28.32pt; text-align:left; text-indent:153.84pt;"><span class=font14 style=" line-height:11.52pt;"><i>Рисунок 4. Пространство номеров для передачи </i>Окно передачи является частью области 3 на рисунке 4.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b><i>Пространство номеров для приема</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 152.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">1<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>2<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>3</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 131.04pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">---------- | ---------- | ----------</span></div>
<div class=paragraph style=" padding:0.00pt 329.04pt 0.00pt 222.72pt; text-align:left; text-indent:-54.00pt;"><span class=font9 style=" line-height:10.80pt;">RCV.NXT    RCV.NXT +RCV.WND</span></div>
<div class=paragraph style=" padding:13.92pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" color:rgb(0,0,128);"><a href="http://rfc.com.ru10Перевод"><u>http://rfc.com.ru&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Перевод</u></a><span style=" color:rgb(0,0,0);"> на русский язык - Н. Малых</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:134.88pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:460.08pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:379.20pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:96.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:119.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:502.32pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>RFC-793&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRANSMISSION CONTROL PROTOCOL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Сентябрь 1981</span></div>
<div class=paragraph style=" padding:4.80pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">1.&nbsp; &nbsp;старые порядковые номера, которые были подтверждены</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2.&nbsp; &nbsp;порядковые номера, допустимые для нового приема данных</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">3.&nbsp; &nbsp;будущие порядковые номера, которые еще не разрешены для использования</span></div>
<div class=paragraph style=" padding:11.04pt 186.48pt 0.00pt 71.04pt; text-align:left; text-indent:157.20pt;"><span class=font14 style=" line-height:11.76pt;"><i>Рисунок 5. Пространство номеров для приема </i>Окно приема является частью области 2 на рисунке 5.</span></div>
<div class=paragraph style=" padding:0.00pt 28.80pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Существует также ряд переменных, часто используемых при обсуждении, которые берут свои значения из полей текущего сегмента.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font3><b><i>Переменные текущего сегмента</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">SEG.SEQ - порядковый номер сегмента</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">SEG.ACK - порядковый номер сегмента подтверждения</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">SEG.LEN - длина сегмента</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">SEG.WND - окно сегмента</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">SEG.UP - указатель срочности сегмента</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">SEG.PRC - значение предпочтений для сегмента</span></div>
<div class=paragraph style=" padding:0.96pt 28.08pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Соединение в процессе своего существования может находиться в нескольких состояниях - LISTEN, SYN-SENT, SYN-RECEIVED, ESTABLISHED, FIN-WAIT-1, FIN-WAIT-2, CLOSE-WAIT, CLOSING, LAST-ACK, TIME-WAIT и фиктивное состояние CLOSED (фиктивно оно потому, что представляет состояние, когда уже нет TCB и, следовательно, соединения). Ниже кратко описаны все эти состояния.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.44pt;">LISTEN - ожидание запроса на соединение от любого удаленного TCP и порта.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.44pt;">SYN-SENT - ожидание соответствующего запроса на соединение после передачи своего запроса.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.44pt;">SYN-RECEIVED - ожидание подтверждения соединения после передачи и приема запросов на организацию соединения.</span></div>
<div class=paragraph style=" padding:0.72pt 28.56pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">ESTABLISHED - соединение действует и принятые данные могут быть доставлены пользователю. Это нормальное состояние для процесса обмена данными через соединение.</span></div>
<div class=paragraph style=" padding:1.44pt 28.80pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">FIN-WAIT-1 - ожидание запроса на разрыв соединения от удаленного TCP или подтверждения для ранее переданного запроса на разрыв соединения.</span></div>
<div class=paragraph style=" padding:0.72pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.44pt;">FIN-WAIT-2 - ожидание запроса на разрыв соединения от удаленного TCP.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.44pt;">CLOSE-WAIT - ожидание запроса на разрыв соединения от локального пользователя.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.44pt;">CLOSING - ожидание подтверждения от удаленного TCP для запроса на разрыв соединения.</span></div>
<div class=paragraph style=" padding:0.72pt 28.32pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">LAST-ACK  -  ожидание  подтверждения  для  запроса  на  разрыв  соединения,  переданного  удаленному     TCP  (это подтверждение включается в запрос на разрыв соединения от удаленной стороны).</span></div>
<div class=paragraph style=" padding:1.68pt 28.56pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">TIME-WAIT - ожидание пока пройдет достаточно времени, чтобы быть уверенным в приеме удаленным TCP подтверждения для его запроса на разрыв соединения.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>CLOSED - соединения уже нет (разорвано).</span></div>
<div class=paragraph style=" padding:1.68pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Соединение TCP переходит от одного состояния к другому в ответ на события, к числу которых относятся пользовательские вызовы OPEN, SEND, RECEIVE, CLOSE, ABORT и STATUS, входящие сегменты (в частности те, которые включают флаги SYN, ACK, RST, FIN) и тайм-ауты.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Диаграмма состояний на рисунке 6<sup>5</sup> иллюстрирует смену состояний в результате тех или иных событий и результирующие действия, но не содержит информации о возможных ошибках и действиях, не связанных с изменением состояния. В последующих параграфах будет приведено более детальное описание реакций TCP на те или иные события.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:292.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:379.20pt;">
<div class=block style=" width:379.20pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>Перевод на русский язык - Н. Малых (<span style=" color:rgb(0,0,128);"><a href="mailto:owner@nmalykh.org"><u>owner@nmalykh.org</u></a></span>)</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:96.00pt;">
<div class=block style=" width:96.00pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font1>11</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:119.76pt;">
<div class=block style=" width:119.76pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1 style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:379.20pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:96.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:119.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:508.56pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1>RFC-793&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRANSMISSION CONTROL PROTOCOL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Сентябрь 1981</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 190.32pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ --------- + --------- \      active OPEN</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 190.32pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|  CLOSED |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>\    -----------</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 190.32pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ --------- +&lt; --------- \   \   create TCB</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 201.12pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|     ^<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>\   \  snd SYN</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 131.04pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">passive OPEN |     |   CLOSE        \   \</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 131.04pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">------------ |     | ----------       \   \</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 136.32pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">create TCB  |     | delete TCB<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>\   \</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 201.12pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">V     |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>\   \</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 190.32pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ --------- +<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>CLOSE    |    \</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 190.32pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|  LISTEN |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>---------- |     |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 190.32pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ --------- +<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>delete TCB |     |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 131.04pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">rcv SYN      |     |     SEND<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>|     |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 125.52pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">-----------   |     |    -------<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>|     V</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 33.84pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ --------- +      snd SYN,ACK  /       \   snd SYN<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>+ --------- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 33.84pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|&lt; -----------------<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>------------------ &gt;|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 33.84pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|   SYN   |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>rcv SYN<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|   SYN   |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 33.84pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|   RCVD  |&lt; ----------------------------------------------- |   SENT  |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 33.84pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>snd ACK<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 33.84pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>| ------------------<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>------------------- |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 33.84pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ --------- +   rcv ACK of SYN  \       /  rcv SYN,ACK       + --------- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>--------------   |     |   -----------</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>x<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|     |     snd ACK</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>V     V</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|  CLOSE<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>+ --------- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">| -------<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|  ESTAB  |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">| snd FIN<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>+ --------- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>CLOSE    |     |    rcv FIN</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">V<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>-------   |     |    -------</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 33.84pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ --------- +<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>snd FIN  /       \   snd ACK<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>+ --------- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 33.84pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|  FIN    |&lt; -----------------<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>------------------ &gt;|  CLOSE  |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 33.84pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">| WAIT-1  | ------------------<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|   WAIT  |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 33.84pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ --------- +<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>rcv FIN  \<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>+ --------- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">| rcv ACK of FIN<span class=font1>&nbsp; &nbsp; &nbsp; </span>-------   |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>CLOSE  |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">| --------------<span class=font1>&nbsp; &nbsp; &nbsp; </span>snd ACK   |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>------- |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">V&nbsp; &nbsp; &nbsp; &nbsp; x<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>V<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>snd FIN V</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 33.84pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ --------- +<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>+ --------- +<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>+ --------- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 33.84pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|FINWAIT-2|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>| CLOSING |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>| LAST-ACK|</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 33.84pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ --------- +<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>+ --------- +<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>+ --------- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>rcv ACK of FIN |<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>rcv ACK of FIN |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|  rcv FIN       -------------- |    Timeout=2MSL -------------- |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 44.64pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">|  -------<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>x       V    ------------        x       V</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 49.92pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">\ snd ACK<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>+ --------- +delete TCB<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>+ --------- +</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 55.44pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">------------------------ &gt;|TIME WAIT| ------------------ &gt;| CLOSED  |</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 190.32pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">+ --------- +<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>+ --------- +</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 199.44pt; text-align:left;"><span class=font14 style=" line-height:10.80pt;"><i>Рисунок</i><span class=font12><i> </i></span><i>6.</i><span class=font12><i> </i></span><i>Состояния</i><span class=font12><i> </i></span><i>соединений</i><span class=font12><i> </i></span><i>TCP</i><span class=font7><i><sup>5</sup></i></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.08pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>3.3. Порядковые номера</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:234.48pt;">
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Одним из фундаментальных аспектов TCP является нумерация данных - каждый октет, передаваемый через соединение TCP имеет свой порядковый номер. Поскольку каждый октет пронумерован, для любого из октетов может быть передано подтверждение (acknowledgment). Механизм подтверждений является кумулятивным (накопительным), поэтому подтверждение для порядкового номера X показывает, что все октеты до X (но не включая сам октет с номером X) были получены. Этот механизм позволяет обнаруживать дубликаты данных при использовании повторной передачи. Нумерация октетов в сегменте начинается от заголовка, т. е. октет, следующий сразу после заголовка, имеет наименьший порядковый номер, а номера следующих октетов последовательно возрастают.</span></div>
<div class=paragraph style=" padding:0.00pt 70.56pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Важно помнить, что реальное пространство порядковых номеров имеет ограниченные размеры, хотя и достаточно велико (от 0 до 2<sup>32</sup> - 1). Поскольку число порядковых номеров конечно, все арифметические операции с порядковыми номерами выполняются по модулю 2<sup>32</sup>. Такая беззнаковая арифметика сохраняет соотношения между порядковыми номерами при переходе номера от 2<sup>32</sup> - 1 к нулю. В такой арифметике с использованием модуля существуют некоторые тонкости, которые следует принимать во внимание при разработке программ, использующих сравнение значений. Символ =&lt; означает &quot;меньше или равно&quot; (модуль 2<sup>32</sup>). Типичные операции сравнения порядковых номеров, используемые TCP, включают:</span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 42.48pt; text-align:left; text-indent:-14.16pt;"><span class=font14 style=" line-height:10.08pt;">(a)&nbsp; Проверка того, что подтверждение указывает на некоторый порядковый номер для посланных, но еще не подтвержденных данных.</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 42.48pt; text-align:left; text-indent:-14.16pt;"><span class=font14 style=" line-height:10.32pt;">(b)&nbsp; Проверка того, что все порядковые номера, занимаемые сегментом, имеют подтверждение (например, для удаления сегмента из очереди повторной передачи).</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 42.48pt; text-align:left; text-indent:-14.16pt;"><span class=font14 style=" line-height:10.32pt;">(c)&nbsp; Проверка того, что входящий сегмент содержит ожидаемые порядковые номера (например, чтобы убедиться в том, что сегмент &quot;вписывается&quot; в окно приема).</span></div>
<div class=paragraph style=" padding:0.00pt 71.28pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">В ответ на передачу данных TCP будет принимать подтверждения. При обработке подтверждений также выполняются операции сравнения порядковых номеров.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:6.96pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:33.12pt;">
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 42.48pt; text-align:left; text-indent:-14.16pt;"><span class=font8 style=" line-height:9.12pt;">5 <span class=font13>Этот рисунок лишь иллюстрирует возможные состояния и не является спецификацией таковых. (В параграфе 4.2.2.8 RFC-1122 приведен ряд поправок к этой диаграмме. <i>Прим. перев.</i>)</span></span></div>
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" color:rgb(0,0,128);"><a href="http://rfc.com.ru12Перевод"><u>http://rfc.com.ru&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 12&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Перевод</u></a><span style=" color:rgb(0,0,0);"> на русский язык - Н. Малых</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:301.44pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:293.52pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:323.76pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>RFC-793&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRANSMISSION CONTROL PROTOCOL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Сентябрь 1981</span></div>
<div class=paragraph style=" padding:4.08pt 290.64pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">SND.UNA = самый старый неподтвержденный номер SND.NXT = порядковый номер для следующей передачи</span></div>
<div class=paragraph style=" padding:0.00pt 117.12pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">SEG.ACK = подтверждение от принимающего TCP (следующий порядковый номер, ожидаемый TCP) SEG.SEQ = первый порядковый номер для сегмента</span></div>
<div class=paragraph style=" padding:0.00pt 57.36pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">SEG.LEN = число октетов в сегменте, занятых данными (с учетом SYN и FIN) SEG.SEQ+SEG.LEN-1 = последний порядковый номер для сегмента Для новых подтверждений (их называют acceptable ack - подтверждение доступности) должно выполняться неравенство:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14><b>SND.UNA &lt; SEG.ACK =&lt; SND.NXT</b></span></div>
<div class=paragraph style=" padding:1.44pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>Сегмент в очереди на повторную передачу считается полностью подтвержденным, если сумма его порядкового номера и длины</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">не превышает порядковый номер во входящем подтверждении.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Для приема данных должны выполняться проверки следующих параметров:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">RCV.NXT = следующий порядковый номер, ожидаемый во входящем сегменте и находящийся в левой (или нижней) части</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>окна приема</span></div>
<div class=paragraph style=" padding:1.44pt 28.56pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">RCV.NXT+RCV.WND-1 = последний порядковый номер, ожидаемый во входящем сегменте и находящийся в правой (или верхней) части окна приема</span></div>
<div class=paragraph style=" padding:0.72pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.44pt;">SEG.SEQ = первый порядковый номер, занимаемый входящим сегментом</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.44pt;">SEG.SEQ+SEG.LEN-1 = последний порядковый номер, занимаемый входящим сегментом</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:13.44pt;">Сегмент считается занимающим часть корректного пространства порядковых номеров при условии:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14><b>RCV.NXT =&lt; SEG.SEQ &lt; RCV.NXT+RCV.WND</b></span></div>
<div class=paragraph style=" padding:1.44pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>или</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14><b>RCV.NXT =&lt; SEG.SEQ+SEG.LEN-1 &lt; RCV.NXT+RCV.WND</b></span></div>
<div class=paragraph style=" padding:1.20pt 28.56pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Первое неравенство проверяет &quot;попадание&quot; в окно начала сегмента, второе относится к окончанию сегмента. Если выполняется хотя бы одно из условий, это говорит о том, что сегмент содержит данные из окна.</span></div>
<div class=paragraph style=" padding:0.00pt 29.04pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Реальные проверки несколько сложнее описанных. В результате использования нулевых окон и сегментов нулевой длины могут возникать четыре разных ситуации при восприятии входящих сегментов:</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.08pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:301.44pt;">
<div class=block style=" width:181.44pt; height:71.76pt; padding:0.00pt 29.52pt 0.00pt 90.48pt;">
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style=" width:181.44pt; height:71.76pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:93.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:87.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:93.84pt;">
<div class=block style=" width:93.84pt; height:12.48pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 1.44pt; text-align:left;"><span class=font14><b><i>Размер сегмента</i></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:87.60pt;">
<div class=block style=" width:87.60pt; height:12.48pt;">
<div class=paragraph style=" padding:0.00pt 1.44pt 0.00pt 0.00pt; text-align:right;"><span class=font14><b><i>Приемное окно</i></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:93.84pt;">
<div class=block style=" width:93.84pt; height:15.36pt;">
<div class=paragraph style=" padding:2.40pt 0.00pt 0.00pt 34.08pt; text-align:left;"><span class=font14>0</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:87.60pt;">
<div class=block style=" width:87.60pt; height:15.36pt;">
<div class=paragraph style=" padding:2.40pt 29.76pt 0.00pt 0.00pt; text-align:right;"><span class=font14>0</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:93.84pt;">
<div class=block style=" width:93.84pt; height:15.84pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 34.08pt; text-align:left;"><span class=font3><b>о</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:87.60pt;">
<div class=block style=" width:87.60pt; height:15.84pt;">
<div class=paragraph style=" padding:2.88pt 27.12pt 0.00pt 0.00pt; text-align:right;"><span class=font14>&gt;0</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:93.84pt;">
<div class=block style=" width:93.84pt; height:15.60pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 31.20pt; text-align:left;"><span class=font15>&gt;<b>о</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:87.60pt;">
<div class=block style=" width:87.60pt; height:15.60pt;">
<div class=paragraph style=" padding:2.88pt 29.76pt 0.00pt 0.00pt; text-align:right;"><span class=font14>0</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:93.84pt;">
<div class=block style=" width:93.84pt; height:12.48pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 31.20pt; text-align:left;"><span class=font15>&gt;<b>о</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:87.60pt;">
<div class=block style=" width:87.60pt; height:12.48pt;">
<div class=paragraph style=" padding:2.88pt 27.12pt 0.00pt 0.00pt; text-align:right;"><span class=font14>&gt;0</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:93.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:87.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
</div>
</td>
<td class=cell valign="top" style=" width:293.52pt;">
<div class=block style=" width:293.52pt; height:71.76pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 112.08pt; text-align:left;"><span class=font14 style=" line-height:15.60pt;"><b><i>Проверка</i></b></span></div>
<div class=paragraph style=" text-align:left;"><span class=font14 style=" line-height:15.60pt;">SEG.SEQ = RCV.NXT</span></div>
<div class=paragraph style=" text-align:left;"><span class=font14 style=" line-height:15.60pt;">RCV.NXT =&lt; SEG.SEQ &lt; RCV.NXT+RCV.WND</span></div>
<div class=paragraph style=" text-align:left;"><span class=font14 style=" line-height:15.60pt;">неприемлемо</span></div>
<div class=paragraph style=" padding:1.92pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">RCV.NXT =&lt; SEG.SEQ &lt; RCV.NXT+RCV.WND или<br></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:407.76pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 301.44pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">RCV.NXT =&lt; SEG.SEQ+SEG.LEN-1 &lt; RCV.NXT+RCV.WND</span></div>
<div class=paragraph style=" padding:1.44pt 28.56pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Отметим, что при нулевом размере приемного окна никакие сегменты не принимаются, за исключением подтверждений ACK. Таким образом, TCP может поддерживать нулевое окно приема во время повторной передачи, сохраняя возможность приема сегментов ACK. Однако даже при нулевом приемном окне протокол TCP должен обрабатывать поля RST и URG во всех входящих сегментах.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Используемая схема нумерации обеспечивает также защиту управляющей информации. Это достигается за счет включения некоторых флагов управления в пространство порядковых номеров так, что они могут быть повторно переданы и подтверждены без конфликтов (т. е., используется одна и только одна копия флагов управления). Управляющая информация не переносится физически в пространстве данных сегмента. Следовательно, требуется адаптация правил выделения порядковых номеров с учетом флагов управления. Такая защита требуется только для флагов SYN и FIN, используемых лишь при организации и разрыве соединений. С учетом процессов порядковой нумерации флаг SYN размещается перед первым октетом данных в сегменте, а флаг FIN - вслед за последним октетом данных. Размер сегмента (SEG.LEN) учитывает поля данных и флагов управления. При наличии флага SYN переменная SEG.SEQ содержит порядковый номер SYN.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font3 style=" line-height:10.08pt;"><b><i>Выбор начального номера</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Протокол не задает каких-либо ограничений на повторное использование соединений. Соединение определяется парой сокетов.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Новые экземпляры соединения будут рассматриваться как &quot;реинкарнации&quot;. Однако в этом случае возникает проблема различий</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">между реинкарнациями - &quot;как протокол TCP сможет определить дубликаты от предыдущей реинкарнации соединения?&quot; Эта</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">проблема возникает в результате кратковременных успешных соединений или при разрывах соединений с &quot;потерей памяти&quot; и</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">повторной организацией.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Во избежание конфликтов с сегментами прежних реинкарнаций нужно предотвратить использование тех порядковых номеров</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">сегментов, которые могут оставаться в сети от предыдущей реинкарнации. Такая возможность должна обеспечиваться даже</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">после краха TCP и потери информации об использованных порядковых номерах. При организации нового соединения</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">генерируется начальный порядковый номер (initial sequence number) ISN. Генерация номера основана на текущем (возможно,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">фиктивном)   32-битовом   значении   времени,   в   котором   младший   бит   инкрементируется   приблизительно   каждые   4</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">микросекунды. Таким образом, цикл номеров ISN занимает около 4.55 часа. Поскольку мы предполагаем, что сегмент</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">сохраняется в сети в течение времени, не превышающего MSL (Maximum Segment Lifetime - максимальное время жизни</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">сегмента), и значение MSL &lt; 4.55 час., можно считать значения ISN уникальными.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Для каждого соединения существует порядковый номер для приема и передачи. Начальный порядковый номер для передачи</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">(ISS) выбирается передающим модулем TCP, а начальный номер для приема (IRS) определяется во время процедуры</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">организации соединения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Для организованных и инициализированных соединений два модуля TCP должны синхронизировать между собой порядковые</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">номера. Это осуществляется в процессе обмена сегментами организации соединения, содержащими управляющий бит SYN (для</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">синхронизации)  и  начальные  порядковые  номера.  Для  краткости  сегменты  с  флагом  SYN  просто  называют  SYN.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Следовательно, решение требует подходящего механизма для подбора начальных порядковых номеров и включает процедуру</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">согласования параметров для обмена значениями ISN.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>Для синхронизации требуется, чтобы каждая из сторон передала свой начальный порядковый номер удаленной стороне и</span></div>
<div class=paragraph style=" padding:7.20pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>Перевод на русский язык - Н. Малых (<span style=" color:rgb(0,0,128);"><a href="mailto:owner@nmalykh.org"><u>owner@nmalykh.org</u></a></span>)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;13&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:301.44pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:293.52pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:807.36pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1>RFC-793&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRANSMISSION CONTROL PROTOCOL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Сентябрь 1981</span></div>
<div class=paragraph style=" padding:4.80pt 71.04pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">получила от той подтверждение. Каждая из сторон должна получить от удаленной стороны ее начальный порядковый номер и передать обратно подтверждение.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">1)&nbsp; &nbsp;A --&gt; B SYN - мой порядковый номер X</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2)&nbsp; &nbsp;A &lt;-- B ACK - ваш порядковый номер X</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">3)&nbsp; &nbsp;A &lt;-- B SYN - мой порядковый номер Y</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">4)&nbsp; &nbsp;A --&gt; B ACK - ваш порядковый номер Y</span></div>
<div class=paragraph style=" padding:0.00pt 71.52pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Поскольку пп. 2 и 3 могут быть объединены в одном сообщении, такую процедуру называют 3-этапным согласованием (three way handshake).</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Трехэтапное согласование необходимо, поскольку порядковые номера не связаны с глобальным сетевым временем и TCP может использовать различные механизмы выбора ISN. Получатель первого SYN не может проверить какой это сегмент (не является ли он старой задержавшейся копией), пока не узнает последнего порядкового номера, использованного для соединения (это не всегда возможно), и поэтому он должен запросить у отправителя проверку SYN. Трехэтапное согласование и преимущества схемы выделения номеров на основе времени рассмотрены в работе [3].</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b>Когда нужно сохранять паузу</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.56pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Для обеспечения уверенности в том, что TCP не создает сегментов с порядковыми номерами, которые могут дублироваться в старых сегментах, остающихся в сети, TCP должен сохранять молчание в течение максимального времени жизни сегмента MSL перед выделением каких-либо порядковых номеров для организации нового соединения или восстановления после сбоя с потерей информации об использованных порядковых номерах. Для данной спецификации значение MSL выбирается равным 2 минутам и может быть изменено, если практика покажет необходимость такого изменения. Отметим, что если по каким-то причинам происходит повторная инициализация TCP информация об использованных порядковых номерах сохраняется в памяти и ожидания не требуется, нужно лишь быть уверенным в том, что новые порядковые номера превышают использованные недавно.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b>Концепция паузы TCP</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.32pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">В соответствии с данной спецификацией хост после &quot;краха&quot; без сохранения каких-либо сведений о последних порядковых номерах, переданных через каждое активное (т. е., незакрытое) соединение, будет задерживать передачу каких-либо сегментов TCP по крайней мере в течение максимального времени жизни сегмента MSL в системе internet, частью которой является &quot; упавший&quot; хост. В следующих параграфах приведены пояснения для этой спецификации. Разработчики TCP могут пренебречь паузой, но тогда будет возникать риск восприятия некоторых старых сегментов вместо новых или отбрасывания новых данных некоторыми получателями в internet.</span></div>
<div class=paragraph style=" padding:0.00pt 70.56pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">TCP потребляет часть пространства порядковых номеров всякий раз при формировании сегмента и передаче его в выходную очередь хоста-отправителя. Обнаружение дубликатов и механизм нумерации в протоколе TCP полагаются на уникальное связывание сегмента данных с пространством порядковых номеров, при котором не могут быть использованы все 2<sup>32</sup> значений порядковых номеров, пока сегменты с выделенными номерами не будут доставлены и подтверждены получателем. Все копии сегментов удаляются из internet. Без этого два различных сегмента TCP могут получить одинаковые или перекрывающиеся порядковые номера, что приведет к конфликту на приемной стороне, поскольку невозможно будет отличить новые данные от старой копии. Напомним, что каждый сегмент ограничен в пространстве порядковых номеров числом октетов данных в этом сегменте.</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">При нормальных условиях Tnternet. Без этого два различных сегмента TCP могут получить одинаковые или перекрывающиеся порядковые номера, что приведет к конфликту на приемной стороне, поскольку невозможно будет отличить новые данные от старой копии. Напомним, что каждый сегмент ограничен в пространстве порядковых номеров числом октетов данных в этом сегменте.</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">При нормальных условиях TCP сохраняет следующий порядковый номер для передачи и самый старый номер из ожидающих подтверждения, чтобы избежать ошибочного использования порядкового номера снова до того момента, как будет подтверждено его первое использование. Однако это не обеспечивает гарантии того, что старые дубликаты будут удалены из сети, поэтому пространство порядковых номеров сделано очень большим, чтобы снизить вероятность конфликта при одновременной доставке сегментов с перекрывающимися номерами. При скорости 2 Мбит/с затрачивается 4.5 часов на использование 2<sup>32</sup> порядковых номеров. Поскольку максимальное время жизни сегмента в сети точно не превышает нескольких десятков секунд, это обеспечивает достаточную защиту для недетерминированных сетей даже при скорости 10 Мбит/с. При скорости 100 Мбит/с цикл порядковых номеров занимает 5.4 мин. - это немного, но вполне достаточно.</span></div>
<div class=paragraph style=" padding:0.00pt 70.56pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Однако работа механизмов нумерации и обнаружения дубликатов может быть расстроена, если TCP на передающей стороне не помнит порядковых номеров, которые последними были использованы для данного соединения. Например, если TCP будет инициировать все соединения с порядковым номером 0, тогда при &quot;крахе&quot; и повторном запуске TCP может восстановить прежнее соединение (возможно после полудуплексного разрешения соединения)) и передать пакеты с порядковыми номерами, которые будут совпадать или перекрываться с номерами пакетов, находящимися в сети (переданными в предыдущей реинкарнации того же соединения). При отсутствии информации о порядковых номерах, используемых для конкретного соединения, спецификация TCP рекомендует отправителю сделать задержку на время MSL перед передачей сегментов в соединение, чтобы дать время на исчезновение из сети сегментов от предыдущей реинкарнации. Эта проблема сохраняет актуальность даже для хостов, использующих текущее время для генерации начальных порядковых номеров. Предположим, что при организации соединения нумерация начинается со значения S. Предположим также, что соединение используется не очень интенсивно и функция генерации начального порядкового номера ISN(t) берет значение порядкового номера (скажем, S1) последнего сегмента, переданного этим TCP для конкретного соединения. Далее предположим, что хост &quot; упал&quot;, загрузился снова и организовал новую реинкарнацию соединения. В качестве начального выбран порядковый номер S1 = ISN(t) - последний использованный предыдущей реинкарнацией соединения номер! Если восстановление происходит достаточно быстро, все старые дубликаты в сети, имеющие порядковые номера по соседству с S1, могут быть доставлены и восприняты как новые пакеты получателем новой реинкарнации соединения.</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Проблема состоит в том, что хост при восстановлении может не знать, как долго продолжался &quot;крах&quot; и существуют ли в системе старые дубликаты от прежней реинкарнации соединения.</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Одним из способов решения этой проблемы является задержка передачи сегментов на время MSL при восстановлении после &quot; краха&quot; - quite time. Хосты, которые предпочитают не ждать, рискуют спровоцировать конфликт между старыми и новыми пакетами для получателя. Разработчики могут предоставить пользователям TCP возможность выбора для каждого соединения режима ожидания после краха или реализовать режим quite time для всех соединений. Обычно, даже при включенном механизме ожидания последнее становится ненужным по истечении времени MSL после загрузки хоста.</span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Каждый переданный сегмент занимает не менее одного порядкового номера в пространстве номеров. Используемые сегментом номера считаются занятыми в течение времени MSL. Если после после &quot;краха&quot; новое соединение организуется слишком быстро и будет использовать порядковые номера, выделенные для сегментов предыдущей реинкарнации соединения, возможно перекрытие порядковых номеров и возникновение проблем на приемной стороне.</span></div>
<div class=paragraph style=" padding:4.56pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" color:rgb(0,0,128);"><a href="http://rfc.com.ru14Перевод"><u>http://rfc.com.ru&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Перевод</u></a><span style=" color:rgb(0,0,0);"> на русский язык - Н. Малых</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:161.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:341.28pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:91.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:161.76pt;">
<div class=block style=" width:161.76pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 71.76pt; text-align:left;"><span class=font1>RFC-793</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:341.28pt;">
<div class=block style=" width:341.28pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 41.28pt; text-align:left;"><span class=font1>TRANSMISSION CONTROL PROTOCOL</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:91.92pt;">
<div class=block style=" width:91.92pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>Сентябрь 1981</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.08pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font4><b>3.4. Организация соединения</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:543.12pt;">
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Для организации соединений используется процедура трехэтапного согласования (three-way handshake). Эта процедура обычно инициируется одним TCP, а TCP на удаленной стороне дает отклик. Трехэтапное согласование будет работать и при одновременном инициировании соединения с обеих сторон. При одновременной попытке каждый модуль TCP получает сегмент SYN, не содержащий подтверждения для переданного этой стороной ранее сегмента SYN. Потенциально возможно прибытие старого дубликата SYN в процессе одновременной организации соединения. Для решения таких проблем можно использовать сегменты reset.</span></div>
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Ниже рассмотрены несколько примеров организации соединений. Хотя в этих примерах не рассматривается синхронизация с использованием сегментов данных, она полностью легитимна, пока принимающая сторона TCP не будет доставлять данные пользователю до проверки их корректности (т. е., данные должны буферизоваться на приемной стороне, пока соединение не перейдет в состояние ESTABLISHED). Трехэтапное согласование снижает вероятность организации ложных соединений. Это согласование является компромиссом между расходом памяти и передачей сообщений, обеспечивающих информацию для проверки соединения.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.56pt;">Простейший вариант трехэтапного согласования показан на рисунке 7. Стрелка вправо (--&gt;) на рисунке показывает отправку сегмента от TCP A к TCP B или прибытие сегмента в B из A. Левая стрелка (&lt;--) показывает передачу сегментов в обратном направлении. Троеточия (...) показывают сегменты, которые еще остаются в сети (задержаны). XXX обозначает потерянные или отброшенные сегменты. В скобках () приведены комментарии. Состояния TCP представлены <b>после </b>отправки или прибытия сегментов (содержимое сегментов показано в центральной части каждой строки). Содержимое сегментов представлено в сокращенном виде - порядковый номер, флаги управления и поле ACK. Остальные поля (размер окна, адреса, длина сегмента) для краткости и простоты опущены.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 103.44pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">TCP A<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>TCP B</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 81.84pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">1.&nbsp; CLOSED<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>LISTEN</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 81.84pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">2.&nbsp; SYN-SENT    --&gt; &lt;SEQ=100&gt;&lt;CTL=SYN&gt;<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>--&gt; SYN-RECEIVED</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 81.84pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">3.&nbsp; ESTABLISHED &lt;-- &lt;SEQ=300&gt;&lt;ACK=101&gt;&lt;CTL=SYN,ACK&gt;  &lt;-- SYN-RECEIVED</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 81.84pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">4.&nbsp; ESTABLISHED --&gt; &lt;SEQ=101&gt;&lt;ACK=301&gt;&lt;CTL=ACK&gt;       --&gt; ESTABLISHED</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 81.84pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">5.&nbsp; ESTABLISHED --&gt; &lt;SEQ=101&gt;&lt;ACK=301&gt;&lt;CTL=ACK&gt;&lt;DATA&gt; --&gt; ESTABLISHED</span></div>
<div class=paragraph style=" padding:0.48pt 28.80pt 0.00pt 71.04pt; text-align:left; text-indent:103.68pt;"><span class=font14 style=" line-height:10.56pt;"><i>Рисунок 7. Базовое 3-этапное согласование для синхронизации соединения </i>В строке 2 на рисунке 7 TCP A начинает передачу сегмента SYN, говорящего об использовании порядковых номеров, начиная со 100. В строке 3 TCP B передает SYN и подтверждение для принятого SYN в адрес TCP A. Отметим, что поле подтверждения показывает ожидание TCP B приема порядкового номера 101, подтверждающего SYN с номером 100.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.56pt;">В строке 4 TCP A отвечает пустым сегментом с подтверждением ACK для сегмента SYN от TCP B; в строке 5 TCP A передает некоторые данные. Отметим, что порядковый номер сегмента в строке 5 совпадает с номером в строке 4, поскольку ACK не занимает пространства порядковых номеров (если это сделать, придется подтверждать подтверждения - ACK для ACK!). Одновременное инициирование соединения лишь незначительно сложнее (см. рисунок 8). Каждое соединение TCP проходит от состояния CLOSED через SYN-SENT и SYN-RECEIVED в состояние ESTABLISHED. <span class=font9>TCP A</span><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font9>TCP B</span></span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 81.84pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">1.&nbsp; CLOSED<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>CLOSED</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 81.84pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">2.&nbsp; SYN-SENT     --&gt; &lt;SEQ=100&gt;&lt;CTL=SYN&gt;<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>...</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 81.84pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">3.&nbsp; SYN-RECEIVED &lt;-- &lt;SEQ=300&gt;&lt;CTL=SYN&gt;<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>&lt;-- SYN-SENT</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 81.84pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">4.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;... &lt;SEQ=100&gt;&lt;CTL=SYN&gt;<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>--&gt; SYN-RECEIVED</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 81.84pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">5.&nbsp; SYN-RECEIVED --&gt; &lt;SEQ=100&gt;&lt;ACK=301&gt;&lt;CTL=SYN,ACK&gt; ...</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 81.84pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">6.&nbsp; ESTABLISHED  &lt;-- &lt;SEQ=300&gt;&lt;ACK=101&gt;&lt;CTL=SYN,ACK&gt; &lt;-- SYN-RECEIVED</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 81.84pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">7.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;... &lt;SEQ=100&gt;&lt;ACK=301&gt;&lt;CTL=SYN,ACK&gt; --&gt; ESTABLISHED<sup>6</sup></span></div>
<div class=paragraph style=" padding:0.24pt 28.56pt 0.00pt 71.04pt; text-align:justify; text-indent:144.24pt;"><span class=font14 style=" line-height:10.56pt;"><i>Рисунок 8. Одновременная синхронизация соединения </i>Принципиальная необходимость использования трехэтапного согласования обусловлена стремлением избавиться от недоразумений, связанных со старыми дубликатами инициирования соединений. Для решения таких проблем используется специальное управляющее сообщение - reset (сброс). Если принимающая сторона TCP еще находится в несинхронизированном состоянии (т. е., SYN-SENT, SYN-RECEIVED), она возвращается в состояние LISTEN при получении reset. Если TCP находится с засинхронизированном состоянии (ESTABLISHED, FIN-WAIT-1, FIN-WAIT-2, CLOSE-WAIT, CLOSING, LAST-ACK, TIME-WAIT), соединение после reset разрывается и пользователю передается уведомление об этом. Позднее мы обсудим этот вопрос при рассмотрении полуоткрытых (half-open) соединений.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 103.44pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">TCP A<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>TCP B</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:1.92pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:161.76pt;">
<div class=block style=" width:80.64pt; height:84.48pt; padding:0.00pt 0.00pt 0.00pt 81.12pt;">
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style=" width:80.64pt; height:84.48pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:16.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:64.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:16.32pt;">
<div class=block style=" width:16.32pt; height:9.84pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 1.68pt; text-align:left;"><span class=font9>1.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:64.32pt;">
<div class=block style=" width:64.32pt; height:9.84pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 6.00pt; text-align:left;"><span class=font9>CLOSED</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign=<span class=font9>SYN-SENT</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:16.32pt;">
<div class=block style=" width:16.32pt; height:11.52pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 1.44pt; text-align:left;"><span class=font9>3.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:64.32pt;">
<div class=block style=" width:64.32pt; height:11.52pt;">
<div class=paragraph style=" text-align:right;"><span class=font9>(duplicate)</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:16.32pt;">
<div class=block style=" width:16.32pt; height:10.56pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 1.44pt; text-align:left;"><span class=font9>4.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:64.32pt;">
<div class=block style=" width:64.32pt; height:10.56pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 6.72pt; text-align:left;"><span class=font9>SYN-SENT</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:16.32pt;">
<div class=block style=" width:16.32pt; height:10.80pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 1.68pt; text-align:left;"><span class=font9>5.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:64.32pt;">
<div class=block style=" width:64.32pt; height:10.80pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 6.72pt; text-align:left;"><span class=font9>SYN-SENT</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:16.32pt;">
<div class=block style=" width:16.32pt; height:11.04pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 1.68pt; text-align:left;"><span class=font9>6.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:64.32pt;">
<div class=block style=" width:64.32pt; height:11.04pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:16.32pt;">
<div class=block style=" width:16.32pt; height:10.80pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 1.68pt; text-align:left;"><span class=font9>7.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:64.32pt;">
<div class=block style=" width:64.32pt; height:10.80pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 6.72pt; text-align:left;"><span class=font9>SYN-SENT</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:16.32pt;">
<div class=block style=" width:16.32pt; height:9.36pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 1.68pt; text-align:left;"><span class=font9>8.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:64.32pt;">
<div class=block style=" width:64.32pt; height:9.36pt;">
<div class=paragraph style=" text-align:right;"><span class=font9>ESTABLISHED</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:16.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:64.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:433.20pt;">
<div class=block style=" width:433.20pt; height:84.48pt;">
<div class=paragraph style=" padding:0.00pt 173.04pt 0.00pt 6.48pt; text-align:left; text-indent:221.28pt;"><span class=font9 style=" line-height:10.56pt;">LISTEN --&gt; &lt;SEQ=100&gt;&lt;CTL=SYN&gt;<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>...</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 6.48pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">... &lt;SEQ=90&gt;&lt;CTL=SYN&gt;<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>--&gt; SYN-RECEIVED</span></div>
<div class=paragraph style=" padding:0.24pt 140.64pt 0.00pt 6.48pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">&lt;-- &lt;SEQ=300&gt;&lt;ACK=91&gt;&lt;CTL=SYN,ACK&gt;   &lt;-- SYN-RECEIVED --&gt; &lt;SEQ=91&gt;&lt;CTL=RST&gt;<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>--&gt; LISTEN</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 6.48pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">... &lt;SEQ=100&gt;&lt;CTL=SYN&gt;<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>--&gt; SYN-RECEIVED</span></div>
<div class=paragraph style=" padding:0.24pt 140.64pt 0.00pt 0.00pt; text-align:left; text-indent:64.80pt;"><span class=font9 style=" line-height:10.56pt;">&lt;-- &lt;SEQ=400&gt;&lt;ACK=101&gt;&lt;CTL=SYN,ACK&gt;  &lt;-- SYN-RECEIVED ESTABLISHED --&gt; &lt;SEQ=101&gt;&lt;ACK=401&gt;&lt;CTL=ACK&gt;      --&gt; ESTABLISHED </span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:0.96pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:104.88pt;">
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.56pt;"><i>Рисунок 9. Действия при получении старого дубликата SYN </i>На рисунке 9 показан простой пример решения проблемы со старым дубликатом. В строке 3 старый дубликат SYN принимается TCP B, который не знает об этом и дает нормальный отклик (строка 4). TCP A детектирует некорректность поля ACK и возвращает RST (reset) с полем SEQ, делающим сегмент правдоподобным (believable). TCP B, получив RST, возвращается в состояние LISTEN. Когда оригинальный сегмент SYN наконец принимается (строка 6), происходит нормальная синхронизация. Если SYN в строке 6 приходит до RST, может потребоваться более сложный обмен сообщениями с передачей RST в обоих направлениях.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font3><b><i>Полуоткрытые соединения и другие аномалии</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>Организованное соединение называют полуоткрытым (half-open), если одна из сторон TCP закрыла или прервала соединение от</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:10.32pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:25.20pt;">
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 71.04pt; text-align:left;"><span class=font11 style=" line-height:12.72pt;">6 <span class=font13>В исходном документе указан пакет </span><span class=font8>&lt;SEQ=101&gt;&lt;ACK=301&gt;&lt;CTL=ACK&gt;, </span><span class=font1>но</span><span class=font0> </span><span class=font1>в</span><span class=font0> </span><span class=font1>RFC-1122</span><span class=font0> </span><span class=font1>эта</span><span class=font0> </span><span class=font1>ошибка</span><span class=font0> </span><span class=font1>исправлена.</span><span class=font0> </span><span class=font1><i>Прим.</i></span><span class=font0><i> </i></span><span class=font1><i>перев. </i></span><span class=font1>Перевод на русский язык - Н. Малых (</span><span class=font1 style=" color:rgb(0,0,128);"><a href="mailto:owner@nmalykh.org"><u>owner@nmalykh.org</u></a></span><span class=font1>)</span><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font1>15</span><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font1 style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:161.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:341.28pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:91.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:807.36pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1>RFC-793&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRANSMISSION CONTROL PROTOCOL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Сентябрь 1981</span></div>
<div class=paragraph style=" padding:4.80pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">себя, а другая сторона не знает об этом или обе стороны находятся в рассинхронизированном состоянии в результате краха с потерей памяти. Такие соединения будут автоматически сбрасываться при попытке передачи данных в любом направлении. Однако, полуоткрытые соединения являются не совсем обычными и процедура восстановления для них будет отличаться. Если на сайте A соединение больше не существует, тогда попытка пользователя с сайта B передать какие-либо данные через это соединение будет приводить к тому, что TCP B получит управляющее сообщение reset. Такое сообщение говорит TCP B о некорректности соединения и необходимости его разрыва.</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.56pt;">Предположим, что пользователи A и B обменивались данными в момент краха TCP с потерей памяти на хосте A. В зависимости от операционной системы хоста A запускается тот или иной механизм повторной загрузки TCP. После восстановления TCP хост A будет пытаться организовать соединение заново или восстановить его. В результате хост может попытаться снова вызвать функцию OPEN для восстановления соединения или попытается вызвать SEND, надеясь, что соединение существует. Во втором случае будет получено сообщение об ошибке connection not open от локального (A) TCP. При попытке организации нового соединения TCP A будет передавать сегмент, содержащий SYN (этот сценарий показан на рисунке 10). После краха TCP A пользователь пытается заново организовать соединение, а TCP B предполагает, что соединение существует по прежнему. <span class=font9>TCP A</span><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font9>TCP B</span></span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 39.12pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">1.&nbsp; (CRASH)<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>(send 300,receive 100)</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 39.12pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">2.&nbsp; CLOSED<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>ESTABLISHED</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 39.12pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">3.&nbsp; SYN-SENT --&gt; &lt;SEQ=400&gt;&lt;CTL=SYN&gt;<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>--&gt; (??)</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 39.12pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">4.&nbsp; (!!)     &lt;-- &lt;SEQ=300&gt;&lt;ACK=100&gt;&lt;CTL=ACK&gt;     &lt;-- ESTABLISHED</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 39.12pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">5.&nbsp; SYN-SENT --&gt; &lt;SEQ=100&gt;&lt;CTL=RST&gt;<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>--&gt; (Abort!!)</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 39.12pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">6.&nbsp; SYN-SENT<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>CLOSED</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 39.12pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">7.&nbsp; SYN-SENT --&gt; &lt;SEQ=400&gt;&lt;CTL=SYN&gt;<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>--&gt;</span></div>
<div class=paragraph style=" padding:0.24pt 70.56pt 0.00pt 28.32pt; text-align:justify; text-indent:142.32pt;"><span class=font14 style=" line-height:10.56pt;"><i>Рисунок 10. Обнаружение полуоткрытого соединения </i>При получении SYN (строка 3) TCP B, будучи в синхронизированном состоянии, видит входящий сегмент за пределами окна и отвечает подтверждением с порядковым номером следующего сегмента, который ожидается (ACK 100). TCP A видит, что этот сегмент (подтверждение) не подтверждает ничего из переданного им и, будучи в рассинхронизированном состоянии, передает RST, поскольку обнаружено полуоткрытое соединение. TCP B прерывает соединение (строка 5). TCP A будет продолжать попытки организовать соединение, используя стандартную трехэтапную процедуру согласования (см. рисунок 7). Интересный случай наблюдается при крахе TCP A, когда TCP B пытается передать данные, предполагая наличие синхронизированного соединения (см. рисунок 11). В этом случае данные, приходящие TCP A от TCP B (строка 2), не могут быть восприняты по причине отсутствия соединения, поэтому TCP A будет слать RST. Сообщение RST воспринимается TCP B, после чего соединение будет разорвано.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.52pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">TCP A<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>TCP B</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 39.12pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">1.&nbsp; (CRASH)<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>(send 300,receive 100)</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 39.12pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">2.&nbsp; (??)    &lt;-- &lt;SEQ=300&gt;&lt;ACK=100&gt;&lt;DATA=10&gt;&lt;CTL=ACK&gt; &lt;-- ESTABLISHED</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 39.12pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">3.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --&gt; &lt;SEQ=100&gt;&lt;CTL=RST&gt;<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>--&gt; (ABORT!!)</span></div>
<div class=paragraph style=" padding:0.24pt 71.04pt 0.00pt 28.32pt; text-align:left; text-indent:85.92pt;"><span class=font14 style=" line-height:10.56pt;"><i>Рисунок 11. Активная сторона пытается использовать полуоткрытое соединение </i>На рисунке 12 показаны TCP A и TCP B в пассивном состоянии, ожидающие SYN. Старый дубликат, принимаемый TCP B (строка 2), заставляет B начать действия. Возвращается сегмент SYN-ACK (строка 3), который заставляет TCP A генерировать RST (ACK в строке 3 не может быть принят). TCP B принимает сигнал сброса и возвращается в свое пассивное состояние LISTEN.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 60.72pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">TCP A<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>TCP B</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 39.12pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">1.&nbsp; LISTEN<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>LISTEN</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 39.12pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">2.&nbsp; &nbsp; &nbsp; &nbsp;... &lt;SEQ=Z&gt;&lt;CTL=SYN&gt;<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>--&gt;  SYN-RECEIVED</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 39.12pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">3.&nbsp; (??) &lt;-- &lt;SEQ=X&gt;&lt;ACK=Z+1&gt;&lt;CTL=SYN,ACK&gt;   &lt;--  SYN-RECEIVED</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 39.12pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">4.&nbsp; &nbsp; &nbsp; &nbsp;--&gt; &lt;SEQ=Z+1&gt;&lt;CTL=RST&gt;<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>--&gt;  (return to LISTEN!)</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 39.12pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">5.&nbsp; LISTEN<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>LISTEN</span></div>
<div class=paragraph style=" padding:0.24pt 71.52pt 0.00pt 28.32pt; text-align:left; text-indent:88.80pt;"><span class=font14 style=" line-height:10.80pt;"><i>Рисунок 12. Старый дубликат SYN инициирует Reset при двух пассивных сокетах </i>Возможно множество других ситуаций, каждая из которых разрешается при соблюдении рассмотренных ниже правил генерации и обработки RST.</span></div>
<div class=paragraph style=" padding:4.56pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b><i>Генерация Reset</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 71.28pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.80pt;">Как общее правило RST следует передавать всякий раз при получении сегмента, который представляется не предназначенным для данного соединения. В сомнительных случаях сигнал сброса передавать не следует. Существует три группы состояний:</span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 42.48pt; text-align:justify; text-indent:-14.16pt;"><span class=font14 style=" line-height:10.08pt;">1.&nbsp; &nbsp;Если соединения не существует (CLOSED), тогда reset передается в ответ на любой входящий сегмент, за исключением другого reset. В частности, сегменты SYN, адресованные в несуществующее соединение, отбрасываются описанным способом.</span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если входящий сегмент содержит поле ACK, reset берет порядковый номер из поля ACK, в остальных случаях для reset используется нулевой номер, а для поля ACK устанавливается значение, равное сумме порядкового номера и размера входящего сегмента. Соединение остается в состоянии CLOSED.</span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 42.48pt; text-align:justify; text-indent:-14.16pt;"><span class=font14 style=" line-height:10.08pt;">2.&nbsp; &nbsp;Если соединение находится в любом несинхронизированном состоянии (LISTEN, SYN-SENT, SYN-RECEIVED) и входящий сегмент подтверждает что-то, еще не посланное (содержит неприемлемое подтверждение ACK), или входящий сегмент имеет уровень безопасности или запрошенное разделение (compartment), которые не соответствуют точно безопасности и разделению для соединения, передается reset.</span></div>
<div class=paragraph style=" padding:0.00pt 70.56pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Если наш сегмент SYN не был подтвержден и уровень предпочтения для входящего сегмента выше запрошенного уровня, повышается локальный уровень предпочтения (если это разрешено пользователем и системой) или передается reset; если же уровень предпочтения для входящего сегмента ниже запрошенного уровня, обработка продолжается как при соответствии уровней предпочтения (если удаленный TCP не может поднять уровень предпочтения до соответствия локальному уровню, это будет обнаружено в следующем полученном сегменте и соединение будет разорвано). Если наш сегмент SYN подтвержден (возможно в данном входящем сегменте), уровень предпочтения для входящего сегмента должен точно соответствовать локальному уровню; если это не так, нужно передать reset. Если входящий сегмент содержит ACK, reset принимает порядковый номер из поля ACK; в остальных случаях используется</span></div>
<div class=paragraph style=" padding:8.88pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" color:rgb(0,0,128);"><a href="http://rfc.com.ru16Перевод"><u>http://rfc.com.ru&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 16&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Перевод</u></a><span style=" color:rgb(0,0,0);"> на русский язык - Н. Малых</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:367.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:227.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:613.20pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>RFC-793&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRANSMISSION CONTROL PROTOCOL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Сентябрь 1981</span></div>
<div class=paragraph style=" padding:4.80pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">нулевой номер, а в поле ACK помещается сумма порядкового номера и размера входящего сегмента. Состояние соединения не изменяется. 3. Если соединение синхронизировано (ESTABLISHED, FIN-WAIT-1, FIN-WAIT-2, CLOSE-WAIT, CLOSING, LAST-ACK, TIME-WAIT), из любого неподходящего сегмента (с порядковым номером за пределами окна или неприемлемым номером подтверждения) следует извлекать только пустой сегмент подтверждения, содержащий текущий порядковый номер передачи, и подтверждение, показывающее следующий ожидаемый порядковый номер. Состояние соединения не изменяется.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 84.96pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если входящий сегмент имеет уровень безопасности, разделение или уровень предпочтения, отличные от одноименных параметров соединения, передается reset и соединение переводится в состояние CLOSED. Для reset берется порядковый номер из поля ACK входящего сегмента.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font3><b><i>Обработка Reset</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Во всех состояниях, за исключением SYN-SENT, сегменты RST проверяются по их полям SEQ. Сброс считается корректным, если его порядковый номер попадает в окно. В состоянии SYN-SENT (сегмент RST принимается в ответ на изначальный сегмент SYN) RST считается приемлемым, если поле ACK подтверждает SYN.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Получатель RST сначала проверяет сегмент, а потом меняет состояние. Если получатель находился в состоянии LISTEN, сигнал сброса игнорируется. Если получатель находится в состоянии SYN-RECEIVED, а перед этим был в состоянии LISTEN, он возвращается в состояние LISTEN; в остальных случаях получатель разрывает соединение и переходит в состояние CLOSED. Если получатель был в любом другом состоянии, он прерывает соединение, уведомляя пользователя, и переходит в состояние CLOSED.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font4><b>3.5. Завершение соединения</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Операция CLOSE означает отсутствие данных для передачи. Уведомление о закрытии полнодуплексного соединения может породить недоразумения, поскольку принимающая сторона может не знать, как трактовать эту операцию. Предлагается трактовать CLOSE следующим образом - передавший CLOSE пользователь может продолжать использовать RECEIVE, пока не получит информацию о том, что другая сторона также использовала CLOSE. Таким образом, программа может инициировать несколько вызовов SEND, потом вызвать CLOSE и продолжать использовать RECEIVE, пока не будет получено уведомления о сбое RECEIVE по причине использования CLOSE на удаленной стороне. Предполагается, что TCP будет информировать пользователя о закрытии соединения удаленной стороной даже в тех случаях, когда все вызовы RECEIVE успешно обработаны, позволяя пользователю корректно завершить работу программы. TCP гарантированно доставит содержимое всех буферов SENT до того, как соединение будет закрыто, поэтому пользователь, который не ждет возврата каких-либо данных, должен лишь дождаться успешного перехода соединения в состояние CLOSED, чтобы быть уверенным в передаче всей своей информации на удаленную сторону. Пользователь должен сохранять для чтения соединение, которое он закрыл для записи, пока TCP не сообщит об отсутствии каких-либо данных. Существует три различных варианта:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">1)&nbsp; &nbsp;Пользователь сообщает TCP о необходимость использовать CLOSE для завершения соединения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">2)&nbsp; &nbsp;Удаленный модуль TCP инициирует разрыв передачей управляющего сигнала FIN.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">3)&nbsp; &nbsp;Обе стороны одновременно вызывают CLOSE.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font3><b>1: завершение инициирует локальный пользователь</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">В этом случае сегмент FIN может быть сгенерирован и помещен в выходную очередь. После этого вызовы пользователем функции SEND уже не будут приниматься TCP и соединение перейдет в состояние FIN-WAIT-1. Вызовы функции RECEIVE в этом состоянии допустимы. Все предшествующие сегменты и сегмент FIN будут передаваться, пока не будут получены для них подтверждения. Когда удаленная сторона TCP имеет подтвержденный сегмент FIN и передала свой FIN, первая сторона TCP может передать подтверждение ACK для этого FIN. Отметим, что TCP после получения FIN будет передавать ACK, но не будет слать свой сегмент FIN, пока локальный пользователь также не закроет соединение.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font3><b>2: TCP получает FIN из сети</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">При получении незапрошенного сегмента FIN из сети принимающая сторона может передать ACK и запросить у пользователя закрыть соединение. Пользователь будет вызывать CLOSE, а TCP в ответ будет передавать FIN на удаленную сторону после передачи остающихся данных. TCP после этого будет ждать подтверждения своего сегмента FIN, а потом удалит соединение. Если ACK не приходит, соединение разрывается по истечении тайм-аута и пользователю передается уведомление.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font3><b>3: оба пользователя закрывают соединение одновременно</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.56pt;">Одновременный вызов CLOSE на обеих сторонах соединения приводит к обмену сегментами FIN. Когда все сегменты, предшествующие FIN, будут обработаны и подтверждены, каждая из сторон TCP может передать ACK для принятого сегмента FIN. После получения ACK обе стороны закрывают соединение. </span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:0.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:367.92pt;">
<div class=block style=" width:367.92pt; height:85.68pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 103.44pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">TCP A</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 81.84pt; text-align:left;"><span class=font9 style=" line-height:10.56pt;">1.&nbsp; ESTABLISHED</span></div>
<div class=paragraph style=" padding:0.24pt 10.80pt 0.00pt 103.44pt; text-align:left; text-indent:-21.60pt;"><span class=font9 style=" line-height:10.56pt;">2.&nbsp; (Close) FIN-WAIT-1  --&gt; &lt;SEQ=100&gt;&lt;ACK=300&gt;&lt;CTL=FIN,ACK&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 32.40pt 0.00pt 81.84pt; text-align:left;"><span class=font9 style=" line-height:11.04pt;">3.&nbsp; FIN-WAIT-2  &lt;-- &lt;SEQ=300&gt;&lt;ACK=101&gt;&lt;CTL=ACK&gt; 4.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 103.44pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">TIME-WAIT   &lt;-- &lt;SEQ=300&gt;&lt;ACK=101&gt;&lt;CTL=FIN,ACK&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 81.84pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">5.&nbsp; TIME-WAIT   --&gt; &lt;SEQ=101&gt;&lt;ACK=301&gt;&lt;CTL=ACK&gt;</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:227.04pt;">
<div class=block style=" width:227.04pt; height:85.68pt;">
<div class=paragraph style=" padding:0.00pt 145.92pt 0.00pt 21.60pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">TCP B ESTABLISHED</span></div>
<div class=paragraph style=" padding:10.80pt 151.44pt 0.00pt 0.00pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">--&gt; CLOSE-WAIT &lt;-- CLOSE-WAIT</span></div>
<div class=paragraph style=" padding:0.00pt 162.24pt 0.00pt 0.00pt; text-align:left; text-indent:21.60pt;"><span class=font9 style=" line-height:10.80pt;">(Close) &lt;-- LAST-ACK --&gt; CLOSED</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:1.44pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:32.64pt;">
<div class=paragraph style=" padding:0.00pt 453.84pt 0.00pt 103.44pt; text-align:left; text-indent:-21.60pt;"><span class=font9 style=" line-height:10.80pt;">6.&nbsp; (2 MSL) CLOSED</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 210.72pt; text-align:left;"><span class=font14><i>Рисунок 13. Нормальный порядок закрытия соединения</i></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:61.44pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>Перевод на русский язык - Н. Малых (<span style=" color:rgb(0,0,128);"><a href="mailto:owner@nmalykh.org"><u>owner@nmalykh.org</u></a></span>)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;17&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:367.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:227.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:159.60pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1>RFC-793&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRANSMISSION CONTROL PROTOCOL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Сентябрь 1981</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.52pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">TCP A<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>TCP B</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 39.12pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">1.&nbsp; ESTABLISHED<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>ESTABLISHED</span></div>
<div class=paragraph style=" padding:0.00pt 193.92pt 0.00pt 60.72pt; text-align:left; text-indent:-21.60pt;"><span class=font9 style=" line-height:10.80pt;">2.&nbsp; (Close)<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>(Close) FIN-WAIT-1  --&gt; &lt;SEQ=100&gt;&lt;ACK=300&gt;&lt;CTL=FIN,ACK&gt;<span class=font1>&nbsp; &nbsp; </span>... FIN-WAIT-1</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 125.52pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">&lt;-- &lt;SEQ=300&gt;&lt;ACK=100&gt;&lt;CTL=FIN,ACK&gt;<span class=font1>&nbsp; &nbsp; </span>&lt;--</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 125.52pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">... &lt;SEQ=100&gt;&lt;ACK=300&gt;&lt;CTL=FIN,ACK&gt;<span class=font1>&nbsp; &nbsp; </span>--&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 210.24pt 0.00pt 125.52pt; text-align:left; text-indent:-86.40pt;"><span class=font9 style=" line-height:10.80pt;">3.&nbsp; CLOSING     --&gt; &lt;SEQ=101&gt;&lt;ACK=301&gt;&lt;CTL=ACK&gt;<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>... CLOSING &lt;-- &lt;SEQ=301&gt;&lt;ACK=101&gt;&lt;CTL=ACK&gt;<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>&lt;--... &lt;SEQ=101&gt;&lt;ACK=301&gt;&lt;CTL=ACK&gt;<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>--&gt;</span></div>
<div class=paragraph style=" padding:0.00pt 199.44pt 0.00pt 60.72pt; text-align:left; text-indent:-21.60pt;"><span class=font9 style=" line-height:10.80pt;">4.&nbsp; TIME-WAIT<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>TIME-WAIT (2 MSL)<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>(2 MSL) CLOSED<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>CLOSED</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 179.76pt; text-align:left;"><span class=font14><i>Рисунок 14. Одновременное закрытия соединения</i></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.08pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>3.6. Предпочтения и безопасность</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:149.76pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Задача организации соединений заключается и в том, чтобы дозволялись только соединения между портами, работающими с</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">одинаковым уровнем безопасности и разделения (compartment) с обеих сторон и с высшим из двух указанных уровней</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font9 style=" line-height:10.08pt; letter-spacing:-0.45pt;">предпочтения <span class=font14>(precedence).</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Предпочтения и параметры безопасности, используемые TCP, в точностью совпадают с одноименными параметрами протокола</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">IP [2]. В данной спецификации термины security/compartment служат для обозначения параметров безопасности, используемых</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">в IP, включая безопасность, разделение (compartment), группы пользователей и ограничения на обслуживание.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Попытка соединения с несовпадающими параметрами безопасности или более низким уровнем предпочтения приводит к</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">сбросу соединения (reset). Отказ от соединения при слишком низком уровне предпочтения происходит только после того, как</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">будет получено подтверждение для сегмента SYN.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>Отметим, что модули TCP, работающие только с принятым по умолчанию уровнем предпочтения, все равно будут проверять</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>этот уровень для входящих сегментов и возможно повышать уровень предпочтения для данного соединения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Параметры безопасности могут использоваться даже в небезопасных средах (значения будут задавать неклассифицированные</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">данные), поэтому хосты в небезопасной среде должны быть готовы к приему параметров безопасности, хотя им нет нужды</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">передавать эти параметры.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.08pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>3.7. Обмен данными</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:419.52pt;">
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">После организации соединения передача данных осуществляется путем обмена сегментами. Поскольку сегменты могут теряться в результате ошибок (некорректная контрольная сумма) или насыщения сети, TCP использует механизм повторной передачи (после тайм-аута) для обеспечения доставки каждого сегмента. В результате этого могут возникать дубликаты сегментов. Как было сказано при обсуждении порядковых номеров, TCP выполняет ряд проверок для порядковых номеров и номеров подтверждений перед восприятием сегментов.</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Отправитель данных сохраняет следующий порядковый номер (который будет использован) в переменной SND.NXT. Получатель сохраняет следующий порядковый номер (который предполагается получить) в переменной RCV.NXT. Отправитель данных сохраняет порядковый номер последнего неподтвержденного сегмента в переменной SND.UNA. Если поток данных сейчас не передается (momentarily idle) и все отправленные ранее данные подтверждены, значения всех трех переменных будут совпадать.</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Когда отправитель создает сегмент и передает его, значение SND.NXT увеличивается. Получатель, принимая сегмент, увеличивает значение RCV.NXT и передает подтверждение. Когда отправитель данных получает для них подтверждение, он увеличивает значение SND.UNA. Различия в значениях указанных переменных связаны с задержками при передаче сегментов через сеть. Величина, на которую изменяются значения переменных, определяется длиной данных в сегменте. Отметим, что в состоянии ESTABLISHED все сегменты должны передавать текущую информацию для подтверждений.</span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">При вызове пользователем функции CLOSE выполняется выталкивание данных (функция push), как это делает управляющий флаг FIN во входящем сегменте.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b><i>Тайм-аут повторной передачи</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 71.28pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">В результате постоянно происходящих в сети изменений и использования различных соединений TCP значение тайм-аута для повторной передачи должно динамически изменяться. Ниже приведен пример определения значения тайм-аута для повторной передачи.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b>Пример процедуры тайм-аута</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Измеряется задержка между передачей октета данных с конкретным порядковым номером и получением подтверждения, покрывающего этот порядковый номер (переданные сегменты не точно соответствуют принятым), в единицах RTT (Round Trip Time - время обхода). После этого рассчитывается значение SRTT (Smoothed Round Trip Time - взвешенное время обхода), как:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>SRTT = ( ALPHA * SRTT ) + ((1-ALPHA) * RTT)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>и на основе этого рассчитывается тайм-аут для повторной передачи (RTO):</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>RTO = min[UBOUND,max[LBOUND,(BETA*SRTT)]]<sup>7</sup></b></span></div>
<div class=paragraph style=" padding:0.00pt 70.56pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">где UBOUND задает верхний предел значения тайм-аута (например, 1 минута), LBOUND - нижний предел (например, 1 секунда), ALPHA - весовой фактор (например, 0.8 - 0.9), а BETA - коэффициент вариаций задержки (например, 1.3 - 2.0).</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b><i>Обмен срочной информацией</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Механизм разделения информации по срочности позволяет передающей стороне стимулировать принимающую сторону на восприятие некоторых срочных данных и дает приемной стороне TCP возможность проинформировать пользователя, когда все полученные данные особой срочности будут переданы ему.</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Этот механизм позволяет задать в потоке данных точку завершения данных особой срочности. Когда значение этого указателя превышает текущий порядковый номер для приема (RCV.NXT), модуль TCP должен сообщить пользователю о необходимости перехода в режим urgent; когда принимаемый порядковый номер превысит значение указателя срочности модуль TCP должен</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:6.00pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:24.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font13>7    В параграфах 4.2.2.15 и 4.2.3.1 RFC-1122 внесены поправки в алгоритм расчета тайм-аута. <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" color:rgb(0,0,128);"><a href="http://rfc.com.ru18Перевод"><u>http://rfc.com.ru&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 18&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Перевод</u></a><span style=" color:rgb(0,0,0);"> на русский язык - Н. Малых</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:776.64pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>RFC-793&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRANSMISSION CONTROL PROTOCOL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Сентябрь 1981</span></div>
<div class=paragraph style=" padding:4.80pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>сказать пользователю о том, что нужно перейти в нормальный режим. Если указатель срочности обновляется, когда</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>пользователь находится в режиме urgent, этого изменения пользователь не увидит.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Для реализации этого метода используется флаг срочности (urgent), передаваемый в каждом сегменте. Флаг URG показывает,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">что поле urgent имеет смысл и его значение должно быть добавлено к порядковому номеру сегмента для получения указателя на</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">срочные данные. Отсутствие флага срочности говорит о том, что в сегменте нет данных особой срочности.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Передача указателя срочности говорит пользователю, что он также должен передать по крайней мере один октет данных. Если</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">передающий пользователь применяет также функцию выталкивания (push), доставка срочной информации получателю</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">ускоряется.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font3 style=" line-height:10.32pt;"><b><i>Управление окном</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">Окно, передаваемое в каждом сегменте, показывает диапазон порядковых номеров отправителя окна (получателя данных),</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">которые он готов принять. Предполагается, что это значение связано с доступным в настоящее время буферным пространством</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">для данного соединения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">Указание  большого  окна  стимулирует  передачу.  Если  данных  приходит  больше,  чем  может  быть  воспринято,  они</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">отбрасываются, в результате чего возникают повторы передачи, добавляющие ненужную нагрузку на сеть и TCP. Задание</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">маленького окна будет ограничивать передачу данных - это связано с задержкой обхода (round trip delay) между передачей</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">каждого нового сегмента.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">Этот механизм позволяет TCP анонсировать большое окно и впоследствии многократно снижать размер окна. Такое явление</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">называется shrinking the window (сжатие окна) и вносит серьезные препятствия. Принцип устойчивости требует от TCP &quot;не</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">сжимать свое окно, но быть готовым к такому сжатию со стороны других TCP&quot;.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">Передающая сторона TCP должна быть готова принять от пользователя и передать по крайней мере один октет новых данных,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">даже если она передала нулевое окно. Передающая сторона TCP должна регулярно повторять передачу приемной стороне даже</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">при установке нулевого окна. При установке нулевого окна рекомендуется повторять передачу каждые 2 минуты. Такой повтор</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">важен для обеспечения гарантии, что при использовании другой стороной TCP нулевого размера окна при повторном открытии</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">окна (re-opening) другая сторона гарантированно узнает об этом.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>Когда принимающая сторона TCP имеет нулевое окно и получает сегмент, она сначала должна передать подтверждение,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>показывающее следующий ожидаемый номер и текущий размер окна (0).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Когда передающая сторона TCP пакует данные для передачи в сегменты, которые помещаются в текущее окно, возможна также</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">повторная упаковка сегментов в очереди повторной передачи. Такая перепаковка не является обязательной, но может оказаться</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">полезной.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">В соединении с односторонним потоком данных информация об окне будет передаваться в сегментах подтверждений, которые</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">имеют те же порядковые номера, поэтому при некорректном порядке доставки порядок подтверждений также изменится. Эта</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">проблема не очень серьезна, но может приводить к временному использованию устаревшей информации об окне. Во избежание</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">такой проблемы следует брать информацию об окне из сегмента с максимальным номером подтверждения (т. е., сегмента с</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">номером подтверждения не меньшим, чем любой из полученных ранее).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>Процедура управления окном оказывает существенное влияние на производительность обмена данными, Ниже приведены</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>рекомендации по реализации таких процедур.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font3 style=" line-height:10.32pt;"><b>Предложения по управлению окном</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">Выделение слишком маленького окна заставляет передавать данные очень мелкими сегментами, снижая производительность</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">обмена информацией.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>Для того, чтобы избежать использования слишком мелких окон, приемной стороне следует воздерживаться от обновления окна,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>пока не будет возможно выделить по крайней мере X% от максимального размера (X может принимать значение от 20 до 40).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Другим способом является предотвращение передачи слишком мелких сегментов отправителем за счет ожидания перед</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">отправкой данных расширения окна до подходящего размера. Если пользователь вызывает функцию push, данные должны</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">передаваться даже в виде небольших сегментов.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Отметим, что передача подтверждений не должна слишком задерживаться, поскольку такая задержка приведет к повторам</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">передачи. Одним из вариантов является передача подтверждения при получении мелкого сегмента (без информации об</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">изменении окна) и передача другого подтверждения с новой информацией об увеличении окна.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Сегмент, передаваемый для проверки нулевого окна, может инициировать разбиение данных на все более мелкие сегменты.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Если сегмент с одним октетом данных передать для проверки нулевого окна, этот сегмент потребит один октет доступной части</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">окна. Если передающая сторона TCP просто будет передавать сегменты как будто окно имеет ненулевой размер, передача</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">данных будет вестись в форме больших и мелких сегментов поочередно. В таких ситуациях случайная пауза при выделении</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">окна на приемной стороне будет приводить к разбиению крупных сегментов на мелкие и средние. В конечном итоге</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">практически все данные станут передаваться в мелких сегментах.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Основным предложением для реализации TCP является необходимость активных попыток объединения мелких окон в окна</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">большего размера, поскольку механизмы управления окном имеют тенденцию к снижению размера окна во многих простых</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">реализациях.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font4><b>3.8. Интерфейсы</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Протокол TCP поддерживает два интерфейса - с пользовательским уровнем и протоколами нижележащего уровня. Здесь будет подробно рассмотрена спецификация интерфейса между TCP и пользовательским уровнем, а взаимодействие с протоколами нижележащего уровня описано в спецификациях соответствующих протоколов, поэтому здесь мы не будем надолго останавливаться на этом интерфейсе. Для случая взаимодействия с протоколом IP мы рассмотрим некоторые параметры, которые могут использоваться в TCP.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font3><b><i>Интерфейс TCP - пользователь</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Ниже приведено функциональное описание пользовательских команд TCP, которые могут существенно отличаться в различных операционных системах. Поэтому мы должны предупредить читателей о том, что различные реализации TCP могут иметь существенно отличающиеся пользовательские интерфейсы. Однако, все варианты TCP должны обеспечивать минимальный набор служб, гарантирующий поддержку всеми реализациями одинаковой иерархии протоколов. В этом разделе приведено функциональное описание компонент интерфейса, требуемых для любой реализации TCP.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:18.48pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>Перевод на русский язык - Н. Малых (<span style=" color:rgb(0,0,128);"><a href="mailto:owner@nmalykh.org"><u>owner@nmalykh.org</u></a></span>)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;19&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:300.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:134.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt;">
<div class=block style=" width:160.56pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font1>RFC-793</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:300.00pt;">
<div class=block style=" width:300.00pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>TRANSMISSION CONTROL PROTOCOL</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:134.40pt;">
<div class=block style=" width:134.40pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>Сентябрь 1981</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.32pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:790.80pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3 style=" line-height:10.32pt;"><b>Пользовательские команды TCP</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">В следующих параграфах приведены функциональные характеристики интерфейса между TCP и пользовательским уровнем.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">Используемая здесь нотация похожа на обозначения процедур и функций в программных языках высокого уровня, но это не</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">означает запрета на использование сервиса типа ловушек - trap (например, SVC, UUO, EMT).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Описанные ниже пользовательские команды задают базовую функциональность TCP для поддержки обмена информацией</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">между процессами. Каждая реализация должна точно определять свой формат и может объединять комбинации или</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">подмножества базовых функций в одном вызове. В частности, некоторые реализации могут автоматически организовывать</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">(OPEN) соединение при первом вызове SEND или RECEIVE, сделанном пользователем для данного соединения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>Для обеспечения взаимодействия между процессами от TCP требуется обеспечить не только восприятие команд, но и возврат</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">информации от обслуживающих эти команды процессов. Эта информация включает:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">(a)&nbsp; общие сведения о соединении (например, прерывания, удаленное закрытие, связывание с неуказанным внешним сокетом).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">(b)&nbsp; отклики на конкретные пользовательские команды, содержащие результат выполнения (например, код ошибки).</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3 style=" letter-spacing:-0.60pt;"><b><i>Open</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 155.04pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;"><b>Формат: OPEN (локальный порт, внешний сокет, активный/пассивный [, тайм-аут] [, предпочтение] [, безопасность/разделение] [, опции])-&gt; локальное имя соединения</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Будем предполагать, что локальный модуль TCP способен идентифицировать обслуживаемые процессы и проверить их</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">полномочия в части доступа к указанному соединению. В зависимости от реализации TCP идентификаторы ЛВС и TCP для</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">адресов отправителей будут предоставляться TCP или протоколом нижележащего уровня (например, IP). Такое предположение</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">является результатом учета вопросов безопасности, и предназначено для предотвращения маскировки программ TCP под</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">другие программы и т. п. Точно так же никакой процесс не может маскироваться под другой процесс без конфликта с TCP.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Если флаг активности установлен в пассивное состояние, это означает вызов для перехода в состояние LISTEN (прослушивание</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">входящих соединений). При пассивной организации внешний сокет может быть задан полностью (ждать вызова только от этого</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">сокета) или не задан совсем (принимать любые вызовы). Пассивный вызов с указанным внешним сокетом можно впоследствии</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">активизировать с помощью вызова SEND.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>При организации соединения создается блок управления передачей TCB (transmission control block), который частично</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">заполняется на основе параметров команды OPEN.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">При активном вызове OPEN модуль TCP начинает процедуру синхронизации (организации) соединения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Значение тайм-аута (если оно задано) позволяет вызвавшему процессу установить время ожидания для всех данных,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>направленных TCP. Если в течение заданного времени данные не были доставлены получателю, TCP будет разрывать</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>соединение. В настоящее время принято значение тайм-аута 5 мин.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">TCP или компоненты операционной системы будут проверять полномочия пользователя в части организации соединений с</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">заданным уровнем безопасности. Отсутствие параметров безопасности и уровня предпочтения при вызове OPEN говорит об</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">использовании принятых по умолчанию значений.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>TCP будет воспринимать входящие запросы только при условии точного соответствия параметров безопасности и уровне</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>предпочтения не ниже, чем был задан при вызове OPEN.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Уровнем предпочтения для соединения выбирается большее из значений, заданных при вызове OPEN и полученных во</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">входящем запросе. Выбранное значение фиксируется на все время существования соединения. Разработчики могут пожелать</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">предоставить пользователю контроль за установкой уровня предпочтения. Например, пользователю может быть разрешено</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">указывать необходимость точного соответствия уровней предпочтения или попытка повысить уровень предпочтения должна</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">подтверждаться пользователем.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>Локальное имя соединения возвращается пользователю модулем TCP. Это имя может применяться в качестве краткого</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>обозначения соединений вместо пары &lt;локальный сокет, внешний сокет&gt;.</span></div>
<div class=paragraph style=" padding:4.56pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3 style=" letter-spacing:-0.55pt;"><b><i>Send</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 148.08pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;"><b>Формат: SEND (локальное имя соединения, адрес буфера, счетчик байтов, флаг PUSH, флаг URGENT [, тайм-аут])</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Этот вызов заставляет передать в заданное соединение данные из указанного пользовательского буфера. Если соединение еще</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">не организовано, вызов SEND трактуется как ошибка. Некоторые реализации могут позволять вызовы SEND до организации</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">соединения; в таких случаях автоматически вызывается функция OPEN. Если вызывающий процесс не имеет полномочий на</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">использование указанного соединения, возвращается сообщение об ошибке.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Если установлен флаг PUSH, данные должны быть быстро переданы получателю и флаг PUSH устанавливается для последнего</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">сегмента TCP, созданного из буфера. При отсутствии флага PUSH данные могут объединяться с данными от последующих</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">вызовов SEND для повышения эффективности передачи.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">При установке флага URGENT сегмент передается получателю с указателем срочности. Принимающая сторона TCP будет</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">сообщать о наличии срочных данных принимающему процессу, если указатель срочности еще не попадает в число</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">обработанных этим процессом данных. Использование флага и указателя срочности позволяет стимулировать обработку</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">срочных данных и информировать принимающий процесс о завершении приема срочной информации. Число флагов срочности</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">на передающей стороне TCP не обязано совпадать с числом фактов информирования принимающего процесса о присутствии</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">срочных данных.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Если при вызове OPEN внешний сокет не был указан, но соединение организовано (например, в состоянии LISTEN принят</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">вызов для данного локального сокета), указанный буфер передается косвенно заданному (подразумеваемому) внешнему сокету.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Пользователи, вызывающие OPEN с незаданным сокетом, могут вызывать SEND, даже не зная адрес внешнего сокета.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Однако, вызов SEND до того, как внешний сокет определится, будет приводить к возврату сообщения об ошибке. Пользователь</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">может вызвать функцию STATUS для проверки состояния соединения. В некоторых реализациях TCP может уведомлять</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">пользователя при отсутствии указаний на внешний сокет.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>Если задан тайм-аут, текущее время ожидания для данного соединения будет заменено новым значением.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">В простейших реализациях SEND может не возвращать управления вызвавшему процессу, пока не будет завершена передача</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">или не истечет заданное время ожидания. Однако, такой подход может приводить к простоям (например, обе стороны</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">соединения могут попытаться вызвать SEND до получения каких-либо данных с помощью RECEIVE) и не обеспечивает</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">достаточной   производительности,   поэтому   не   рекомендуется   к   использованию.   Более   сложные   реализации   будут</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">незамедлительно возвращать управление, позволяя процессу работать одновременно с сетевыми операциями ввода-вывода. В</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">таких случаях может одновременно использоваться множество экземпляров SEND, обслуживание выполняется в порядке</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a><span style=" color:rgb(0,0,90);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" color:rgb(0,0,0);">20</span><span style=" color:rgb(0,0,0);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" color:rgb(0,0,0);">Перевод на русский язык - Н. Малых</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:300.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:134.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:300.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:91.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt;">
<div class=block style=" width:203.04pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 71.76pt; text-align:left;"><span class=font1>RFC-793</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:300.00pt;">
<div class=block style=" width:300.00pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>TRANSMISSION CONTROL PROTOCOL</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:91.92pt;">
<div class=block style=" width:91.92pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>Сентябрь 1981</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:790.32pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>вызовов и TCP будет выстраивать данные в очередь.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Предполагается, что взаимодействие с пользовательским уровнем происходит асинхронно и вызов SEND сопровождается</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">генерацией некого сигнала (или псевдо-прерывания) со стороны обслуживающего вызов TCP. Другим вариантом является</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">незамедлительный  отклик.  Например,  SEND  может  незамедлительно  возвращать  локальное  подтверждение  даже  при</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">отсутствии подтверждения доставки от удаленного TCP. Будем оптимистически предполагать успешную передачу. Если это не</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">так, соединение будет разрываться по тайм-ауту. Реализации такого типа (синхронные) продолжают использовать асинхронные</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">сигналы, но эти сигналы относятся к соединениям, а не сегментам или буферам.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Для того, чтобы процесс мог различать сообщения (код результата) от множества SEND вместе с результатом может</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">возвращаться адрес использованного при вызове SEND буфера. Сигналы от TCP к пользователю, обсуждаемые ниже, содержат</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">информацию, которая должна быть возвращена вызвавшему функцию процессу.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font2><b><i>Receive</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 33.36pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;"><b>Формат: RECEIVE (локальное имя соединения, адрес буфера, счетчик байтов) -&gt; счетчик байтов, флаг срочности, флаг выталкивания</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>Эта команда выделяет приемный буфер, связывая его с указанным соединением. Если до этого не было вызова OPEN или</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>процесс не имеет полномочий на использование данного соединения, возвращается сообщение об ошибке.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">В простейших реализациях управление может не возвращаться вызвавшему функцию процессу, пока не будет заполнен буфер</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">или не произойдет какая-либо ошибка. Такое решение неэффективно, поскольку приводит к простоям. Более сложные</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">реализации обеспечивают возможность использования нескольких экземпляров RECEIVE. Выделенные функциями буферы</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">будут заполняться по мере прибытия сегментов. Такая стратегия позволяет повысить производительность, но требует</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">организации механизма (возможно, асинхронного) уведомления вызывающей программы о получении флага PUSH или</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">заполнении буфера.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>Если буфер заполняется до прихода PUSH, функция не возвращает флага выталкивания PUSH. При получении флага PUSH до</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>заполнения буфера, функция будет устанавливать при возврате флаг PUSH и содержимое частично заполненного буфера.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">При получении срочных данных пользователю будет передаваться уведомление с помощью сигнала пользовательского</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">интерфейса TCP. Принимающий пользователь должен находиться в режиме urgent. Если флаг URGENT установлен, это говорит</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">о наличии дополнительных срочных данных. Отсутствие флага URGENT говорит о том, что функция RECEIVE возвратила все</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">срочные данные и пользователь может перейти в нормальный режим. Отметим, что данные после указателя срочности</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">(несрочные данные) не могут быть доставлены пользователю в том же буфере, где содержатся срочные данные, если граница не</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">указана пользователем явно.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>Для того, чтобы можно было различать буферы разных экземпляров RECEIVE и видеть полноту заполнения буфера, функция</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>возвращает указатель на буфер и число байтов, которые были реально приняты в буфер.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>Некоторые реализации RECEIVE могут использовать буферное пространство TCP или TCP может использовать кольцевой</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>буфер совместно с пользовательскими процессами.</span></div>
<div class=paragraph style=" padding:4.56pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font2><b><i>Close</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>Формат: CLOSE (локальное имя соединения)</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">Эта команда закрывает указанное соединение. Если соединение не открыто или вызывающий процесс не имеет полномочий для работы с указанным соединением, функция возвращает сообщение об ошибке. Закрытие соединений осуществляется корректно и все данные незавершенных вызовов SEND будут переданы (возможно, повторно) с сохранением управления потоком данных. Таким образом, можно сделать несколько вызовов SEND, после которых будет следовать вызов CLOSE, и быть уверенным в передаче всех данных. Следует помнить, что пользователи должны продолжать вызовы RECEIVE для закрываемого соединения, пока другая сторона пытается передать остающиеся у нее данные. Таким образом, вызов функции CLOSE означает, что больше нет данных для передачи, но вовсе не говорит о том, что данные больше не принимаются. Может случиться (если протокол пользовательского уровня реализован некорректно), что закрывающая соединение сторона не сможет передать все имеющиеся у нее данные до завершения тайм-аута. В этом случае CLOSE транслируется в ABORT и соединение TCP рвется. Пользователь может закрыть соединение с помощью CLOSE в любой момент по своей инициативе или в ответ на предложение со стороны TCP (например, закрытие соединения удаленной стороной, тайм-аут при передаче, недоступность получателя). Поскольку закрытие соединения требует обмена информацией с внешним TCP, соединение в течение короткого времени может сохраняться в закрытом состоянии. Попытки открыть соединение заново до того, как TCP вернет отклик на команду CLOSE будет приводить к ошибке. CLOSE также косвенно выполняет функцию выталкивания данных (push).</span></div>
<div class=paragraph style=" padding:4.56pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font2><b><i>Status</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.80pt;"><b>Формат: STATUS (локальное имя соединения) -&gt; информация о состоянии</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.80pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.80pt;">Эта пользовательская команда зависит от реализации и может быть исключена без вредного влияния на работу TCP. Возвращаемая командой информация обычно является копией содержимого TCB для указанного соединения. Команда возвращает блок данных, содержащий:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">локальный сокет,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">внешний сокет,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">локальное имя соединения,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">окно приема,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">окно передачи,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">состояние соединения,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">число буферов, ожидающих подтверждения,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">число буферов, ожидающих приема,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">состояние срочности,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">предпочтения,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">безопасность/разделение,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:13.20pt;">тайм-аут для передачи.</span></div>
<div class=paragraph style=" padding:9.84pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>Перевод на русский язык - Н. Малых (<span style=" color:rgb(0,0,128);"><a href="mailto:owner@nmalykh.org"><u>owner@nmalykh.org</u></a></span>)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;21&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:300.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:91.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:433.68pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1>RFC-793&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRANSMISSION CONTROL PROTOCOL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Сентябрь 1981</span></div>
<div class=paragraph style=" padding:4.80pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">В зависимости от состояния соединения и/или реализации некоторые поля могут быть недоступными или неоднозначными. Если вызвавший функцию процесс не имеет доступа к соединению, возвращается сообщение об ошибке.</span></div>
<div class=paragraph style=" padding:4.56pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2><b><i>Abort</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Формат: ABORT (локальное имя соединения)</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.28pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Эта команда прерывает работу всех ожидающих вызовов SEND и RECEIVE, удаляет TCB и передает специальное сообщение RESET на удаленную сторону TCP-соединения. В зависимости от реализации пользователь может получить уведомления о прерывании для всех оставшихся незавершенными вызовов SEND и RECEIVE или подтверждение операции прерывания.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b>Сообщения от TCP к пользователю</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.56pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.56pt;">Предполагается,   что   операционная   система   обеспечивает   возможность   асинхронной   передачи   сигналов   от   TCP   к пользовательским программам. Когда TCP дает сигнал пользователю, с этим сигналом передается некая информация (например, сообщение об ошибке). В некоторых случаях может передаваться информация о состоянии обработки SEND, RECEIVE или других пользовательских вызовов. В сигналах содержатся следующие сведения:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.16pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Локальное имя соединения<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>всегда</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.16pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Строка отклика<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>всегда</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.16pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Адрес буфера<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>Send и Receive</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.16pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Счетчик принятых байтов<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Receive</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.16pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Флаг Push<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Receive</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.16pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Флаг Urgent<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>Receive</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3><b><i>Интерфейс TCP - нижележащий уровень</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 71.28pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.56pt;">TCP обращается к модулю протокола нижележащего уровня для реальной передачи или приема данных через сеть. Одним из примеров такой реализации является система ARPA, использующая на нижележащем уровне модуль Internet Protocol (IP) [2]. При использовании на нижележащем уровне протокола IP последний обеспечивает аргументы для указания типа обслуживания и времени жизни. TCP может использовать для этих параметров следующие значения:</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.80pt;">Тип обслуживания  (Type of  Service)  =  Предпочтения  (Precedence):  routine,  Задержка  (Delay): normal,  Пропускная способность (Throughput): normal, Надежность (Reliability): normal (эти значения задаются числом 00000000). Время жизни (Time to Live) = 1 минута или 00111100<sup>8</sup>. Отметим, что принятое максимальное время жизни пакетов составляет две минуты и мы здесь явно указываем необходимость уничтожения пакетов, которые не были доставлены в течение 1 минуты.</span></div>
<div class=paragraph style=" padding:0.00pt 70.56pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Если на нижележащем уровне работает протокол IP (или иной протокол, обеспечивающий такие возможности) и используется маршрутизация отправителем (source routing), интерфейс должен разрешать обмен маршрутной информацией. Это особенно важно потому, что адреса отправителя и получателя используются при расчете контрольной суммы TCP на приемной и передающей стороне. Важно также сохранить маршрут возврата для ответа на запрос организации соединения. Любой протокол нижележащего уровня должен предоставлять информацию об адресах отправителя и получателя, поля протокола, а также тот или иной способ определения размера TCP. Эти данные обеспечивают функциональный эквивалент служб протокола IP и используются при расчете контрольных сумм TCP.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.08pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:19.92pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>3.9. Обработка событий</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:303.60pt;">
<div class=paragraph style=" padding:0.00pt 70.56pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.56pt;">Рассмотренный ниже пример обработки событий является лишь одним из возможных вариантов реализации. В конкретных реализациях порядок обработки может несколько отличаться, но эти различия должны быть только в деталях, а не по сути. Действия TCP можно рассматривать как отклики на события. Происходящие события можно разбить на три категории -пользовательские вызовы, доставка сегментов и тайм-ауты. В этом разделе описаны действия TCP в ответ на события каждого из перечисленных типов. Во многих случаях требуемая в ответ на событие обработка зависит от состояния соединения. События:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.16pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Пользовательские вызовы</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.56pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">OPEN</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.56pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">SEND</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.56pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">RECEIVE</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.56pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">CLOSE</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.56pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">ABORT</span></div>
<div class=paragraph style=" padding:0.00pt 462.96pt 0.00pt 56.16pt; text-align:left; text-indent:14.40pt;"><span class=font14 style=" line-height:11.52pt;">STATUS Доставка сегментов</span></div>
<div class=paragraph style=" padding:0.00pt 441.60pt 0.00pt 56.16pt; text-align:left; text-indent:14.40pt;"><span class=font14 style=" line-height:11.52pt;">SEGMENT ARRIVES Тайм-ауты</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.56pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">TIMEOUT</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.56pt; text-align:left;"><span class=font14 style=" line-height:10.80pt;">RETRANSMISSION TIMEOUT</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:left; text-indent:42.24pt;"><span class=font14 style=" line-height:10.80pt;">TIME-WAIT TIMEOUT Модель пользовательского интерфейса TCP базируется на немедленном возврате из пользовательских вызовов и возможно задержанных<sup>9</sup> откликах на вызов с помощью события или псевдопрерывания. В последующих описаниях термин сигнал будет указывать причину асинхронного отклика.</span></div>
<div class=paragraph style=" padding:0.00pt 70.56pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.80pt;">Сообщения об ошибках приводятся в форме символьных строк. Например, при вызове команды, которая обращается к несуществующему соединению, будет возвращаться сообщение &quot;error: connection not open&quot; (ошибка: соединение не открыто). Отметим также, что все арифметические операции с порядковыми номерами, номерами подтверждений, окнами и т. п. основаны на модуле 2<sup>32</sup> (размер пространства порядковых номеров). Значок =&lt; означает &quot;меньше или равно&quot; (по модулю 2<sup>32</sup>). Естественным вариантом процесса обработки входящих сегментов является сначала проверка корректности порядкового</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:11.52pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:34.56pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font13>8<span class=font14>&nbsp; &nbsp; </span>Это<span class=font14> </span>требование<span class=font14> </span>устарело<span class=font14> </span>и<span class=font14> </span>время<span class=font14> </span>жизни<span class=font14> </span>не<span class=font14> </span>обязано<span class=font14> </span>составлять<span class=font14> </span>60<span class=font14> </span>секунд<span class=font14> </span>(см.<span class=font14> </span>RFC-1122,<span class=font14> </span>4.2.2.19).<span class=font14> </span><i>Прим.</i><span class=font14><i> </i></span><i>перев.</i></span></div>
<div class=paragraph style=" padding:0.00pt 71.28pt 0.00pt 28.32pt; text-align:left;"><span class=font13 style=" line-height:12.72pt;">9<span class=font1>&nbsp; &nbsp; </span>Асинхронных<span class=font14> </span>(<i>прим.</i><span class=font14><i> </i></span><i>перев.</i>) <span class=font1 style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span><span class=font1 style=" color:rgb(0,0,90);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=font1>22</span><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=font1>Перевод на русский язык - Н. Малых</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:807.36pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>RFC-793&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRANSMISSION CONTROL PROTOCOL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Сентябрь 1981</span></div>
<div class=paragraph style=" padding:4.80pt 28.80pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.04pt;">номера (т. е., его &quot;попадания&quot; в окно приема), размещение в очереди и последующая обработка в порядке возрастания номеров. Когда сегмент перекрывается с полученным ранее сегментом, он реконструируется таким образом, чтобы в сегменте содержались только новые данные (поля заголовков изменяются в соответствии с новым содержимым). Отметим, что если изменение состояния TCP не указано, это говорит о сохранении прежнего состояния.</span></div>
<div class=paragraph style=" padding:2.64pt 361.44pt 0.00pt 71.04pt; text-align:left;"><span class=font3 style=" line-height:19.20pt;"><b>Пользовательские вызовы <i>OPEN</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>Состояние CLOSED (TCB не существует)</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Создается новый блок управления передачей (TCB) для хранения данных о состоянии соединения. Заполняются поля идентификаторов локального и внешнего сокета, предпочтений, безопасности, а также пользовательский тайм-аут. Отметим, что при пассивном вызове OPEN внешний сокет может быть не указан полностью и это поле задается после приема входящего сегмента SYN. Осуществляется проверка корректности задания пользователем уровня безопасности и предпочтения - при недопустимом для пользователя уровня возвращается сообщение об ошибке &quot;error: precedence not allowed&quot; (недопустимый уровень предпочтения) или &quot;error: security/compartment not allowed&quot; (недопустимый уровень безопасности). При пассивном вызове осуществляется переход в состояние LISTEN и возврат. Если вызов активный и внешний сокет не указан, возвращается сообщение об ошибке &quot;error: foreign socket unspecified&quot; (внешний сокет не задан); если внешний сокет при активном вызове указан полностью, генерируется сегмент SYN. Выбирается значение начального порядкового номера ISS. Передается сегмент SYN в форме &lt;SEQ=ISS&gt;&lt;CTL=SYN&gt;. Устанавливаются значения полей SND.UNA = ISS, SND.NXT = ISS+1, осуществляется переход в состояние SYN-SENT и возврат управления.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если вызывающий процесс не имеет доступа к указанному локальному сокету, выдается сообщение об ошибке &quot;error: connection illegal for this process&quot; (некорректное соединение для данного процесса). Если нет возможности организовать новое соединение, возвращается сообщение &quot;error: insufficient resources&quot; (нехватка ресурсов).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>Состояние LISTEN</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если вызов активный и внешний сокет полностью задан, соединение переходит из пассивного состояния в активное и задается значение ISS. Передается сегмент SYN, устанавливаются значения SND.UNA = ISS, SND.NXT + ISS+1. Соединение переводится в состояние SYN-SENT. Данные, связанные с вызовом SEND, могут быть переданы в сегменте SYN или помещены в очередь на передачу для их отправки после перехода в состояние ESTABLISHED. Если при вызове команды был запрошен флаг срочности, он передается с сегментом данных, отправляемым в результате этой команды. Если в очереди запросов нет свободного места, возвращается сообщение &quot;error: insufficient resources&quot;. Если внешний сокет не был указан, выдается сообщение &quot;error: foreign socket unspecified&quot;.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>Состояния</b><span class=font1><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><b>SYN-SENT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 142.08pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>SYN-RECEIVED</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 142.08pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>ESTABLISHED</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 142.08pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>FIN-WAIT-1</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 142.08pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>FIN-WAIT-2</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 142.08pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>CLOSE-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 142.08pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>CLOSING</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 142.08pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>LAST-ACK</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 142.08pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>TIME-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;">Возвращается сообщение об ошибке &quot;error: connection already exists&quot; (соединение уже существует).</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font3 style=" letter-spacing:-0.65pt;"><b><i>SEND</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>Состояние CLOSED (TCB не существует)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14>Если у пользователя нет прав доступа к соединению, возвращается сообщение &quot;error: connection illegal for this process&quot;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;">(некорректное соединение для данного процесса).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;">В остальных случаях возвращается сообщение &quot;error: connection does not exist&quot; (соединения не существует).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>Состояние LISTEN</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если указан внешний сокет, соединение переводится из пассивного состояния в активное и выбирается значение ISS. Передается сегмент SYN, устанавливаются значения SND.UNA = ISS, SND.NXT + ISS+1. Соединение переводится в состояние SYN-SENT. Данные, связанные с вызовом SEND, могут быть переданы в сегменте SYN или помещены в очередь на передачу для их отправки после перехода в состояние ESTABLISHED. Если при вызове команды был запрошен флаг срочности, он передается с сегментом данных, отправляемым в результате этой команды. Если в очереди запросов нет свободного места, возвращается сообщение &quot;error: insufficient resources&quot;. Если внешний сокет не был указан, выдается сообщение &quot;error: foreign socket unspecified&quot;.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>Состояния</b><span class=font1><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><b>SYN-SENT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 142.08pt; text-align:left;"><span class=font14><b>SYN-RECEIVED</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Данные помещаются в очередь для передачи после перехода в состояние ESTABLISHED. Если в очереди нет свободного места, возвращается сообщение &quot;error: insufficient resources&quot;.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>Состояния</b><span class=font1><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><b>ESTABLISHED</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 142.08pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;"><b>CLOSE-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.76pt;">Буфер сегментируется и передается с вложенным подтверждением (RCV.NXT). При нехватке памяти для запоминания</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">заданного буфера просто возвращается сообщение &quot;error: insufficient resources&quot;.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Если задан флаг срочности, тогда SND.UP &lt;- SND.NXT-1 и для исходящих сегментов задается указатель срочности.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояния</b><span class=font1><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><b>FIN-WAIT-1</b></span></div>
<div class=paragraph style=" padding:0.00pt 401.04pt 0.00pt 142.08pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>FIN-WAIT-2 CLOSING LAST-ACK TIME-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Возвращается сообщение &quot;error: connection closing&quot; (соединение закрывается) без запроса обслуживания.</span></div>
<div class=paragraph style=" padding:16.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>Перевод на русский язык - Н. Малых (<span style=" color:rgb(0,0,128);"><a href="mailto:owner@nmalykh.org"><u>owner@nmalykh.org</u></a></span>)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;23&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:770.88pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1>RFC-793&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRANSMISSION CONTROL PROTOCOL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Сентябрь 1981</span></div>
<div class=paragraph style=" padding:4.56pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2 style=" line-height:11.04pt;"><b><i>RECEIVE</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.04pt;"><b>Состояние CLOSED (TCB не существует)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.04pt;">Если у пользователя нет прав доступа к соединению, возвращается сообщение &quot;error: connection illegal for this process&quot;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">(некорректное соединение для данного процесса).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">В остальных случаях возвращается сообщение &quot;error: connection does not exist&quot; (соединения не существует).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояния</b><span class=font1><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><b>LISTEN</b></span></div>
<div class=paragraph style=" padding:0.00pt 427.20pt 0.00pt 99.60pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>SYN-SENT SYN-RECEIVED</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Данные помещаются в очередь для передачи после перехода в состояние ESTABLISHED. Если в очереди нет свободного места, возвращается сообщение &quot;error: insufficient resources&quot;.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояния</b><span class=font1><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><b>ESTABLISHED</b></span></div>
<div class=paragraph style=" padding:0.00pt 444.72pt 0.00pt 99.60pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>FIN-WAIT-1 FIN-WAIT-2</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Если для выполнения запроса не хватает входящих сегментов из очереди, запрашивается очередь. Если в очереди нет</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>свободного места для запоминания RECEIVE, выдается сообщение &quot;error: insufficient resources&quot;.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>Осуществляется сборка (Reassemble) входящих сегментов из очереди в приемный буфер и передача буфера пользователю. При</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>наличии флага проталкивания функция возвращает пользователю флаг PUSH.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>Если передаваемым пользователю данным предшествует RCV.UP, пользователь получает уведомление о наличии срочных</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>данных.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Когда TCP принимает на себя ответственность за доставку данных пользователю, это фактически означает необходимость</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">передачи отправителю подтверждений. Формирование подтверждений рассматривается ниже при обсуждении обработки</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">входящих сегментов.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Состояние CLOSE-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Поскольку удаленная сторона уже передала FIN, вызов RECEIVE должен ограничиться данными, которые уже приняты, но не доставлены пользователю. Если ожидающих доставки данных уже нет, функция RECEIVE будет возвращать сообщение &quot;error: connection closing&quot; (соединение закрыто). В остальных случаях RECEIVE будет использовать все оставшиеся данные.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояния</b><span class=font1><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><b>CLOSING</b></span></div>
<div class=paragraph style=" padding:0.00pt 442.80pt 0.00pt 100.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>LAST-ACK TIME-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Возвращается сообщение &quot;error: connection closing&quot;.</span></div>
<div class=paragraph style=" padding:4.56pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2><b><i>CLOSE</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Состояние CLOSED (TCB не существует)</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.28pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если у пользователя нет прав доступа к соединению, возвращается сообщение &quot;error: connection illegal for this process&quot;. В остальных случаях возвращается сообщение &quot;error: connection does not exist&quot;.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Состояние LISTEN</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Все незавершенные вызовы RECEIVE завершаются с сообщением &quot;error: closing&quot; (соединение закрывается). Удаляется TCB и соединение переводится в состояние CLOSED.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояние SYN-SENT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Удаляется TCB и возвращаются сообщения &quot;error: closing&quot; для всех поставленных в очередь вызовов SEND и RECEIVE.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояние SYN-RECEIVED</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если нет очереди SEND и данных, ожидающих передачи, формируется сегмент FIN и соединение переходит в состояние FIN-WAIT-1. В противном случае вызов помещается в очередь для обработки после завершения состояния ESTABLISHED.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Состояние ESTABLISHED</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Запрос сохраняется в очереди, пока не будут сегментированы все предыдущие вызовы SEND. После этого формируется сегмент FIN и соединение переходит в состояние FIN-WAIT-1.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Состояния</b><span class=font1><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><b>FIN-WAIT-1</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 100.32pt; text-align:left;"><span class=font14><b>FIN-WAIT-2</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.56pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Строго говоря, такой вызов является для данных состояний ошибкой и должен возвращать сообщение &quot;error: connection closing&quot; (закрытие соединения). Однако отклик &quot;ok&quot; (нет ошибок) также допускается, пока не передан повторно сегмент FIN (хотя первый сегмент FIN может быть передан повторно).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Состояние CLOSE-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:9.84pt;">Запрос сохраняется в очереди, пока не будут сегментированы все предыдущие вызовы SEND. После этого формируется сегмент FIN и соединение переходит в состояние<sup>10</sup>.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояния</b><span class=font1><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><b>CLOSING</b></span></div>
<div class=paragraph style=" padding:0.00pt 442.80pt 0.00pt 100.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>LAST-ACK TIME-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Возвращается сообщение &quot;error: connection closing&quot;.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font2><b><i>ABORT</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Состояние CLOSED (TCB не существует)</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.28pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если у пользователя нет прав доступа к соединению, возвращается сообщение &quot;error: connection illegal for this process&quot;. В остальных случаях возвращается сообщение &quot;error: connection does not exist&quot;.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Состояние LISTEN</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Все остающиеся вызовы RECEIVE должны быть завершены с возвратом сообщения &quot;error: connection reset&quot; (соединение разорвано). Удаляется TCB, соединение переходит в состояние CLOSED.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Состояние SYN-SENT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14>Удаляется TCB и возвращаются сообщения &quot;error: connection reset&quot; для всех поставленных в очередь вызовов SEND и</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:12.48pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:24.00pt;">
<div class=paragraph style=" padding:0.00pt 71.28pt 0.00pt 28.32pt; text-align:left;"><span class=font13 style=" line-height:12.72pt;">10  В исходном документе ошибочно указан переход в состояние CLOSING вместо LAST-ACK (см. RFC-1122, 4.2.2.20(a)). <i>Прим. перев. </i><span class=font1 style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span><span class=font1 style=" color:rgb(0,0,90);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=font1>24</span><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class=font1>Перевод на русский язык - Н. Малых</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:300.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:91.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt;">
<div class=block style=" width:203.04pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 71.76pt; text-align:left;"><span class=font1>RFC-793</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:300.00pt;">
<div class=block style=" width:300.00pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>TRANSMISSION CONTROL PROTOCOL</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:91.92pt;">
<div class=block style=" width:91.92pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>Сентябрь 1981</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:741.60pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">RECEIVE, соединение переводится в состояние CLOSED.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояния</b><span class=font1><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><b>SYN-RECEIVED</b></span></div>
<div class=paragraph style=" padding:0.00pt 388.56pt 0.00pt 143.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>ESTABLISHED FIN-WAIT-1 FIN-WAIT-2 CLOSE-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Передается сегмент &lt;SEQ=SND.NXT&gt;&lt;CTL=RST&gt;.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Возвращаются сообщения &quot;error: connection reset&quot; для всех поставленных в очередь вызовов SEND и RECEIVE; все сегменты из очереди на передачу (за исключением сформированного ранее RST) или повторную передачу уничтожаются, удаляется TCB и соединение переводится в состояние CLOSED.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояния</b><span class=font1><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><b>CLOSING</b></span></div>
<div class=paragraph style=" padding:0.00pt 400.32pt 0.00pt 143.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>LAST-ACK TIME-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Функция возвращает &quot;ok&quot; (нет ошибок), удаляется TCB и соединение переводится в состояние CLOSED.</span></div>
<div class=paragraph style=" padding:4.56pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font3 style=" letter-spacing:-0.55pt;"><b><i>STATUS</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>Состояние CLOSED (TCB не существует)</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.80pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Если у пользователя нет прав доступа к соединению, возвращается сообщение &quot;error: connection illegal for this process&quot;. В остальных случаях возвращается сообщение &quot;error: connection does not exist&quot;.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояние LISTEN</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Возвращается сообщение &quot;state = LISTEN&quot; и указатель на TCB.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояние SYN-SENT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Возвращается сообщение &quot;state = SYN-SENT&quot; и указатель на TCB.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояние SYN-RECEIVED</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Возвращается сообщение &quot;state = SYN-RECEIVED&quot; и указатель на TCB.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояние ESTABLISHED</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Возвращается сообщение &quot;state = ESTABLISHED&quot; и указатель на TCB.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояние FIN-WAIT-1</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Возвращается сообщение &quot;state = FIN-WAIT-1&quot; и указатель на TCB.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояние FIN-WAIT-2</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Возвращается сообщение &quot;state = FIN-WAIT-2&quot; и указатель на TCB.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояние CLOSE-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Возвращается сообщение &quot;state = CLOSE-WAIT&quot; и указатель на TCB.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояние CLOSING</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Возвращается сообщение &quot;state = CLOSING&quot; и указатель на TCB.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояние LAST-ACK</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Возвращается сообщение &quot;state = LAST-ACK&quot; и указатель на TCB.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояние TIME-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Возвращается сообщение &quot;state = TIME-WAIT&quot; и указатель на TCB.</span></div>
<div class=paragraph style=" padding:4.08pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font3><b>Доставка сегментов</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.80pt;"><b>Состояние CLOSED (TCB не существует)</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.80pt;">Все данные во входящем сегменте отбрасываются, отбрасывается также входящий сегмент, содержащий RST. В ответ на входящий сегмент без RST передается сегмент RST. Порядковый номер и номер подтверждения выбираются таким образом, чтобы сделать порядковый номер reset приемлемым для TCP, передавшего сегмент. Если бит ACK не установлен, используется порядковый номер 0</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>&lt;SEQ=0&gt;&lt;ACK=SEG.SEQ+SEG.LEN&gt;&lt;CTL=RST,ACK&gt;</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">При наличии бита ACK</span></div>
<div class=paragraph style=" padding:0.00pt 398.88pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>&lt;SEQ=SEG.ACK&gt;&lt;CTL=RST&gt; Состояние LISTEN</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">1)&nbsp; &nbsp;Проверка RST - все входящие RST должны игнорироваться с возвратом управления.</span></div>
<div class=paragraph style=" padding:0.00pt 28.80pt 0.00pt 84.96pt; text-align:left; text-indent:-13.92pt;"><span class=font14 style=" line-height:10.32pt;">2)&nbsp; &nbsp;Проверка ACK - любые подтверждения являются некорректными, если они поступают через соединение в состоянии LISTEN. В ответ на такие подтверждения должен формироваться приемлемый сегмент сброса (reset) в формате:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14><b>&lt;SEQ=SEG.ACK&gt;&lt;CTL=RST&gt;</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>Возврат управления.</span></div>
<div class=paragraph style=" padding:0.00pt 28.80pt 0.00pt 84.96pt; text-align:left; text-indent:-13.92pt;"><span class=font14 style=" line-height:10.80pt;">3)&nbsp; &nbsp;Проверка SYN Если бит SYN установлен, проверяется уровень безопасности. Если уровень безопасности/разделения для входящего сегмента не соответствует в точности уровню безопасности в TCB, передается сигнал сброса и возвращается управление.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14><b>&lt;SEQ=0&gt;&lt;ACK=SEG.SEQ+SEG.LEN&gt;&lt;CTL=RST,ACK&gt;<sup>11</sup></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 99.12pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если SEG.PRC &gt; TCB.PRC, то при наличии разрешения со стороны пользователя и системы устанавливается TCB.PRC&lt;-SEG.PRC; в противном случае передается сигнал сброса и возвращается управление.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;"><b>&lt;SEQ=0&gt;&lt;ACK=SEG.SEQ+SEG.LEN&gt;&lt;CTL=RST,ACK&gt;<sup>11</sup></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14>Если SEG.PRC &lt; TCB.PRC, обработка вызова продолжается.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 99.12pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Устанавливаются значения RCV.NXT = SEG.SEQ+1 и IRS = SEG.SEQ, все остальные данные и поля управления помещаются в очередь для последующей обработки. Должно быть выбрано значение ISS и передан сегмент SYN в форме:</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:15.60pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:33.12pt;">
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 84.96pt; text-align:left; text-indent:-13.92pt;"><span class=font13 style=" line-height:9.12pt;">11  В исходном документе ошибочно указана команда сброса <b>&lt;SEQ=SEG.ACK&gt;&lt;CTL=RST&gt;</b>. Ошибка исправлена в RFC-1122, параграф 4.2.2.20(b). <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>Перевод на русский язык - Н. Малых (<span style=" color:rgb(0,0,128);"><a href="mailto:owner@nmalykh.org"><u>owner@nmalykh.org</u></a></span>)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;25&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:300.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:91.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:300.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:134.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt;">
<div class=block style=" width:160.56pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font1>RFC-793</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:300.00pt;">
<div class=block style=" width:300.00pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>TRANSMISSION CONTROL PROTOCOL</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:134.40pt;">
<div class=block style=" width:134.40pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>Сентябрь 1981</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:5.04pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:749.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14><b>&lt;SEQ=ISS&gt;&lt;ACK=RCV.NXT&gt;&lt;CTL=SYN,ACK&gt;</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 28.32pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Устанавливаются значения SND.NXT = ISS+1 и SND.UNA = ISS. Соединение должно быть переведено в состояние SYN-RECEIVED. Отметим, что любые другие входящие данные и поля управления (включенные в SYN) будут обрабатываться в состоянии SYN-RECEIVED, но обработка SYN и ACK не должна повторяться. Если прослушивающая сторона не задана полностью (т. е., не полностью указан внешний сокет), пропущенные поля должны быть заполнены на этом этапе обработки. 4)  Проверка других полей</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Любые другие сегменты управления и данных (не содержащие SYN) должны содержать ACK и, таким образом, будут отброшены при проверке ACK. Входящий сегмент RST не может быть корректным, поскольку он не может служить откликом на какую-либо передачу в данной реинкарнации соединения. Вероятность получения такого сегмента мала, но если это произойдет, нужно просто отбросить сегмент и возвратить управление.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.28pt;"><b>Состояние SYN-SENT</b></span></div>
<div class=paragraph style=" padding:0.00pt 308.40pt 0.00pt 42.48pt; text-align:left; text-indent:-14.16pt;"><span class=font14 style=" line-height:11.28pt;">1)&nbsp; &nbsp;Проверка бита ACK Если бит ACK установлен, выполняются следующие операции:</span></div>
<div class=paragraph style=" padding:0.00pt 71.28pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Если SEG.ACK =&lt; ISS или SEG.ACK &gt; SND.NXT, передается сигнал сброса reset (если бит RST уже установлен, сегмент отбрасывается с возвратом управления)</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>&lt;SEQ=SEG.ACK&gt;&lt;CTL=RST&gt;</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">и сегмент отбрасывается с возвратом управления.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Если SND.UNA =&lt; SEG.ACK =&lt; SND.NXT, бит ACK считается допустимым и обработка продолжается.</span></div>
<div class=paragraph style=" padding:0.00pt 322.80pt 0.00pt 42.48pt; text-align:left; text-indent:-14.16pt;"><span class=font14 style=" line-height:11.52pt;">2)&nbsp; &nbsp;Проверка бита RST При наличии бита RST выполняются следующие операции:</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если бит ACK был допустимым, пользователю передается сообщение &quot;error: connection reset&quot; (сброс соединения), сегмент отбрасывается и соединение переводится в состояние CLOSED с удалением TCB и возвратом управления. В противном случае (нет ACK) сегмент отбрасывается с возвратом управления.</span></div>
<div class=paragraph style=" padding:0.00pt 71.28pt 0.00pt 42.48pt; text-align:left; text-indent:-14.16pt;"><span class=font14 style=" line-height:10.80pt;">3)&nbsp; &nbsp;Проверка уровня безопасности и предпочтения Если уровень безопасности/разделения в принятом сегменте не соответствует в точности уровню безопасности TCB, передается сигнал сброса (reset):</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.16pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><i>бит ACK установлен</i></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>&lt;SEQ=SEG.ACK&gt;&lt;CTL=RST&gt;</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.16pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><i>бит ACK не установлен</i></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>&lt;SEQ=0&gt;&lt;ACK=SEG.SEQ+SEG.LEN&gt;&lt;CTL=RST,ACK&gt;</b></span></div>
<div class=paragraph style=" padding:0.00pt 264.00pt 0.00pt 56.16pt; text-align:left; text-indent:-13.68pt;"><span class=font14 style=" line-height:11.52pt;">Если уровни безопасности совпадают, выполняются следующие операции: <i>бит ACK установлен</i></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.28pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">если уровень предпочтения в сегменте не соответствует уровню в TCB, передается сигнал сброса</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.28pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>&lt;SEQ=SEG.ACK&gt;&lt;CTL=RST&gt;</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.16pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><i>бит ACK не установлен</i></span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 70.32pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">если уровень предпочтения в сегменте выше уровня в TCB, с позволения пользователя и системы повышается уровень предпочтения в TCB до совпадения с уровнем в сегменте; при невозможности повысить уровень предпочтения передается сигнал сброса</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>&lt;SEQ=0&gt;&lt;ACK=SEG.SEQ+SEG.LEN&gt;&lt;CTL=RST,ACK&gt;</b></span></div>
<div class=paragraph style=" padding:0.00pt 167.04pt 0.00pt 42.48pt; text-align:left; text-indent:27.84pt;"><span class=font14 style=" line-height:11.52pt;">Если уровень предпочтения в сегменте ниже уровня в TCB, продолжается обработка вызова. Если был передан сигнал сброса (reset), сегмент отбрасывается с возвратом управления.</span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 42.48pt; text-align:left; text-indent:-14.16pt;"><span class=font14 style=" line-height:10.80pt;">4)&nbsp; &nbsp;Проверка бита SYN Этот этап выполняется только при корректном ACK или отсутствии ACK, если сегмент не содержит RST. Если бит SYN установлен и параметры безопасности/предпочтения приемлемы, устанавливаются значения RCV.NXT = SEG.SEQ+1 и IRS = SEG.SEQ. Значение SND.UNA должно быть увеличено до SEG.ACK (если имеется ACK) и все сегменты из очереди повторной передачи, которые таким образом будут подтверждены, должны быть удалены из очереди. Если SND.UNA &gt; ISS (сегмент SYN был подтвержден), состояние соединения меняется на ESTABLISHED<sup>12</sup>, формируется и передается сегмент ACK</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14><b>&lt;SEQ=SND.NXT&gt;&lt;ACK=RCV.NXT&gt;&lt;CTL=ACK&gt;</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">В этот сегмент могут быть включены данные и сигналы управления из очереди на повторную передачу. Если в сегменте</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">присутствуют другие данные или поля управления, продолжается обработка этого сегмента с проверки бита URG (см. этап</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">(6) ниже), в противном случае обработка завершается с возвратом управления.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Если бит SYN не установлен, соединение переходит в состояние SYN-RECEIVED, формируется и передается сегмент</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>SYN,ACK</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14><b>&lt;SEQ=ISS&gt;&lt;ACK=RCV.NXT&gt;&lt;CTL=SYN,ACK&gt;</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.52pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если в сегменте присутствуют другие данные или поля управления, они помещаются в очередь для обработки после перехода соединения в состояние ESTABLISHED и возвращается управление.</span></div>
<div class=paragraph style=" padding:0.00pt 125.04pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">5)&nbsp; &nbsp;Если не установлен ни бит SYN, ни бит, сегмент отбрасывается с возвратом управления. После перечисленных для состояний CLOSED, LISTEN, SYN-SENT проверок выполняются следующие операции:</span></div>
<div class=paragraph style=" padding:0.00pt 426.48pt 0.00pt 42.48pt; text-align:left; text-indent:-14.16pt;"><span class=font14 style=" line-height:11.52pt;"><b><i>(1) Проверка порядкового номера. </i>Состояния     SYN-RECEIVED ESTABLISHED FIN-WAIT-1 FIN-WAIT-2 CLOSE-WAIT CLOSING</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:7.92pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:32.88pt;">
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 42.48pt; text-align:left; text-indent:-14.16pt;"><span class=font13 style=" line-height:9.12pt;">12  В соответствии с RFC-1122 при переходе в состояние ESTABLISHED должны быть установлены следующие переменные SND.WND&lt;-SEG.WND, SND.WL1&lt;-SEG.SEQ, SND.WL2&lt;-SEG.ACK. <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a><span style=" color:rgb(0,0,90);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" color:rgb(0,0,0);">26</span><span style=" color:rgb(0,0,0);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" color:rgb(0,0,0);">Перевод на русский язык - Н. Малых</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:300.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:134.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:196.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:78.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:227.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:91.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:196.56pt;">
<div class=block style=" width:196.56pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 71.76pt; text-align:left;"><span class=font1>RFC-793</span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:306.48pt;">
<div class=block style=" width:306.48pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 6.48pt; text-align:left;"><span class=font1>TRANSMISSION CONTROL PROTOCOL</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:91.92pt;">
<div class=block style=" width:91.92pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>Сентябрь 1981</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:5.04pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:66.96pt;">
<div class=paragraph style=" padding:0.00pt 400.32pt 0.00pt 143.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>LAST-ACK TIME-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 98.64pt; text-align:left;"><span class=font14 style=" line-height:10.56pt;">Начальные проверки с целью отбрасывания старых дубликатов проводятся в порядке прибытия, но дальнейшая обработка сегментов ведется в соответствии с порядковыми номерами в поле SEG.SEQ. Если сегмент включает старые и новые данные, должна обрабатываться только новая информация. При начальной проверке прибывающих сегментов возможны 4 варианта:</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:2.40pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:196.56pt;">
<div class=block style=" width:196.56pt; height:43.44pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 109.20pt; text-align:left;"><span class=font14 style=" line-height:15.60pt;"><b><i>Размер сегмента</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 50.64pt 0.00pt 141.84pt; text-align:left;"><span class=font14 style=" line-height:15.60pt;">0 0</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:78.72pt;">
<div class=block style=" width:78.72pt; height:43.44pt;">
<div class=paragraph style=" text-align:left;"><span class=font14 style=" line-height:15.60pt;"><b><i>Окно приема</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 47.76pt 0.00pt 21.84pt; text-align:left; text-indent:2.40pt;"><span class=font14 style=" line-height:15.60pt;">0 &gt;0</span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:319.68pt;">
<div class=block style=" width:319.68pt; height:43.44pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 101.52pt; text-align:left;"><span class=font14 style=" line-height:15.60pt;"><b><i>Проверка</i></b></span></div>
<div class=paragraph style=" text-align:left;"><span class=font14 style=" line-height:15.60pt;">SEG.SEQ = RCV.NXT</span></div>
<div class=paragraph style=" text-align:left;"><span class=font14 style=" line-height:15.60pt;">RCV.NXT =&lt; SEG.SEQ &lt; RCV.NXT+RCV.WND</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:3.84pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:196.56pt;">
<div class=block style=" width:196.56pt; height:27.60pt;">
<div class=paragraph style=" padding:0.00pt 48.24pt 0.00pt 139.20pt; text-align:left;"><span class=font14 style=" line-height:15.84pt;">&gt;0 &gt;0</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:78.72pt;">
<div class=block style=" width:78.72pt; height:27.60pt;">
<div class=paragraph style=" padding:0.00pt 47.76pt 0.00pt 21.84pt; text-align:left; text-indent:2.64pt;"><span class=font14 style=" line-height:15.84pt;">0 &gt;0</span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:319.68pt;">
<div class=block style=" width:319.68pt; height:27.60pt;">
<div class=paragraph style=" padding:0.00pt 117.12pt 0.00pt 0.00pt; text-align:left; text-indent:2.64pt;"><span class=font14 style=" line-height:15.84pt;">недопустимо RCV.NXT =&lt; SEG.SEQ &lt; RCV.NXT+RCV.WND или</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.32pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:591.12pt;">
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 99.12pt; text-align:left; text-indent:176.16pt;"><span class=font14 style=" line-height:11.52pt;">RCV.NXT =&lt; SEG.SEQ+SEG.LEN-1 &lt; RCV.NXT+RCV.WND Если RCV.WND = 0, сегменты не могут приниматься за исключением корректных сегментов ACK, URG и RST. Если входящий сегмент неприемлем, в ответ на него должно быть передано уведомление (если установлен бит RST, сегмент должен быть отброшен с возвратом управления):</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:10.56pt;"><b>&lt;SEQ=SND.NXT&gt;&lt;ACK=RCV.NXT&gt;&lt;CTL=ACK&gt;</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:10.56pt;">После передачи подтверждения происходит отбрасывание неприемлемого сегмента и возврат управления. В дальнейшем сегменты предполагаются идеализированными - они начинаются с RCV.NXT и не выходят за пределы окна. Реальные сегменты могут быть подогнаны под такую идеализацию путем отрезания любой части, выходящей за пределы окна (включая SYN и FIN), и дальнейшей обработки только для сегментов, начинающихся с RCV.NXT. Сегменты с более высокими порядковыми номерами могут сохраняться для последующей обработки.</span></div>
<div class=paragraph style=" padding:0.00pt 396.72pt 0.00pt 84.96pt; text-align:left; text-indent:-13.92pt;"><span class=font14 style=" line-height:11.52pt;"><b><i>(2)&nbsp; Проверка бита RST </i>Состояние SYN-RECEIVED</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Если установлен бит RST</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 113.28pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если соединение было открыто пассивным вызовом OPEN (т. е., перешло из состояния LISTEN), оно будет возвращено в состояние LISTEN с возвратом управления. Пользователю не будет передаваться никакого уведомления об этом. Если соединение организовано активным вызовом OPEN (т. е., перешло из состояния SYN-SENT), оно будет отвергнуто (refused) и пользователь получит сообщение &quot;connection refused&quot;. В обоих случаях все сегменты из очереди на передачу должны быть удалены. В случае активного вызова OPEN соединение переводится в состояние CLOSED с удалением TCB и возвратом управления.</span></div>
<div class=paragraph style=" padding:0.00pt 388.56pt 0.00pt 143.04pt; text-align:left; text-indent:-58.08pt;"><span class=font14 style=" line-height:11.52pt;"><b>Состояния      ESTABLISHED FIN-WAIT-1 FIN-WAIT-2 CLOSE-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 98.64pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если установлен бит RST, все остающиеся вызовы RECEIVE и SEND должны получить команду сброса (reset). Все сегменты из очередей должны быть удалены. Пользователь должен получить сигнал &quot;connection reset&quot; (сброс соединения). Соединение переходит в состояние CLOSED с удалением TCB и возвратом управления.</span></div>
<div class=paragraph style=" padding:0.00pt 400.32pt 0.00pt 143.04pt; text-align:left; text-indent:-58.08pt;"><span class=font14 style=" line-height:11.52pt;"><b>Состояния      CLOSING LAST-ACK TIME-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Если установлен бит RST, соединение переходит в состояние CLOSED с удалением TCB и возвратом управления.</span></div>
<div class=paragraph style=" padding:0.00pt 346.32pt 0.00pt 84.96pt; text-align:left; text-indent:-13.92pt;"><span class=font14 style=" line-height:11.52pt;"><b><i>(3)&nbsp; Проверка предпочтений и безопасности </i>Состояние SYN-RECEIVED</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 99.12pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Если уровни безопасности/разделения и предпочтения в сегменте не соответствуют в точности таким же уровням в TCB, передается сигнал сброса (reset) с возвратом управления.</span></div>
<div class=paragraph style=" padding:0.00pt 383.28pt 0.00pt 143.04pt; text-align:left; text-indent:-58.08pt;"><span class=font14 style=" line-height:11.76pt;"><b>Состояния      ESTABLISHED<sup>13 </sup>FIN-WAIT-1 FIN-WAIT-2 CLOSE-WAIT CLOSING LAST-ACK TIME-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 99.12pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если уровни безопасности/разделения и предпочтения в сегменте не соответствуют в точности таким же уровням в TCB, передается сигнал сброса (reset), все остающиеся вызовы RECEIVE и SEND должны получить сигнал reset. Все очереди сегментов удаляются. Пользователь должен получить сигнал &quot;connection reset&quot;. Соединение переходит в состояние CLOSED с удалением TCB и возвратом управления.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Отметим, что эта проверка проводится после проверки порядкового номера для предотвращения приема сегментов из</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">старых соединений между теми же портами, но с другим уровнем безопасности или предпочтений, которые могут вызвать</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">разрыв текущего соединения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>Если соединение было инициировано пассивным вызовом OPEN, оно переходит в состояние LISTEN c возвратом</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">управления. В остальных случаях выполняется дальнейшая обработка<sup>14</sup>.</span></div>
<div class=paragraph style=" padding:0.00pt 384.00pt 0.00pt 84.96pt; text-align:left; text-indent:-13.92pt;"><span class=font14 style=" line-height:11.52pt;"><b><i>(4)&nbsp; Проверка бита SYN </i>Состояния      SYN-RECEIVED</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 143.04pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>ESTABLISHED</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:15.84pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:34.56pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font13>13<span class=font14>&nbsp; &nbsp;</span>В<span class=font14> </span>исходном<span class=font14> </span>документе<span class=font14> </span>указано<span class=font14> </span>только<span class=font14> </span>состояние<span class=font14> </span>ESTABLISHED<span class=font14> </span>-<span class=font14> </span>RFC-1122<span class=font14> </span>(параграф<span class=font14> </span>4.2.2.20(d))<span class=font14> </span>содержит<span class=font14> </span>исправление.<span class=font14> </span><i>Прим.</i><span class=font14><i> </i></span><i>перев.</i></span></div>
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 71.04pt; text-align:left;"><span class=font13 style=" line-height:12.72pt;">14<span class=font14>&nbsp; &nbsp;</span>В<span class=font14> </span>исходном<span class=font14> </span>документе<span class=font14> </span>этот<span class=font14> </span>абзац<span class=font14> </span>отсутствует.<span class=font14> </span>См.<span class=font14> </span>исправления<span class=font14> </span>в<span class=font14> </span>параграфе<span class=font14> </span>4.2.2.20(e)<span class=font14> </span>RFC-1122.<span class=font14> </span><i>Прим.</i><span class=font14><i> </i></span><i>перев. </i><span class=font1>Перевод на русский язык - Н. Малых (</span><span class=font1 style=" color:rgb(0,0,128);"><a href="mailto:owner@nmalykh.org"><u>owner@nmalykh.org</u></a></span><span class=font1>)</span><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font1>27</span><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class=font1 style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:196.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:78.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:227.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:91.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:300.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:134.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt;">
<div class=block style=" width:160.56pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font1>RFC-793</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:300.00pt;">
<div class=block style=" width:300.00pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>TRANSMISSION CONTROL PROTOCOL</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:134.40pt;">
<div class=block style=" width:134.40pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>Сентябрь 1981</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:5.04pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:733.68pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 100.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>FIN-WAIT-1</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 100.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>FIN-WAIT-2</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 100.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>CLOSE-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 100.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>CLOSING</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 100.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>LAST-ACK</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 100.32pt; text-align:left;"><span class=font14 style=" line-height:10.56pt;"><b>TIME-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 56.64pt; text-align:left;"><span class=font14 style=" line-height:10.56pt;">Если SYN находится в окне, это говорит об ошибке. Передается сигнал сброса (reset), все незавершенные вызовы RECEIVE и SEND должны получить reset. Все сегменты из очередей удаляются, пользователь должен получить сигнал &quot;connection reset&quot;. Соединение переходит в состояние CLOSED с удалением TCB и возвратом управления. Если SYN не находится в окне, этот этап не будет выполняться, поскольку будет передано подтверждение еще на первом этапе (проверка порядкового номера).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b><i>(5)&nbsp; Проверка поля ACK</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 254.40pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Если бит ACK не установлен, сегмент отбрасывается с возвратом управления При наличии бита ACK выполняется дальнейшая обработка.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 55.68pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояние SYN-RECEIVED</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Если SND.UNA =&lt; SEG.ACK =&lt; SND.NXT, соединение переходит в состояние ESTABLISHED<span style=" letter-spacing:-0.50pt;"><sup>12</sup> </span>и обработка</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">продолжается.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Если сегмент подтверждения неприемлем, формируется и передается сегмент сброса (reset)</span></div>
<div class=paragraph style=" padding:0.00pt 399.12pt 0.00pt 55.68pt; text-align:left; text-indent:15.12pt;"><span class=font14 style=" line-height:11.52pt;"><b>&lt;SEQ=SEG.ACK&gt;&lt;CTL=RST&gt; Состояние ESTABLISHED</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.28pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Если SND.UNA &lt; SEG.ACK =&lt; SND.NXT, устанавливается SND.UNA &lt;- SEG.ACK. Все, так или иначе, целиком</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.28pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">подтвержденные сегменты удаляются из очереди повторной передачи. Пользователь должен получить позитивные</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.28pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">подтверждения для буферов, которые были переданы и полностью подтверждены (т. е., в результате вызова SEND</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.28pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">должно  быть  возвращено сообщение  &quot;ok&quot;).  Если  подтверждение  ACK  является  дубликатом  (SEG.ACK =&lt;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.28pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">SND.UNA<sup>15</sup>), его можно игнорировать. Если ACK подтверждает что-то, еще не переданное (SEG.ACK &gt; SND.NXT),</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.28pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">посылается подтверждение ACK и сегмент отбрасывается с возвратом управления.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">Если SND.UNA =&lt; SEG.ACK =&lt; SND.NXT<sup>16</sup>, окно нужно обновить. Если выполняется условие</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;"><b>(SND.WL1 &lt; SEG.SEQ) OR ((SND.WL1 = SEG.SEQ) AND (SND.WL2 =&lt; SEG.ACK))</b>,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">нужно установить SND.WND &lt;- SEG.WND, SND.WL1 &lt;- SEG.SEQ и SND.WL2 &lt;- SEG.ACK.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Отметим, что SND.WND задает смещение от SND.UNA, поле SND.WL1 содержит порядковый номер последнего</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">сегмента, использованного для обновления SND.WND, а SND.WL2 содержит номер подтверждения последнего</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">сегмента, использованного для обновления SND.WND. Описанная проверка позволяет предотвратить использование</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">старых сегментов для обновления окна.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 55.68pt; text-align:left;"><span class=font14><b>Состояние FIN-WAIT-1</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">В дополнение к операциям, выполняемым в состоянии ESTABLISHED (см. выше), если наш запрос FIN уже подтвержден, соединение переводится в состояние FIN-WAIT-2 и продолжается обработка для этого состояния.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 55.68pt; text-align:left;"><span class=font14><b>Состояние FIN-WAIT-2</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">В дополнение к операциям, выполняемым в состоянии ESTABLISHED (см. выше), если очередь повторной передачи пуста, на пользовательский запрос CLOSE может быть передан отклик &quot;ok&quot;, но TCB не удаляется.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 55.68pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояние CLOSE-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Выполняются те же операции, что и для состояния ESTABLISHED.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 55.68pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояние CLOSING</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">В дополнение к операциям, выполняемым в состоянии ESTABLISHED (см. выше), если ACK подтверждает наш запрос FIN, соединение переводится в состояние TIME-WAIT, в остальных случаях сегмент игнорируется.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 55.68pt; text-align:left;"><span class=font14><b>Состояние LAST-ACK</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">В этом состоянии могут доставляться только подтверждения для запроса FIN. Если запрос FIN уже подтвержден, удаляется TCB и соединение переводится в состояние CLOSED с возвратом управления.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 55.68pt; text-align:left;"><span class=font14><b>Состояние TIME-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 70.80pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">В этом состоянии могут доставляться только повторы сегмента FIN с удаленной стороны. Подтвердите доставку и запустите заново отсчет тайм-аута 2 MSL.</span></div>
<div class=paragraph style=" padding:0.00pt 417.12pt 0.00pt 42.48pt; text-align:left; text-indent:-14.16pt;"><span class=font14 style=" line-height:11.52pt;"><b><i>(6)&nbsp; Проверка бита URG </i>Состояния</b><span class=font1><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><b>ESTABLISHED</b></span></div>
<div class=paragraph style=" padding:0.00pt 430.08pt 0.00pt 114.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>FIN-WAIT-1 FIN-WAIT-2</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 56.64pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">При установленном бите URG, задается значение RCV.UP &lt;- max(RCV.UP,SEG.UP) и пользователю передается сигнал о том, что удаленная сторона имеет срочные данные, если указатель срочности (RCV.UP) превышает порядковые номера воспринятых данных. Если пользователю уже был передан такой сигнал (или пользователь находится в режиме &quot;urgent&quot;) для продолжающейся последовательности срочных данных, повторять такой сигнал не нужно.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояния</b><span class=font1><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><b>CLOSE-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 428.88pt 0.00pt 114.48pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>CLOSING LAST-ACK TIME-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 71.52pt; text-align:left;"><span class=font14 style=" line-height:10.32pt;">В этих состояниях флаг срочности не должен появляться, поскольку удаленная сторона уже передала запрос FIN. Игнорируйте URG.</span></div>
<div class=paragraph style=" padding:0.00pt 411.12pt 0.00pt 42.48pt; text-align:left; text-indent:-14.16pt;"><span class=font14 style=" line-height:11.52pt;"><b><i>(7)&nbsp; Обработка содержимого сегмента </i>Состояния</b><span class=font1><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><b>ESTABLISHED</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:12.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:43.68pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font13>15<span class=font14>&nbsp; &nbsp;</span>В<span class=font14> </span>исходном<span class=font14> </span>документе<span class=font14> </span>ошибочно<span class=font14> </span>написано<span class=font14> </span>SEG.ACK<span class=font14> </span>&lt;<span class=font14> </span>SND.UNA.<span class=font14> </span>Поправка<span class=font14> </span>внесена<span class=font14> </span>в<span class=font14> </span>параграфе<span class=font14> </span>4.2.2.20<span class=font14> </span>(g)<span class=font14> </span>RFC-1122.<span class=font14> </span><i>Прим.</i><span class=font14><i> </i></span><i>перев.</i></span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 42.48pt; text-align:left; text-indent:-14.16pt;"><span class=font13 style=" line-height:9.12pt;">16<span class=font14>&nbsp; &nbsp;</span>В<span class=font14> </span>исходном<span class=font14> </span>документе<span class=font14> </span>ошибочно<span class=font14> </span>написано<span class=font14>  </span>SND.UNA<span class=font14> </span>&lt;<span class=font14> </span>SEG.ACK<span class=font14> </span>=&lt;<span class=font14> </span>SND.NXT.<span class=font14> </span>Поправка<span class=font14> </span>внесена<span class=font14> </span>в<span class=font14> </span>параграфе<span class=font14> </span>4.2.2.20<span class=font14> </span>(g)<span class=font14> </span>RFC-1122. <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a><span style=" color:rgb(0,0,90);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" color:rgb(0,0,0);">28</span><span style=" color:rgb(0,0,0);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" color:rgb(0,0,0);">Перевод на русский язык - Н. Малых</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:160.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:300.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:134.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:768.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>RFC-793&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRANSMISSION CONTROL PROTOCOL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Сентябрь 1981</span></div>
<div class=paragraph style=" padding:5.04pt 387.36pt 0.00pt 156.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>FIN-WAIT-1 FIN-WAIT-2</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">В  состоянии ESTABLISHED  возможна доставка  содержимого  сегмента в  пользовательские буферы  RECEIVE.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">Содержимое сегмента может переноситься в буфер до его заполнения или до завершения сегмента. Если закончившийся</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">сегмент содержит флаг PUSH, пользователю передается уведомление путем установки флага PUSH при возврате</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:10.08pt;">управления.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14>Когда TCP отвечает за доставку данных пользователю, требуется также подтверждать получение данных.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14>Когда TCP несет ответственность за доставку данных, значение RCV.NXT увеличивается на размер принятых данных и</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14>уточняется значение RCV.WND с учетом текущего размера буфера. Сумма RCV.NXT и RCV.WND при этом не должна</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">уменьшаться.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Пожалуйста, не забывайте о предложениях по управлению окном, рассмотренных в параграфе 3.7.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Передается подтверждение в форме:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>&lt;SEQ=SND.NXT&gt;&lt;ACK=RCV.NXT&gt;&lt;CTL=ACK&gt;</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Это подтверждение должно включаться в сегмент, который будет передаваться с минимальной возможной задержкой.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояния</b><span class=font1><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><b>CLOSE-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 386.16pt 0.00pt 156.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>CLOSING LAST-ACK TIME-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.80pt 0.00pt 99.60pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">В этих состояниях сегменты данных не должны приходить, поскольку с удаленной стороны уже получен сигнал FIN. Игнорируйте такие сегменты.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b><i>(8) Проверка бита FIN</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 84.96pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Не обрабатывайте флаг FIN для состояний CLOSED, LISTEN или SYN-SENT, поскольку значение SEG.SEQ не может быть проверено; отбрасывайте сегмент с возвратом управления.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 84.96pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если бит FIN установлен, пользователю передается сигнал &quot;connection closing&quot; (соединение закрывается) и все ожидающие вызовы RECEIVE должны вернуть такое же сообщение, увеличив RCV.NXT на размер FIN и передав подтверждение для FIN. Отметим, что FIN вызывает PUSH для всех сегментов, которые еще не доставлены пользователю.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояния</b><span class=font1><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><b>SYN-RECEIVED</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 156.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>ESTABLISHED</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Переход в состояние CLOSE-WAIT.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояние FIN-WAIT-1</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 99.12pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если наш запрос FIN уже подтвержден (возможно в данном сегменте), соединение переводится в состояние TIME-WAIT, начинается новый отсчет для времени ожидания и выключаются другие таймеры. В противном случае соединение переводится в состояние CLOSING.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояние FIN-WAIT-2</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;">Переход в состояние TIME-WAIT, начинается новый отсчет для времени ожидания и выключаются другие таймеры.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>Состояния</b><span class=font1><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><b>CLOSE-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 386.16pt 0.00pt 156.96pt; text-align:left;"><span class=font14 style=" line-height:11.52pt;"><b>CLOSING LAST-ACK TIME-WAIT</b></span></div>
<div class=paragraph style=" padding:0.00pt 81.12pt 0.00pt 71.04pt; text-align:left; text-indent:28.08pt;"><span class=font14 style=" line-height:11.52pt;">Состояние сохраняется неизменным. В состоянии TIME-WAIT заново запускается отсчет тайм-аута 2 MSL. Завершение обработки и возврат управления.</span></div>
<div class=paragraph style=" padding:3.36pt 354.48pt 0.00pt 71.04pt; text-align:left;"><span class=font2 style=" line-height:19.20pt;"><b>Тайм-ауты <i>Пользовательский тайм-аут</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если при любом состоянии соединения истекает время пользовательского тайм-аута, удаляются все буферы, пользователю передается сообщение &quot;error: connection aborted due to user timeout&quot; для всех остающихся вызовов, удаляется TCB и соединение переходит в состояние CLOSED с возвратом управления.</span></div>
<div class=paragraph style=" padding:4.32pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font2><b><i>Повторная передача</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Если при любом состоянии соединения истекает время тайм-аута повторной передачи, первый сегмент из очереди повторной передачи посылается заново, таймер повторной передачи сбрасывается и управление возвращается.</span></div>
<div class=paragraph style=" padding:4.56pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font2><b><i>Время ожидания</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 71.04pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">При завершении времени ожидания для соединения удаляется TCB и соединение переходит в состояние CLOSED с возвратом управления.</span></div>
<div class=paragraph style=" padding:9.36pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font6><b>Глоссарий</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14 style=" line-height:10.56pt;"><b>1822</b></span></div>
<div class=paragraph style=" padding:0.00pt 29.28pt 0.00pt 84.96pt; text-align:justify;"><span class=font14 style=" line-height:10.56pt;">BBN Report 1822, &quot;The Specification of the Interconnection of a Host and an IMP&quot; - спецификация интерфейса между хостом и ARPANET.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>ACK</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 84.96pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Бит управления (подтверждение), не занимающий места в пространстве порядковых номеров и показывающий, что поле подтверждения в данном сегменте содержит следующий порядковый номер, который отправитель данного сегмента ожидает получить в подтверждение доставки всех предыдущих порядковых номеров.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>ARPANET message</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 84.96pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Единица передачи информации между хостом и IMP в ARPANET<sup>17</sup>. Максимальный размер сообщения составляет 1012 октетов (8096 битов).</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:14.64pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:24.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font13>17  Прообраз сегодняшней сети Internet. <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>Перевод на русский язык - Н. Малых (<span style=" color:rgb(0,0,128);"><a href="mailto:owner@nmalykh.org"><u>owner@nmalykh.org</u></a></span>)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;29&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:807.36pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1>RFC-793&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRANSMISSION CONTROL PROTOCOL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Сентябрь 1981</span></div>
<div class=paragraph style=" padding:5.04pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>ARPANET packet</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Единица передачи информации между IMP в сети ARPANET. Максимальный размер пакета составляет 126 октетов (1008 битов).</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Connection (соединение)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Логический путь передачи данных, задаваемый парой сокетов.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Datagram (дейтагарамма)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Сообщение, передаваемое через компьютерную сеть с коммутацией пакетов.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Destination Address (адрес получателя)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Адрес получателя, обычно указывающий хост или сеть.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>FIN</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Бит управления, занимающий единицу пространства порядковых номеров, который показывает, что отправитель больше не будет передавать данные или сигналы управления, занимающие порядковые номера.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Fragment (фрагмент)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Часть логической единицы данных (в частности, фрагментом называют часть дейтаграммы IP).</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>FTP</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Протокол копирования файлов.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Header (заголовок)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Управляющая информация в начале сообщения, сегмента, фрагмента, пакета или блока данных.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Host (хост)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Компьютер. В частности, отправитель и получатель сообщений с точки зрения коммуникационной сети.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Identification (идентификация)</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.52pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Поле протокола IP, содержащее идентификатор, заданный отправителем для обеспечения сборки дейтаграммы из фрагментов.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>IMP</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Interface Message Processor - пакетный коммутатор ARPANET.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>internet address</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Адрес отправителя или получателя, используемый на уровне хостов.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>internet datagram</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Единица обмена данными между модулем IP и протоколом вышележащего уровня, содержащая заголовок IP и данные.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>internet fragment</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Часть данных из дейтаграммы IP с заголовком IP.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>IP</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Internet Protocol.</span></div>
<div class=paragraph style=" padding:1.44pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>IRS</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Initial Receive Sequence - начальный порядковый номер для приема. Первый порядковый номер, используемый отправителем в данном соединении.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>ISN</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.52pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Initial Sequence Number - начальный порядковый номер. Первый порядковый номер (ISS или IRS), используемый для соединения. Выбирается на основе текущего времени.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>ISS</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.28pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Initial Send Sequence - начальный порядковый номер для передачи. Первый порядковый номер, используемый отправителем в данном соединении.</span></div>
<div class=paragraph style=" padding:1.44pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>left sequence</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Следующий порядковый номер, который будет подтвержден данными, принимаемыми TCP (или наименьший из еще неподтвержденных порядковых номеров); в некоторых случаях трактуется как левый край окна передачи.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>local packet (локальный пакет)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Единица передачи данных в локальной сети.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Module (модуль)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Реализация (обычно программная) протокола или другой процедуры.</span></div>
<div class=paragraph style=" padding:1.44pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>MSL</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Maximum Segment Lifetime - максимальное время жизни сегмента TCP в сети. Произвольно выбрано значение 2 минуты.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Octet (октет)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Восьмибитовый блок данных - байт.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Options (опции)</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Поле Option может содержать несколько опций, каждая из которых может занимать несколько октетов. Опции используются в основном для проверки или задания тех или иных условий (например, содержат временные метки). Поля опций поддерживаются как IP, так и TCP.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Packet (пакет)</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.28pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Единица данных с заголовком (может быть логически полным или неполным). Более часто термин пакет относят к физическим, а не логическим единицам данных.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Port (порт)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Часть сокета, задающая логический канал ввода или вывода данных для процесса.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Process (процесс)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Выполнение программы. Источник или потребитель данных с точки зрения TCP или других протоколов обмена между</span></div>
<div class=paragraph style=" padding:2.64pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a><span style=" color:rgb(0,0,90);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" color:rgb(0,0,0);">30</span><span style=" color:rgb(0,0,0);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" color:rgb(0,0,0);">Перевод на русский язык - Н. Малых</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:175.68pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:96.48pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:119.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt;">
<div class=block style=" width:203.04pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 71.76pt; text-align:left;"><span class=font1>RFC-793</span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:272.16pt;">
<div class=block style=" width:272.16pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1>TRANSMISSION CONTROL PROTOCOL</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:119.76pt;">
<div class=block style=" width:119.76pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 27.84pt; text-align:left;"><span class=font1>Сентябрь 1981</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:754.56pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>хостами.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>PUSH</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 84.96pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Управляющий бит, не занимающий пространства порядковых номеров, который указывает, что сегмент содержит данные, требующие незамедлительной отправки получателю.</span></div>
<div class=paragraph style=" padding:1.44pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>RCV.NXT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>receive next sequence number - следующий порядковый номер для приема.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>RCV.UP</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>receive urgent pointer - указатель срочности для приема.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>RCV.WND</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>receive window - окно приема.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>receive next sequence number (следующий порядковый номер для приема)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>Следующий порядковый номер, который ожидает получить локальный модуль TCP.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>receive window (окно приема)</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 84.96pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Представляет порядковый номер, который локальный (принимающий) модуль TCP ожидает получить. Таким образом, локальный модуль TCP предполагает, что сегменты, перекрывающие диапазон от RCV.NXT до RCV.NXT+RCV.WND-1, содержат приемлемые данные и поля управления. Сегмент, содержащий порядковые номера, целиком выходящие за эти пределы, рассматривается как дубликат и отбрасывается.</span></div>
<div class=paragraph style=" padding:1.92pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>RST</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 84.96pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Управляющий бит (reset - сброс), не занимающий пространства порядковых номеров, который показывает, что приемная сторона должна удалить соединение без дальнейших вопросов. Приемная сторона может определить, основываясь на порядковом номере и номере подтверждения во входящем сегменте, следует воспринять команду сброса или игнорировать ее. Ни в коем случае в ответ на сегмент, содержащий RST, не следует передавать отклик с битом RST.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>RTP</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>Real Time Protocol - протокол для передачи между хостами критичной к задержкам информации.</span></div>
<div class=paragraph style=" padding:1.92pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>SEG.ACK</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>segment acknowledgment - подтверждение сегмента</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>SEG.LEN</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>segment length - размер сегмента</span></div>
<div class=paragraph style=" padding:1.44pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>SEG.PRC</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>segment precedence value - уровень предпочтения для сегмента</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>SEG.SEQ</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>segment sequence - порядковый номер сегмента</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>SEG.UP</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>segment urgent pointer field - поле указателя срочности в сегменте</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>SEG.WND</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>segment window field - поле окна в сегменте</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>segment (сегмент)</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 84.96pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Логическая единица данных. В частности, сегмент TCP представляет собой единицу данных, передаваемую между парой модулей TCP.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>segment acknowledgment</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>Порядковый номер в поле подтверждения прибывающего сегмента.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>segment length</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 84.96pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Число порядковых номеров, занимаемое сегментом, с учетом полей управления, занимающих пространство порядковых номеров.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>segment sequence</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>Номер в поле sequence прибывающего сегмента.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>send sequence</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 84.96pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Следующий порядковый номер, который будет использован локальным (передающим) TCP для данного соединения. Нумерация начинается с начального порядкового номера ISN и далее увеличивается с каждым переданных октетом данных или учитываемым октетом управляющей информации.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>send window</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 84.96pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Представляет порядковые номера, которые удаленный (принимающий) TCP готов получить. Это значение поля window, указанное в сегментах от удаленного (принимающего данные) TCP. Диапазон новых порядковых номеров, которые может передать TCP, лежит между SND.NXT и SND.UNA + SND.WND - 1 (порядковые номера для повторной передачи лежат между SND.UNA и SND.NXT).</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>SND.NXT</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>Порядковый номер для передачи</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>SND.UNA</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>Порядковый номер оставшегося</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>SND.UP</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>Указатель срочности для передачи</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font14><b>SND.WL1</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 84.96pt; text-align:left;"><span class=font14>Номер сегмента при последнем обновлении окна</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:23.52pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:378.72pt;">
<div class=block style=" width:378.72pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 71.04pt; text-align:left;"><span class=font1>Перевод на русский язык - Н. Малых (<span style=" color:rgb(0,0,128);"><a href="mailto:owner@nmalykh.org"><u>owner@nmalykh.org</u></a></span>)</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:96.48pt;">
<div class=block style=" width:96.48pt; height:12.24pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font1>31</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:119.76pt;">
<div class=block style=" width:119.76pt; height:12.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font1 style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:203.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:175.68pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:96.48pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:119.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:16.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:472.80pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1>RFC-793&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRANSMISSION CONTROL PROTOCOL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Сентябрь 1981</span></div>
<div class=paragraph style=" padding:5.04pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>SND.WL2</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Номер сегмента подтверждения при последнем обновлении окна</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>SND.WND</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Окно передачи</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>socket</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Идентификатор, включающий номер порта TCP и адрес IP.</span></div>
<div class=paragraph style=" padding:1.44pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Source Address</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Адрес отправителя, обычно идентифицирующий хост или сеть.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>SYN</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Бит управления во входящем сегменте (занимающем один порядковый номер), который используется для индикации начала отсчета порядковых номеров.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>TCB</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Transmission control block - блок управления передачей, содержащий информацию о состоянии соединения.</span></div>
<div class=paragraph style=" padding:1.44pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>TCB.PRC</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Предпочтения для данного соединения.</span></div>
<div class=paragraph style=" padding:1.92pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>TCP</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Transmission Control Protocol - протокол управления передачей. Протокол обмена информацией между хостами, обеспечивающий гарантированную доставку в межсетевых средах.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>TOS</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Type of Service - тип обслуживания. Поле протокола IP.</span></div>
<div class=paragraph style=" padding:1.68pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>Type of Service</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 42.48pt; text-align:left;"><span class=font14>Поле протокола IP, задающее тип обслуживания для данного фрагмента IP.</span></div>
<div class=paragraph style=" padding:1.92pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>URG</b></span></div>
<div class=paragraph style=" padding:0.00pt 71.04pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.08pt;">Бит управления (urgent - срочность), не включаемый в пространство порядковых номеров и служащий для индикации того, что получатель должен быть уведомлен о срочности обработки данных (эти данные должны быть восприняты сразу же после завершения работы с данными, порядковый номер которых меньшим, нежели задано указателем срочности).</span></div>
<div class=paragraph style=" padding:1.92pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font14><b>urgent pointer (указатель срочности)</b></span></div>
<div class=paragraph style=" padding:0.00pt 70.80pt 0.00pt 42.48pt; text-align:justify;"><span class=font14 style=" line-height:10.32pt;">Поле управления, имеющее смысл только при установке бита URG и содержащее значение указателя срочности, которое говорит о заданном пользователем уровне срочности данных.</span></div>
<div class=paragraph style=" padding:9.60pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font6><b>Литература</b></span></div>
<div class=paragraph style=" padding:0.00pt 81.60pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.80pt;">[1] Cerf, V., and R. Kahn, &quot;A Protocol for Packet Network Intercommunication&quot;, IEEE Transactions on Communications, Vol. COM-22, No. 5, pp 637-648, May 1974.</span></div>
<div class=paragraph style=" padding:0.00pt 71.76pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.80pt;">[2] Postel, J. (ed.), &quot;Internet Protocol - DARPA Internet Program Protocol Specification&quot;, RFC 791, USC/Information Sciences Institute, September 1981.</span></div>
<div class=paragraph style=" padding:0.00pt 93.12pt 0.00pt 28.32pt; text-align:left;"><span class=font14 style=" line-height:10.80pt;">[3] Dalal, Y. and C. Sunshine, &quot;Connection Management in Transport Protocols&quot;, Computer Networks, Vol. 2, No. 6, pp. 454-473, December 1978. [4] Postel, J., &quot;Assigned Numbers&quot;, RFC 790<sup>18</sup>, USC/Information Sciences Institute, September 1981.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:310.56pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:24.00pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font13>18  Документ периодически обновляется. В настоящее время последней версией является RFC-1700. <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" color:rgb(0,0,128);"><a href="index.html"><u>http://rfc.com.ru</u></a><span style=" color:rgb(0,0,90);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" color:rgb(0,0,0);">32</span><span style=" color:rgb(0,0,0);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" color:rgb(0,0,0);">Перевод на русский язык - Н. Малых</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:17.76pt;">
<div class=paragraph>
<script>
var siteid=10204;
var cats='0';
var adult='0';
document.write('<scr'+'ipt type="text/jav'+'ascript" src="/click'+'under2.js"></scr'+'ipt>');
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-10568897-4");
pageTracker._trackPageview();
} catch(err) {}</script></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:594.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
</body>
</html>

